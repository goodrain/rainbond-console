(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{dKAS:function(e,t,r){"use strict";var a=r("g09b"),i=r("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("IzEo");var s=a(r("bx4M"));r("+L6B");var l=a(r("2/Rp"));r("jCWc");var n=a(r("kPKH"));r("5NDa");var d=a(r("5rEg"));r("14J3");var o=a(r("BMrR"));r("/xke");var u=a(r("TeRw")),p=a(r("p0pE"));r("y8nQ");var c=a(r("Vl3Y"));r("FJo9");var f,m,g,v,C=a(r("L41K")),h=r("MuoO"),y=r("7DNP"),E=i(r("q1tI")),M=(a(r("Zw3B")),r("LLXN")),I=a(r("XZXw")),_=a(r("QDog")),k=a(r("2lxJ")),b=a(r("+iC2")),x=C.default.Step,R=(f=c.default.create(),m=(0,h.connect)(e=>{var t=e.user,r=e.list,a=e.loading,i=e.global,s=e.index;return{user:t.currentUser,list:r,loading:a.models.list,rainbondInfo:i.rainbondInfo,enterprise:i.enterprise,isRegist:i.isRegist,oauthLongin:a.effects["global/creatOauth"],overviewInfo:s.overviewInfo}}),f(g=m((v=class extends E.PureComponent{constructor(e){var t;super(e),t=this,this.toClusterList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rke",r=t.props.dispatch,a=t.props.match.params.eid,i={initializing:"/enterprise/{eid}/provider/{provider}/kclusters/append?event_id={eventId}",initialized:"/enterprise/{eid}/provider/{provider}/kclusters?event_id={eventId}",installing:"/enterprise/{eid}/provider/{provider}/kclusters?type=installing&event_id={eventId}",installed:"/enterprise/{eid}/provider/{provider}/kclusters?event_id={eventId}",integrating:"/enterprise/{eid}/provider/{provider}/kclusters/init?event_id={eventId}",integrated:"/enterprise/{eid}/provider/{provider}/kclusters/check?event_id={eventId}"};r({type:"region/fetchClusterInfo",payload:{cluster_id:""},callback:t=>{if(t&&200===t.status_code){window.localStorage.setItem("event_id",t.bean.event_id);var s=t.bean.create_status,l=i[s]||i.initializing;l=l.replace("{eid}",a).replace("{provider}",e),l.includes("{eventId}")&&(l=l.replace("{eventId}",t.bean.event_id)),r(y.routerRedux.push(l))}}})},this.loadSteps=(()=>{var e=[{title:(0,M.formatMessage)({id:"enterpriseColony.addCluster.supplier"})},{title:(0,M.formatMessage)({id:"enterpriseColony.addCluster.cluster"})},{title:(0,M.formatMessage)({id:"enterpriseColony.addCluster.Initialize"})},{title:(0,M.formatMessage)({id:"enterpriseColony.addCluster.clusterInit"})},{title:(0,M.formatMessage)({id:"enterpriseColony.addCluster.docking"})}];return e}),this.createClusters=(()=>{var e=this.props,t=e.dispatch,r=e.eid,a=e.form,i=e.match.params.provider;a.validateFields((e,a)=>{e||t({type:"region/addReginConfig",payload:(0,p.default)({},a),callback:e=>{e&&200===e.status_code&&t(y.routerRedux.push("/enterprise/".concat(r||_.default.getCurrEnterpriseId(),"/provider/").concat(i,"/kclusters?event_id=").concat(e.bean.event_id)))},handleError:e=>{u.default.error({message:e.data.msg_show})}})})}),this.lastOrNextSteps=(e=>{var t=this.props.dispatch,r=this.props.match.params,a=r.eid;r.provider;"last"==e&&t(y.routerRedux.push("/enterprise/".concat(a||_.default.getCurrEnterpriseId(),"/addCluster")))});var r=this.props.user,a=b.default.isCompanyAdmin(r);this.state={adminer:a}}componentWillMount(){var e=this.state.adminer,t=this.props.dispatch;e||t(y.routerRedux.push("/"))}componentDidMount(){}render(){var e=this.props,t=e.form,r=e.match.params,a=(r.eid,r.provider,t.getFieldDecorator);return E.default.createElement(I.default,{title:E.default.createElement(M.FormattedMessage,{id:"enterpriseColony.button.text"}),content:E.default.createElement(M.FormattedMessage,{id:"enterpriseColony.PageHeaderLayout.content"}),titleSvg:k.default.getPageHeaderSvg("clusters",18)},E.default.createElement(o.default,{style:{marginBottom:"16px"}},E.default.createElement(C.default,{current:0},this.loadSteps().map(e=>E.default.createElement(x,{key:e.title,title:e.title})))),E.default.createElement(s.default,null,E.default.createElement(c.default,null,E.default.createElement(o.default,null,E.default.createElement(n.default,{span:6,style:{paddingRight:"16px"}},E.default.createElement(c.default.Item,{label:E.default.createElement(M.FormattedMessage,{id:"enterpriseColony.SetRegionConfig.id"})},a("cluster_id",{initialValue:"",rules:[{required:!0,message:(0,M.formatMessage)({id:"enterpriseColony.SetRegionConfig.input_id"})},{pattern:/^[a-z0-9A-Z-_]+$/,message:(0,M.formatMessage)({id:"enterpriseColony.SetRegionConfig.only"})}]})(E.default.createElement(d.default,{placeholder:(0,M.formatMessage)({id:"enterpriseColony.SetRegionConfig.input_id"})})))),E.default.createElement(n.default,{span:6},E.default.createElement(c.default.Item,{label:E.default.createElement(M.FormattedMessage,{id:"applicationMarket.CreateHelmAppModels.colony"})},a("cluster_name",{initialValue:"",rules:[{required:!0,message:(0,M.formatMessage)({id:"enterpriseColony.BaseAddCluster.name"})},{max:24,message:(0,M.formatMessage)({id:"enterpriseColony.addCluster.host.max"})}]})(E.default.createElement(d.default,{placeholder:(0,M.formatMessage)({id:"enterpriseColony.BaseAddCluster.name"})}))))),E.default.createElement(o.default,{type:"flex",justify:"center"},E.default.createElement(l.default,{onClick:()=>this.lastOrNextSteps("last"),style:{marginRight:24}},"\u53d6\u6d88"),E.default.createElement(l.default,{onClick:this.createClusters,type:"primary"},(0,M.formatMessage)({id:"enterpriseColony.newHostInstall.node.next"}))))))}},g=v))||g)||g);t.default=R}}]);