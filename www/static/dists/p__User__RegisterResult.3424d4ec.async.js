(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[88],{UKiy:function(e,t,r){"use strict";var a=r("g09b"),s=r("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("+L6B");var i,n,l,o=a(r("2/Rp")),c=s(r("q1tI")),d=r("MuoO"),u=r("7DNP"),p=r("LLXN"),g=a(r("ALo4")),h=a(r("QDog")),f=a(r("mWxT")),m=a(r("ltW9")),_=(i=(0,d.connect)(e=>{var t=e.user,r=e.global;return{register:t.register,rainbondInfo:r.rainbondInfo,currUser:t.currentUser}}),i((l=class extends c.Component{constructor(e){super(e),this.fetchUserInfo=(()=>{this.props.dispatch({type:"user/fetchCurrent",callback:e=>{e&&this.setState({currUser:e.bean})}})}),this.getEnterpriseList=(()=>{var e=this.props.dispatch;e({type:"global/fetchEnterpriseList",callback:e=>{e.list.length>0&&this.setState({eid:e.list[0].enterprise_id},()=>{this.state.eid})},handleError:()=>{}})}),this.loadUser=(e=>{var t=this.props.dispatch;t({type:"global/fetchEnterpriseUsers",payload:{enterprise_id:e,page:1,page_size:10,name:""},callback:e=>{if(e){var t=e.list.length;this.setState({is_admin:t})}}})}),this.getLoginRole=(e=>{this.props.dispatch;var t=e.teams;if(!(t&&t.length>0))return(null===e||void 0===e?void 0:e.is_enterprise_admin)?"/enterprise/".concat(null===e||void 0===e?void 0:e.enterprise_id,"/index"):"/account/center/personal";var r=t[0],a=r.team_name,s=r.region,i=s[0].team_region_name;return a&&i?"/team/".concat(a,"/region/").concat(i,"/index"):void 0}),this.onRouterLink=((e,t,r)=>{var a=this.props.dispatch,s=window.localStorage.getItem("redirect"),i=decodeURIComponent(s);if(t)if(r)if(i&&s&&s.includes("marketplace/install")){var n=new URL(i),l=n.hash.replace(/^#/,"");a(u.routerRedux.replace(l)),window.localStorage.removeItem("redirect")}else a(u.routerRedux.replace("/team/default/region/".concat(r,"/index")));else a(u.routerRedux.replace("/enterprise/".concat(e,"/index")));else if(i&&s&&s.includes("marketplace/install")){var o=new URL(i),c=o.hash.replace(/^#/,"");a(u.routerRedux.replace(c)),window.localStorage.removeItem("redirect")}else a(u.routerRedux.replace(this.getLoginRole(this.state.currUser)))}),this.state={eid:"",is_admin:0,regionName:null,currUser:{}}}componentDidMount(){var e=this.props,t=e.dispatch,r=e.rainbondInfo,a=!f.default.fetchIsFirstRegist(r);a&&t({type:"global/fetchInitCluster",payload:{},callback:e=>{e&&e.bean&&e.bean.default_region&&(h.default.putClusterSizeLog(e.bean.enterprise_id),this.setState({regionName:e.bean.default_region.region_name}))},handleError:e=>{console.log(e,"error")}}),this.getEnterpriseList(),this.fetchUserInfo()}render(){var e=this.props,t=e.location,r=(e.user,e.rainbondInfo),a=this.state,s=a.eid,i=(a.is_admin,a.regionName),n=!f.default.fetchIsFirstRegist(r),l=(null===r||void 0===r?void 0:r.is_saas)||!1,d=c.default.createElement("div",{className:m.default.actions},c.default.createElement(o.default,{type:"primary",size:"large",onClick:()=>{this.onRouterLink(s,n,i)}},l?"\u5f00\u59cb\u514d\u8d39\u8bd5\u7528":c.default.createElement(p.FormattedMessage,{id:"login.RegisterResult.back"})));return c.default.createElement(g.default,{className:m.default.registerResult,type:"success",title:c.default.createElement("div",{className:m.default.title},c.default.createElement(p.FormattedMessage,{id:"login.RegisterResult.your"}),t.state?t.state.account:"xxx"," ",c.default.createElement(p.FormattedMessage,{id:"login.RegisterResult.success"})),description:"",cloudDesc:l?"\u70b9\u51fb\u4e0b\u65b9\u6309\u94ae, \u53bb\u5b89\u88c5\u5e94\u7528\u5427!":"",actions:d,style:{margin:"50px 0"}})}},n=l))||n);t.default=_},ltW9:function(e,t,r){e.exports={registerResult:"registerResult___Q8DQJ",title:"title___Jg4H5",actions:"actions___2e2kc"}}}]);