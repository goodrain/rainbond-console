(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"/ybH":function(e,a,t){"use strict";var r=t("g09b");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("IzEo");var s=r(t("bx4M"));t("+L6B");var n=r(t("2/Rp")),o=r(t("jehZ"));t("5NDa");var l=r(t("5rEg"));t("14J3");var d=r(t("BMrR"));t("FJo9");var i=r(t("L41K"));t("y8nQ");var u,m,p,c=r(t("Vl3Y")),f=t("MuoO"),b=t("7DNP"),g=r(t("Qyje")),h=I(t("q1tI")),_=r(t("3a4m")),w=r(t("XZXw")),v=r(t("+iC2")),y=r(t("KrRZ")),D=r(t("XZhr"));function E(e){if("function"!==typeof WeakMap)return null;var a=new WeakMap,t=new WeakMap;return(E=function(e){return e?t:a})(e)}function I(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=E(a);if(t&&t.has(e))return t.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var o=s?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}var N=c.default.Item,x=i.default.Step,P={enableHA:!1,gatewayIngressIPs:"",imageHub:{enable:!1,domain:"",namespace:"",username:"",password:""},etcd:{enable:!1,endpoints:[],secretName:""},estorage:{enable:!1,type:"",RWX:{enable:!1,config:{server:"",storageClassName:""}},RWO:{enable:!1,storageClassName:""},NFS:{enable:!1,server:"",path:""}},database:{enable:!1,uiDatabase:{host:"",port:"",username:"",password:"",dbname:"",enable:!1},regionDatabase:{host:"",port:"",username:"",password:"",dbname:"",enable:!1}},nodesForChaos:{enable:!1,nodes:[]},nodesForGateway:{enable:!0,nodes:[]}},C=(u=c.default.create(),m=(0,f.connect)(e=>{var a=e.user,t=e.list,r=e.loading,s=e.global,n=e.index;e.region;return{user:a.currentUser,list:t,loading:r.models.list,rainbondInfo:s.rainbondInfo,enterprise:s.enterprise,isRegist:s.isRegist,oauthLongin:r.effects["global/creatOauth"],overviewInfo:n.overviewInfo}}),u(p=m(p=class extends h.PureComponent{constructor(e){super(e),this.loadSteps=(()=>{var e=[{title:"\u57fa\u672c\u914d\u7f6e"},{title:"\u9ad8\u7ea7\u914d\u7f6e"},{title:"\u6267\u884c\u5b89\u88c5"},{title:"\u5bf9\u63a5\u96c6\u7fa4"}];return e}),this.handleSubmit=(e=>{}),this.toLinkNext=(e=>{var a=this.props.match.params.eid;this.props.form.validateFields((t,r)=>{t||r&&(P.gatewayIngressIPs=r.gatewayIngressIPs||"",P.imageHub.domain=r.domain||"",P.imageHub.namespace=r.namespace||"",P.imageHub.username=r.username||"",P.imageHub.password=r.password||"",P.etcd.endpoints=r.endpoints||[],P.etcd.secretName=r.secretName||"",P.estorage.RWX.config.storageClassName=r.storageClassName1||"",P.estorage.RWO.storageClassName=r.storageClassName2||"",P.database.uiDatabase.host=r.uiDatabase_host||"",P.database.uiDatabase.port=r.uiDatabase_port||"",P.database.uiDatabase.username=r.uiDatabase_username||"",P.database.uiDatabase.password=r.uiDatabase_password||"",P.database.uiDatabase.dbname=r.uiDatabase_dbname||"",P.database.regionDatabase.host=r.regionDatabase_host||"",P.database.regionDatabase.port=r.regionDatabase_port||"",P.database.regionDatabase.username=r.regionDatabase_username||"",P.database.regionDatabase.password=r.regionDatabase_password||"",P.database.regionDatabase.dbname=r.regionDatabase_dbname||"",P.nodesForChaos.nodes=r.nodesForChaos||[],P.nodesForGateway.nodes=r.nodesForGateway||[],"advanced"===e?_.default.push({pathname:"/enterprise/".concat(a,"/provider/ACksterList/advanced"),search:g.default.stringify({data:P,name:"helm",cloudserver:""})}):_.default.push({pathname:"/enterprise/".concat(a,"/provider/ACksterList/install"),search:g.default.stringify({data:P,name:"helm",step:"base",cloudserver:""})}))})}),this.handleValidatorsGateway=((e,a,t)=>{var r=!1;a&&a.length>0?(a.some(e=>{if(!(e.externalIP&&e.internalIP&&e.name))return r=!1,!0;var a=/^[^\s]*$/;e.externalIP.match(a)&&e.internalIP.match(a)&&e.name.match(a)?t():t(new Error("\u7981\u6b62\u8f93\u5165\u7a7a\u683c")),r=!0}),r?t():t(new Error("\u9700\u586b\u5199\u5b8c\u6574\u7684\u7f51\u5173\u5b89\u88c5\u8282\u70b9"))):t()});var a=this.props.user,t=v.default.isCompanyAdmin(a);this.state={adminer:t}}componentWillMount(){var e=this.state.adminer,a=this.props.dispatch;e||a(b.routerRedux.push("/"))}componentDidMount(){}render(){var e=this.props,a=e.match.params,t=a.eid,r=(a.provider,a.clusterID,e.form.getFieldDecorator),u={labelCol:{xs:{span:0},sm:{span:0}},wrapperCol:{xs:{span:5},sm:{span:5}}};return h.default.createElement(w.default,{title:"\u6dfb\u52a0\u96c6\u7fa4",content:"\u96c6\u7fa4\u662f\u8d44\u6e90\u7684\u96c6\u5408\uff0c\u4ee5Kubernetes\u96c6\u7fa4\u4e3a\u57fa\u7840\uff0c\u90e8\u7f72\u5e73\u53f0Region\u670d\u52a1\u5373\u53ef\u6210\u4e3a\u5e73\u53f0\u96c6\u7fa4\u8d44\u6e90\u3002"},h.default.createElement(d.default,{style:{marginBottom:"16px"}},h.default.createElement(i.default,{current:0},this.loadSteps().map(e=>h.default.createElement(x,{key:e.title,title:e.title})))),h.default.createElement(s.default,{style:{padding:"24px 12px"}},h.default.createElement(c.default,{onSubmit:this.handleSubmit},h.default.createElement("div",{className:D.default.base_configuration},h.default.createElement(d.default,{className:D.default.antd_row},h.default.createElement("div",null,h.default.createElement("span",{style:{fontWeight:"bold",fontSize:"16px"}},"\u5165\u53e3\u8bbf\u95eeIP:")),h.default.createElement(N,(0,o.default)({},u,{className:D.default.antd_form,extra:"\u5165\u53e3IP\u8bf7\u5f00\u653e 80\u3001443\u30016060\u30016443\u30017070\u30018443 \u7aef\u53e3\u3002"}),r("gatewayIngressIPs",{rules:[{required:!0,message:"\u8bf7\u586b\u5199IP\u5730\u5740"},{pattern:/((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})(\.((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})){3}/g,message:"\u8bf7\u586b\u5199\u6b63\u786e\u7684IP\u5730\u5740"},{pattern:/^[^\s]*$/,message:"\u7981\u6b62\u8f93\u5165\u7a7a\u683c"}]})(h.default.createElement(l.default,{placeholder:"\u8bf7\u8f93\u5165IP\u5730\u5740  \u4f8b\uff1a1.2.3.4"})))),h.default.createElement(d.default,{className:D.default.antd_row},h.default.createElement("div",null,h.default.createElement("span",{style:{fontWeight:"bold",fontSize:"16px"}},"\u7f51\u5173\u5b89\u88c5\u8282\u70b9:")),h.default.createElement(N,(0,o.default)({},u,{className:D.default.antd_form,extra:"\u7f51\u5173\u5b89\u88c5\u7684\u8282\u70b9\uff0c\u53ef\u4ee5\u5b89\u88c5\u5230\u591a\u4e2a\u8282\u70b9\uff0c\u5b9e\u73b0\u9ad8\u53ef\u7528\u3002"}),r("nodesForGateway",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u7f51\u5173\u5b89\u88c5\u8282\u70b9"},{validator:this.handleValidatorsGateway}]})(h.default.createElement(y.default,null))))),h.default.createElement(d.default,null,h.default.createElement(N,{className:D.default.antd_row_btn},h.default.createElement(n.default,{className:D.default.antd_btn,type:"primary",onClick:()=>{this.props.dispatch(b.routerRedux.push("/enterprise/".concat(t,"/addCluster")))}},"\u8fd4\u56de"),h.default.createElement(n.default,{className:D.default.antd_btn,type:"primary",onClick:()=>{this.toLinkNext("advanced")}},"\u9ad8\u7ea7\u914d\u7f6e"),h.default.createElement(n.default,{className:D.default.antd_btn,type:"primary",onClick:()=>{this.toLinkNext("next")}},"\u4e0b\u4e00\u6b65"))))))}})||p)||p);a.default=C},XZhr:function(e,a,t){e.exports={antd_row:"antd_row___14mZx",antd_form:"antd_form___2_i74",antd_row_btn:"antd_row_btn___1fwVs",antd_btn:"antd_btn___3f0tw"}}}]);