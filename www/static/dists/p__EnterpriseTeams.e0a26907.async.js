(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[35],{VcYV:function(e,t,a){"use strict";var l=a("g09b"),s=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("T2oS");var n=l(a("W9HT"));a("R9oj");var i=l(a("ECub"));a("IzEo");var d=l(a("bx4M"));a("qVdP");var m=l(a("jsC+"));a("14J3");var o=l(a("BMrR"));a("jCWc");var r=l(a("kPKH"));a("lUTK");var h=l(a("BvKs")),p=l(a("jehZ"));a("+L6B");var u=l(a("2/Rp"));a("Pwec");var c=l(a("CtXQ"));a("/xke");var f=l(a("TeRw"));a("DjyN");var g=l(a("NUBc"));a("5NDa");var T,E,w,y=l(a("5rEg")),v=l(a("18gR")),C=a("MuoO"),_=a("7DNP"),A=s(a("q1tI")),S=l(a("kN/N")),x=l(a("q76B")),b=l(a("9uC9")),N=l(a("n/Qs")),k=l(a("Jjnt")),L=l(a("XZXw")),R=l(a("hMqj")),D=l(a("+iC2")),O=l(a("pJo4")),J=y.default.Search,M=(T=(0,C.connect)(e=>{var t=e.user,a=e.loading;return{user:t.currentUser,createTeamLoading:a.effects["teamControl/createTeam"]}}),T((w=class extends A.PureComponent{constructor(e){var t;super(e),t=this,this.onPageChangeTeam=((e,t)=>{this.setState({page:e,page_size:t},()=>{this.getEnterpriseTeams()})}),this.getEnterpriseTeams=(()=>{var e=this.props,t=e.dispatch,a=e.match.params.eid,l=this.state,s=l.page,n=l.page_size,i=l.name;t({type:"global/fetchEnterpriseTeams",payload:{page:s,page_size:n,enterprise_id:a,name:i},callback:e=>{e&&200===e.status_code&&this.setState({total:e.bean&&e.bean.total_count||1,initShow:!this.state.searchConfig&&0===e.bean.total_count,teamList:e.bean&&e.bean.list||[],enterpriseTeamsLoading:!1,searchConfig:!1})}})}),this.getUserTeams=(()=>{var e=this.props,t=e.dispatch,a=e.match.params.eid,l=this.state,s=l.page,n=l.page_size,i=l.name;t({type:"global/fetchMyTeams",payload:{enterprise_id:a,page:s,page_size:n,name:i},callback:e=>{e&&200===e.status_code&&this.setState({userTeamList:e.list,userTeamsLoading:!1})}})}),this.load=(()=>{this.state.adminer&&this.getEnterpriseTeams(),this.getOverviewTeam(),this.getUserTeams()}),this.handleSearchTeam=(e=>{this.setState({page:1,name:e,searchConfig:!0},()=>{this.getEnterpriseTeams()})}),this.handlePaginations=(()=>A.default.createElement(g.default,{current:this.state.page,pageSize:this.state.page_size,total:Number(this.state.total),onChange:this.onPageChangeTeam})),this.handleSearchUserTeam=(e=>{this.setState({page:1,name:e},()=>{this.getUserTeams()})}),this.handleCreateTeam=(e=>{this.props.dispatch({type:"teamControl/createTeam",payload:e,callback:e=>{var t=e.response_data;t&&t.code&&(400===t.code?f.default.warning({message:t.msg_show}):f.default.success({message:t.msg_show})),this.load(),this.cancelCreateTeam()}})}),this.getOverviewTeam=(()=>{var e=this.props,t=e.dispatch,a=e.match.params.eid;t({type:"global/fetchOverviewTeam",payload:{enterprise_id:a},callback:e=>{e&&200===e.status_code&&this.setState({overviewTeamsLoading:!1,overviewTeamInfo:e.bean})}})}),this.onAddTeam=(()=>{this.setState({showAddTeam:!0})}),this.cancelCreateTeam=(()=>{this.setState({showAddTeam:!1,initShow:!1})}),this.showExitTeam=(e=>{this.setState({showExitTeam:!0,exitTeamName:e})}),this.handleExitTeam=(()=>{var e=this.state.exitTeamName;this.props.dispatch({type:"teamControl/exitTeam",payload:{team_name:e},callback:e=>{e&&200===e.status_code&&(this.getOverviewTeam(),this.getUserTeams(),this.hideExitTeam())}})}),this.hideExitTeam=(()=>{this.setState({showExitTeam:!1,exitTeamName:""})}),this.showApply=(e=>{this.setState({showDelApply:!0,ApplyInfo:e})}),this.hideDelApply=(()=>{this.setState({showDelApply:!1,ApplyInfo:!1})}),this.handleActiveTabs=(e=>{this.setState({name:"",page:1},()=>{"team"===e?(this.getOverviewTeam(),this.getUserTeams()):this.getEnterpriseTeams()})}),this.showCloseAllComponent=(e=>{this.setState({showCloseAllComponent:!0,exitTeamName:e})}),this.hideCloseAllComponent=(()=>{this.setState({showCloseAllComponent:!1,exitTeamName:""})}),this.showDelTeam=(e=>{this.setState({showDelTeam:!0,exitTeamName:e})}),this.hideDelTeam=(()=>{this.setState({showExitTeam:!1,showDelTeam:!1})}),this.handleCloseAllComponentInTeam=(()=>{var e=this.state,t=e.exitTeamName,a=e.closeTeamComponentLoading;a||(this.setState({closeTeamComponentLoading:!0}),this.props.dispatch({type:"teamControl/stopComponentInTeam",payload:{team_name:t},callback:e=>{this.setState({closeTeamComponentLoading:!1}),e&&200===e.status_code&&f.default.success({message:"\u64cd\u4f5c\u6210\u529f\uff0c\u7ec4\u4ef6\u6b63\u5728\u5173\u95ed\u4e2d"}),this.hideCloseAllComponent()},handleError:e=>{e.data&&f.default.warning({message:e.data.msg_show}),f.default.warning({message:"\u64cd\u4f5c\u9047\u5230\u6545\u969c\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5"}),this.setState({closeTeamComponentLoading:!1})}}))}),this.handleDelTeam=(()=>{var e=this.state,t=e.exitTeamName,a=e.delTeamLoading;a||(this.setState({delTeamLoading:!0}),this.props.dispatch({type:"teamControl/delTeam",payload:{team_name:t},callback:e=>{this.setState({delTeamLoading:!1}),e&&200===e.status_code&&(this.setState({page:1},()=>{this.getEnterpriseTeams()}),this.hideDelTeam(),f.default.success({message:"\u56e2\u961f\u5220\u9664\u6210\u529f"}))},handleError:e=>{e.data&&f.default.warning({message:e.data.msg_show}),this.setState({delTeamLoading:!1})}}))}),this.handleDelApply=(()=>{var e=this.state.ApplyInfo;this.props.dispatch({type:"teamControl/undoTeamUsers",payload:{team_name:e.team_name},callback:()=>{f.default.success({message:"\u64a4\u9500\u7533\u8bf7\u6210\u529f"}),this.getOverviewTeam(),this.hideDelApply()}})}),this.handleJoinTeam=(e=>{this.props.dispatch({type:"global/joinTeam",payload:e,callback:()=>{f.default.success({message:"\u7533\u8bf7\u6210\u529f\uff0c\u8bf7\u7b49\u5f85\u5ba1\u6838"}),this.getOverviewTeam(),this.cancelJoinTeam()}})}),this.onJoinTeam=(()=>{this.setState({joinTeam:!0})}),this.cancelJoinTeam=(()=>{this.setState({joinTeam:!1})}),this.showRegions=function(e,a){var l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return a&&a.length>0&&a.map(a=>{return A.default.createElement(u.default,{key:"".concat(a.region_name,"region"),className:O.default.regionShow,onClick:()=>{l?t.handleJoinTeams(e,a.region_name):t.onJumpTeam(e,a.region_name)}},a.region_alias,A.default.createElement(c.default,{type:"right"}))})},this.handleJoinTeams=((e,t)=>{var a=this.props.dispatch;a({type:"teamControl/joinTeam",payload:{team_name:e},callback:a=>{a&&200===a.status_code&&this.onJumpTeam(e,t)}})}),this.handleOpenRegion=(e=>{var t=this.state.openRegionTeamName;this.props.dispatch({type:"teamControl/openRegion",payload:{team_name:t,region_names:e.join(",")},callback:()=>{this.load(),this.cancelOpenRegion()}})}),this.cancelOpenRegion=(()=>{this.setState({showOpenRegion:!1,openRegionTeamName:""})}),this.onJumpTeam=((e,t)=>{var a=this.props.dispatch;a(_.routerRedux.push("/team/".concat(e,"/region/").concat(t,"/index")))}),this.handleNewbieGuiding=(e=>{var t=e.prevStep,a=e.nextStep,l=e.jumpUrl,s=void 0===l?"":l,n=this.props.dispatch,i=this.state.adminer;return A.default.createElement(v.default,(0,p.default)({},e,{totals:2,handleClose:()=>{this.handleGuideStep("close")},handlePrev:()=>{t&&this.handleGuideStep(t)},handleNext:()=>{s&&n(_.routerRedux.push(s)),a&&(2===a&&(i?this.onAddTeam():this.onJoinTeam()),this.handleGuideStep(a))}}))}),this.handleGuideStep=(e=>{this.setState({guideStep:e})});var a=this.props.user,l=D.default.isCompanyAdmin(a);this.state={teamList:[],userTeamList:[],overviewTeamInfo:!1,showAddTeam:!1,showExitTeam:!1,showDelApply:!1,ApplyInfo:!1,exitTeamName:"",enterpriseTeamsLoading:!1,userTeamsLoading:!0,overviewTeamsLoading:!0,adminer:l,showDelTeam:!1,page:1,page_size:10,name:"",total:1,joinTeam:!1,delTeamLoading:!1,showOpenRegion:!1,initShow:!1,guideStep:1,searchConfig:!1}}componentDidMount(){var e=this.props.user;e&&this.load()}render(){var e=this.props.match.params.eid,t=this.state,a=t.teamList,l=t.overviewTeamInfo,s=t.enterpriseTeamsLoading,p=t.overviewTeamsLoading,f=t.adminer,g=t.userTeamList,T=t.userTeamsLoading,E=t.delTeamLoading,w=t.showCloseAllComponent,y=t.closeTeamComponentLoading,v=t.initShow,C=(t.guideStep,l&&l.request_join_team.filter(e=>{if(0===e.is_pass)return e})),_=C.length>0,D=g&&g.length>0&&g,M=()=>A.default.createElement("svg",{t:"1581212425061",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1314",width:"32",height:"32"},A.default.createElement("path",{d:"M512 192m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z","p-id":"1315",fill:"#999999"}),A.default.createElement("path",{d:"M512 512m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z","p-id":"1316",fill:"#999999"}),A.default.createElement("path",{d:"M512 832m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z","p-id":"1317",fill:"#999999"})),I=e=>{return A.default.createElement(h.default,null,A.default.createElement(h.default.Item,null,A.default.createElement("a",{onClick:()=>{this.showExitTeam(e)}},"\u9000\u51fa\u56e2\u961f")))},j=e=>{return A.default.createElement(h.default,null,A.default.createElement(h.default.Item,null,A.default.createElement("a",{onClick:()=>{this.showApply(e)}},"\u64a4\u9500\u7533\u8bf7")))},U=e=>{return A.default.createElement(h.default,null,A.default.createElement(h.default.Item,null,A.default.createElement("a",{onClick:()=>{this.showCloseAllComponent(e)}},"\u5173\u95ed\u6240\u6709\u7ec4\u4ef6")),A.default.createElement(h.default.Item,null,A.default.createElement("a",{onClick:()=>{this.setState({showOpenRegion:!0,openRegionTeamName:e})}},"\u5f00\u901a\u96c6\u7fa4")),A.default.createElement(h.default.Item,null,A.default.createElement("a",{onClick:()=>{this.showDelTeam(e)}},"\u5220\u9664\u56e2\u961f")))},B=A.default.createElement(r.default,{span:7,style:{textAlign:"right"},className:O.default.btns},f?A.default.createElement(u.default,{type:"primary",onClick:this.onAddTeam,style:{marginRight:"5px"}},"\u521b\u5efa\u56e2\u961f"):A.default.createElement(u.default,{type:"primary",onClick:this.onJoinTeam},"\u52a0\u5165\u56e2\u961f")),P=A.default.createElement("div",null,A.default.createElement(o.default,{style:{display:"flex",alignItems:"center",marginBottom:"20px"}},A.default.createElement(r.default,{span:2,className:O.default.teamsTit,style:{marginBottom:"0"}},"\u5168\u90e8\u56e2\u961f"),A.default.createElement(r.default,{span:15,style:{textAlign:"left"}},A.default.createElement(J,{style:{width:"500px"},placeholder:"\u8bf7\u8f93\u5165\u56e2\u961f\u540d\u79f0\u8fdb\u884c\u641c\u7d22",onSearch:this.handleSearchTeam})),B),A.default.createElement(o.default,{className:O.default.teamMinTit,type:"flex",align:"middle"},A.default.createElement(r.default,{span:6},"\u56e2\u961f\u540d\u79f0"),A.default.createElement(r.default,{span:3},"\u62e5\u6709\u4eba"),A.default.createElement(r.default,{span:11},"\u96c6\u7fa4")),a.map(e=>{var t=e.team_id,a=e.team_alias,l=e.region_list,s=e.owner_name,n=e.team_name;return A.default.createElement(d.default,{key:t,style:{marginTop:"10px"},hoverable:!0,bodyStyle:{padding:0}},A.default.createElement(o.default,{type:"flex",align:"middle",className:O.default.pl24},A.default.createElement(r.default,{span:6},a),A.default.createElement(r.default,{span:3},s),A.default.createElement(r.default,{span:14},this.showRegions(n,l,!0)),A.default.createElement(r.default,{span:1,className:O.default.bor},A.default.createElement(m.default,{overlay:U(n),placement:"bottomLeft"},A.default.createElement(c.default,{component:M,style:{width:"100%"}})))))}),A.default.createElement("div",{style:{textAlign:"right",margin:"15px"}},this.handlePaginations())),z=A.default.createElement("div",null,A.default.createElement(o.default,null,A.default.createElement(r.default,{span:17,className:O.default.teamsTit},_&&"\u6700\u65b0\u52a0\u5165\u56e2\u961f"),B),_&&A.default.createElement(o.default,{className:O.default.teamMinTit,type:"flex",align:"middle"},A.default.createElement(r.default,{span:6},"\u56e2\u961f\u540d\u79f0"),A.default.createElement(r.default,{span:6},"\u62e5\u6709\u4eba"),A.default.createElement(r.default,{span:12},"\u72b6\u6001")),C&&C.map(e=>{var t=e.is_pass,a=e.team_id,l=e.team_name,s=e.team_alias,n=e.owner_name;return A.default.createElement(d.default,{key:a,style:{marginTop:"10px",borderLeft:0===t&&"6px solid #4D73B1"},bodyStyle:{padding:0},hoverable:!0},A.default.createElement(o.default,{type:"flex",className:O.default.pl24,align:"middle",key:a},A.default.createElement(r.default,{span:6},s),A.default.createElement(r.default,{span:6},n),A.default.createElement(r.default,{span:11,style:{color:0===t&&"#999999"}},0===t&&A.default.createElement("span",null,A.default.createElement("img",{src:S.default,alt:""}),"\xa0\u7533\u8bf7\u52a0\u5165\u56e2\u961f\u5ba1\u6279\u4e2d")),A.default.createElement(r.default,{span:1,className:O.default.bor},A.default.createElement(m.default,{overlay:0===t?j(e):I(l),placement:"bottomLeft"},A.default.createElement(c.default,{component:M,style:{width:"100%"}})))))}),A.default.createElement(o.default,{style:{margin:"10px 0",display:"flex",alignItems:"center"}},A.default.createElement(r.default,{span:4,className:O.default.teamsTit,style:{marginBottom:"0"}},"\u6211\u7684\u56e2\u961f"),A.default.createElement(r.default,{span:20,style:{textAlign:"right"}},A.default.createElement(J,{style:{width:"500px"},placeholder:"\u8bf7\u8f93\u5165\u56e2\u961f\u540d\u79f0\u8fdb\u884c\u641c\u7d22",onSearch:this.handleSearchUserTeam}))),D&&A.default.createElement(o.default,{className:O.default.teamMinTit,type:"flex",align:"middle"},A.default.createElement(r.default,{span:6},"\u56e2\u961f\u540d\u79f0"),A.default.createElement(r.default,{span:3},"\u62e5\u6709\u4eba"),A.default.createElement(r.default,{span:3},"\u89d2\u8272"),A.default.createElement(r.default,{span:12},"\u96c6\u7fa4")),!D&&A.default.createElement(i.default,{description:"\u6682\u65e0\u56e2\u961f\uff0c\u8bf7\u70b9\u51fb\u521b\u5efa\u56e2\u961f\u8fdb\u884c\u521b\u5efa",image:i.default.PRESENTED_IMAGE_SIMPLE}),D&&D.map(e=>{var t=e.team_id,a=e.team_alias,l=e.team_name,s=e.region_list,n=e.owner_name,i=e.roles;return A.default.createElement(d.default,{key:t,style:{marginBottom:"10px"},hoverable:!0,bodyStyle:{padding:0}},A.default.createElement(o.default,{type:"flex",align:"middle",className:O.default.pl24},A.default.createElement(r.default,{span:6},a),A.default.createElement(r.default,{span:3},n),A.default.createElement(r.default,{span:3},i&&i.length>0&&i.map(e=>{return A.default.createElement("span",{style:{marginRight:"8px"},key:"role".concat(e)},R.default.actionMap(e))})),A.default.createElement(r.default,{span:11},this.showRegions(l,s)),A.default.createElement(r.default,{span:1,className:O.default.bor},A.default.createElement(m.default,{overlay:I(l),placement:"bottomLeft"},A.default.createElement(c.default,{component:M,style:{width:"100%"}})))))})),K="\u6211\u7684\u56e2\u961f",q="\u56e2\u961f\u662f\u4f01\u4e1a\u4e0b\u591a\u79df\u6237\u8d44\u6e90\u5212\u5206\u7684\u4e00\u4e2a\u5c42\u7ea7\uff0c\u5e94\u7528\u3001\u63d2\u4ef6\u3001\u6743\u9650\u5212\u5206\u7b49\u90fd\u57fa\u4e8e\u56e2\u961f\u8fdb\u884c\u9694\u79bb\u3002\u4e00\u4e2a\u56e2\u961f\u53ef\u4ee5\u5f00\u901a\u591a\u4e2a\u96c6\u7fa4\u3002";return f&&(K="\u56e2\u961f\u7ba1\u7406"),A.default.createElement(L.default,{title:K,content:q},w&&A.default.createElement(x.default,{onOk:this.handleCloseAllComponentInTeam,loading:y,title:"\u5173\u95ed\u56e2\u961f\u4e0b\u6240\u6709\u7ec4\u4ef6",subDesc:"\u6b64\u64cd\u4f5c\u4e0d\u53ef\u6062\u590d",desc:"\u786e\u5b9a\u8981\u5173\u95ed\u56e2\u961f\u4e0b\u6240\u6709\u7ec4\u4ef6\u5417?",onCancel:this.hideCloseAllComponent}),this.state.joinTeam&&A.default.createElement(N.default,{enterpriseID:e,onOk:this.handleJoinTeam,onCancel:this.cancelJoinTeam}),this.state.showAddTeam&&A.default.createElement(b.default,{enterprise_id:e,loading:this.props.createTeamLoading,onOk:this.handleCreateTeam,onCancel:this.cancelCreateTeam}),v&&A.default.createElement(b.default,{title:"\u521b\u5efa\u60a8\u7684\u7b2c\u4e00\u4e2a\u56e2\u961f",enterprise_id:e,onOk:this.handleCreateTeam,onCancel:this.cancelCreateTeam}),this.state.showExitTeam&&A.default.createElement(x.default,{onOk:this.handleExitTeam,title:"\u9000\u51fa\u56e2\u961f",subDesc:"\u6b64\u64cd\u4f5c\u4e0d\u53ef\u6062\u590d",desc:"\u786e\u5b9a\u8981\u9000\u51fa\u6b64\u56e2\u961f\u5417?",onCancel:this.hideExitTeam}),this.state.showDelApply&&A.default.createElement(x.default,{onOk:this.handleDelApply,title:"\u64a4\u9500\u7533\u8bf7",subDesc:"\u6b64\u64cd\u4f5c\u4e0d\u53ef\u6062\u590d",desc:"\u786e\u5b9a\u8981\u64a4\u9500\u6b64\u7533\u8bf7\u5417?",onCancel:this.hideDelApply}),this.state.showDelTeam&&A.default.createElement(x.default,{loading:E,onOk:this.handleDelTeam,title:"\u5220\u9664\u56e2\u961f",subDesc:"\u6b64\u64cd\u4f5c\u4e0d\u53ef\u6062\u590d",desc:"\u786e\u5b9a\u8981\u5220\u9664\u6b64\u56e2\u961f\u548c\u56e2\u961f\u4e0b\u7684\u6240\u6709\u8d44\u6e90\u5417\uff1f",onCancel:this.hideDelTeam}),this.state.showOpenRegion&&A.default.createElement(k.default,{onSubmit:this.handleOpenRegion,onCancel:this.cancelOpenRegion,teamName:this.state.openRegionTeamName}),s||p||T?A.default.createElement("div",{className:O.default.example},A.default.createElement(n.default,null)):A.default.createElement("div",null,f?P:z))}},E=w))||E);t.default=M},"kN/N":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAABCklEQVQ4T52SMUsDQRCF34CQRvwdIkkTJHUKSeffuHcHKbSxs7Kz0UK4m/sbdiFFahEbg/g7xEYQRmbJyHqcRrLVsvO+nd15T7Djki6nqmMRmZjZtddE5MLMHkg+5dofoKrOAdwCGJJ8daGqHgJYAzgjeRfwN6iqM5KLKDRNc+T7sixf4izXJFBVRwAeSQ5CVNf11PdVVa0y8APAMcnnAM8BLP1gC+gNTkjeBPhOcj//fF/HzeuSNsA3kgf/BJM2gW3blma2ikn+Zq1PWESmRVE00XEMwL3a+ysPqvoJYOKe5nbMc5/6LnCfQ9MNwAzAfYw8twrAae5zX+TSyAFcbbpedq1KUdwx4/gCdzqBD4ZaGy8AAAAASUVORK5CYII="},pJo4:function(e,t,a){e.exports={teamsTit:"teamsTit___m8mMI",teamMinTit:"teamMinTit___1A85u",teamContent:"teamContent___Zj-8-",pl24:"pl24___1Bc0S",bor:"bor___EJfEN",example:"example___3JK2k",btns:"btns___33LqR",regionShow:"regionShow___JiDUn"}}}]);