(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"51Hh":function(e,t,a){"use strict";var s=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("lUTK");var l,r,i,c=s(a("BvKs")),d=n(a("q1tI")),o=a("MuoO"),u=s(a("3a4m")),h=a("LLXN"),m=s(a("mWxT")),p=s(a("vFwn")),f=c.default.Item,g=(l=(0,o.connect)(e=>{var t=e.user,a=e.global;return{currentUser:t.currentUser,enterprise:a.enterprise}}),l((i=class extends d.Component{constructor(e){super(e),this.getmenu=(()=>{var e=this.state.menuMap;return Object.keys(e).map(t=>d.default.createElement(f,{key:t},e[t]))}),this.getRightTitle=(()=>{var e=this.state,t=e.selectKey,a=e.menuMap;return a[t]}),this.selectKey=(e=>{var t=e.key;u.default.push("/account/center/".concat(t)),this.setState({selectKey:t})});var t=e.match,a=e.location,s=e.enterprise,n=e.currentUser,l=m.default.OauthEnterpriseEnable(s),r=n.oauth_services&&n.oauth_services.length>0&&n.oauth_services,i=l&&r,c={};i&&(c.binding=d.default.createElement(h.FormattedMessage,{id:"app.settings.menuMap.binding",defaultMessage:"Account Binding"})),c.accesstoken=d.default.createElement(h.FormattedMessage,{id:"app.settings.menuMap.access-token",defaultMessage:"Access Token"});var o=a.pathname.replace("".concat(t.path,"/"),"");this.state={mode:"inline",menuMap:c,selectKey:c[o]?o:i?"binding":"accesstoken"}}static getDerivedStateFromProps(e,t){var a=e.match,s=e.location,n=e.match.params.eid,l=a.path.replace(/:eid/g,n),r=s.pathname.replace("".concat(l,"/"),"");return r=t.menuMap[r]?r:"binding",r!==t.selectKey?{selectKey:r}:null}render(){var e=this.props.children,t=this.state,a=t.mode,s=t.selectKey;return d.default.createElement("div",{className:p.default.main},d.default.createElement("div",{className:p.default.leftmenu},d.default.createElement(c.default,{mode:a,selectedKeys:[s],onClick:this.selectKey},this.getmenu())),d.default.createElement("div",{className:p.default.right},d.default.createElement("div",{className:p.default.title},this.getRightTitle()),e))}},r=i))||r),v=g;t.default=v},Nh26:function(e,t,a){"use strict";var s=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("Mwp2");var l,r,i=s(a("VXEj")),c=a("MuoO"),d=n(a("q1tI")),o=s(a("tH/r")),u=s(a("mWxT")),h=(l=(0,c.connect)(e=>{var t=e.user,a=e.global,s=e.appControl;return{currUser:t.currentUser,rainbondInfo:a.rainbondInfo,enterprise:a.enterprise,appDetail:s.appDetail}}),l(r=class extends d.Component{render(){var e=this.props,t=e.currUser,a=e.enterprise;if(!t)return null;var s=u.default.OauthEnterpriseEnable(a),n=t.oauth_services&&t.oauth_services.length>0&&t.oauth_services,l=a&&s&&n||[];return d.default.createElement(d.Fragment,null,d.default.createElement(i.default,{itemLayout:"horizontal",dataSource:l,renderItem:e=>{var t=e.service_name,a=e.is_authenticated,s=e.oauth_user_name,n=e.is_expired,l=e.oauth_type,r=o.default.getAuthredictURL(e),c="";return a?c="\u5df2\u8ba4\u8bc1":n&&(c="\u5df2\u8fc7\u671f\u91cd\u65b0\u8ba4\u8bc1"),d.default.createElement(i.default.Item,{actions:[d.default.createElement("span",{style:{color:a?"green":"#4d73b1"}},a?c:r&&d.default.createElement("a",{rel:"noreferrer",href:"".concat(r,"&&type=certification"),target:"_blank"},c||"\u53bb\u8ba4\u8bc1"))]},d.default.createElement(i.default.Item.Meta,{avatar:o.default.getIcon(e,"48px"),title:t,description:d.default.createElement("div",null,"\u5f53\u524d",c||"\u672a\u8ba4\u8bc1",s||l,"\u8d26\u53f7")}))}}))}})||r),m=h;t.default=m},gEbF:function(e,t,a){"use strict";var s=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var l=s(a("wCAj"));a("14J3");var r=s(a("BMrR"));a("+L6B");var i=s(a("2/Rp"));a("fOrg");var c=s(a("+KLJ"));a("/xke");var d,o,u,h=s(a("TeRw")),m=a("MuoO"),p=s(a("wd/R")),f=n(a("q1tI")),g=s(a("sv7o")),v=s(a("q76B")),k=(d=(0,m.connect)(e=>{var t=e.loading;return{deleteAccessLoading:t.effects["user/deleteAccessToke"]}}),d((u=class extends f.Component{constructor(e){super(e),this.onCanceAccessToken=(()=>{this.setState({openDeleteAccessToken:!1,ID:""})}),this.loadAccessTokenList=(()=>{var e=this.props.dispatch;e({type:"user/fetchAccessToken",callback:e=>{e&&200===e.status_code&&this.setState({dataSource:e.list})}})}),this.handleDeleteAccessToken=(()=>{var e=this.props.dispatch,t=this.state.ID;e({type:"user/deleteAccessToke",payload:{user_id:t},callback:e=>{e&&200===e.status_code&&(h.default.success({message:"\u5220\u9664\u6210\u529f"}),this.loadAccessTokenList(),this.onCanceAccessToken())}})}),this.addAccessToken=(()=>{this.setState({visible:!0})}),this.handleCancel=(()=>{this.setState({visible:!1,ID:""})}),this.openDeleteAccessToken=(e=>{this.setState({ID:e,openDeleteAccessToken:!0})}),this.handleRegenerateAccessToken=(e=>{this.setState({ID:e,visible:!0})}),this.disabledDate=(e=>{return e&&e<(0,p.default)().endOf("day")}),this.disabledDateTime=(()=>{return{disabledHours:()=>this.range(0,24).splice(4,20),disabledMinutes:()=>this.range(30,60),disabledSeconds:()=>[55,56]}}),this.range=((e,t)=>{for(var a=[],s=e;s<t;s++)a.push(s);return a}),this.handleSubmit=(()=>{this.loadAccessTokenList(),this.handleCancel()}),this.handleExpireTime=(e=>{var t="",a=e?"".concat(e):"";return e&&10===a.length?(t=new Date(1e3*parseInt(e)),t):e&&13===a.length?(t=new Date(parseInt(e)),t):null}),this.state={dataSource:[],openDeleteAccessToken:!1,ID:"",visible:!1}}componentDidMount(){this.loadAccessTokenList()}render(){var e=this.props.deleteAccessLoading,t=this.state,a=t.dataSource,s=t.openDeleteAccessToken,n=t.visible,d=t.ID,o=[{title:"\u7528\u9014",dataIndex:"note",key:"note",width:"30%"},{title:"\u8fc7\u671f\u65f6\u95f4",dataIndex:"expire_time",key:"expire_time",width:"25%",render:e=>{var t=this.handleExpireTime(e);return t?(0,p.default)(t).locale("zh-cn").format("YYYY-MM-DD HH:mm:ss"):"\u4e0d\u9650\u5236"}},{title:"\u72b6\u6001",dataIndex:"user_id",key:"user_id",width:"20%",render:(e,t)=>{var a=this.handleExpireTime(t.expire_time),s=(0,p.default)().valueOf(),n=!!a&&s>=a;return f.default.createElement(f.Fragment,null,f.default.createElement("div",{style:{color:n?"#f81d22":" #0b8235"}},n?"\u8fc7\u671f":"\u6b63\u5e38"))}},{title:"\u64cd\u4f5c",dataIndex:"var",width:"20%",render:(e,t)=>f.default.createElement(f.Fragment,null,f.default.createElement("a",{onClick:()=>this.openDeleteAccessToken(t.ID),style:{margintRight:10}},"\u5220\u9664"),f.default.createElement("a",{onClick:()=>{this.handleRegenerateAccessToken(t.ID)},style:{margintRight:10}},"\u91cd\u65b0\u751f\u6210"))}];return f.default.createElement(f.Fragment,null,f.default.createElement(c.default,{message:"\u8bbf\u95ee\u4ee4\u724c\u7528\u4e8e\u8bbf\u95ee\u5e73\u53f0API, \u8bbf\u95ee\u4ee4\u724c\u7684\u6743\u9650\u4e0e\u4f60\u7684\u8d26\u53f7\u6743\u9650\u4e00\u81f4",type:"info",showIcon:!0,style:{margin:"20px"}}),f.default.createElement(r.default,{style:{textAlign:"right"}},f.default.createElement(i.default,{style:{margin:"0  5px 20px 0"},type:"primary",onClick:this.addAccessToken},"\u65b0\u589e")),f.default.createElement(l.default,{dataSource:a,columns:o,pagination:!1}),n&&f.default.createElement(g.default,{onOk:this.handleSubmit,onCancel:this.handleCancel,ID:d}),s&&f.default.createElement(v.default,{title:"\u5220\u9664\u4ee4\u724c",desc:"\u786e\u5b9a\u8981\u5220\u9664\u8bbf\u95ee\u4ee4\u724c?",loading:e,onCancel:this.onCanceAccessToken,onOk:this.handleDeleteAccessToken}))}},o=u))||o),b=k;t.default=b},sv7o:function(e,t,a){"use strict";var s=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var l=s(a("kLXV"));a("iQDF");var r=s(a("+eQT")),i=s(a("jehZ"));a("5NDa");var c=s(a("5rEg"));a("fOrg");var d=s(a("+KLJ"));a("/xke");var o=s(a("TeRw"));a("tU7J");var u=s(a("wFql"));a("y8nQ");var h,m,p,f,g=s(a("Vl3Y")),v=a("MuoO"),k=s(a("wd/R")),b=n(a("q1tI")),y=s(a("e6Ls")),A=g.default.Item,E=u.default.Paragraph,_=(h=g.default.create(),m=(0,v.connect)(),h(p=m((f=class extends b.PureComponent{constructor(e){super(e),this.handleSubmit=(()=>{var e=this.props,t=e.form,a=e.onOk,s=this.state.accessKey;if(s)return a(),this.handleCloneAccessKey(),null;t.validateFields((e,t)=>{if(!e){if(t.age){var a=(0,k.default)(t.age).valueOf(),s=(0,k.default)().valueOf();t.age=(0,k.default)(a).diff((0,k.default)(s),"seconds")}this.addAccesstoken(t)}})}),this.handleAccesstokenCallback=(e=>{e&&200===e.status_code&&this.setState({accessKey:e.bean.access_key}),this.setState({loading:!1})}),this.addAccesstoken=(e=>{var t=this.props.dispatch;this.setState({loading:!0}),t({type:"user/addAccessToken",payload:e,callback:e=>{this.handleAccesstokenCallback(e)},handleError:e=>{e&&e.data&&e.data.msg_show&&o.default.warning({message:e.data.msg_show}),this.setState({loading:!1})}})}),this.putAccesstoken=(e=>{var t=this.props.dispatch;this.setState({loading:!0}),t({type:"user/putAccessToken",payload:{user_id:e},callback:e=>{this.handleAccesstokenCallback(e)}})}),this.disabledDate=(e=>{return e&&e<(0,k.default)().endOf("day")}),this.disabledDateTime=(()=>{return{disabledHours:()=>this.range(0,24).splice(4,20),disabledMinutes:()=>this.range(30,60),disabledSeconds:()=>[55,56]}}),this.range=((e,t)=>{for(var a=[],s=e;s<t;s++)a.push(s);return a}),this.handleCloneAccessKey=(()=>{this.setState({accessKey:!1});var e=this.props,t=e.onOk,a=e.onCancel,s=this.state.accessKey;s?t():a()}),this.state={accessKey:!1,loading:!1}}componentDidMount(){var e=this.props.ID;e&&this.putAccesstoken(e)}render(){var e=this.props,t=e.form,a=e.ID,s=t.getFieldDecorator,n=this.state,o=n.loading,u=n.accessKey,h={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}};return b.default.createElement(l.default,{visible:!0,confirmLoading:o,maskClosable:!1,className:y.default.TelescopicModal,title:a||u?"\u8bf7\u4fdd\u5b58AccessKey":"\u65b0\u589e\u8bbf\u95ee\u4ee4\u724c",onOk:this.handleSubmit,onCancel:this.handleCloneAccessKey},a||u?b.default.createElement(b.Fragment,null,b.default.createElement(d.default,{message:"\u6ce8\u610f\uff1aAccessKey\u53ea\u663e\u793a\u4e00\u6b21\u8bf7\u4fdd\u5b58\u8bb0\u5f55\u3002",type:"info",showIcon:!0,style:{marginBottom:"20px"}}),b.default.createElement(d.default,{message:b.default.createElement(E,{style:{marginBottom:"0"},copyable:!0},u),style:{marginBottom:"20px"},type:"success"})):b.default.createElement(b.Fragment,null,b.default.createElement(A,(0,i.default)({},h,{label:"\u7528\u9014"}),s("note",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u9014!"},{max:32,message:"\u6700\u5927\u957f\u5ea632\u4f4d"}],initialValue:""})(b.default.createElement(c.default,{placeholder:"\u8bf7\u8f93\u5165\u7528\u9014"}))),b.default.createElement(A,(0,i.default)({},h,{label:"\u8fc7\u671f\u65f6\u95f4"}),s("age",{rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u65f6\u95f4!"}],initialValue:""})(b.default.createElement(r.default,{style:{width:"100%"},format:"YYYY-MM-DD HH:mm:ss",disabledDate:this.disabledDate,disabledTime:this.disabledDateTime,showTime:{defaultValue:(0,k.default)("00:00:00","HH:mm:ss")}})))))}},p=f))||p)||p),T=_;t.default=T},vFwn:function(e,t,a){e.exports={main:"main___12-o4",leftmenu:"leftmenu___1g3zt",right:"right___L1Wpz",title:"title___3oSLP"}}}]);