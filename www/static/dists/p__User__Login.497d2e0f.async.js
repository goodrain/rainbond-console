(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[86],{VOnZ:function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("miYZ");var i,r,d,s=l(a("tsqr")),o=n(a("q1tI")),u=(a("LLXN"),a("MuoO")),c=a("7DNP"),f=l(a("QDog")),h=l(a("QBZU")),m=l(a("w2qy")),g=(h.default.UserName,h.default.Password,h.default.Submit),p=h.default.Mobile,v=h.default.Captcha,b=(i=(0,u.connect)(e=>{var t=e.loading,a=e.global;return{isRegist:a.isRegist,thirdLogin:t.effects["user/thirdLogin"],userLogin:t.effects["user/login"]}}),i((d=class extends o.Component{constructor(){super(...arguments),this.state={mobile:"",countdown:0},this.handleSubmit=((e,t)=>{var a=this.props.onSubmit;if(!e&&a){var l=window.localStorage.getItem("redirect");encodeURIComponent(l);l&&l.includes("invite")&&(t.isInvite=!0),f.default.removeCookie(),a(t)}}),this.getRedirectParams=(()=>{var e=window.localStorage.getItem("redirect"),t=encodeURIComponent(e);return e&&e.includes("invite")?"/user/register?redirect="+t:"/user/register"}),this.handleMobileChange=(e=>{var t,a=(null===(t=e.target)||void 0===t?void 0:t.value)||"";this.setState({mobile:a})}),this.onGetCaptcha=(e=>{e&&e.persist();var t=this.props.dispatch,a=this.state.mobile;a?t({type:"user/getSmsCode",payload:{phone:a,purpose:"login"},callback:()=>{this.setState({countdown:120})}}):s.default.error("\u8bf7\u8f93\u5165\u624b\u673a\u53f7")})}render(){var e=this.props,t=e.thirdLogin,a=e.userLogin,l=e.type,n=this.state.mobile;return o.default.createElement("div",null,o.default.createElement(h.default,{defaultActiveKey:"account",onSubmit:this.handleSubmit},o.default.createElement(p,{name:"phone",placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",onChange:this.handleMobileChange}),o.default.createElement(v,{name:"code",placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",countDown:120,mobile:n,onGetCaptcha:this.onGetCaptcha}),o.default.createElement(g,{loading:"thirdLogin"!==l?a:t},"thirdLogin"===l?"\u767b\u5f55\u5e76\u7ed1\u5b9a":"\u767b\u5f55"),o.default.createElement("div",{className:m.default.other},this.props.isRegist&&"thirdLogin"!==l&&o.default.createElement(c.Link,{className:m.default.register,to:this.getRedirectParams()},"\u6ce8\u518c\u8d26\u6237"))))}},r=d))||r);t.default=b},Y5yc:function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("14J3");var i=l(a("BMrR"));a("5Dmo");var r=l(a("3S7+"));a("/zsF");var d,s,o,u=l(a("PArb")),c=l(a("p0pE")),f=a("MuoO"),h=n(a("q1tI")),m=l(a("QDog")),g=l(a("tH/r")),p=l(a("mWxT")),v=a("brDv"),b=a("LLXN"),E=l(a("8+Sn")),L=(l(a("Trn4")),l(a("w2qy"))),y=l(a("CTfg")),S=l(a("VOnZ")),w=(d=(0,f.connect)(e=>{var t=e.global;return{isRegist:t.isRegist,rainbondInfo:t.rainbondInfo}}),d((o=class extends h.Component{constructor(e){super(e),this.handleSubmit=(e=>{var t=this.props,a=t.dispatch,l=t.location,n=new URLSearchParams(l.search),i=n.get("redirect");a({type:"user/login",payload:(0,c.default)({},e),callback:()=>{var e="/";i&&(e=i),window.location.href=e}})}),this.fetchEnterpriseInfo=(e=>{var t=this.props.dispatch;t({type:"global/fetchEnterpriseInfo",payload:{enterprise_id:e},callback:e=>{if(e&&200===e.status_code&&e.bean&&e.bean.oauth_services){var t=e.bean.oauth_services,a=void 0===t?{}:t;a.enable&&this.setState({oauthServicesList:a.value&&a.value.length>0&&a.value})}}})}),this.handleSmsSubmit=(e=>{var t=this.props,a=t.dispatch,l=t.location,n=new URLSearchParams(l.search),i=n.get("redirect");a({type:"user/smsLogin",payload:e,callback:()=>{var e="/";i&&(e=i),window.location.href=e}})}),this.state={language:"zh-CN"===E.default.get("language")}}componentWillMount(){var e=this.props.dispatch;e({type:"global/hideNeedLogin"}),m.default.removeCookie()}componentDidMount(){var e=navigator.systemLanguage||navigator.language,t=E.default.get("language");if(null==t)if(-1!==e.toLowerCase().indexOf("zh")){var a="zh-CN";E.default.set("language",a),(0,v.setLocale)("zh-CN"),this.setState({language:!0})}else{var l="en-US";E.default.set("language",l),(0,v.setLocale)("en-US"),this.setState({language:!1})}}render(){var e=this.props.rainbondInfo,t=e&&e.enterprise_center_oauth&&e.enterprise_center_oauth.value,a=t&&g.default.getAuthredictURL(t),l=t&&g.default.getIcon(t),n=[];e&&e.oauth_services&&e.oauth_services.enable&&e.oauth_services.value&&e.oauth_services.value.length>0&&(n=e.oauth_services.value);var d={display:"inline-block"},s=(this.state.language,(null===e||void 0===e?void 0:e.is_saas)||!1);return h.default.createElement("div",{className:L.default.main},s?h.default.createElement(h.default.Fragment,null,h.default.createElement(S.default,{onSubmit:this.handleSmsSubmit,type:"login"}),p.default.OauthbEnable(e)&&(t||n&&n.length>0)&&h.default.createElement("div",{className:L.default.thirdBox},h.default.createElement(u.default,null,h.default.createElement("div",{className:L.default.thirdLoadingTitle},h.default.createElement(b.FormattedMessage,{id:"login.Login.three"}))),h.default.createElement(i.default,{className:L.default.third},t&&h.default.createElement("div",{className:L.default.thirdCol,key:t.client_id},h.default.createElement(r.default,{placement:"top",title:t.name},h.default.createElement("a",{style:d,href:a,title:t.name},l))),n.map(e=>{var t=e.name,a=e.service_id;return h.default.createElement("div",{className:L.default.thirdCol,key:a},h.default.createElement(r.default,{placement:"top",title:t},h.default.createElement("a",{style:d,href:g.default.getAuthredictURL(e),title:t},g.default.getIcon(e))))})))):h.default.createElement(h.default.Fragment,null,h.default.createElement(y.default,{onSubmit:this.handleSubmit,type:"login"}),p.default.OauthbEnable(e)&&(t||n&&n.length>0)&&h.default.createElement("div",{className:L.default.thirdBox},h.default.createElement(u.default,null,h.default.createElement("div",{className:L.default.thirdLoadingTitle},h.default.createElement(b.FormattedMessage,{id:"login.Login.three"}))),h.default.createElement(i.default,{className:L.default.third},t&&h.default.createElement("div",{className:L.default.thirdCol,key:t.client_id},h.default.createElement(r.default,{placement:"top",title:t.name},h.default.createElement("a",{style:d,href:a,title:t.name},l))),n.map(e=>{var t=e.name,a=e.service_id;return h.default.createElement("div",{className:L.default.thirdCol,key:a},h.default.createElement(r.default,{placement:"top",title:t},h.default.createElement("a",{style:d,href:g.default.getAuthredictURL(e),title:t},g.default.getIcon(e))))})))))}},s=o))||s);t.default=w}}]);