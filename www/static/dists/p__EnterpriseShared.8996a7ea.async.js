(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[53],{"695H":function(e,t,a){"use strict";var l=a("g09b"),s=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var i=l(a("kLXV")),r=l(a("jehZ"));a("sRBo");var n=l(a("kaz8"));a("14J3");var p=l(a("BMrR"));a("jCWc");var o=l(a("kPKH"));a("+L6B");var d=l(a("2/Rp"));a("y8nQ");var c,m,u,h,f=l(a("Vl3Y")),g=a("MuoO"),k=s(a("q1tI")),M=a("LLXN"),v=l(a("e6Ls")),A=f.default.Item,C=(c=f.default.create(),m=(0,g.connect)(e=>{var t=e.user;return{currUser:t.currentUser}}),c(u=m((h=class extends k.PureComponent{constructor(e){super(e),this.onChangeCheckbox=(e=>{this.setState({tags:e})}),this.handleSubmit=(()=>{var e=this.props,t=e.onChangeCheckbox,a=e.onOk,l=e.form,s=e.seeTag;s&&a&&a(),l.validateFields((e,l)=>{e||(a&&a(l),t&&t(this.state.tags))})}),this.state={tags:[]}}render(){var e=this.props.form.getFieldDecorator,t=this.props,a=t.seeTag,l=t.onCancel,s=t.title,c=t.tagLists,m=t.checkedValues,u={labelCol:{xs:{span:0},sm:{span:0}},wrapperCol:{xs:{span:24},sm:{span:24}}};return k.default.createElement(i.default,{title:s,width:480,visible:!0,className:v.default.TelescopicModal,onOk:this.handleSubmit,onCancel:this.handleSubmit,footer:[k.default.createElement(d.default,{onClick:l},"  ",k.default.createElement(M.FormattedMessage,{id:"button.cancel"})),k.default.createElement(d.default,{type:"primary",onClick:this.handleSubmit},k.default.createElement(M.FormattedMessage,{id:"button.confirm"}))]},a?k.default.createElement(p.default,{style:{marginBottom:"20px"}},a.map(e=>{return k.default.createElement(o.default,{key:e,span:8},e)})):k.default.createElement(f.default,{onSubmit:this.handleSubmit,layout:"horizontal",hideRequiredMark:!0},k.default.createElement(A,(0,r.default)({},u,{label:""}),e("tag",{initialValue:m||[],rules:[{required:!1,message:(0,M.formatMessage)({id:"applicationMarket.TagList.select_label"})}]})(k.default.createElement(n.default.Group,{style:{width:"100%"},onChange:this.onChangeCheckbox},k.default.createElement(p.default,null,c&&c.map(e=>{var t=e.name,a=e.tag_id;return k.default.createElement(o.default,{key:a,span:8},k.default.createElement(n.default,{value:t},t))})))))))}},u=h))||u)||u);t.default=C},TbKt:function(e,t,a){"use strict";var l=a("g09b"),s=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var i=l(a("kLXV")),r=l(a("jehZ"));a("+L6B");var n=l(a("2/Rp"));a("sRBo");var p=l(a("kaz8"));a("y8nQ");var o,d,c,m=l(a("Vl3Y")),u=s(a("q1tI")),h=l(a("e6Ls")),f=a("LLXN"),g=m.default.Item,k=p.default.Group,M=(o=m.default.create(),o((c=class extends u.PureComponent{constructor(){super(...arguments),this.onChangeBounced=(e=>{var t=this.props.onCheckedValues;t&&t(e)}),this.handleSubmit=(()=>{var e=this.props,t=e.form,a=e.onOk,l=t.validateFields;l((e,t)=>{!e&&a&&a(t)})})}render(){var e=this.props,t=e.onCancel,a=e.bouncedText,l=e.appInfo,s=e.form,p=s.getFieldDecorator,o=[];l&&l.versions_info&&l.versions_info.length>0&&l.versions_info.map(e=>{o.push(e.version)});var d={labelCol:{xs:{span:24},sm:{span:12}},wrapperCol:{xs:{span:24},sm:{span:12}}};return u.default.createElement(i.default,{title:a,visible:!0,onOk:this.handleSubmit,className:h.default.TelescopicModal,onCancel:t,footer:[u.default.createElement(n.default,{onClick:t},"  ",u.default.createElement(f.FormattedMessage,{id:"button.cancel"})),u.default.createElement(n.default,{type:"primary",onClick:this.handleSubmit},u.default.createElement(f.FormattedMessage,{id:"button.confirm"}))]},u.default.createElement(m.default,{onSubmit:this.handleSubmit},u.default.createElement(g,(0,r.default)({},d,{label:l&&"".concat((0,f.formatMessage)({id:"applicationMarket.DeleteApp"},{name:l.app_name}))}),p("chooseVersion",{initialValue:l&&l.versions_info&&l.versions_info.length>0&&[l.versions_info[0].version],rules:[{required:!0,message:(0,f.formatMessage)({id:"applicationMarket.CreateHelmAppModels.select_version"})}]})(u.default.createElement(k,{options:o,onChange:this.onChangeBounced})))))}},d=c))||d);t.default=M},VJxn:function(e,t,a){e.exports=a.p+"static/noComponent.e2323eb8.png"},"bV/r":function(e,t,a){"use strict";var l=a("g09b"),s=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var i=l(a("kLXV")),r=l(a("jehZ"));a("5NDa");var n=l(a("5rEg"));a("OaEy");var p=l(a("2fM7"));a("y8nQ");var o,d,c,m,u=l(a("Vl3Y")),h=a("MuoO"),f=s(a("q1tI")),g=a("LLXN"),k=l(a("e6Ls")),M=u.default.Item,v=p.default.Option,A=(o=u.default.create(),d=(0,h.connect)(),o(c=d((m=class extends f.PureComponent{constructor(e){super(e),this.handleSubmit=(()=>{var e=this.props,t=e.form,a=e.marketInfo;t.validateFields((e,t)=>{e||(a?this.upAppMarket(t):this.createAppMarket(t))})}),this.upAppMarket=(e=>{var t=this.props,a=t.dispatch,l=t.eid,s=t.onOk,i=t.marketInfo;a({type:"market/upAppMarket",payload:Object.assign({},{enterprise_id:l,marketName:i.name},e),callback:e=>{if(e&&200===e.status_code){var t=e.list;s&&s(t&&t.ID)}}})}),this.createAppMarket=(e=>{var t=this.props,a=t.dispatch,l=t.eid,s=t.onOk;a({type:"market/createAppMarket",payload:Object.assign({},{enterprise_id:l},e),callback:e=>{if(e&&200===e.status_code){var t=e.bean;s&&s(t&&t.ID)}}})}),this.state={marketType:[{key:"rainstore",name:"Rainstore"}]}}render(){var e=this.props.form.getFieldDecorator,t=this.props,a=t.onCancel,l=t.title,s=t.marketInfo,o=void 0===s?{}:s,d=t.loading,c=this.state.marketType,m={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}};return f.default.createElement(i.default,{title:l,visible:!0,className:k.default.TelescopicModal,onOk:this.handleSubmit,onCancel:a,confirmLoading:d||!1},f.default.createElement("span",{style:{textAlign:"center",display:"block",marginBottom:"16px"}},f.default.createElement(g.FormattedMessage,{id:"applicationMarket.CreateAppMarket.open"}),f.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://hub.grapps.cn/marketregist"},f.default.createElement(g.FormattedMessage,{id:"applicationMarket.CreateAppMarket.go_open"}))),f.default.createElement(u.default,{onSubmit:this.handleSubmit,layout:"horizontal"},f.default.createElement(M,(0,r.default)({},m,{label:f.default.createElement(g.FormattedMessage,{id:"applicationMarket.CreateAppMarket.identification"})}),e("name",{initialValue:o.name||"",rules:[{required:!0,message:(0,g.formatMessage)({id:"applicationMarket.CreateAppMarket.input_identification"})},{pattern:/^[a-z0-9A-Z-_]+$/,message:(0,g.formatMessage)({id:"applicationMarket.CreateAppMarket.only"})},{max:64,message:(0,g.formatMessage)({id:"applicationMarket.CreateAppMarket.max"})}]})(f.default.createElement(n.default,{placeholder:(0,g.formatMessage)({id:"applicationMarket.CreateAppMarket.input_identification"})})),f.default.createElement("div",{className:k.default.conformDesc},f.default.createElement(g.FormattedMessage,{id:"applicationMarket.CreateAppMarket.identical"}))),f.default.createElement(M,(0,r.default)({},m,{label:f.default.createElement(g.FormattedMessage,{id:"applicationMarket.CreateAppMarket.type"})}),e("type",{initialValue:o.type||"rainstore",rules:[{required:!0,message:(0,g.formatMessage)({id:"applicationMarket.CreateAppMarket.shop_type"})}]})(f.default.createElement(p.default,{getPopupContainer:e=>e.parentNode,placeholder:(0,g.formatMessage)({id:"applicationMarket.CreateAppMarket.shop_type"})},c.map(e=>{return f.default.createElement(v,{key:e.key},e.name)})))),f.default.createElement(M,(0,r.default)({},m,{label:f.default.createElement(g.FormattedMessage,{id:"applicationMarket.CreateAppMarket.address"})}),e("url",{initialValue:o.url||"",rules:[{required:!0,message:(0,g.formatMessage)({id:"applicationMarket.CreateAppMarket.input_address"})}]})(f.default.createElement(n.default,{placeholder:(0,g.formatMessage)({id:"applicationMarket.CreateAppMarket.input_address"})}))),f.default.createElement(M,(0,r.default)({},m,{label:f.default.createElement(g.FormattedMessage,{id:"applicationMarket.CreateAppMarket.domain"})}),e("domain",{initialValue:o.domain||"",rules:[{required:!0,message:(0,g.formatMessage)({id:"applicationMarket.CreateAppMarket.input_domain"})}]})(f.default.createElement(n.default,{placeholder:(0,g.formatMessage)({id:"applicationMarket.CreateAppMarket.input_domain"})}))),f.default.createElement(M,(0,r.default)({},m,{label:"AccessKey"}),e("access_key",{initialValue:o.access_key||"",rules:[{required:!1,message:(0,g.formatMessage)({id:"applicationMarket.CreateAppMarket.input"})},{max:64,message:(0,g.formatMessage)({id:"applicationMarket.CreateAppMarket.max"})}]})(f.default.createElement(n.default,{placeholder:(0,g.formatMessage)({id:"applicationMarket.CreateAppMarket.input"})})),f.default.createElement("div",{className:k.default.conformDesc},f.default.createElement(g.FormattedMessage,{id:"applicationMarket.CreateAppMarket.get_AccessKey"})))))}},c=m))||c)||c),C=A;t.default=C},lfE5:function(e,t,a){"use strict";var l=a("g09b"),s=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var i=l(a("kLXV"));a("sRBo");var r=l(a("kaz8"));a("5NDa");var n=l(a("5rEg"));a("+BJd");var p=l(a("mr32")),o=l(a("jehZ"));a("+L6B");var d=l(a("2/Rp"));a("/xke");var c=l(a("TeRw")),m=l(a("p0pE"));a("OaEy");var u=l(a("2fM7"));a("y8nQ");var h,f,g,k,M=l(a("Vl3Y")),v=a("MuoO"),A=a("7DNP"),C=s(a("q1tI")),E=a("LLXN"),b=l(a("qCJ4")),y=l(a("9uC9")),S=l(a("8+Sn")),_=l(a("e6Ls")),T=M.default.Item,w=u.default.Option,L=(h=M.default.create(),f=(0,v.connect)(e=>{var t=e.user,a=e.global,l=e.teamControl;return{user:t.currentUser,rainbondInfo:a.rainbondInfo,currentTeam:l.currentTeam}}),h(g=f((k=class extends C.PureComponent{constructor(e){super(e),this.onAddGroup=(()=>{var e=this.props.form,t=e.validateFields;t(["team_name","region_name"],e=>{e||this.setState({addGroup:!0})})}),this.onAddTeam=(()=>{this.setState({showAddTeam:!0})}),this.fetchCreateAppTeams=(e=>{var t=this.props,a=t.dispatch,l=t.eid;a({type:"global/fetchCreateAppTeams",payload:{enterprise_id:l},callback:t=>{if(t&&200===t.status_code){var a=t.list||[];this.setState({userTeamList:a},()=>{(e||a&&a.length)&&this.handleTeamChange(e||a[0].team_name)})}}})}),this.handleCheckAppName=((e,t,a,l)=>{var s=this.props.dispatch;if(!t)return null;s({type:"application/checkAppName",payload:{app_name:a,regionName:t,tenantName:e},callback:e=>{if(e&&200===e.status_code){var t=e.list&&e.list.name||"";l?a===t?l():l("".concat((0,E.formatMessage)({id:"applicationMarket.CreateHelmAppModels.install"}))):this.handleFieldsValue({app_name:t})}},handleError:()=>{l&&l()}})}),this.handleSubmit=(()=>{var e=this.props,t=e.form,a=e.helmInfo,l=e.appInfo,s=e.appTypes;t.validateFields((e,t)=>{var i=Object.assign({},t,{app_template_name:l&&l.name||"",app_store_name:a&&a.name,app_store_url:a&&a.url});e||(this.setState({helmInstallLoading:!1}),"helmContent"===s?this.handleCreateHelm(i):"marketContent"===s?this.handleCloudCreate(t):"localsContent"===s&&this.handleCreate(t))})}),this.handleFieldsValue=(e=>{var t=this.props.form,a=t.setFieldsValue;a(e)}),this.handleCloudCreate=(e=>{var t=this.props,a=t.dispatch,l=t.appInfo,s=this.state.isDeploy;a({type:"createApp/installApp",payload:(0,m.default)({app_id:l.app_id},e,{is_deploy:s,app_version:e.version,install_from_cloud:!0,marketName:l.local_market_name}),callback:()=>{this.handleRefresh(e)},handleError:e=>{e&&c.default.error({message:e.data.msg_show})}})}),this.handleCreate=(e=>{var t=this.props,a=t.dispatch,l=t.appInfo,s=this.state.isDeploy;a({type:"createApp/installApp",payload:(0,m.default)({},e,{app_id:l.app_id,is_deploy:s,app_version:e.version,install_from_cloud:!1,marketName:"localApplication"}),callback:()=>{this.handleRefresh(e)},handleError:e=>{e&&c.default.error({message:e.data.msg_show})}})}),this.handleRefresh=(e=>{var t=this.props,a=t.dispatch,l=t.onCancel;a({type:"global/fetchGroups",payload:{team_name:e.team_name,region_name:e.region_name},callback:()=>{l(),this.jump(e.team_name,e.region_name,e.group_id),this.handleInstallLoading()}})}),this.jump=((e,t,a)=>{var l=this.props.dispatch;l(A.routerRedux.push("/team/".concat(e,"/region/").concat(t,"/apps/").concat(a,"/overview")))}),this.handleCreateHelm=(e=>{var t=this.props,a=t.dispatch;t.onCancel;window.sessionStorage.setItem("appinfo",JSON.stringify(e)),a(A.routerRedux.push("/team/".concat(e.team_name,"/region/").concat(e.region_name,"/apps/").concat(e.group_id,"/helminstall?installPath=market"))),this.handleInstallLoading()}),this.handleInstallLoading=(()=>{this.setState({helmInstallLoading:!1})}),this.handleTeamChange=(e=>{var t=this.props,a=t.form,l=t.appTypes,s=t.appInfo,i=a.setFieldsValue,r=a.getFieldValue,n=this.state.userTeamList,p=[];if(n.map(t=>{t.team_name===e&&(p=t.region_list)}),p&&p.length>0){var o=p[0].region_name;this.setState({regionList:p},()=>{i({region_name:o});var t=r("app_name")||s&&s.name;"helmContent"===l?(this.handleCheckAppName(e,o,t),this.fetchGroup(e,o)):this.fetchGroup(e,o)})}else this.setState({regionList:[],groups:[]}),i({team_name:e||void 0,region_name:void 0,group_id:void 0})}),this.fetchGroup=((e,t)=>{var a=this.props.form.setFieldsValue;this.props.dispatch({type:"global/fetchGroups",payload:{team_name:e,region_name:t},callback:e=>{a({group_id:e&&e.length>0?e[0].group_id:""}),this.setState({groups:e}),this.cancelAddGroup()}})}),this.cancelAddGroup=(()=>{this.setState({addGroup:!1})}),this.handleAddGroup=((e,t)=>{var a=this.props.form,l=a.setFieldsValue;this.setState({groups:t||[]}),l({group_id:e}),this.cancelAddGroup()}),this.handleCreateTeam=(e=>{var t=this.props,a=t.dispatch,l=t.form,s=l.setFieldsValue;a({type:"teamControl/createTeam",payload:e,callback:e=>{if(e&&e.bean&&e.bean.tenant_name){var t=e.bean.tenant_name;this.fetchCreateAppTeams(t),s({team_name:t})}this.cancelCreateTeam()}})}),this.cancelCreateTeam=(()=>{this.setState({showAddTeam:!1})}),this.renderSuccessOnChange=(()=>{this.setState({isDeploy:!this.state.isDeploy})}),this.selectChange=(e=>{var t=this.props.form,a=t.getFieldsValue,l=a();this.fetchGroup(l.team_name,e)}),this.state={userTeamList:[],regionList:[],appName:"",groups:[],isDeploy:!0,addGroup:!1,showAddTeam:!1,helmInstallLoading:!1}}componentDidMount(){this.fetchCreateAppTeams()}render(){var e=this.props,t=e.eid,a=e.onCancel,l=e.title,s=e.appInfo,c=e.form,m=e.appTypes,h=c.getFieldDecorator,f=c.getFieldValue,g=this.state,k=g.regionList,v=g.userTeamList,A=(g.appName,g.helmInstallLoading),L=g.groups,x=g.addGroup,I=g.isDeploy,H=g.showAddTeam,D=v&&v.length>0&&v,O=[];O="localsContent"===m?s.versions_info&&s.versions_info:s.versions&&s.versions;var N={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:19}}},F=S.default.get("token"),P={};F&&(P.Authorization="GRJWT ".concat(F));var V=f("team_name"),z=f("region_name");return C.default.createElement("div",null,H&&C.default.createElement(y.default,{enterprise_id:t,onOk:this.handleCreateTeam,onCancel:this.cancelCreateTeam}),x&&C.default.createElement(b.default,{group_name:s.app_name||"",teamName:V,regionName:z,onCancel:this.cancelAddGroup,onOk:this.handleAddGroup}),C.default.createElement(i.default,{title:l,visible:!0,width:500,className:_.default.TelescopicModal,onOk:this.handleSubmit,onCancel:a,footer:C.default.createElement(C.Fragment,null,C.default.createElement(d.default,{onClick:a},"  ",C.default.createElement(E.FormattedMessage,{id:"button.cancel"})),C.default.createElement(d.default,{type:"primary",onClick:this.handleSubmit,loading:A},C.default.createElement(E.FormattedMessage,{id:"button.confirm"})))},C.default.createElement(M.default,{onSubmit:this.handleSubmit,layout:"horizontal"},C.default.createElement(T,(0,o.default)({},N,{label:C.default.createElement(E.FormattedMessage,{id:"applicationMarket.CreateHelmAppModels.name"})}),h("team_name",{rules:[{required:!0,message:(0,E.formatMessage)({id:"applicationMarket.CreateHelmAppModels.input_team"})}],initialValue:D&&D[0].team_name||void 0})(C.default.createElement(u.default,{style:{width:220,marginRight:15},onChange:this.handleTeamChange,placeholder:(0,E.formatMessage)({id:"applicationMarket.CreateHelmAppModels.input_team"})},D&&D.map(e=>C.default.createElement(w,{key:e.team_name,value:e.team_name},e.team_alias)))),C.default.createElement(d.default,{onClick:this.onAddTeam},C.default.createElement(E.FormattedMessage,{id:"applicationMarket.CreateHelmAppModels.creat_team"})),C.default.createElement("div",{className:_.default.conformDesc},C.default.createElement(E.FormattedMessage,{id:"applicationMarket.CreateHelmAppModels.install_app"}))),C.default.createElement(T,(0,o.default)({},N,{label:C.default.createElement(E.FormattedMessage,{id:"applicationMarket.CreateHelmAppModels.colony"})}),h("region_name",{initialValue:void 0,rules:[{required:!0,message:(0,E.formatMessage)({id:"applicationMarket.CreateHelmAppModels.select_colony"})}]})(C.default.createElement(u.default,{placeholder:(0,E.formatMessage)({id:"applicationMarket.CreateHelmAppModels.select_colony"}),style:{width:"323px"},onChange:this.selectChange},k.map(e=>C.default.createElement(w,{key:e.region_name,value:e.region_name},e.region_alias)))),C.default.createElement("div",{className:_.default.conformDesc},C.default.createElement(E.FormattedMessage,{id:"applicationMarket.CreateHelmAppModels.select_app_colony"}))),C.default.createElement(M.default.Item,(0,o.default)({},N,{label:C.default.createElement(E.FormattedMessage,{id:"applicationMarket.CreateHelmAppModels.select_app"})}),h("group_id",{rules:[{required:!0,message:(0,E.formatMessage)({id:"applicationMarket.CreateHelmAppModels.input_app"})}]})(C.default.createElement(u.default,{placeholder:(0,E.formatMessage)({id:"applicationMarket.CreateHelmAppModels.input_name"}),style:{display:"inline-block",width:220,marginRight:15}},(L||[]).map(e=>C.default.createElement(w,{key:e.group_id,value:e.group_id},e.group_name)))),C.default.createElement(d.default,{onClick:this.onAddGroup},(0,E.formatMessage)({id:"popover.newApp.title"})),C.default.createElement("div",{className:_.default.conformDesc},C.default.createElement(E.FormattedMessage,{id:"applicationMarket.CreateHelmAppModels.input_install"}))),C.default.createElement(T,(0,o.default)({},N,{label:C.default.createElement(E.FormattedMessage,{id:"applicationMarket.CreateHelmAppModels.version"})}),h("version",{initialValue:O&&(O[0].version||O[0].app_version),rules:[{required:!0,message:(0,E.formatMessage)({id:"applicationMarket.CreateHelmAppModels.select_version"})}]})(C.default.createElement(u.default,{style:{width:"323px"}},O&&O.map(e=>{var t=e.version||e.app_version;return C.default.createElement(w,{key:e.version,value:t},t,e.arch&&C.default.createElement(p.default,{style:{marginLeft:"6px"},color:"blue"},e.arch))}))),C.default.createElement("div",{className:_.default.conformDesc},C.default.createElement(E.FormattedMessage,{id:"applicationMarket.CreateHelmAppModels.select_version_app"}))),C.default.createElement(T,(0,o.default)({},N,{label:C.default.createElement(E.FormattedMessage,{id:"applicationMarket.CreateHelmAppModels.install"}),style:{display:"none"}}),h("note",{initialValue:s.versions?s.versions[0].description||s.describe:"",rules:[{max:255,message:(0,E.formatMessage)({id:"applicationMarket.CreateHelmAppModels.max_num"})}]})(C.default.createElement(n.default.TextArea,{placeholder:(0,E.formatMessage)({id:"applicationMarket.CreateHelmAppModels.remarks"}),style:{width:"323px"}})),C.default.createElement("div",{className:_.default.conformDesc},C.default.createElement(E.FormattedMessage,{id:"applicationMarket.CreateHelmAppModels.describe"}))),"helmContent"!==m&&C.default.createElement(T,(0,o.default)({},N,{label:C.default.createElement(E.FormattedMessage,{id:"applicationMarket.CreateHelmAppModels.start"})}),h("is_deploy",{initialValue:I})(C.default.createElement(r.default,{checked:I,onChange:this.renderSuccessOnChange}))))))}},g=k))||g)||g),x=L;t.default=x},oBm1:function(e,t,a){"use strict";var l=a("g09b"),s=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("/zsF");var i=l(a("PArb"));a("DjyN");var r=l(a("NUBc"));a("T2oS");var n=l(a("W9HT"));a("14J3");var p=l(a("BMrR"));a("7Kak");var o=l(a("9yH6"));a("R9oj");var d=l(a("ECub"));a("Pwec");var c=l(a("CtXQ"));a("+L6B");var m=l(a("2/Rp"));a("lUTK");var u=l(a("BvKs")),h=l(a("p0pE")),f=l(a("jehZ"));a("jCWc");var g=l(a("kPKH"));a("5Dmo");var k=l(a("3S7+"));a("/xke");var M=l(a("TeRw"));a("2qtc");var v=l(a("kLXV"));a("OaEy");var A=l(a("2fM7"));a("5NDa");var C=l(a("5rEg"));a("Znn+");var E,b,y,S=l(a("ZTPi")),_=l(a("18gR")),T=a("MuoO"),w=a("7DNP"),L=s(a("q1tI")),x=a("LLXN"),I=l(a("VJxn")),H=l(a("/VoG")),D=l(a("q76B")),O=l(a("bV/r")),N=l(a("qula")),F=l(a("lfE5")),P=l(a("TbKt")),V=l(a("pSit")),z=(l(a("YZHX")),l(a("puxM"))),R=l(a("+tCj")),q=l(a("iPMB")),G=l(a("XZXw")),j=a("34ay"),B=l(a("QDog")),U=l(a("mWxT")),X=l(a("+iC2")),K=l(a("2lxJ")),J=l(a("zrlW")),Q=l(a("UR3D")),Z=l(a("8+Sn")),W=l(a("695H")),Y=S.default.TabPane,$=C.default.Search,ee=(A.default.Option,E=(0,T.connect)(e=>{var t=e.user,a=e.global,l=e.loading;return{user:t.currentUser,novices:a.novices,enterprise:a.enterprise,upAppMarketLoading:l.effects["market/upAppMarket"],createAppMarketLoading:l.effects["market/createAppMarket"]}}),E((y=class extends L.PureComponent{constructor(e){var t;super(e),t=this,this.onChangeRadio=(e=>{this.setState({page:1,scope:e.target.value},()=>{this.getApps()})}),this.onChangeCheckbox=(e=>{this.setState({tags:e},()=>{this.getApps()})}),this.onChangeBounced=(e=>{this.setState({chooseVersion:e})}),this.onPageChangeApp=((e,t)=>{this.setState({page:e,pageSize:t},()=>{this.getApps()})}),this.onPageChangeAppMarket=((e,t)=>{var a=this.state,l=a.marketInfo,s=a.marketPag,i=Object.assign({},s,{page:e,pageSize:t});this.setState({marketPag:i},()=>{this.getMarkets(l&&l.name)})}),this.onPageChangeAppHelm=((e,t)=>{var a=this.state,l=a.helmPag,s=a.helmInfo,i=Object.assign({},l,{page:e,pageSize:t});this.setState({helmPag:i,helmLoading:!0},()=>{this.getHelmAppStore(s&&s.name)})}),this.onTabChange=(e=>{if("add"===e)return this.handleOpencreateAppMarket(),null;var t=this.state,a=t.marketTab,l=t.helmTab,s=[];s=a.filter(t=>{return t.ID===Number(e)});var i=[];i=l.filter(t=>{return t.name===e});var r=s&&s.length>0,n=i&&i.length>0,p=!1;return this.setState({marketInfo:!!r&&s[0],helmInfo:!!n&&i[0],showCloudMarketAuth:p,activeTabKey:"".concat(e),name:"",marketList:[],helmList:[],helmLoading:!0,marketLoading:!0,marketPag:{pageSize:10,total:0,page:1,query:""},helmPag:{pageSize:10,total:0,page:1,query:""}},()=>{"local"!==e&&n?this.getHelmAppStore(i[0].name):"local"!==e&&r&&1===s[0].status?this.getMarkets(s[0].name):"local"===e&&this.getApps()}),null}),this.getApps=(()=>{var e=this.props,t=e.dispatch,a=e.user,l=e.match.params.eid,s=this.state,i=s.page,r=s.pageSize,n=s.name,p=s.scope,o=s.tags;this.setState({localLoading:!0},()=>{t({type:"market/fetchAppModels",payload:{enterprise_id:l,user_id:a.user_id,app_name:n,scope:p,page:i,page_size:r,tags:o},callback:e=>{e&&200===e.status_code&&this.setState({total:e.total,componentList:e.list,localLoading:!1})}})})}),this.getTags=(()=>{var e=this.props,t=e.dispatch,a=e.match.params.eid;t({type:"market/fetchAppModelsTags",payload:{enterprise_id:a},callback:e=>{e&&200===e.status_code&&this.setState({tagList:e.list})}})}),this.getMarketsTab=((e,t)=>{var a=this.props,l=a.dispatch,s=a.match.params.eid,i=a.location.query.init,r=this.state.activeTabKey;l({type:"market/fetchMarketsTab",payload:{enterprise_id:s},callback:a=>{if(a&&200===a.status_code){var l=a.list||[];this.setState({marketTab:l},()=>{var a=[];if(this.state.marketTab.map(e=>{e.types="marketTab",a.push(e)}),this.setState({tabsList:[...this.state.tabsList,...a],marketInfoSwitch:!0}),e||i||t&&r){var s=i&&l&&l.length&&l[0].ID,n=t&&r,p=s||n||e;this.onTabChange(p||e)}})}},handleError:e=>{e&&this.setState({marketInfoSwitch:!0})}})}),this.getHelmMarketsTab=((e,t)=>{var a=this.props,l=a.dispatch,s=a.match.params.eid,i=this.state.activeTabKey;l({type:"market/fetchHelmMarketsTab",payload:{enterprise_id:s},callback:a=>{if(a&&200===a.status_code){var l=a.filter(e=>{e.name});this.setState({helmTab:Array.isArray(a)?a:[],tabsList:[],helmInfo:l[0]||{}},()=>{var a=[];this.state.helmTab.map(e=>{e.types="helmTab",a.push(e)}),this.setState({tabsList:[...this.state.tabsList,...a],helmInfoSwitch:!0}),(e||t&&i)&&this.onTabChange(e||i)})}},handleError:e=>{e&&this.setState({marketInfoSwitch:!0})}})}),this.getMarkets=(e=>{var t=this.props,a=t.dispatch,l=t.match.params.eid,s=this.state.marketPag,i=Object.assign({},{name:e,enterprise_id:l},s);this.setState({marketLoading:!0}),a({type:"market/fetchMarkets",payload:i,callback:e=>{if(e&&200===e.status_code){var t=Object.assign({},this.state.marketPag,{total:e.total});this.setState({marketLoading:!1,marketList:e.list,marketPag:t})}}})}),this.getHelmAppStore=(e=>{var t=this.props,a=(t.dispatch,t.match.params.eid),l=this.state.helmPag,s=Object.assign({},{name:e,enterprise_id:a},l);this.loadHelmAppStore(s,l)}),this.handleSyncHelmAppStore=(e=>{var t=this.props,a=t.dispatch,l=t.match.params.eid,s=this.state.helmPag,i=Object.assign({},{name:e,enterprise_id:l},s);a({type:"market/syncHelmAppStore",payload:i,callback:e=>{e&&this.loadHelmAppStore(i,s)},handleError:e=>{e&&this.loadHelmAppStore(i,s)}})}),this.loadHelmAppStore=((e,t)=>{var a=this.props.dispatch;a({type:"market/fetchHelmAppStore",payload:e,callback:e=>{e&&200===e.status_code&&this.setState({helmLoading:!1,helmList:e.response_data.data||[],helmPag:{pageSize:t.pageSize,total:e.response_data.total,page:t.page,query:t.query}})}})}),this.checkStoreHub=(()=>{var e=this.props,t=e.dispatch,a=e.match.params.eid;t({type:"market/storehubCheck",payload:{eid:a},callback:e=>{e&&200===e.status_code&&e.bean.remind&&v.default.confirm({title:(0,x.formatMessage)({id:"applicationMarket.confirm.remind"}),cancelText:(0,x.formatMessage)({id:"applicationMarket.confirm.understand"}),okText:(0,x.formatMessage)({id:"applicationMarket.confirm.Deconfiguration"}),onCancel:()=>{},onOk:()=>{t(w.routerRedux.push("/enterprise/".concat(a,"/setting")))},content:(0,x.formatMessage)({id:"applicationMarket.confirm.Docking"})})}})}),this.load=(()=>{this.loadClusters(),this.getApps(),this.getTags(),this.getMarketsTab(!1,!0),this.getHelmMarketsTab(!1,!0),this.checkStoreHub()}),this.loadClusters=(()=>{var e=this.props,t=e.dispatch,a=e.match.params.eid;t({type:"region/fetchEnterpriseClusters",payload:{enterprise_id:a,check_status:"no"},callback:e=>{e&&e.list&&e.list.length&&this.setState({isClusters:!0})}})}),this.handleSearchLocal=(e=>{this.setState({page:1,name:e},()=>{this.getApps()})}),this.handleSearchMarket=(e=>{var t=this.state,a=t.marketPag,l=t.marketInfo,s=Object.assign({},a,{page:1,query:e});this.setState({marketPag:s},()=>{this.getMarkets(l&&l.name)})}),this.handleSearchHelmMarket=(e=>{var t=this.state,a=t.helmPag,l=t.helmInfo,s=Object.assign({},a,{page:1,query:e});this.setState({helmLoading:!0,helmPag:s},()=>{this.handleSyncHelmAppStore(l&&l.name)})}),this.handleOpenEditorMoreTags=(()=>{this.setState({moreTags:!0,editorTags:!0})}),this.handleOpenMoreTags=(e=>{this.setState({moreTags:!0,seeTag:e})}),this.handleCloseMoreTags=(()=>{this.setState({moreTags:!1,editorTags:!1,seeTag:!1})}),this.showOfflineApp=(e=>{this.setState({appInfo:e,deleteApp:!0,bouncedText:(0,x.formatMessage)({id:"applicationMarket.confirm.delete"}),bouncedType:"delete"})}),this.installHelmApp=((e,t)=>{this.setState({appInfo:e,appTypes:t,installHelmApp:!0})}),this.handleOpenDeleteAppMarket=(()=>{this.setState({deleteAppMarket:!0})}),this.handleCloseDeleteAppMarket=(()=>{this.setState({deleteAppMarket:!1})}),this.handleOpenDeleteHelmAppMarket=(()=>{this.setState({deleteHelmAppMarket:!0})}),this.handleCloseDeleteHelmAppMarket=(()=>{this.setState({deleteHelmAppMarket:!1})}),this.handleOkBounced=(e=>{var t=this.state.bouncedType;this.setState({chooseVersion:e.chooseVersion},()=>{"delete"===t?this.setState({deleteApp:!0}):this.handleCloudsUpdate(e.chooseVersion)})}),this.handleDeleteApp=(()=>{var e=this.state.appInfo,t=this.props,a=t.dispatch,l=t.match.params.eid;a({type:"global/deleteAppModel",payload:{enterprise_id:l,app_id:e.app_id},callback:e=>{e&&200===e.status_code&&(M.default.success({message:(0,x.formatMessage)({id:"notification.success.delete"})}),this.handleCancelDelete(),this.getApps())}})}),this.handleDeleteAppMarket=(()=>{var e=this.state.marketInfo;this.setState({deleteAppMarketLoading:!0});var t=this.props,a=t.dispatch,l=t.match.params.eid;a({type:"market/deleteAppMarket",payload:{enterprise_id:l,marketName:e.name},callback:e=>{e&&200===e.status_code&&(this.setState({activeTabKey:"local",marketInfo:!1,deleteAppMarketLoading:!1,tabsList:[]},()=>{this.handleCloseDeleteAppMarket(),this.getMarketsTab(),this.getHelmMarketsTab()}),M.default.success({message:(0,x.formatMessage)({id:"notification.success.delete"})}))}})}),this.handleDeleteHelmAppMarket=(()=>{var e=this.state.helmInfo;this.setState({deleteHelmAppMarketLoading:!0});var t=this.props,a=t.dispatch;t.match.params.eid;a({type:"market/HelmwaRehouseDelete",payload:{repo_name:e.name},callback:e=>{this.setState({activeTabKey:"local",deleteHelmAppMarketLoading:!1},()=>{this.handleCloseDeleteHelmAppMarket(),this.getHelmMarketsTab(),this.getMarketsTab()})}})}),this.handleCancelDelete=(()=>{this.setState({installHelmApp:null,appTypes:null,deleteApp:null,visibles:null,bouncedText:"",bouncedType:"",appInfo:!1})}),this.handlePageChange=(e=>{this.state.page=e,this.getApps()}),this.handleLoadAppDetail=((e,t)=>{var a=e.versions_info&&e.versions_info.length>0&&e.versions_info;a?this.setState({visibles:!0,appInfo:e,bouncedText:t}):this.setState({appInfo:e},()=>{a&&this.handleCloudsUpdate(a[0].version)})}),this.handleCloudsUpdate=(e=>{var t=this.state.appInfo,a=this.props,l=a.dispatch,s=a.match.params.eid;l({type:"global/syncMarketAppDetail",payload:{enterprise_id:s,body:{app_id:t.app_id,app_versions:e}},callback:e=>{e&&200===e.status_code&&(this.handleCancelDelete(),M.default.success({message:(0,x.formatMessage)({id:"notification.success.updates"})}),this.getApps())}})}),this.handleCreateAppModel=(()=>{M.default.success({message:(0,x.formatMessage)({id:"notification.success.setUp"})}),this.getApps(),this.handleCancelAppModel()}),this.handleCreateAppMarket=(e=>{var t=this.state.upAppMarket;M.default.success({message:t?(0,x.formatMessage)({id:"notification.success.edit"}):(0,x.formatMessage)({id:"notification.success.setUp"})}),this.setState({tabsList:[]},()=>{this.getMarketsTab(e),this.getHelmMarketsTab()}),this.handleCancelAppMarket()}),this.handleUpHelmAppMarket=(e=>{M.default.success({message:(0,x.formatMessage)({id:"notification.success.edit"})}),this.setState({tabsList:[]},()=>{this.getMarketsTab(),this.getHelmMarketsTab(e)}),this.handleCancelHelmAppMarket()}),this.handleCancelAppModel=(()=>{this.setState({createAppModel:!1,appInfo:null})}),this.handleOpenCreateAppModel=(()=>{this.setState({createAppModel:!0})}),this.handleOpenUpAppMarket=(()=>{this.setState({upAppMarket:!0})}),this.handleOpenUpHelmAppMarket=(()=>{this.setState({upHelmAppMarket:!0})}),this.handleCancelHelmAppMarket=(()=>{this.setState({upHelmAppMarket:!1})}),this.handleOpencreateAppMarket=(()=>{this.setState({createAppMarket:!0})}),this.handleCancelAppMarket=(()=>{this.setState({createAppMarket:!1,upAppMarket:!1})}),this.handleupDataAppModel=(()=>{M.default.success({message:(0,x.formatMessage)({id:"notification.success.edit"})}),this.getApps(),this.handleCancelupDataAppModel()}),this.handleOpenUpDataAppModel=(e=>{this.setState({appInfo:e,upDataAppModel:!0})}),this.handleAppModel=(e=>{var t=this.props,a=t.dispatch,l=t.match.params.eid;a(w.routerRedux.push("/enterprise/".concat(l,"/shared/app/").concat(e.app_id)))}),this.handleCancelupDataAppModel=(()=>{this.setState({appInfo:null,installHelmApp:!1,appTypes:null,upDataAppModel:!1})}),this.showMarketAppDetail=(e=>{e&&e.app_detail_url?window.open(e.app_detail_url,"_blank"):this.setState({showApp:e,showMarketAppDetail:!0})}),this.hideMarketAppDetail=(()=>{this.setState({showApp:{},showMarketAppDetail:!1})}),this.ModalhandleOk=(()=>{var e=this.props,t=e.dispatch,a=e.match.params.eid;this.setState({goClusters:!1},()=>{t(w.routerRedux.push("/enterprise/".concat(a,"/clusters")))})}),this.handleLists=((e,t,a,l,s,i)=>{var r=a.app_id,n=a.describe,p=a.app_name,o=a.name,d=void 0===o?"":o,c=a.tags,m=a.dev_status,u=a.install_number,h=B.default.fetchSvg("defaulAppImg"),f="marketContent"!==e,M="helmContent"===e,v=this.state,A=v.guideStep,C=v.initShow,E=v.activeTabKey,b=v.marketInfo,y=v.isClusters,S=M&&s&&s.length>0&&s[0],_=b&&b.access_actions&&b.access_actions.length&&b.access_actions.includes("ReadInstall");return L.default.createElement(L.Fragment,null,!C&&"local"!==E&&1===A&&0===i&&this.handleNewbieGuiding({tit:(0,x.formatMessage)({id:"applicationMarket.localMarket.have.title"}),send:!0,configName:"installApp",desc:(0,x.formatMessage)({id:"applicationMarket.localMarket.have.desc"}),nextStep:2,conPosition:{right:0,marginTop:"60px"},svgPosition:{right:30,marginTop:"27px"},handleClick:()=>{this.installHelmApp(a,e)}}),L.default.createElement(R.default,{key:r,stylePro:{margin:"10px"},Cols:L.default.createElement("div",{className:Q.default.h70,onClick:t=>{t.stopPropagation(),"localsContent"===e?this.handleAppModel(a):"marketContent"===e&&this.showMarketAppDetail(a)}},L.default.createElement(g.default,{span:3,style:{display:"flex"}},!M&&L.default.createElement("div",{className:Q.default.lt,onClick:e=>{e.stopPropagation()}},L.default.createElement(k.default,{title:L.default.createElement(x.FormattedMessage,{id:"applicationMarket.localMarket.have.installNumber"})},L.default.createElement("div",{title:u},B.default.nFormatter(u)))),L.default.createElement("div",{className:Q.default.imgs},l?L.default.createElement("img",{src:l,alt:""}):h)),L.default.createElement(g.default,{span:12,className:Q.default.tits},L.default.createElement("div",null,L.default.createElement("p",null,L.default.createElement("a",{onClick:e=>{e.stopPropagation(),this.showMarketAppDetail(a)}},p||d)),L.default.createElement("p",null,L.default.createElement(k.default,{placement:"topLeft",title:S&&S.description||n},S&&S.description||n)))),L.default.createElement(g.default,{span:3,className:Q.default.status},L.default.createElement("div",null,m&&L.default.createElement("p",{className:Q.default.dev_status},m),s&&s.length>0?L.default.createElement("p",{className:Q.default.dev_version},f?s[M?0:s.length-1].version:s[0].app_version):L.default.createElement("p",{className:Q.default.dev_version},L.default.createElement(x.FormattedMessage,{id:"applicationMarket.localMarket.have.versions"})))),L.default.createElement(g.default,{span:4,className:Q.default.tags},c&&c.length>0&&c.map((e,t)=>{return t>2?null:L.default.createElement("div",{key:f?e.tag_id:e,style:{marginRight:"5px"}},f?e.name:e)}),c&&c.length>3&&L.default.createElement("a",{style:{marginLeft:"5px"},onClick:e=>{e.stopPropagation();var t=f?c.map(e=>e.name):c;this.handleOpenMoreTags(t)}},L.default.createElement(x.FormattedMessage,{id:"enterpriseOverview.team.more"}))),L.default.createElement(g.default,{span:2,className:Q.default.tags,style:{justifyContent:"center"}},L.default.createElement("div",{className:Q.default.installBox,style:{background:"#fff"},onClick:t=>{t.stopPropagation(),_&&b&&y||"marketContent"!==e?this.installHelmApp(a,e):y?this.setState({isInStallShow:!0,guideStep:"Jump",showMarketCloudAuth:!0}):this.setState({goClusters:!0})}},B.default.fetchSvg("InstallApp"),L.default.createElement("div",{style:{background:"#fff"}},L.default.createElement(x.FormattedMessage,{id:"applicationMarket.localMarket.have.install"}))))),overlay:t?t(a):null}))}),this.handleNewbieGuiding=(e=>{var t=this.state,a=t.isClusters,l=t.marketInfo,s=e.prevStep,i=e.nextStep,r=e.handleClick,n=void 0===r?()=>{}:r,p=l&&l.access_actions&&l.access_actions.length&&l.access_actions.includes("ReadInstall");return L.default.createElement(_.default,(0,f.default)({},e,{totals:2,handleClose:()=>{this.handleGuideStep("close")},handlePrev:()=>{s&&(1===s&&this.handleCancelupDataAppModel(),this.handleGuideStep(s))},handleNext:()=>{if(i){if(2===i){if(a){if(this.handleGuideStep(i),n(),!p)return this.setState({showCloudMarketAuth:!0}),null}else this.handleGuideStep("Jump");return null}n(),this.handleGuideStep(i)}}}))}),this.handleGuideStep=(e=>{this.setState({guideStep:e})}),this.hideInitShow=(()=>{this.putNewbieGuideConfig("welcome"),this.setState({initShow:!1})}),this.putNewbieGuideConfig=(e=>{var t=this.props.dispatch;t({type:"global/putNewbieGuideConfig",payload:{arr:[{key:e,value:!0}]}})}),this.hideInstallStep=((e,t)=>{var a=this.props,l=(a.dispatch,a.match.params.eid,this.state),s=l.isAuthorize;l.clusters;this.setState({isInStallShow:!1}),e?s&&2==t||1==t?(s&&2==t?this.setState(e=>{var t=e.marketInfo;return{marketInfo:(0,h.default)({},t,{access_actions:["ReadInstall","OnlyRead"]})}}):this.fetchMyTeams(),this.setState({installType:t}),sessionStorage.setItem("isAuthorize",s)):this.setState({showMarketCloudAuth:!0}):this.setState({isInStallShow:!1})}),this.handleOpenInstallApp=((e,t,a,l,s)=>{var i=this.state;i.isInStallShow,i.guideStep;e&&t&&a||"marketContent"!==l?this.installHelmApp(s,l):this.setState({isInStallShow:!0,guideStep:"Jump"})}),this.fetchMyTeams=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=t.props,l=a.dispatch,s=a.match.params.eid,i=t.state.clusters;l({type:"global/fetchMyTeams",payload:{enterprise_id:s,page:1,page_size:1},callback:a=>{if(a&&200===a.status_code){if(!(a&&a.list.length>0))return M.default.warn({message:(0,x.formatMessage)({id:"notification.warn.create_team"})});var s=a.list[0].team_name;e&&s?t.fetchApps(s,!0):s&&l(w.routerRedux.push("/team/".concat(s,"/region/").concat(i[0].region_name,"/create/code")))}}})},this.fetchApps=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=t.props,s=l.dispatch,i=l.match.params.eid,r=t.state.clusters;s({type:"global/fetchEnterpriseApps",payload:{enterprise_id:i,page:1,page_size:1},callback:t=>{if(t&&200===t.status_code){if(!(t&&t.list.length>0))return M.default.warn({message:(0,x.formatMessage)({id:"notification.warn.app"})});var l=t.list[0].ID;a&&l&&e&&s(w.routerRedux.push("/team/".concat(e,"/region/").concat(r[0].region_name,"/apps/").concat(l,"/overview")))}}})},this.onCloseLogin=(e=>{this.setState({isInStallShow:!0,isAuthorize:!0,tabsList:[]},()=>{this.getMarketsTab(e),this.getHelmMarketsTab()})}),this.handleLoadEnterpriseClusters=(e=>{var t=this.props.dispatch;t({type:"region/fetchEnterpriseClusters",payload:{enterprise_id:e},callback:t=>{if(t&&t.list){var a=[];t.list.map((e,t)=>{return e.key="cluster".concat(t),a.push(e),e}),this.setState({clusters:a}),B.default.putClusterInfoLog(e,t.list)}}})}),this.handleChangeType=(e=>{}),this.jump=(()=>{var e=this.props,t=e.dispatch,a=e.match.params.eid;t(w.routerRedux.push("/enterprise/".concat(a,"/shared/import")))}),this.onShowSizeChangeMarket=((e,t)=>{var a=this.state,l=a.marketInfo,s=a.marketPag,i=Object.assign({},s,{page:e,pageSize:t});this.setState({marketPag:i},()=>{this.getMarkets(l&&l.name)})});var a=this.props,l=a.user,s=a.match.params.marketName,i=a.location.query.init,r=a.novices,n=a.enterprise,p=X.default.isPermissions(l,"app_store");this.state={isNewbieGuide:U.default.isEnableNewbieGuide(n),marketPag:{pageSize:10,total:0,page:1,query:""},helmPag:{pageSize:10,total:0,page:1,query:""},guideStep:1,pageSize:10,total:0,page:1,componentList:[],localLoading:!0,marketLoading:!0,helmList:[],helmLoading:!0,appStoreAdmin:p,tagList:[],tags:[],scope:"enterprise",appInfo:!1,visibles:null,bouncedText:"",bouncedType:"",deleteApp:!1,installHelmApp:!1,deleteAppMarket:!1,deleteHelmAppMarket:!1,deleteAppMarketLoading:!1,deleteHelmAppMarketLoading:!1,createAppModel:!1,upDataAppModel:!1,createAppMarket:!1,moreTags:!1,editorTags:!1,seeTag:!1,marketList:[],marketTab:[],helmTab:[],initShow:i&&U.default.handleNewbie(r,"welcome"),activeTabKey:i?"":s||"local",marketInfo:!1,helmInfo:!1,upAppMarket:!1,upHelmAppMarket:!1,showCloudMarketAuth:!1,showApp:{},showMarketAppDetail:!1,appTypes:!1,isClusters:!1,isInStallShow:!0,showMarketCloudAuth:!1,isAuthorize:!1,installType:"1",isStoreCluster:!1,clusters:[],language:"zh-CN"===Z.default.get("language"),tabsList:[],helmInfoSwitch:!1,marketInfoSwitch:!1}}componentDidMount(){var e=this.props,t=e.user,a=e.match.params.eid;a&&this.handleLoadEnterpriseClusters(a),t&&(this.load(),this.hideInitShow())}render(){var e=this.props,t=e.match.params.eid,a=e.upAppMarketLoading,l=this.state,s=l.appStoreAdmin,h=s.isCreateApp,f=s.isEditApp,M=s.isDeleteApp,A=s.isImportApp,C=s.isExportApp,E=s.isCreateAppStore,b=s.isEditAppStore,y=s.isDeleteAppStore,_=l.editorTags,T=l.componentList,w=l.marketList,R=(l.marketTab,l.helmTab,l.localLoading),B=l.marketLoading,U=l.helmLoading,X=l.helmList,Z=l.tagList,ee=l.appInfo,te=l.appTypes,ae=l.visibles,le=l.bouncedText,se=l.showCloudMarketAuth,ie=l.upDataAppModel,re=l.upAppMarket,ne=l.upHelmAppMarket,pe=l.createAppMarket,oe=l.createAppModel,de=l.deleteAppMarket,ce=l.deleteHelmAppMarket,me=l.deleteApp,ue=l.installHelmApp,he=l.moreTags,fe=l.showMarketAppDetail,ge=l.deleteAppMarketLoading,ke=l.deleteHelmAppMarketLoading,Me=l.activeTabKey,ve=l.marketInfo,Ae=l.helmInfo,Ce=l.marketPag,Ee=l.helmPag,be=l.seeTag,ye=(l.guideStep,l.initShow,l.isNewbieGuide,l.isInStallShow,l.showMarketCloudAuth),Se=(l.isAuthorize,l.language,l.tabsList),_e=l.helmInfoSwitch,Te=l.marketInfoSwitch,we=l.goClusters,Le=[{types:"local"}],xe=[...Se,...Le].reverse(),Ie=Z&&Z.length>0&&Z,He=ve&&ve.access_actions&&ve.access_actions.length>0&&ve.access_actions,De=ve&&1==ve.status,Oe=e=>{var a=M&&L.default.createElement(u.default.Item,null,L.default.createElement("a",{onClick:()=>{this.showOfflineApp(e)}},L.default.createElement(x.FormattedMessage,{id:"applicationMarket.localMarket.delete.template"}))),l=f&&L.default.createElement(u.default.Item,null,L.default.createElement("a",{onClick:()=>{this.handleOpenUpDataAppModel(e)}},L.default.createElement(x.FormattedMessage,{id:"applicationMarket.localMarket.edit.template"}))),s=e&&e.versions_info&&e.versions_info.length>0&&L.default.createElement(u.default.Item,null,L.default.createElement(J.default,{app:e,eid:t}));return s||l||a?L.default.createElement(u.default,null,C&&s,l,a):null},Ne={display:"flex",alignItems:"center",padding:"10px 0",margin:"10px 0"},Fe={textAlign:"left",display:"flex",alignItems:"center"},Pe={textAlign:"right"},Ve={textAlign:"right",margin:"0 10px 10px"},ze=L.default.createElement(g.default,{span:9,style:Pe,className:Q.default.btns},A&&L.default.createElement(m.default,{style:{margin:"0 14px 0 10px"},icon:"download",onClick:this.jump},L.default.createElement(x.FormattedMessage,{id:"applicationMarket.localMarket.import"})),h&&L.default.createElement(m.default,{type:"primary",onClick:this.handleOpenCreateAppModel,icon:"plus"},L.default.createElement(x.FormattedMessage,{id:"applicationMarket.localMarket.setup"}))),Re=L.default.createElement("div",null,y&&L.default.createElement(m.default,{onClick:this.handleOpenDeleteAppMarket,style:{marginRight:"22px"},icon:"delete"},L.default.createElement(x.FormattedMessage,{id:"button.delete"})),b&&L.default.createElement(m.default,{type:"primary",onClick:this.handleOpenUpAppMarket,icon:"edit"},L.default.createElement(x.FormattedMessage,{id:"button.edit"}))),qe=L.default.createElement("div",null,L.default.createElement(m.default,{onClick:this.handleOpenDeleteHelmAppMarket,style:{marginRight:"22px"},icon:"delete"},L.default.createElement(x.FormattedMessage,{id:"button.delete"})),L.default.createElement(m.default,{style:{marginRight:"22px"},type:"primary",onClick:this.handleOpenUpHelmAppMarket,icon:"edit"},L.default.createElement(x.FormattedMessage,{id:"button.edit"})),L.default.createElement(m.default,{onClick:()=>{this.handleSearchHelmMarket()}},L.default.createElement(c.default,{type:"reload"}))),Ge=L.default.createElement("div",{className:Q.default.noShared},L.default.createElement("img",{src:I.default}),L.default.createElement("p",null,L.default.createElement(x.FormattedMessage,{id:"applicationMarket.localMarket.nothing.msg"})),L.default.createElement("div",{className:Q.default.btns},h&&L.default.createElement(m.default,{type:"primary",onClick:this.handleOpenCreateAppModel,icon:"plus"},L.default.createElement(x.FormattedMessage,{id:"applicationMarket.localMarket.setup"})),A&&L.default.createElement(m.default,{type:"primary",icon:"download",onClick:this.jump},L.default.createElement(x.FormattedMessage,{id:"applicationMarket.localMarket.import.template"})))),je=e=>L.default.createElement(d.default,{style:{marginTop:"120px"},image:"https://gw.alipayobjects.com/mdn/miniapp_social/afts/img/A*pevERLJC9v0AAAAAAAAAAABjAQAAAQ/original",imageStyle:{height:60},description:L.default.createElement("span",null,e||De?L.default.createElement(x.FormattedMessage,{id:"applicationMarket.confirm.null"}):L.default.createElement(x.FormattedMessage,{id:"applicationMarket.confirm.connected"}))},!e&&!De&&Re),Be=L.default.createElement("div",{style:{padding:"0"}},L.default.createElement(p.default,{style:Ne},L.default.createElement(g.default,{span:15,style:Fe},L.default.createElement($,{style:{width:"250px"},placeholder:(0,x.formatMessage)({id:"applicationMarket.localMarket.placeholder"}),onSearch:this.handleSearchLocal}),L.default.createElement("div",{className:Q.default.serBox},L.default.createElement(o.default.Group,{className:Q.default.setRadioGroup,value:this.state.scope,onChange:this.onChangeRadio},L.default.createElement(o.default.Button,{value:"enterprise"},L.default.createElement(x.FormattedMessage,{id:"applicationMarket.localMarket.radioValue.enterprise"})),L.default.createElement(o.default.Button,{value:"team"},L.default.createElement(x.FormattedMessage,{id:"applicationMarket.localMarket.radioValue.team"}))))),ze),R?L.default.createElement("div",{className:Q.default.example},L.default.createElement(n.default,null)):T&&T.length>0?T.map((e,t)=>{var a=e.pic,l=e.versions_info;return this.handleLists("localsContent",Oe,e,a,l,t)}):Ge,L.default.createElement("div",{style:Ve},Number(this.state.total)>10&&L.default.createElement(r.default,{showQuickJumper:!0,current:this.state.page,pageSize:this.state.pageSize,total:Number(this.state.total),onChange:this.onPageChangeApp,showTotal:e=>"\u5171 ".concat(e," \u6761"),showSizeChanger:!0,onShowSizeChange:this.onPageChangeApp,hideOnSinglePage:Number(this.state.total)<=10}))),Ue=L.default.createElement("div",{style:{padding:"0px"}},De&&L.default.createElement(p.default,{style:Ne},L.default.createElement(g.default,{span:20,style:Fe},L.default.createElement("div",null,L.default.createElement(x.FormattedMessage,{id:"applicationMarket.cloudMarket.msg"}),"\xa0",He&&He.map((e,t)=>{return L.default.createElement("a",null,(0,j.fetchMarketMap)(e),t<He.length-1&&L.default.createElement(i.default,{type:"vertical",className:Q.default.bgc}))}),"\xa0",L.default.createElement(x.FormattedMessage,{id:"applicationMarket.cloudMarket.msgs"})),L.default.createElement($,{style:{width:"400px",marginLeft:"100px"},placeholder:(0,x.formatMessage)({id:"applicationMarket.localMarket.placeholder"}),onSearch:this.handleSearchMarket})),L.default.createElement(g.default,{span:4,style:Pe,className:Q.default.btns},Re)),B?L.default.createElement("div",{className:Q.default.example},L.default.createElement(n.default,null)):w&&w.length>0?w.map((e,t)=>{var a=e.logo,l=e.versions;return this.handleLists("marketContent",null,e,a,l,t)}):je(!1),L.default.createElement("div",{style:Ve},L.default.createElement(r.default,{showQuickJumper:!0,current:Ce.page,pageSize:Ce.pageSize,total:Number(Ce.total),onChange:this.onPageChangeAppMarket,showTotal:e=>"\u5171 ".concat(e," \u6761"),showSizeChanger:!0,onShowSizeChange:this.onPageChangeAppMarket,hideOnSinglePage:Number(Ce.total)<=10}))),Xe=L.default.createElement("div",{style:{padding:"0px 24px"}},L.default.createElement(p.default,{style:Ne},L.default.createElement(g.default,{span:16,style:Fe},L.default.createElement($,{style:{width:"400px"},placeholder:(0,x.formatMessage)({id:"applicationMarket.localMarket.placeholder"}),onSearch:this.handleSearchHelmMarket})),L.default.createElement(g.default,{span:8,style:Pe,className:Q.default.btns},qe)),U?L.default.createElement("div",{className:Q.default.example},L.default.createElement(n.default,null)):X&&X.length>0?X.map((e,t)=>{var a=e.versions;return this.handleLists("helmContent",null,e,a&&a.length>0&&a[0].icon,a,t)}):je(!0),L.default.createElement("div",{style:Ve},L.default.createElement(r.default,{showQuickJumper:!0,current:Ee.page,pageSize:Ee.pageSize,total:Number(Ee.total),onChange:this.onPageChangeAppHelm,showTotal:e=>"\u5171 ".concat(e," \u6761"),showSizeChanger:!0,onShowSizeChange:this.onPageChangeAppHelm,hideOnSinglePage:Number(Ee.total)<=10})));return L.default.createElement(z.default,{sm:1200},L.default.createElement(G.default,{title:L.default.createElement(x.FormattedMessage,{id:"applicationMarket.pageHeaderLayout.title"}),content:L.default.createElement(x.FormattedMessage,{id:"applicationMarket.PageHeaderLayout.content"}),titleSvg:K.default.getPageHeaderSvg("shareAlt",20),isContent:!0},ye&&L.default.createElement(H.default,{eid:t,marketName:ve.name,title:L.default.createElement(x.FormattedMessage,{id:"applicationMarket.AuthCompany.title"}),onCancel:()=>{this.setState({showMarketCloudAuth:!1})},currStep:2,isReload:!0,activeTabKey:Me,onCloseLogin:this.onCloseLogin}),fe&&L.default.createElement(q.default,{onOk:this.hideMarketAppDetail,onCancel:this.hideMarketAppDetail,app:this.state.showApp}),he&&L.default.createElement(W.default,{title:L.default.createElement(x.FormattedMessage,{id:"applicationMarket.TagList.label"}),onOk:this.handleCloseMoreTags,onChangeCheckbox:this.onChangeCheckbox,onCancel:this.handleCloseMoreTags,tagLists:Ie,seeTag:be,checkedValues:this.state.tags,componentList:T,editorTags:_}),me&&L.default.createElement(D.default,{onOk:this.handleDeleteApp,desc:(0,x.formatMessage)({id:"confirmModal.delete.app_template.desc"}),subDesc:(0,x.formatMessage)({id:"confirmModal.delete.app_template.subDesc"}),title:(0,x.formatMessage)({id:"confirmModal.app_template.delete.title"}),onCancel:this.handleCancelDelete}),ue&&L.default.createElement(F.default,{title:L.default.createElement(x.FormattedMessage,{id:"applicationMarket.CreateHelmAppModels.install"}),eid:t,appTypes:te,appInfo:ee,helmInfo:Ae,onOk:this.handleupDataAppModel,onCancel:this.handleCancelupDataAppModel}),de&&L.default.createElement(D.default,{onOk:this.handleDeleteAppMarket,loading:ge,subDesc:(0,x.formatMessage)({id:"confirmModal.delete.strategy.subDesc"}),desc:(0,x.formatMessage)({id:"confirmModal.delete.app_store.desc"}),title:(0,x.formatMessage)({id:"confirmModal.app_store.delete.title"}),onCancel:this.handleCloseDeleteAppMarket}),ce&&L.default.createElement(D.default,{onOk:this.handleDeleteHelmAppMarket,loading:ke,subDesc:(0,x.formatMessage)({id:"confirmModal.delete.strategy.subDesc"}),desc:(0,x.formatMessage)({id:"confirmModal.delete.app_store.desc"}),title:(0,x.formatMessage)({id:"confirmModal.helm_store.delete.title"}),onCancel:this.handleCloseDeleteHelmAppMarket}),oe&&L.default.createElement(N.default,{title:L.default.createElement(x.FormattedMessage,{id:"applicationMarket.localMarket.setup"}),eid:t,onOk:this.handleCreateAppModel,onCancel:this.handleCancelAppModel}),pe&&L.default.createElement(H.default,{isHelm:!0,eid:t,title:L.default.createElement(x.FormattedMessage,{id:"applicationMarket.localMarket.add_app"}),onOk:this.getHelmMarketsTab,onOkMarketsTab:this.getMarketsTab,onCancel:this.handleCancelAppMarket,currStep:1}),re&&L.default.createElement(O.default,{title:L.default.createElement(x.FormattedMessage,{id:"applicationMarket.CreateAppMarket.title"}),eid:t,loading:a,marketInfo:ve,onOk:this.handleCreateAppMarket,onCancel:this.handleCancelAppMarket}),ne&&L.default.createElement(V.default,{title:L.default.createElement(x.FormattedMessage,{id:"applicationMarket.HelmForm.title",values:{name:Ae.name}}),eid:t,data:Ae,onOk:this.handleUpHelmAppMarket,onCancel:this.handleCancelHelmAppMarket}),ie&&L.default.createElement(N.default,{title:L.default.createElement(x.FormattedMessage,{id:"applicationMarket.localMarket.edit_app"}),eid:t,appInfo:ee,onOk:this.handleupDataAppModel,onCancel:this.handleCancelupDataAppModel}),ae&&L.default.createElement(P.default,{appInfo:ee,bouncedText:le,onOk:this.handleOkBounced,onCancel:this.handleCancelDelete,onCheckedValues:this.onChangeBounced}),se&&L.default.createElement(H.default,{eid:t,marketName:ve.name,title:L.default.createElement(x.FormattedMessage,{id:"applicationMarket.AuthCompany.title_one"}),onCancel:()=>{this.setState({showCloudMarketAuth:!1})},currStep:2}),we&&L.default.createElement(v.default,{title:(0,x.formatMessage)({id:"topology.Topological.title"}),visible:we,onOk:this.ModalhandleOk,onCancel:()=>{this.setState({goClusters:!1})}},L.default.createElement("p",null,(0,x.formatMessage)({id:"applicationMarket.localMarket.installclusters"})),L.default.createElement("p",null,(0,x.formatMessage)({id:"applicationMarket.localMarket.isInstallclusters"}))),_e&&Te?L.default.createElement(S.default,{activeKey:Me,className:Q.default.setTabs,onChange:this.onTabChange,type:"card"},xe&&xe.length>0&&xe.map(e=>{var t=e.types;if("local"==t)return L.default.createElement(Y,{tab:L.default.createElement("span",{className:Q.default.verticalCen},L.default.createElement(x.FormattedMessage,{id:"applicationMarket.localMarket.title"})),key:"local"},L.default.createElement("div",{style:{display:"block",position:"relative",overflow:"hidden"}},Be));if("marketTab"==t){var a=e.ID,l=e.alias,s=e.name;return L.default.createElement(Y,{tab:L.default.createElement("span",{className:Q.default.verticalCen},l||s),key:a},Ue)}var i=e.name;return L.default.createElement(Y,{tab:L.default.createElement("span",{className:Q.default.verticalCen},i),key:i},Xe)}),E&&L.default.createElement(Y,{tab:L.default.createElement(k.default,{placement:"top",title:L.default.createElement(x.FormattedMessage,{id:"applicationMarket.addMarket.tooltip.title"})},L.default.createElement(c.default,{type:"plus",className:Q.default.addSvg})),key:"add"})):L.default.createElement(n.default,{style:{height:500,width:"100%",padding:"200px"}})))}},b=y))||b);t.default=ee},pSit:function(e,t,a){"use strict";var l=a("g09b"),s=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var i=l(a("kLXV"));a("y8nQ");var r,n,p,o=l(a("Vl3Y")),d=a("MuoO"),c=s(a("q1tI")),m=l(a("e6Ls")),u=l(a("xlPe")),h=(r=o.default.create(),n=(0,d.connect)(),r(p=n(p=class extends c.PureComponent{render(){var e=this.props,t=e.onCancel,a=e.title,l=e.data,s=void 0===l?{}:l,r=e.onOk,n=e.loading,p=e.eid;return c.default.createElement(i.default,{title:a,visible:!0,className:m.default.TelescopicModal,onCancel:t,confirmLoading:n||!1,footer:null},c.default.createElement(u.default,{onCancel:t,onOk:r,data:s,eid:p,isEditor:!0}))}})||p)||p),f=h;t.default=f},zrlW:function(e,t,a){"use strict";var l=a("tAuX"),s=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r,n,p=a("MuoO"),o=l(a("q1tI")),d=a("LLXN"),c=s(a("Qwvg")),m=(i=(0,p.connect)(e=>{var t=e.user;return{currentUser:t.currentUser}}),i((n=class extends o.PureComponent{constructor(e){super(e),this.setIsExporting=(e=>{this.setState({is_exporting:e})}),this.hideAppExport=(()=>{this.setState({showExporterApp:!1})}),this.showAppExport=(()=>{this.setState({showExporterApp:!0})}),this.state={is_exporting:!1,showExporterApp:!1}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){var e=this.props,t=e.eid,a=e.app;return o.default.createElement(o.Fragment,null,o.default.createElement("a",{onClick:this.showAppExport,style:{marginRight:8}},(0,d.formatMessage)({id:"applicationMarket.localMarket.export_app"}),this.state.is_exporting?"".concat((0,d.formatMessage)({id:"applicationMarket.localMarket.in_export"})):""),this.state.showExporterApp&&o.default.createElement(c.default,{eid:t,setIsExporting:this.setIsExporting,app:a,onOk:this.hideAppExport,onCancel:this.hideAppExport}))}},r=n))||r);t.default=m}}]);