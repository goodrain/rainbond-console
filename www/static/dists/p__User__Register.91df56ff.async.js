(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[65],{"B/l1":function(e,t,a){"use strict";var r=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var s=r(a("2/Rp"));a("5NDa");var d=r(a("5rEg"));a("/xke");var u=r(a("TeRw"));a("OaEy");var n=r(a("2fM7"));a("y8nQ");var i,o,f,m,p=r(a("Vl3Y")),c=a("MuoO"),g=a("7DNP"),h=l(a("q1tI")),w=p.default.Item,E=n.default.Option,y=(i=(0,c.connect)(),o=p.default.create(),i(f=o((m=class extends h.Component{constructor(e){super(e),this.handleSubmit=(e=>{e.preventDefault();var t=this.props,a=t.form,r=t.dispatch;a.validateFields({force:!0},(e,t)=>{e||(this.setState({loading:!0}),r({type:"user/fetchResetPassword",payload:t,callback:()=>{u.default.success({message:"\u5bc6\u7801\u91cd\u7f6e\u6210\u529f"}),this.setState({loading:!1}),r(g.routerRedux.push("/user/login"))},handleError:e=>{u.default.error({message:e.data.msg_show}),this.setState({loading:!1})}}))})}),this.checkNewPassword=((e,t,a)=>{if(!t)return a("\u8bf7\u8f93\u5165\u65b0\u5bc6\u7801");if(t&&t.length<8)a("\u5bc6\u7801\u957f\u5ea6\u81f3\u5c11\u4e3a8\u4f4d");else if(t&&t.length>16)a("\u6700\u5927\u957f\u5ea616\u4f4d");else{var r=new RegExp(/^(?![a-zA-Z]+$)(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/);r.test(t)||a("\u5bc6\u7801\u5fc5\u987b\u5305\u542b\u6570\u5b57,\u5b57\u6bcd,\u7279\u6b8a\u5b57\u7b26")}a()}),this.checkComfirmPassword=((e,t,a)=>{var r=this.props.form;e&&"repeat_password"===e.field&&t&&t!==r.getFieldValue("new_password")?a("\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u5339\u914d!"):a()}),this.state={passwordTimeInfo:[{id:36500,timer:"\u65e0\u9650\u5236"},{id:30,timer:"30\u5929"},{id:90,timer:"90\u5929"}],loading:!1}}render(){var e=this.props.form,t=this.state.passwordTimeInfo,a=e.getFieldDecorator;return h.default.createElement(h.default.Fragment,null,h.default.createElement(p.default,{onSubmit:this.handleSubmit},h.default.createElement(w,null,a("username",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d!"},{min:3,message:"\u6700\u5c0f\u957f\u5ea63\u4f4d"},{max:24,message:"\u6700\u5927\u957f\u5ea624\u4f4d"},{pattern:/^[a-zA-Z0-9_\-]+$/,message:"\u53ea\u652f\u6301\u5b57\u6bcd\u3001\u6570\u5b57\u3001_\u548c-\u7ec4\u5408"}]})(h.default.createElement(d.default,{autoComplete:"off",size:"large",placeholder:"\u7528\u6237\u540d"}))),h.default.createElement(w,null,a("password",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u65e7\u5bc6\u7801"}]})(h.default.createElement(d.default,{autoComplete:"off",size:"large",placeholder:"\u8bf7\u8f93\u5165\u65e7\u5bc6\u7801",type:"password"}))),h.default.createElement(w,null,a("new_password",{rules:[{validator:this.checkNewPassword}]})(h.default.createElement(d.default,{autoComplete:"off",size:"large",placeholder:"\u8bf7\u8f93\u5165\u65b0\u5bc6\u7801",type:"password"}))),h.default.createElement(w,null,a("repeat_password",{rules:[{required:!0,message:"\u8bf7\u786e\u8ba4\u5bc6\u7801"},{validator:this.checkComfirmPassword}]})(h.default.createElement(d.default,{autoComplete:"off",size:"large",placeholder:"\u8bf7\u786e\u8ba4\u5bc6\u7801",type:"password"}))),h.default.createElement(w,null,a("password_expiration_time",{initialValue:90,rules:[{required:!0,message:"\u8bf7\u8bbe\u7f6e\u5bc6\u7801\u8fc7\u671f\u65f6\u95f4"}]})(h.default.createElement(n.default,{placeholder:"\u8bf7\u9009\u62e9\u5bc6\u7801\u8fc7\u671f\u65f6\u95f4",size:"large"},t&&t.map(e=>h.default.createElement(E,{key:e.id,value:e.id},e.timer))))),h.default.createElement(w,null,h.default.createElement(s.default,{size:"large",type:"primary",htmlType:"submit",loading:this.state.loading,style:{width:"50%"}},"\u91cd\u7f6e"),h.default.createElement(g.Link,{to:"/user/login",style:{float:"right"}},"\u8fd4\u56de\u767b\u5f55\u9875\u9762"))))}},f=m))||f)||f),v=y;t.default=v},cq3J:function(e,t,a){"use strict";var r=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("/xke");var s,d,u,n=r(a("TeRw")),i=r(a("p0pE")),o=a("MuoO"),f=a("7DNP"),m=l(a("q1tI")),p=r(a("AklW")),c=r(a("mWxT")),g=r(a("5WY0")),h=r(a("dYZ0")),w=r(a("B/l1")),E=(s=(0,o.connect)(e=>{var t=e.user,a=e.global;return{register:t.register,rainbondInfo:a.rainbondInfo,isRegist:a.isRegist}}),s((u=class extends m.Component{constructor(){super(...arguments),this.handleSubmit=(e=>{var t=this.props.dispatch;t({type:"user/register",payload:(0,i.default)({},e),handleError:e=>{e&&e.data&&e.data.code&&e.data.code<600&&e.data.msg_show?n.default.warning({message:e.data.msg_show}):p.default.handleCloudAPIError(e)}})})}render(){var e=this.props,t=e.isRegist,a=e.dispatch,r=e.rainbondInfo,l=e.location;if(!t&&"resetpassword"!==l.query.type)return a(f.routerRedux.replace("/user/login")),null;var s=!c.default.fetchIsFirstRegist(r);return m.default.createElement("div",{className:g.default.main,style:{marginTop:"37px"}},l.query&&("register"===l.query.type||!l.query.type)&&m.default.createElement(m.default.Fragment,null,m.default.createElement("h3",null,s?"\u7ba1\u7406\u5458\u6ce8\u518c":"\u7528\u6237\u6ce8\u518c"),m.default.createElement(h.default,{onSubmit:this.handleSubmit,type:"register"})),l.query&&"resetpassword"===l.query.type&&m.default.createElement(m.default.Fragment,null,m.default.createElement("h3",null,"\u91cd\u7f6e\u5bc6\u7801"),m.default.createElement(w.default,null)))}},d=u))||d);t.default=E}}]);