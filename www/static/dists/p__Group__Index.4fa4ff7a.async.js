(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[59],{"06/0":function(e,t,a){"use strict";var l=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var n,s,r,d=l(a("bx4M")),o=l(a("jehZ")),c=l(a("p0pE")),u=i(a("q1tI")),p=a("MuoO"),g=a("7DNP"),m=l(a("51sS")),I=l(a("QDog")),h=l(a("DxSl")),C=l(a("/BFj")),f=(n=(0,p.connect)(e=>{var t=e.user,a=e.global;return{currUser:t.currentUser,groups:a.groups}}),n((r=class extends u.PureComponent{constructor(e){super(e),this.onAddGroup=(()=>{this.setState({addGroup:!0})}),this.cancelAddGroup=(()=>{this.setState({addGroup:!1})}),this.handleAddGroup=(e=>{var t=this.props.form.setFieldsValue;this.props.dispatch({type:"application/addGroup",payload:(0,c.default)({team_name:I.default.getCurrTeamName()},e),callback:e=>{e&&this.props.dispatch({type:"global/fetchGroups",payload:{team_name:I.default.getCurrTeamName(),region_name:I.default.getCurrRegionName()},callback:()=>{t({group_id:e.group_id}),this.cancelAddGroup()}})}})}),this.hideShowKey=(()=>{this.setState({showKey:!1})}),this.handleSubmit=((e,t)=>{var a=this.props,l=(a.form,a.dispatch),i=I.default.getCurrTeamName(),n=I.default.getCurrRegionName();l({type:"createApp/createJarWarFormSubmit",payload:(0,c.default)({region_name:n,team_name:i,event_id:t},e),callback:e=>{var a=e&&e.bean.service_alias;this.props.setPare(t),this.props.handleType&&"Service"===this.props.handleType?this.props.handleServiceGetData(a):l(g.routerRedux.push("/team/".concat(i,"/region/").concat(n,"/create/create-check/").concat(a,"?event_id=").concat(t)))}})}),this.state={codeType:"Git",showUsernameAndPass:!1,showKey:!1,addGroup:!1}}render(){var e=decodeURIComponent(this.props.handleType&&"Service"===this.props.handleType?"":this.props.match.params.image||"");return u.default.createElement(d.default,null,u.default.createElement(C.default,null),u.default.createElement("div",{className:m.default.formWrap,style:{width:this.props.handleType&&"Service"===this.props.handleType?"auto":"500px"}},u.default.createElement(h.default,(0,o.default)({data:{docker_cmd:e||""},onSubmit:this.handleSubmit},this.props))))}},s=r))||s);t.default=f},"0fGy":function(e,t,a){"use strict";var l=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var n=l(a("bx4M"));a("g9YV");var s=l(a("wCAj"));a("y8nQ");var r=l(a("Vl3Y"));a("5NDa");var d=l(a("5rEg"));a("qVdP");var o=l(a("jsC+"));a("Pwec");var c=l(a("CtXQ"));a("lUTK");var u=l(a("BvKs"));a("P2fV");var p=l(a("NJEC"));a("+L6B");var g=l(a("2/Rp"));a("Awhp");var m=l(a("KrTs"));a("5Dmo");var I=l(a("3S7+"));a("/xke");var h,C,f,A=l(a("TeRw")),v=a("MuoO"),y=a("7DNP"),N=l(a("wd/R")),M=i(a("q1tI")),b=l(a("6JQQ")),S=l(a("movk")),D=a("xpXo"),E=l(a("lpA0")),Z=l(a("QDog")),T=l(a("VJda")),w=(h=(0,v.connect)(e=>{var t=e.global,a=e.loading;return{groups:t.groups,batchMoveLoading:a.effects["appControl/putBatchMove"],reStartLoading:a.effects["appControl/putReStart"],startLoading:a.effects["appControl/putStart"],stopLoading:a.effects["appControl/putStop"]}},null,null,{pure:!1}),h((f=class extends M.Component{constructor(e){super(e),this.onSelectChange=(e=>{this.setState({selectedRowKeys:e})}),this.updateApp=(()=>{this.timer&&clearInterval(this.timer),this.loadComponents();var e=this.props.clearTime;this.timer=setInterval(()=>{e||this.loadComponents()},5e3)}),this.loadComponents=(()=>{var e=this.props,t=e.dispatch,a=e.groupId,l=this.state,i=l.current,n=l.pageSize,s=l.query,r=l.sortValue,d=l.orderValue;t({type:"application/fetchApps",payload:{team_name:Z.default.getCurrTeamName(),region_name:Z.default.getCurrRegionName(),group_id:a,page:i,page_size:n,query:s,sort:r,order:d},callback:e=>{e&&200===e.status_code&&this.setState({apps:e.list||[],total:e.total||0,tableDataLoading:!1})}})}),this.deleteData=(()=>{var e=this.props,t=e.dispatch,a=e.groupId,l=this.state,i=l.current,n=l.pageSize,s=l.query;t({type:"application/fetchApps",payload:{team_name:Z.default.getCurrTeamName(),region_name:Z.default.getCurrRegionName(),group_id:a,page:i,page_size:n,query:s},callback:e=>{e&&200===e.status_code&&this.setState({apps:e.list||[],total:e.total||0},()=>{this.handleBatchDeletes(),this.hideMoveGroup()})}})}),this.handleOperation=((e,t)=>{var a=this.props.dispatch,l={putReStart:"\u64cd\u4f5c\u6210\u529f\uff0c\u91cd\u542f\u4e2d",putStart:"\u64cd\u4f5c\u6210\u529f\uff0c\u542f\u52a8\u4e2d",putStop:"\u64cd\u4f5c\u6210\u529f\uff0c\u5173\u95ed\u4e2d"};a({type:"appControl/".concat(e),payload:{team_name:Z.default.getCurrTeamName(),app_alias:t.service_alias},callback:t=>{t&&A.default.success({message:l[e]})}})}),this.handleOperationState=(e=>{this.setState({operationState:e})}),this.handleBatchOperation=(e=>{var t=this.getSelectedKeys(),a={stop:"\u6279\u91cf\u5173\u95ed\u4e2d",start:"\u6279\u91cf\u542f\u52a8\u4e2d",restart:"\u6279\u91cf\u91cd\u542f\u4e2d",upgrade:"\u6279\u91cf\u66f4\u65b0\u4e2d",deploy:"\u6279\u91cf\u6784\u5efa\u4e2d"};(0,D.batchOperation)({action:e,team_name:Z.default.getCurrTeamName(),serviceIds:t&&t.join(",")}).then(t=>{this.handleOperationState(!1),t&&a[e]&&A.default.success({message:a[e]})})}),this.handleBatchDelete=(()=>{var e=this.getSelected();this.setState({batchDeleteApps:e,batchDeleteShow:!0})}),this.hideBatchDelete=(()=>{this.deleteData(),this.updateGroupMenu()}),this.handleBatchDeletes=(()=>{this.setState({batchDeleteApps:[],batchDeleteShow:!1,selectedRowKeys:[]})}),this.updateGroupMenu=(()=>{this.props.dispatch({type:"global/fetchGroups",payload:{team_name:Z.default.getCurrTeamName(),region_name:Z.default.getCurrRegionName()}})}),this.handleBatchMove=(e=>{var t=this.getSelectedKeys(),a=this.props.dispatch;a({type:"appControl/putBatchMove",payload:{team_name:Z.default.getCurrTeamName(),serviceIds:t.join(","),move_group_id:e},callback:e=>{e&&(A.default.success({message:"\u6279\u91cf\u79fb\u52a8\u4e2d"}),this.hideBatchDelete())}})}),this.hideMoveGroup=(()=>{this.setState({moveGroupShow:!1})}),this.showBatchMove=(()=>{this.setState({moveGroupShow:!0})}),this.CanBatchOperation=(()=>{var e=this.getSelected();return e&&e.length>0}),this.handelChange=(e=>{this.setState({changeQuery:e.target.value})}),this.handleSearch=(()=>{this.setState({tableDataLoading:!0,current:1,query:this.state.changeQuery},()=>{this.updateApp()})}),this.handleTableChange=((e,t,a)=>{a&&a.field&&"status_cn"==a.field?this.setState({sortValue:1,orderValue:a.order,tableDataLoading:!0},()=>{this.loadComponents()}):a&&a.field&&"min_memory"==a.field?this.setState({sortValue:2,orderValue:a.order,tableDataLoading:!0},()=>{this.loadComponents()}):a&&a.field&&"update_time"==a.field?this.setState({sortValue:3,orderValue:a.order,tableDataLoading:!0},()=>{this.loadComponents()}):this.setState({sortValue:1,orderValue:"descend",tableDataLoading:!0},()=>{this.loadComponents()})}),this.state={selectedRowKeys:[],apps:[],current:1,total:0,pageSize:10,moveGroupShow:!1,batchDeleteApps:[],batchDeleteShow:!1,operationState:!1,query:"",changeQuery:"",tableDataLoading:!0,sortValue:1,orderValue:"descend"}}componentDidMount(){this.updateApp(),document.querySelector(".ant-table-footer").setAttribute("style","position:absolute;background:#fff")}shouldComponentUpdate(){return!0}componentWillUnmount(){clearInterval(this.timer),this.props.dispatch({type:"application/clearApps"})}getSelectedKeys(){var e=this.getSelected();return e.map(e=>e.service_id)}getSelected(){var e=this.state.selectedRowKeys,t=e.map(e=>this.state.apps[e]);return t}render(){var e=this.props,t=e.componentPermissions,a=t.isStart,l=t.isRestart,i=t.isStop,h=t.isDelete,C=t.isEdit,f=t.isUpdate,A=t.isConstruct,v=e.batchMoveLoading,D=e.reStartLoading,w=e.startLoading,j=e.stopLoading,G=e.groupId,P=e.groups,k=this.state,x=k.selectedRowKeys,z=k.current,_=k.total,L=k.apps,R=k.pageSize,V=k.batchDeleteShow,W=k.batchDeleteApps,B=k.moveGroupShow,J=k.operationState,O=k.tableDataLoading,X={selectedRowKeys:x,onChange:this.onSelectChange},Y={pageSize:R,current:z,total:_,showSizeChanger:!0,onChange:e=>{this.setState({current:e,selectedRowKeys:[]},()=>{this.loadComponents()})},onShowSizeChange:(e,t)=>{this.setState({current:e,pageSize:t},()=>{this.loadComponents()})}},H=[{title:"\u7ec4\u4ef6\u540d\u79f0",dataIndex:"service_cname",render:(e,t)=>M.default.createElement(y.Link,{to:"/team/".concat(Z.default.getCurrTeamName(),"/region/").concat(Z.default.getCurrRegionName(),"/components/").concat(t.service_alias,"/overview")}," ",t.service_source&&"third_party"===t.service_source?M.default.createElement("span",null,M.default.createElement(I.default,{title:"\u7b2c\u4e09\u65b9\u7ec4\u4ef6"},M.default.createElement("span",{style:{borderRadius:"50%",height:"20px",width:"20px",display:"inline-block",background:"#1890ff",verticalAlign:"top",marginRight:"3px"}},M.default.createElement("span",{style:{display:"block",color:"#FFFFFF",height:"20px",lineHeight:"20px",textAlign:"center"}},"3")),e)):M.default.createElement("span",null,e)," ")},{title:"\u5185\u5b58",dataIndex:"min_memory",sorter:!0,render:(e,t)=>M.default.createElement("span",null,t.service_source&&"third_party"===t.service_source?"-":"".concat(e,"MB"))},{title:"\u72b6\u6001",dataIndex:"status_cn",sorter:!0,render:(e,t)=>t.service_source&&"third_party"===t.service_source?M.default.createElement(m.default,{status:E.default.appStatusToBadgeStatus(t.status),text:"\u8fd0\u884c\u4e2d"===e?"\u5065\u5eb7":"\u8fd0\u884c\u5f02\u5e38"===e?"\u4e0d\u5065\u5eb7":"\u5df2\u5173\u95ed"===e?"\u4e0b\u7ebf":e}):M.default.createElement(m.default,{status:E.default.appStatusToBadgeStatus(t.status),text:e})},{title:"\u66f4\u65b0\u65f6\u95f4",dataIndex:"update_time",sorter:!0,render:e=>(0,N.default)(e).locale("zh-cn").format("YYYY-MM-DD HH:mm:ss")},{title:"\u64cd\u4f5c",dataIndex:"action",render:(e,t)=>M.default.createElement(M.Fragment,null,t.service_source&&"third_party"!==t.service_source&&M.default.createElement(M.Fragment,null,l&&M.default.createElement(p.default,{title:"\u786e\u8ba4\u8981\u91cd\u542f\u8be5\u7ec4\u4ef6\u5417\uff1f",onConfirm:()=>{this.handleOperation("putReStart",t)}},M.default.createElement(g.default,{type:"link"},"\u91cd\u542f")),a&&M.default.createElement(p.default,{title:"\u786e\u8ba4\u8981\u542f\u52a8\u8be5\u7ec4\u4ef6\u5417\uff1f",onConfirm:()=>{this.handleOperation("putStart",t)}},M.default.createElement(g.default,{type:"link"},"\u542f\u52a8")),i&&M.default.createElement(p.default,{title:"\u786e\u8ba4\u8981\u5173\u95ed\u8be5\u7ec4\u4ef6\u5417\uff1f",onConfirm:()=>{this.handleOperation("putStop",t)}},M.default.createElement(g.default,{type:"link"},"\u5173\u95ed"))))}],U=[{permissions:A,name:"\u6784\u5efa",action:"deploy"},{permissions:f,name:"\u66f4\u65b0",action:"upgrade"},{permissions:l,name:"\u91cd\u542f",action:"restart"},{permissions:i,name:"\u5173\u95ed",action:"stop"},{permissions:a,name:"\u542f\u52a8",action:"start"},{permissions:C,name:"\u79fb\u52a8",action:!1,customMethods:this.showBatchMove},{permissions:h,name:"\u5220\u9664",action:!1,customMethods:this.handleBatchDelete}],Q=M.default.createElement(u.default,null,U.map(e=>{var t=e.permissions,a=e.name,l=e.action,i=e.customMethods;return t&&M.default.createElement(u.default.Item,{style:{textAlign:"center"}},M.default.createElement("a",{loading:J===l&&J,onClick:()=>{l?(this.handleOperationState(l),this.handleBatchOperation(l)):i()}},a))})),F=M.default.createElement("div",{className:T.default.tableList},M.default.createElement("div",{className:T.default.tableListOperator},M.default.createElement(o.default,{overlay:Q,trigger:["click"],placement:"topCenter",disabled:!this.CanBatchOperation()},M.default.createElement(g.default,{style:{padding:"8px 16px"}},"\u6279\u91cf\u64cd\u4f5c ",M.default.createElement(c.default,{type:"down"})))));return M.default.createElement("div",null,M.default.createElement(n.default,{style:{minHeight:400},bordered:!1,bodyStyle:{padding:"10px 10px"}},M.default.createElement(r.default,{layout:"inline",style:{marginBottom:"10px"}},M.default.createElement(r.default.Item,null,M.default.createElement(d.default,{style:{width:250},placeholder:"\u8bf7\u641c\u7d22\u7ec4\u4ef6",onChange:this.handelChange,onPressEnter:this.handleSearch})),M.default.createElement(r.default.Item,null,M.default.createElement(g.default,{type:"primary",onClick:this.handleSearch,icon:"search"},"\u641c\u7d22"))),M.default.createElement(s.default,{pagination:Y,rowSelection:X,onChange:this.handleTableChange,columns:H,loading:D||w||j||O,dataSource:L||[],footer:()=>F}),V&&M.default.createElement(S.default,{batchDeleteApps:W,onCancel:this.hideBatchDelete,onOk:this.hideBatchDelete}),B&&M.default.createElement(b.default,{loading:v,currGroupID:G,groups:P,onOk:this.handleBatchMove,onCancel:this.hideMoveGroup})))}},C=f))||C);t.default=w},"3jFV":function(e,t,a){"use strict";var l=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var n=l(a("kLXV"));a("T2oS");var s=l(a("W9HT"));a("5Dmo");var r=l(a("3S7+"));a("5NDa");var d=l(a("5rEg"));a("sRBo");var o=l(a("kaz8"));a("14J3");var c=l(a("BMrR"));a("jCWc");var u=l(a("kPKH")),p=l(a("jehZ"));a("+L6B");var g=l(a("2/Rp"));a("/xke");var m=l(a("TeRw")),I=l(a("p0pE"));a("OaEy");var h=l(a("2fM7"));a("y8nQ");var C,f,A,v,y=l(a("Vl3Y")),N=a("CC/n"),M=a("DrY4"),b=a("MuoO"),S=a("7DNP"),D=i(a("q1tI")),E=l(a("lpA0")),Z=l(a("QDog")),T=l(a("qCJ4")),w=l(a("e6Ls")),j=l(a("Kia0")),G=y.default.Item,P=h.default.Option,k=(C=y.default.create(),f=(0,b.connect)(e=>{var t=e.user,a=e.enterprise,l=e.application;return{currentUser:t.currentUser,currentEnterprise:a.currentEnterprise,groupDetail:l.groupDetail||{}}}),C(A=f((v=class extends D.PureComponent{constructor(e){super(e),this.onAddGroup=(()=>{this.setState({addGroup:!0})}),this.onSelectChange=(e=>{this.handleOpenLoging();var t=this.props.form,a=this.state.userTeamList,l=t.setFieldsValue,i=a.filter(t=>t.name===e);i&&(i.length>0?this.fetchTeamApps(i[0].value[0],i[0].value[1]):(this.handleCloseLoging(),l({apps:""})))}),this.onGroupChange=(e=>{var t=this.state.checkAllList;this.setState({checkedList:e,indeterminate:!!e.length&&e.length<t.length,checkAll:e.length===t.length})}),this.onCheckAllChange=(e=>{var t=this.state.checkAllList;this.setState({checkedList:e.target.checked?t:[],indeterminate:!1,checkAll:e.target.checked})}),this.getUserTeams=(()=>{var e=this.props,t=e.dispatch,a=e.currentEnterprise;t({type:"global/fetchMyTeams",payload:{enterprise_id:a.enterprise_id,page:1,page_size:999},callback:e=>{if(e&&200===e.status_code){var t=e.list,a=[];t&&t.length>0&&t.map(e=>{e.region_list.map(t=>{var l={name:"".concat(e.team_alias," | ").concat(t.region_alias),value:[e.team_name,t.region_name]};a.push(l)})}),this.setState({userTeamList:a})}}})}),this.handleOpenLoging=(()=>{this.setState({Loading:!0,loading:!0})}),this.handleCloseLoging=(()=>{this.setState({Loading:!1,loading:!1})}),this.cancelAddGroup=(()=>{this.setState({addGroup:!1})}),this.fetchCopyComponent=(()=>{var e=this.props,t=e.dispatch,a=e.groupDetail;t({type:"application/fetchCopyComponent",payload:{tenantName:Z.default.getCurrTeamName(),group_id:a.app_id},callback:e=>{if(e&&200===e.status_code){var t=e.list,a=[];t&&t.length>0&&t.map((e,t)=>{a.push(t)}),this.setState({checkAllList:a,checkedList:a,dataSource:e.list,loading:!1,Loading:!1})}}})}),this.handleAddGroup=(e=>{var t=this.props.form.getFieldValue,a=this.state.userTeamList,l=t("teamRegion"),i=a.filter(e=>e.name===l),n="",s="";i.length>0&&(n=i&&i[0].value[0],s=i&&i[0].value[1]),this.handleOpenLoging(),(0,N.addGroup)((0,I.default)({team_name:n||Z.default.getCurrTeamName(),region_name:s||Z.default.getCurrRegionName()},e)).then(e=>{e&&(this.fetchTeamApps(n,s,e.bean.group_id),this.cancelAddGroup())}).finally(()=>{this.handleCloseLoging()})}),this.fetchTeamApps=((e,t,a)=>{var l=this.props.form,i=l.setFieldsValue;(0,M.getTeamRegionGroups)({query:"",team_name:e||Z.default.getCurrTeamName(),region_name:t||Z.default.getCurrRegionName(),noModels:!0}).then(t=>{var l=t&&t.list||[];e&&i({apps:a||(l.length>0?l[0].group_id:"")}),this.setState({apps:l}),this.handleCloseLoging()}).catch(()=>{this.handleCloseLoging()})}),this.handleSubmit=(()=>{var e=this.state.checkedList;this.props.form.validateFields((t,a)=>{t||(e&&e.length>20?m.default.warning({message:"\u5e94\u7528\u590d\u5236\u6700\u591a20\u4e2a\u7ec4\u4ef6"}):(this.setState({Loading:!0}),this.AddCopyTeamApps(a)))})}),this.AddCopyTeamApps=(e=>{var t=this.props,a=t.dispatch,l=t.groupDetail,i=t.onCancel,n=this.state,s=n.dataSource,r=n.checkedList,d=n.userTeamList,o={},c=e.apps,u=e.teamRegion;o.tar_group_id=c;var p=d.filter(e=>e.name===u);o.tar_team_name=p&&p[0].value[0],o.tar_region_name=p&&p[0].value[1];var g=[];r.map(e=>{var t=s[e],a=t.service_id,l=t.build_source,i=l.code_version,n=l.version,r=E.default.isCodeAppByBuildSource(l),d=r?i:n,o={service_id:a,change:{build_source:{version:d}}};g.push(o)}),o.services=g,a({type:"application/addCopyTeamApps",payload:(0,I.default)({tenantName:Z.default.getCurrTeamName(),group_id:l.app_id},o),callback:e=>{if(this.handleCloseLoading(),e&&200===e.status_code){m.default.success({message:"\u590d\u5236\u6210\u529f"});var t=e.bean,l=t.tar_team_name,n=t.tar_region_name,s=t.tar_group_id;a(S.routerRedux.push("/team/".concat(l,"/region/").concat(n,"/apps/").concat(s))),i()}},handleError:e=>{e&&e.data&&e.data.msg_show&&m.default.warning({message:e.data.msg_show}),this.handleCloseLoading()}})}),this.handleCloseLoading=(()=>{this.setState({Loading:!1,loading:!1})}),this.handleSave=(e=>{var t=[...this.state.dataSource],a=t.findIndex(t=>e.service_id===t.service_id),l=t[a];t.splice(a,1,(0,I.default)({},l,e)),this.setState({dataSource:t})}),this.handleOverDiv=(e=>{return D.default.createElement("div",null,e)}),this.checkTeams=((e,t,a)=>{t&&0===t.length||!t?a("\u8bf7\u9009\u62e9\u56e2\u961f/\u96c6\u7fa4"):t&&1===t.length?a("\u8bf7\u9009\u62e9\u96c6\u7fa4"):a()}),this.save=((e,t,a)=>{var l=t?"code_version":"version",i=e;i.build_source[l]=a,this.handleSave((0,I.default)({},i))}),this.state={userTeamList:[],Loading:!0,loading:!0,dataSource:[],apps:[],checkedList:[],checkAllList:[],indeterminate:!1,checkAll:!0,addGroup:!1}}componentDidMount(){this.fetchCopyComponent(),this.getUserTeams(),this.fetchTeamApps()}render(){var e=this.props,t=e.title,a=e.onCancel,l=e.form,i=e.groupDetail,m=l.getFieldDecorator,I=this.state,C=I.userTeamList,f=I.dataSource,A=I.checkedList,v=I.apps,N=I.loading,M=I.Loading,b=I.addGroup,S=I.indeterminate,k=I.checkAll,x=C&&C.length>0&&C,z="",_=Z.default.getCurrTeamName(),L=Z.default.getCurrRegionName();x&&C.map(e=>{e.value[0]===_&&e.value[1]===L&&(z=e.name)});var R=v&&v.length>0&&v,V=A&&A.length>0,W={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:17}}};return D.default.createElement(n.default,{className:w.default.TelescopicModal,onOk:this.handleSubmit,title:t,width:1200,visible:!0,onCancel:a,footer:[D.default.createElement(g.default,{onClick:a}," \u53d6\u6d88 "),D.default.createElement(g.default,{type:"primary",style:{marginTop:"20px"},disabled:!V,loading:M,onClick:this.handleSubmit},"\u786e\u5b9a")]},D.default.createElement(s.default,{spinning:N,tip:"Loading..."},D.default.createElement("div",{className:j.default.copyBox},b&&D.default.createElement(T.default,{copyFlag:this.props.copyFlag,isAddGroup:!1,loading:N,onCancel:this.cancelAddGroup,onOk:this.handleAddGroup}),D.default.createElement(y.default,{onSubmit:this.handleSubmit,layout:"horizontal",hideRequiredMark:!0},D.default.createElement(c.default,null,x&&D.default.createElement(u.default,{span:6},D.default.createElement(G,(0,p.default)({},W,{label:"\u590d\u5236\u5230"}),m("teamRegion",{initialValue:z,rules:[{required:!0,validator:this.checkTeams}]})(D.default.createElement(h.default,{getPopupContainer:e=>e.parentNode,onChange:this.onSelectChange,placeholder:"\u56e2\u961f/\u96c6\u7fa4"},x.map(e=>{return D.default.createElement(P,{value:e.name},e.name)}))))),D.default.createElement(u.default,{span:10,style:{display:"flex",alignItems:"center"}},D.default.createElement(G,(0,p.default)({},W,{label:""}),m("apps",{initialValue:i.app_id,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5e94\u7528"}]})(D.default.createElement(h.default,{getPopupContainer:e=>e.parentNode,style:{width:"180px"},placeholder:"\u8bf7\u9009\u62e9\u5e94\u7528"},R&&R.map(e=>D.default.createElement(P,{key:e.group_id,value:e.group_id},e.group_name))))),D.default.createElement(g.default,{style:{margin:"0 0 24px 10px"},onClick:this.onAddGroup},"\u65b0\u5efa\u5e94\u7528")))),D.default.createElement("div",{className:j.default.tabTitle},D.default.createElement("div",{className:"".concat(j.default.w300," ").concat(j.default.over)},D.default.createElement(o.default,{indeterminate:S,onChange:this.onCheckAllChange,checked:k},"\u7ec4\u4ef6\u540d\u79f0")),D.default.createElement("div",{className:"".concat(j.default.w500," ").concat(j.default.over)},"\u6784\u5efa\u6e90\u4fe1\u606f"),D.default.createElement("div",{className:"".concat(j.default.w300," ").concat(j.default.over)},"\u7248\u672c\u4fee\u6539")),D.default.createElement(o.default.Group,{style:{width:"100%"},value:A,onChange:this.onGroupChange},f.map((e,t)=>{var a=e.service_cname,l=e.build_source,i=e.service_id,n=l||{},s=n.code_version,c=n.version,u=n.image,p=n.git_url,g=n.rain_app_name,I=n.service_source,C=E.default.isImageAppByBuildSource(l),f=E.default.isMarketAppByBuildSource(l),A=E.default.isCodeAppByBuildSource(l),v=A?s:c,y="third_party"===I,N=C?u:A?p:f?g:"",M="",b=D.default.createElement(h.default,{getPopupContainer:e=>e.parentNode,style:{width:90},defaultValue:C?"Tag":"branch"},!C&&D.default.createElement(P,{value:"branch"},"\u5206\u652f"),A&&D.default.createElement(P,{value:"Tag"},"Tag"));return M=C||A?D.default.createElement(G,null,m(i,{initialValue:v||"",rules:[{required:!0,message:"\u4e0d\u80fd\u4e3a\u7a7a"}]})(D.default.createElement(d.default,{addonBefore:b,onPressEnter:t=>{this.save(e,A,t.target.value)},onBlur:t=>{this.save(e,A,t.target.value)},style:{width:"268px"}}))):y?"-":"\u6682\u4e0d\u652f\u6301\u53d8\u66f4\u7248\u672c",D.default.createElement("div",{className:j.default.tabTr,key:i},D.default.createElement(r.default,{title:a},D.default.createElement("div",{className:"".concat(j.default.w300," ").concat(j.default.over)},D.default.createElement(o.default,{value:t},a))),D.default.createElement(r.default,{title:y?"\u7b2c\u4e09\u65b9\u7ec4\u4ef6":N},D.default.createElement("div",{className:"".concat(j.default.w500," ").concat(j.default.over)},D.default.createElement("div",{style:{paddingRight:"5px",width:"80px",color:"rgba(0, 0, 0, 0.85)"}},C?"\u955c\u50cf:":A?"\u6e90\u7801:":f?"\u7ec4\u4ef6\u5e93:":y?"\u7b2c\u4e09\u65b9\u7ec4\u4ef6":""),D.default.createElement("div",{className:"".concat(j.default.w380," ").concat(j.default.over)},y?"-":N))),D.default.createElement("div",{className:"".concat(j.default.w300," ").concat(j.default.over),style:{height:"80px"}},M))})))))}},A=v))||A)||A);t.default=k},"4SMx":function(e,t,a){"use strict";var l=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var n=l(a("kLXV")),s=l(a("jehZ"));a("T2oS");var r=l(a("W9HT"));a("OaEy");var d=l(a("2fM7"));a("y8nQ");var o,c,u,p,g=l(a("Vl3Y")),m=a("MuoO"),I=i(a("q1tI")),h=l(a("e6Ls")),C=g.default.Item,f=d.default.Option,A=(o=g.default.create(),c=(0,m.connect)(),o(u=c((p=class extends I.PureComponent{constructor(e){super(e),this.onOk=(e=>{e.preventDefault();var t=this.props,a=t.form,l=t.onOk,i=t.group_name,n=t.note;a.validateFields({force:!0},(e,t)=>{if(!e&&l){var a=Object.assign(t,{group_name:i,note:n});l(a)}})}),this.fetchTeamMember=(e=>{var t=this.props,a=t.dispatch,l=t.teamName,i=t.regionName;this.setState({fetching:!0}),a({type:"teamControl/fetchMember",payload:{query:e,team_name:l,region_name:i,page_size:this.state.pageSize,page:this.state.page},callback:e=>{e&&this.setState({members:e.list||[],fetching:!1})}})}),this.state={fetching:!1,page:1,pageSize:99,members:[]}}componentWillMount(){this.fetchTeamMember()}render(){var e=this.props,t=e.title,a=e.onCancel,l=e.form,i=e.principal,o=e.loading,c=void 0!==o&&o,u=this.state,p=u.members,m=u.fetching,A=l.getFieldDecorator,v={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}};return I.default.createElement(n.default,{title:t||"\u4fee\u6539\u8d1f\u8d23\u4eba",visible:!0,confirmLoading:c,className:h.default.TelescopicModal,onCancel:a,onOk:this.onOk},I.default.createElement(g.default,{onSubmit:this.onOk},I.default.createElement(C,(0,s.default)({},v,{label:"\u8d1f\u8d23\u4eba"}),A("username",{initialValue:i||"",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8d1f\u8d23\u4eba"}]})(I.default.createElement(d.default,{getPopupContainer:e=>e.parentNode,showSearch:!0,notFoundContent:m?I.default.createElement(r.default,{size:"small"}):null,filterOption:!1,onSearch:this.fetchTeamMember,style:{width:"100%"}},p.map(e=>I.default.createElement(f,{key:e.nick_name},e.nick_name,"/",e.user_name)))))))}},u=p))||u)||u);t.default=A},"6JQQ":function(e,t,a){"use strict";var l=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var n=l(a("kLXV"));a("/xke");var s=l(a("TeRw"));a("OaEy");var r=l(a("2fM7"));a("y8nQ");var d,o,c,u=l(a("Vl3Y")),p=i(a("q1tI")),g=u.default.Item,m=r.default.Option,I=(d=u.default.create(),d((c=class extends p.PureComponent{constructor(){super(...arguments),this.handleSubmit=(e=>{e.preventDefault();var t=this.props,a=t.form,l=t.currGroupID;a.validateFields((e,t)=>{e||(t.group_id!==l?this.props.onOk(t.group_id):s.default.warning({message:"\u4e0d\u80fd\u9009\u62e9\u5f53\u524d\u6240\u5728\u5e94\u7528"}))})})}render(){var e=this.props.groups||[],t=this.props,a=t.loading,l=void 0!==a&&a,i=t.currGroupID,s=t.form,d=s.getFieldDecorator;return p.default.createElement(n.default,{title:"\u4fee\u6539\u7ec4\u4ef6\u6240\u5c5e\u5e94\u7528",visible:!0,confirmLoading:l,onOk:this.handleSubmit,onCancel:this.props.onCancel},p.default.createElement(u.default,{onSubmit:this.handleSubmit},p.default.createElement(g,{label:""},d("group_id",{initialValue:i&&Number(i)||"",rules:[{required:!0,message:"\u4e0d\u80fd\u4e3a\u7a7a!"}]})(p.default.createElement(r.default,{getPopupContainer:e=>e.parentNode},e.map(e=>{return p.default.createElement(m,{key:e.group_id,value:e.group_id},e.group_name)}))))))}},o=c))||o);t.default=I},"8vpL":function(e,t,a){"use strict";var l=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var n=l(a("kLXV"));a("/xke");var s,r,d,o=l(a("TeRw")),c=a("MuoO"),u=a("7DNP"),p=i(a("q1tI")),g=l(a("nyIC")),m=l(a("q76B")),I=l(a("QDog")),h=(l(a("hMqj")),l(a("J5jb")),l(a("rIpq")),l(a("zcww")),l(a("+iC2")),l(a("TO+K")),l(a("e6Ls"))),C=(l(a("R2TL")),s=(0,c.connect)(e=>{var t=e.user,a=e.appControl,l=e.global,i=e.teamControl,n=e.enterprise,s=e.loading;return{currUser:t.currentUser,appDetail:a.appDetail,pods:a.pods,groups:l.groups,build_upgrade:a.build_upgrade,currentTeam:i.currentTeam,currentRegionName:i.currentRegionName,currentEnterprise:n.currentEnterprise,deleteAppLoading:s.effects["appControl/deleteApp"],reStartLoading:s.effects["appControl/putReStart"],startLoading:s.effects["appControl/putStart"],stopLoading:s.effects["appControl/putStop"],moveGroupLoading:s.effects["appControl/moveGroup"],editNameLoading:s.effects["appControl/editName"],updateRollingLoading:s.effects["appControl/putUpdateRolling"],deployLoading:s.effects["appControl/putUpgrade"],buildInformationLoading:s.effects["appControl/getBuildInformation"]}},null,null,{withRef:!0}),s((d=class extends p.default.Component{constructor(){var e;super(...arguments),e=this,this.state={flag:!1,appAlias:"",promptModal:null,closes:!1,start:!1,updated:!1,actionIng:!1,keyes:!1,srcUrl:"/static/www/weavescope/index.html",teamName:"",regionName:"",build:!1},this.cancelDeleteApp=function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.setState({flag:!1})},this.handleDeleteApp=(()=>{var e=I.default.getCurrTeamName(),t=I.default.getCurrRegionName(),a=this.props,l=a.group_id,i=a.dispatch;i({type:"appControl/deleteApp",payload:{team_name:e,app_alias:this.state.appAlias},callback:()=>{this.cancelDeleteApp(!1),this.refreshFrame(),i({type:"global/fetchGroups",payload:{team_name:e}}),i(u.routerRedux.replace("/team/".concat(e,"/region/").concat(t,"/apps/").concat(l)))}})}),this.handleOffHelpfulHints=(()=>{this.setState({promptModal:null,closes:!1})}),this.saveRef=(e=>{this.ref=e}),this.getChildCom=(()=>{return this.ref?this.ref.getWrappedInstance({}):null}),this.handleOperation=(e=>{var t=this.state.actionIng,a=I.default.getCurrTeamName(),l=(I.default.getCurrRegionName(),this.props),i=(l.group_id,l.dispatch);if(t)o.default.warning({message:"\u6b63\u5728\u6267\u884c\u64cd\u4f5c\uff0c\u8bf7\u7a0d\u540e"});else{var n={putReStart:"\u64cd\u4f5c\u6210\u529f\uff0c\u91cd\u542f\u4e2d",putStart:"\u64cd\u4f5c\u6210\u529f\uff0c\u542f\u52a8\u4e2d",putStop:"\u64cd\u4f5c\u6210\u529f\uff0c\u5173\u95ed\u4e2d",putUpdateRolling:"\u64cd\u4f5c\u6210\u529f\uff0c\u66f4\u65b0\u4e2d",putBuild:"\u64cd\u4f5c\u6210\u529f\uff0c\u90e8\u7f72\u4e2d"};i({type:"appControl/".concat(e),payload:{team_name:a,app_alias:this.state.appAlias},callback:t=>{t&&o.default.success({message:n[e]}),this.handleOffHelpfulHints(),this.refreshFrame()}})}}),this.handleJumpAgain=(()=>{var e=this.state.promptModal;if("build"===e)return this.handleDeploy(),null;var t="stop"===e?"putStop":"start"===e?"putStart":"restart"===e?"putReStart":"build"===e?"putBuild":"rolling"===e?"putUpdateRolling":"";this.handleOperation(t)}),this.refreshFrame=(()=>{document.getElementById("myframe").contentWindow.location.reload(!0)}),this.handleDeploy=(()=>{var e=this.state,t=e.actionIng,a=e.appAlias,l=I.default.getCurrTeamName(),i=(I.default.getCurrRegionName(),this.props),n=(i.build_upgrade,i.dispatch);t?o.default.warning({message:"\u6b63\u5728\u6267\u884c\u64cd\u4f5c\uff0c\u8bf7\u7a0d\u540e"}):n({type:"appControl/putDeploy",payload:{team_name:l,app_alias:a,group_version:"",is_upgrate:""},callback:e=>{e&&o.default.success({message:"\u64cd\u4f5c\u6210\u529f\uff0c\u90e8\u7f72\u4e2d"}),this.handleOffHelpfulHints(),this.refreshFrame()}})})}componentWillMount(){var e=this,t=I.default.getCurrTeamName(),a=I.default.getCurrRegionName(),l=this.props,i=l.group_id,n=l.dispatch,s="".concat(g.default.baseUrl,"/console/teams/").concat(t,"/regions/").concat(a,"/topological?group_id=").concat(i),r="".concat(g.default.baseUrl,"/console/teams/").concat(t,"/regions/").concat(a,"/topological"),d="".concat(g.default.baseUrl,"/console/teams/").concat(t,"/groups/").concat(i);try{window.iframeGetNodeUrl=function(){return s},window.iframeGetNodeVistitUrl=function(){return r},window.iframeGetMonitor=function(e,a){return n({type:"application/groupMonitorData",payload:{team_name:t,group_id:i},callback:t=>{t&&e&&e(t)},handleError:e=>{a&&a(e)}}),s},window.iframeGetAppName=function(){return d},window.iframeGetTenantName=function(){return t},window.iframeGetRegion=function(){return a},window.iframeGetGroupId=function(){return i},window.handleClickService=function(e,l){n(l?u.routerRedux.push("/team/".concat(t,"/region/").concat(a,"/apps/").concat(e.app_id)):u.routerRedux.push("/team/".concat(t,"/region/").concat(a,"/components/").concat(e.service_alias,"/overview")))},window.handleClickRelation=function(e){n(u.routerRedux.push("/team/".concat(t,"/region/").concat(a,"/components/").concat(e.service_alias,"/overview")))},window.handleClickTerminal=function(l){e.setState({teamName:t,regionName:a,appAlias:l.service_alias});document.getElementById("links").click()},window.handleClickBuild=function(t,a){"build"==t&&e.setState({closes:!1,start:!1,updated:!1,build:!0,appAlias:a.service_alias,promptModal:"build"})},window.handleClickUpdate=function(t,a){"update"==t&&e.setState({closes:!1,start:!1,updated:!0,appAlias:a.service_alias,promptModal:"rolling"})},window.handleClickCloses=function(t,a){"closes"==t&&e.setState({closes:!0,start:!1,updated:!1,appAlias:a.service_alias,promptModal:"stop",keyes:!e.state.keyes,srcUrl:e.state.srcUrl})},window.handleClickStart=function(t,a){"start"==t&&e.setState({start:!0,closes:!1,updated:!1,appAlias:a.service_alias,promptModal:"start",keyes:!e.state.keyes,srcUrl:e.state.srcUrl})},window.handleClickDelete=function(t,a){"deleteApp"==t&&e.setState({flag:!0,appAlias:a.service_alias})}}catch(e){}}render(){var e=this.props,t=e.deleteAppLoading,a=(e.reStartLoading,e.stopLoading),l=e.startLoading,i=e.updateRollingLoading,s=(e.flagHeight,e.iframeHeight),r=this.state,d=r.flag,o=r.promptModal,c=r.closes,I=r.start,C=r.updated,f=r.keyes,A=r.srcUrl,v=r.teamName,y=r.regionName,N=r.appAlias,M=r.build,b={start:"\u542f\u52a8",stop:"\u5173\u95ed",rolling:"\u66f4\u65b0",build:"\u6784\u5efa"};return p.default.createElement("div",{key:f,style:{height:s}},d&&p.default.createElement(m.default,{onOk:this.handleDeleteApp,onCancel:this.cancelDeleteApp,loading:t,title:"\u5220\u9664\u7ec4\u4ef6",desc:"\u786e\u5b9a\u8981\u5220\u9664\u6b64\u7ec4\u4ef6\u5417\uff1f",subDesc:"\u6b64\u64cd\u4f5c\u4e0d\u53ef\u6062\u590d"}),(c||I||C||M)&&p.default.createElement(n.default,{title:"\u53cb\u60c5\u63d0\u793a",visible:o,className:h.default.TelescopicModal,onOk:this.handleJumpAgain,onCancel:this.handleOffHelpfulHints,confirmLoading:"stop"===o?a:"start"===o?l:"rolling"===o?i:!o},p.default.createElement("p",{style:{textAlign:"center"}},"\u786e\u5b9a",b[o],"\u5f53\u524d\u7ec4\u4ef6\uff1f")),p.default.createElement(u.Link,{id:"links",to:"/team/".concat(v,"/region/").concat(y,"/components/").concat(N,"/webconsole"),target:"_blank"}),p.default.createElement("iframe",{src:"".concat(g.default.baseUrl).concat(A),style:{width:"100%",height:"100%"},id:"myframe",key:f,sandbox:"allow-same-origin allow-scripts allow-popups allow-forms",scrolling:"auto",frameBorder:"no",border:"0",marginWidth:"0",marginHeight:"0"}))}},r=d))||r),f=C;t.default=f},CfDn:function(e,t,a){"use strict";var l=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a("jehZ"));a("T2oS");var s,r,d,o=l(a("W9HT")),c=l(a("QDog")),u=l(a("hMqj")),p=a("MuoO"),g=i(a("q1tI")),m=l(a("Z0Jj")),I=l(a("t3BL")),h=(s=(0,p.connect)(e=>{var t=e.teamControl,a=e.application;return{currentTeamPermissionsInfo:t.currentTeamPermissionsInfo,groupDetail:a.groupDetail||{}}},null,null,{pure:!1}),s((d=class extends g.PureComponent{constructor(e){super(e),this.handlePermissions=(e=>{var t=this.props.currentTeamPermissionsInfo;return u.default.querySpecifiedPermissionsInfo(t,e)}),this.state={currApp:{},loading:!0,appID:this.getGroupId(),operationPermissions:this.handlePermissions("queryControlInfo"),appPermissions:this.handlePermissions("queryAppInfo"),appConfigGroupPermissions:this.handlePermissions("queryAppConfigGroupInfo"),componentPermissions:this.handlePermissions("queryComponentInfo")}}componentWillMount(){var e=this.props.dispatch,t=this.state.appPermissions.isAccess;t||c.default.withoutPermission(e)}getGroupId(){var e=this.props.match.params;return e.appID}render(){var e=this.props.groupDetail;return g.default.createElement(g.Fragment,null,"{}"===JSON.stringify(e)?g.default.createElement(o.default,null):"helm"===e.app_type?g.default.createElement(I.default,(0,n.default)({},this.props,this.state)):g.default.createElement(m.default,(0,n.default)({},this.props,this.state)))}},r=d))||r);t.default=h},DxSl:function(e,t,a){"use strict";var l=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("DZo9");var n=l(a("8z0m"));a("Pwec");var s=l(a("CtXQ"));a("5NDa");var r=l(a("5rEg")),d=l(a("jehZ"));a("+L6B");var o=l(a("2/Rp"));a("/xke");var c=l(a("TeRw"));a("y8nQ");var u=l(a("Vl3Y"));a("OaEy");var p,g,m,I,h=l(a("2fM7")),C=a("MuoO"),f=i(a("q1tI")),A=l(a("qCJ4")),v=l(a("QDog")),y=(l(a("PKy1")),h.default.Option),N={labelCol:{span:5},wrapperCol:{span:19}},M=(p=(0,C.connect)(e=>{var t=e.global,a=e.loading;return{groups:t.groups,createAppByDockerrunLoading:a.effects["createApp/createAppByDockerrun"]}},null,null,{withRef:!0}),g=u.default.create(),p(m=g((I=class extends f.PureComponent{constructor(e){super(e),this.onAddGroup=(()=>{this.setState({addGroup:!0})}),this.cancelAddGroup=(()=>{this.setState({addGroup:!1})}),this.handleAddGroup=(e=>{var t=this.props.form.setFieldsValue;t({group_id:e}),this.cancelAddGroup()}),this.handleJarWarUpload=(()=>{var e=this.props.dispatch,t=v.default.getCurrTeamName(),a=v.default.getCurrRegionName();e({type:"createApp/createJarWarServices",payload:{region:a,team_name:t,component_id:""},callback:e=>{e&&200===e.status_code&&this.setState({record:e.bean,event_id:e.bean.event_id,region_name:e.bean&&e.bean.region,team_name:e.bean&&e.bean.team_name},()=>{""!==e.bean.region&&(this.loop=!0,this.handleJarWarUploadStatus())})}})}),this.handleJarWarUploadRecord=(e=>{var t=this.props.dispatch;t({type:"createApp/createJarWarUploadRecord",payload:{region:v.default.getCurrRegionName(),team_name:v.default.getCurrTeamName(),component_id:"",file_type:e},callback:e=>{e.bean&&e.bean.source_dir&&e.bean.source_dir.length>0?this.setState({existFileList:e.bean.source_dir,event_id:e.bean.event_id}):this.handleJarWarUpload()},handleError:()=>{}})}),this.handleJarWarUploadStatus=(()=>{var e=this.props.dispatch,t=this.state.event_id;e({type:"createApp/createJarWarUploadStatus",payload:{region:v.default.getCurrRegionName(),team_name:v.default.getCurrTeamName(),event_id:t},callback:e=>{e&&e.bean.package_name.length>0&&(this.setState({existFileList:e.bean.package_name}),c.default.success({message:"\u4e0a\u4f20\u6587\u4ef6\u6210\u529f"}),this.loop=!1),this.loop&&setTimeout(()=>{this.handleJarWarUploadStatus()},3e3)},handleError:()=>{}})}),this.handleJarWarUploadDelete=(()=>{var e=this.state.event_id,t=this.props.dispatch;t({type:"createApp/deleteJarWarUploadStatus",payload:{team_name:v.default.getCurrTeamName(),event_id:e},callback:e=>{"ok"==e.bean.res&&(this.setState({existFileList:[]}),c.default.success({message:"\u5220\u9664\u6587\u4ef6\u6210\u529f"}),this.handleJarWarUpload())}})}),this.onChangeUpload=(e=>{var t=e.fileList;t=t.filter(e=>{return!e.response||"success"===e.response.msg}),e&&e.event&&e.event.percent&&this.setState({percents:e.event.percent});var a=e.file.status;"done"===a&&this.setState({percents:!1}),this.setState({fileList:t})}),this.onRemove=(()=>{this.setState({fileList:[]})}),this.handleSubmit=(e=>{e.preventDefault();var t=this.props,a=t.form,l=t.onSubmit,i=this.state.event_id;a.validateFields((e,t)=>{!e&&l&&l(t,i)})}),this.handleValiateNameSpace=((e,t,a)=>{if(!t)return a(new Error("\u8bf7\u8f93\u5165\u7ec4\u4ef6\u82f1\u6587\u540d\u79f0"));if(t&&t.length<=32){var l=/^[a-z]([-a-z0-9]*[a-z0-9])?$/;if(!l.test(t))return a(new Error("\u53ea\u652f\u6301\u5c0f\u5199\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u201c-\u201d\uff0c\u5e76\u4e14\u5fc5\u987b\u4ee5\u5b57\u6bcd\u5f00\u59cb\u3001\u4ee5\u6570\u5b57\u6216\u5b57\u6bcd\u7ed3\u5c3e"));a()}return t.length>32?a(new Error("\u4e0d\u80fd\u5927\u4e8e32\u4e2a\u5b57\u7b26")):void 0}),this.state={showUsernameAndPass:!1,addGroup:!1,fileList:[],isShowCom:!0,record:{},event_id:"",region_name:"",team_name:"",percents:!1,existFileList:[]}}componentWillMount(){this.loop=!1}componentDidMount(){this.handleJarWarUploadRecord("jwar")}componentWillUnmount(){this.loop=!1}render(){var e=this.props.form.getFieldDecorator,t=this.props,a=t.groups,l=t.createAppByDockerrunLoading,i=t.handleType,c=t.ButtonGroupState,p=t.groupId,g=t.showSubmitBtn,m=void 0===g||g,I=t.showCreateGroup,C=void 0===I||I,v=this.state,M=v.fileList,b=(v.defaultRadio,v.isShowCom,v.addGroup,v.record),S=(v.region_name,v.existFileList),D=this.props.data||{},E=this.props.disableds||[],Z=i&&"Service"===i;return f.default.createElement(f.Fragment,null,f.default.createElement(u.default,{onSubmit:this.handleSubmit,layout:"horizontal",hideRequiredMark:!0},f.default.createElement(u.default.Item,(0,d.default)({},N,{label:"\u5e94\u7528\u540d\u79f0"}),e("group_id",{initialValue:Z?Number(p):D.group_id,rules:[{required:!0,message:"\u8bf7\u9009\u62e9"}]})(f.default.createElement(h.default,{getPopupContainer:e=>e.parentNode,placeholder:"\u8bf7\u9009\u62e9\u8981\u6240\u5c5e\u5e94\u7528",style:{display:"inline-block",width:Z?"":292,marginRight:15},disabled:!!Z},(a||[]).map(e=>f.default.createElement(y,{value:e.group_id},e.group_name)))),Z?null:C?f.default.createElement(o.default,{onClick:this.onAddGroup},"\u65b0\u5efa\u5e94\u7528"):null),f.default.createElement(u.default.Item,(0,d.default)({},N,{label:"\u7ec4\u4ef6\u540d\u79f0"}),e("service_cname",{initialValue:D.service_cname||"",rules:[{required:!0,message:"\u8981\u521b\u5efa\u7684\u7ec4\u4ef6\u8fd8\u6ca1\u6709\u540d\u5b57"},{max:24,message:"\u6700\u5927\u957f\u5ea624\u4f4d"}]})(f.default.createElement(r.default,{disabled:E.indexOf("service_cname")>-1,placeholder:"\u8bf7\u4e3a\u521b\u5efa\u7684\u7ec4\u4ef6\u8d77\u4e2a\u540d\u5b57\u5427"}))),f.default.createElement(u.default.Item,(0,d.default)({},N,{label:"\u7ec4\u4ef6\u82f1\u6587\u540d\u79f0"}),e("k8s_component_name",{rules:[{required:!0,validator:this.handleValiateNameSpace}]})(f.default.createElement(r.default,{placeholder:"\u7ec4\u4ef6\u7684\u82f1\u6587\u540d\u79f0"}))),f.default.createElement(u.default.Item,(0,d.default)({label:"\u4e0a\u4f20\u6587\u4ef6",extra:"\u652f\u6301Jar\u3001War\u683c\u5f0f\u4e0a\u4f20\u6587\u4ef6"},N),e("packageTarFile",{rules:[{required:!1,message:"\u8bf7\u4e0a\u4f20\u6587\u4ef6"}]})(f.default.createElement(n.default,{fileList:M,accept:".jar,.war",name:"packageTarFile",onChange:this.onChangeUpload,onRemove:this.onRemove,action:b.upload_url},f.default.createElement(o.default,null,f.default.createElement(s.default,{type:"upload"})," \u4e0a\u4f20\u6587\u4ef6")))),f.default.createElement(u.default.Item,N,S.length>0&&S.map(e=>{return f.default.createElement("div",{style:{marginLeft:"100px"}},f.default.createElement(s.default,{style:{marginRight:"6px"},type:"inbox"}),e,f.default.createElement(s.default,{onClick:this.handleJarWarUploadDelete,style:{marginLeft:"12px",color:"red",cursor:"pointer"},type:"delete"}))})),m?f.default.createElement(u.default.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:N.wrapperCol.span,offset:N.labelCol.span}},label:""},Z&&c?this.props.handleServiceBotton(f.default.createElement(o.default,{onClick:this.handleSubmit,type:"primary",loading:l},"\u65b0\u5efa\u7ec4\u4ef6"),!1):!i&&f.default.createElement(o.default,{onClick:this.handleSubmit,type:"primary",loading:l},"\u786e\u8ba4\u521b\u5efa")):null),this.state.addGroup&&f.default.createElement(A.default,{onCancel:this.cancelAddGroup,onOk:this.handleAddGroup}))}},m=I))||m)||m);t.default=M},EhCg:function(e,t,a){"use strict";var l=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("14J3");var n=l(a("BMrR"));a("jCWc");var s=l(a("kPKH")),r=l(a("jehZ"));a("sPJy");var d=l(a("bE4q"));a("Pwec");var o=l(a("CtXQ"));a("Znn+");var c,u,p,g,m=l(a("ZTPi")),I=l(a("QDog")),h=l(a("TSYQ")),C=a("MuoO"),f=l(a("bALw")),A=l(a("17x9")),v=i(a("q1tI")),y=l(a("Sp8k"));m.default.TabPane;function N(e,t){var a={};return Object.keys(e).forEach(l=>{(0,f.default)(l).test(t)&&(a=e[l])}),a}var M=(c=(0,C.connect)(),c((g=p=class extends v.PureComponent{constructor(e){super(e),this.handleTitleList=(e=>{this.props.onTabChange?(this.props.onTabChange(e.key),this.setState({back:"#e3e3e3"})):this.setState({back:""})}),this.onChange=(e=>{this.props.onTabChange&&this.props.onTabChange(e)}),this.getBreadcrumbProps=(()=>{return{routes:this.props.routes||this.context.routes,params:this.props.params||this.context.params,routerLocation:this.props.location||this.context.location,breadcrumbNameMap:this.props.breadcrumbNameMap||this.context.breadcrumbNameMap||{}}}),this.conversionFromProps=(()=>{var e=this.props,t=e.breadcrumbList,a=e.linkElement,l=void 0===a?"a":a;return v.default.createElement(d.default,{className:y.default.breadcrumb},t.map((e,t)=>v.default.createElement(d.default.Item,{key:"bread".concat(t)},e.icon?v.default.createElement(o.default,{style:{marginRight:"5px"},type:e.icon}):"",e.href?(0,v.createElement)(l,{["a"===l?"href":"to"]:e.href},e.title):e.title)))}),this.conversionFromLocation=((e,t)=>{var a=this.props.linkElement,l=void 0===a?"a":a,i=e.pathname.split("/").filter(e=>e),n=i.map((e,a)=>{var n="/".concat(i.slice(0,a+1).join("/")),s=N(t,n),r=a!==i.length-1&&s.component;return s.name&&!s.hideInBreadcrumb?v.default.createElement(d.default.Item,{key:n},(0,v.createElement)(r?l:"span",{["a"===l?"href":"to"]:n},s.name)):null});return v.default.createElement(d.default,{className:y.default.breadcrumb},n)}),this.conversionBreadcrumbList=(()=>{var e=this.props.breadcrumbList,t=this.getBreadcrumbProps(),a=t.routes,l=t.params,i=t.routerLocation,n=t.breadcrumbNameMap;return e&&e.length?this.conversionFromProps():a&&l?v.default.createElement(d.default,{className:y.default.breadcrumb,routes:a.filter(e=>e.breadcrumbName),params:l,itemRender:this.itemRender}):location&&location.pathname?this.conversionFromLocation(i,n):null}),this.itemRender=((e,t,a,l)=>{var i=this.props.linkElement,n=void 0===i?"a":i,s=a.indexOf(e)===a.length-1;return s||!e.component?v.default.createElement("span",null,e.breadcrumbName):(0,v.createElement)(n,{href:l.join("/")||"/",to:l.join("/")||"/"},e.breadcrumbName)}),this.state={back:""}}render(){var e,t=this.props,a=t.title,l=t.logo,i=t.action,d=t.content,o=t.extraContent,c=t.tabList,u=t.className,p=t.tabActiveKey,g=t.isSvg,m=(this.state.back,I.default.fetchSvg("appmarket"),(0,h.default)(y.default.pageHeader,u));void 0!==p&&c&&(e=c.filter(e=>e.default)[0]||c[0]);this.conversionBreadcrumbList();var C={defaultActiveKey:e&&e.key};return void 0!==p&&(C.activeKey=p),v.default.createElement("div",{className:m},v.default.createElement("div",{className:y.default.detail},l&&v.default.createElement("div",{className:y.default.logo},l),v.default.createElement("div",{className:y.default.main},v.default.createElement("div",{className:y.default.row},a&&v.default.createElement("h1",{className:y.default.title},a),i&&v.default.createElement("div",{className:y.default.action},i)),v.default.createElement("div",{className:y.default.row},d&&v.default.createElement("div",{className:y.default.content},d),o&&v.default.createElement("div",{className:y.default.extraContent},o)))),c&&c.length&&v.default.createElement("div",{className:y.default.ServiceBox},v.default.createElement(n.default,{style:{marginBottom:"20px"}},c.map(e=>{var t=e.key,a=e.tab;return v.default.createElement(s.default,(0,r.default)({span:8},C,{className:y.default.ServiceDiv,onClick:this.handleTitleList.bind(this,e)}),g&&I.default.fetchSvg("localApplication"===t?"appComponent":t.indexOf("Helm-")>-1?"HelmSvg":"appmarket"),v.default.createElement("p",{className:y.default.ServiceSmallTitle},a))}))))}},p.contextTypes={routes:A.default.array,params:A.default.object,location:A.default.object,breadcrumbNameMap:A.default.object},u=g))||u);t.default=M},F5Il:function(e,t,a){e.exports={yaml_container:"yaml_container___-buxD",update:"update___ZT1cg",delete:"delete___qWQPJ",fileName:"fileName___3OnVC"}},"Gl/x":function(e,t,a){"use strict";var l=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("fOrg");var n=l(a("+KLJ"));a("2qtc");var s=l(a("kLXV"));a("7Kak");var r=l(a("9yH6"));a("+L6B");var d=l(a("2/Rp"));a("T2oS");var o=l(a("W9HT"));a("5NDa");var c=l(a("5rEg"));a("Mwp2");var u=l(a("VXEj")),p=l(a("jehZ"));a("IzEo");var g=l(a("bx4M"));a("5Dmo");var m=l(a("3S7+"));a("+BJd");var I=l(a("mr32")),h=l(a("p0pE"));a("y8nQ");var C=l(a("Vl3Y"));a("Znn+");var f=l(a("ZTPi"));a("OaEy");var A,v,y,N,M=l(a("2fM7")),b=a("MuoO"),S=a("7DNP"),D=i(a("q1tI")),E=l(a("/VoG")),Z=l(a("d5pB")),T=l(a("lEF+")),w=l(a("e6Ls")),j=l(a("xNuS")),G=l(a("hH+r")),P=l(a("iPMB")),k=l(a("jWJt")),x=a("34ay"),z=a("vSx2"),_=l(a("QDog")),L=l(a("hMqj")),R=l(a("ZgmS")),V=l(a("yxQP")),W=M.default.Option,B=f.default.TabPane,J=(A=(0,b.connect)(e=>{var t=e.global,a=e.loading,l=e.teamControl,i=e.enterprise;return{loading:a,enterprise:t.enterprise,currentTeam:l.currentTeam,currentRegionName:l.currentRegionName,currentEnterprise:i.currentEnterprise,currentTeamPermissionsInfo:l.currentTeamPermissionsInfo}},null,null,{pure:!1}),v=C.default.create(),A(y=v((N=class extends D.PureComponent{constructor(e){super(e),this.onCancelCreate=(()=>{this.setState({showCreate:null,helmCreate:null,addAppLoading:!1})}),this.getCloudRecommendApps=(e=>{var t=this.state.currentKey,a=this.props.currentEnterprise;this.props.dispatch({type:"market/fetchMarkets",payload:{name:t,enterprise_id:a.enterprise_id,query:e?"":this.state.cloudApp_name||"",pageSize:e?9:this.state.cloudPageSize,page:e?1:this.state.cloudPage},callback:e=>{e?this.setState({cloudList:e.list||[],cloudTotal:e.total},()=>{e._code&&210===e.status_code&&e._condition&&10503===e._condition?this.setState({isSpincloudList:-1,networkText:e.msg_show}):this.setState({isSpincloudList:!1})}):this.setState({isSpincloudList:!1})}})}),this.getApps=(e=>{var t=this.props,a=t.currentEnterprise,l=t.dispatch,i=this.state.scopeMax;if(i&&"localApplication"!==i)return null;l({type:"market/fetchAppModels",payload:{enterprise_id:a.enterprise_id,app_name:e?"":this.state.app_name||"",scope:e?"":this.state.scope,page_size:e?9:this.state.pageSize,page:e?1:this.state.page,need_install:!0,is_complete:1},callback:e=>{e?this.setState({list:e.list||[],total:e.total},()=>{this.setState({isSpinList:!1})}):this.setState({isSpinList:!1})}})}),this.getMarketsTab=(()=>{var e=this.props,t=e.dispatch,a=e.currentEnterprise,l=this.state.scopeMax;t({type:"market/fetchMarketsTab",payload:{enterprise_id:a.enterprise_id},callback:e=>{var t=e&&e.list||[],a=[];t&&t.length>0&&t.map(e=>{var t=e.name,l=e.status,i=e.alias;1===l&&a.push(Object.assign({},e,{tab:i||t,key:t}))}),this.setState({rainStoreTab:a}),l&&"localApplication"!==l&&this.handleTabMaxChange(l)}})}),this.getHelmMarketsTab=(()=>{var e=this.props,t=e.dispatch,a=e.currentEnterprise,l=e.isHelm,i=void 0===l||l;i&&t({type:"market/fetchHelmMarketsTab",payload:{enterprise_id:a.enterprise_id},callback:e=>{if(e&&200===e.status_code){var t=[];Array.isArray(e)&&e.map(e=>{t.push(Object.assign({},e,{tab:e.name,key:"Helm-".concat(e.name)}))}),this.setState({helmStoreTab:t})}}})}),this.getHelmAppStore=(e=>{var t=this.props,a=t.dispatch,l=t.currentEnterprise,i=this.state.helmPag,n=Object.assign({},{name:e,enterprise_id:l.enterprise_id},i);a({type:"market/fetchHelmAppStore",payload:n,callback:e=>{if(e&&200===e.status_code){var t=Object.assign({},i,{total:e&&e.length||0}),a=[];if(Array.isArray(e)){var l=i.query,n=i.page;if(l){var s=[],r=l.length;e.map(e=>{if(r<=e.name.length){var t=e.name.substring(0,r);t.indexOf(l)>-1&&s.push(e)}}),t.total=s.length,a=s.length>9?s.splice(9*(n-1),9):s}else a=e.splice(n>1?9*(n-1):0,9)}this.setState({helmLoading:!1,helmList:a,helmPag:t})}}})}),this.handleSearch=(e=>{var t=this.state.scopeMax;if("localApplication"===t)this.setState({app_name:e,page:1},()=>{this.getApps()});else if(t.indexOf("Helm-")>-1){var a=this.state.helmPag,l=Object.assign({},a,{page:1,query:e});this.setState({helmPag:l},()=>{this.getHelmAppStore(t.slice(5))})}else this.setState({cloudApp_name:e,cloudPage:1},()=>{this.getCloudRecommendApps()})}),this.hanldePageChange=(e=>{this.setState({page:e},()=>{this.getApps()})}),this.hanldeCloudPageChange=(e=>{this.setState({cloudPage:e},()=>{this.getCloudRecommendApps()})}),this.hanldeHelmPageChange=(e=>{var t=this.state,a=t.helmPag,l=t.scopeMax,i=Object.assign({},a,{page:e});this.setState({helmPag:i},()=>{this.getHelmAppStore(l.slice(5))})}),this.handleTabChange=(e=>{this.setState({scope:e,page:1},()=>{this.getApps()})}),this.handleTabMaxChange=(e=>{this.setState({page:1,cloudPage:1,currentKey:e,scopeMax:e,isSpinList:!0,isSpincloudList:!0,app_name:"",cloudApp_name:""},()=>{"localApplication"===e?this.getApps("reset"):e.indexOf("Helm-")>-1?this.getHelmAppStore(e.slice(5)):this.getCloudRecommendApps("reset")}),this.loadMore(e)}),this.showCreate=(e=>{var t=this.state.handleType;t?this.setState({installBounced:e}):this.setState({showCreate:e})}),this.handleHelmIntall=(e=>{var t=this.state,a=t.scopeMax,l=t.helmStoreTab,i={};l.map(e=>{e.key===a&&(i=e)}),this.setState({helmCreate:Object.assign({},e,i,{app_store_name:a.slice(5)})})}),this.handleInstallBounced=(e=>{e.preventDefault();var t=this.props,a=t.form,l=t.dispatch,i=t.groupId,n=t.refreshCurrent,s=this.state,r=s.installBounced,d=s.is_deploy,o=s.scopeMax,c=s.handleType,u=s.currentKey,p=_.default.getCurrTeamName();a.validateFields((e,t)=>{e||l({type:"createApp/installApp",payload:{team_name:p,group_id:i||0,app_id:r.app_id,is_deploy:d,group_key:r.ID,app_version:t.group_version,marketName:u,install_from_cloud:"localApplication"!==o},callback:()=>{l({type:"global/fetchGroups",payload:{team_name:p}}),this.setState({installBounced:!1,is_deploy:!0}),c&&n&&n(),l(S.routerRedux.push("/team/".concat(p,"/region/").concat(_.default.getCurrRegionName(),"/apps/").concat(i||0)))}})})}),this.handleCreate=((e,t)=>{this.setState({addAppLoading:!0});var a=this.props.dispatch,l=this.state,i=l.showCreate,n=l.currentKey,s=_.default.getCurrTeamName();a({type:"createApp/installApp",payload:(0,h.default)({team_name:s},e,{app_id:i.app_id,is_deploy:t,group_key:i.group_key,app_version:e.group_version,marketName:n}),callback:()=>{a({type:"global/fetchGroups",payload:{team_name:s},callback:()=>{this.onCancelCreate(),a(S.routerRedux.push("/team/".concat(s,"/region/").concat(_.default.getCurrRegionName(),"/apps/").concat(e.group_id)))}})}})}),this.handleCreateHelm=((e,t)=>{var a=this.props.dispatch,l=_.default.getCurrTeamName();this.setState({helmInstallLoading:!0}),a({type:"createApp/installHelmApp",payload:(0,h.default)({team_name:l},e,{is_deploy:t}),callback:e=>{a({type:"global/fetchGroups",payload:{team_name:l},callback:()=>{e&&200===e.status_code&&e.bean&&e.bean.ID&&(this.onCancelCreate(),a(S.routerRedux.push("/team/".concat(l,"/region/").concat(_.default.getCurrRegionName(),"/apps/").concat(e.bean.ID)))),this.setState({helmInstallLoading:!1})},renderError:()=>{this.setState({helmInstallLoading:!1})}})}})}),this.handleCloudCreate=((e,t)=>{this.setState({addAppLoading:!0});var a=this.state,l=a.scopeMax,i=a.currentKey,n=this.state.showCreate;this.props.dispatch({type:"createApp/installApp",payload:(0,h.default)({app_id:n.app_id,team_name:_.default.getCurrTeamName()},e,{is_deploy:t,app_versions:n.app_versions,group_key:n.app_key_id,app_version:e.group_version,install_from_cloud:"localApplication"!==l,marketName:i}),callback:()=>{this.props.dispatch({type:"global/fetchGroups",payload:{team_name:_.default.getCurrTeamName()},callback:()=>{this.onCancelCreate(),this.setState({is_deploy:!0}),this.props.dispatch(S.routerRedux.push("/team/".concat(_.default.getCurrTeamName(),"/region/").concat(_.default.getCurrRegionName(),"/apps/").concat(e.group_id)))}})}})}),this.handleVisibleChange=((e,t)=>{var a=this.state.visiblebox,l=e.ID;a[l]=t,this.setState({visiblebox:a}),this.queryExport(e)}),this.showMarketAppDetail=(e=>{e&&e.app_detail_url?window.open(e.app_detail_url,"_blank"):this.setState({showApp:e,showMarketAppDetail:!0})}),this.hideMarketAppDetail=(()=>{this.setState({showApp:{},showMarketAppDetail:!1})}),this.loadMore=(e=>{this.props.handleServiceComponent(e)}),this.handleTabs=((e,t)=>{var a=this.state.handleType;return D.default.createElement(f.default,{defaultActiveKey:"",onChange:this.handleTabChange,style:{background:"#fff",padding:a?"0 20px 20px":"20px "}},e.map(e=>{var a=e.key,l=e.tab;return D.default.createElement(B,{tab:l,key:a},D.default.createElement("div",{className:V.default.cardList,style:{paddingBottom:"20px"}},t))}))}),this.renderApp=((e,t,l)=>{var i=this.state,n=i.scopeMax,s=i.handleType,r="localApplication"!=n,d=e=>D.default.createElement("div",{title:e.app_name||e.name||"",style:{maxWidth:"200px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}},D.default.createElement("a",{onClick:()=>{this.showMarketAppDetail(e)}},e.app_name||e.name)),o=D.default.createElement("div",{title:e.version,className:V.default.cardVersionStyle},D.default.createElement("span",null,"\u7248\u672c:"),D.default.createElement("div",{className:V.default.overScroll},D.default.createElement("div",null,e.versions_info&&e.versions_info.map((e,t)=>{return D.default.createElement(I.default,{title:e.version,className:V.default.cardVersionTagStyle,color:"green",size:"small",key:t},e.version)}),e.versions&&e.versions.map((e,t)=>{return D.default.createElement(I.default,{className:V.default.cardVersionTagStyle,color:"green",size:"small",title:e.app_version||e.version,key:t},e.app_version||e.version)})))),c=[D.default.createElement(m.default,{title:t?"\u70b9\u51fb\u5b89\u88c5":"\u4e0d\u53ef\u5b89\u88c5"},D.default.createElement("div",{onClick:()=>{t&&this.showCreate(e)}},D.default.createElement("div",{className:V.default.cardTitle},D.default.createElement("span",{title:e.app_name},e.app_name)),o))],u=t?[D.default.createElement("span",{onClick:()=>{"helm"===l?this.handleHelmIntall(e):this.showCreate(e)}},"\u5b89\u88c5")]:[],p=a("Vkwn");return D.default.createElement(D.Fragment,null,(1==e.is_official||1==e.is_official)&&D.default.createElement(G.default,{style:{marginLeft:6,marginTop:6}}),D.default.createElement(g.default,{className:s?"".concat(V.default.cards," ").concat(V.default.clearAvatar):V.default.cards,actions:s?c:u},D.default.createElement(g.default.Meta,{className:V.default.cardsMetas,style:s&&{height:80,overflow:"hidden",display:"flex",justifyContent:"center",cursor:"pointer"},avatar:D.default.createElement("img",{style:s?{width:80,height:80,margin:" 0 auto"}:{width:110,height:110,margin:" 0 auto"},alt:e.title,src:r?e.logo||e.icon||p:e.pic||p,height:s?154:80,onClick:()=>{this.showMarketAppDetail(e)}}),title:s?"":d(e),description:s?"":D.default.createElement(D.Fragment,null,D.default.createElement("span",{style:{display:"block",color:"rgb(200, 200, 200)",marginBottom:2,fontSize:12}},o,!r&&D.default.createElement("div",{className:V.default.memoryStyle},D.default.createElement("span",null,"\u5185\u5b58: "),R.default.unit(e.min_memory||128,"MB"))),D.default.createElement(j.default,{className:V.default.item,lines:3},D.default.createElement("span",{title:e.describe||e.description},e.describe||e.description)))})))}),this.renderSuccessOnChange=(()=>{this.setState({is_deploy:!this.state.is_deploy})}),this.renderFormComponent=(()=>{var e={labelCol:{span:5},wrapperCol:{span:19}},t=this.props.form,a=t.getFieldDecorator,l=this.state.installBounced,i=l.versions_info||l.versions;return D.default.createElement(C.default,{onSubmit:this.handleInstallBounced,layout:"horizontal",hideRequiredMark:!0},D.default.createElement(C.default.Item,(0,p.default)({},e,{label:"\u9009\u62e9\u7248\u672c"}),a("group_version",{initialValue:i[0].version||i[0].app_version,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7248\u672c"}]})(D.default.createElement(M.default,{getPopupContainer:e=>e.parentNode,style:{width:"220px"}},i.map(e=>{return D.default.createElement(W,{key:e.version,value:e.version||e.app_version},e.version||e.app_version)})))))}),this.handleCertification=(e=>{this.setState({authorizations:e})});var t=this.props,l=t.handleType,i=void 0===l?"":l,n=t.match,s=t.scope,r=void 0===s?"":s,d=t.moreState,o=t.scopeMax,c=decodeURIComponent("Service"===i?"":n&&n.params&&n.params.keyword||"");this.state={helmInstallLoading:!1,list:[],authorizations:!1,app_name:c,page:1,pageSize:9,total:0,isSpinList:!0,isSpincloudList:!0,networkText:"",cloudList:[],cloudApp_name:"",cloudPage:1,cloudPageSize:9,cloudTotal:0,helmCreate:null,showCreate:null,scope:r,scopeMax:o||"localApplication",showApp:{},showMarketAppDetail:!1,installBounced:!1,handleType:i||null,moreState:d||null,is_deploy:!0,localAppTab:[{key:"localApplication",tab:"\u672c\u5730\u7ec4\u4ef6\u5e93"}],rainStoreTab:[],helmStoreTab:[],currentKey:"",helmList:[],helmLoading:!0,helmPag:{pageSize:9,total:0,page:1,query:""},addAppLoading:!1},this.mount=!1}componentWillMount(){var e=this.props,t=e.currentTeamPermissionsInfo,a=e.dispatch;L.default.canCreateComponent(t,a)}componentDidMount(){this.mount=!0,this.getApps(),this.getMarketsTab(),this.getHelmMarketsTab()}componentWillUnmount(){this.mount=!1,this.mountquery=!1}render(){var e=this.props,t=e.loading,a=e.currentEnterprise,l=e.currentTeam,i=e.currentRegionName,p=e.isHelm,g=void 0===p||p,m=this.state,I=m.handleType,h=m.moreState,C=m.installBounced,f=m.list,A=m.scopeMax,v=m.cloudList,y=m.cloudPage,N=m.cloudPageSize,M=m.cloudTotal,b=m.isSpinList,S=m.isSpincloudList,j=m.networkText,G=m.page,L=m.pageSize,R=m.total,W=m.helmInstallLoading,B=m.currentKey,J=m.authorizations,O=m.showCreate,X=m.showMarketAppDetail,Y=m.showApp,H=m.is_deploy,U=m.app_name,Q=m.cloudApp_name,F=m.helmList,K=m.helmPag,q=m.helmLoading,$=m.helmCreate,ee=m.addAppLoading,te=m.localAppTab,ae=m.rainStoreTab,le=m.helmStoreTab,ie=(_.default.fetchSvg("dockerSvg"),!!h),ne={current:h?1:G,pageSize:h?3:L,total:h?1:R,hideOnSinglePage:ie,onChange:e=>{this.hanldePageChange(e)}},se={current:h?1:y,pageSize:h?3:N,total:h?1:M,hideOnSinglePage:ie,onChange:e=>{this.hanldeCloudPageChange(e)}},re={current:h?1:K.page,pageSize:h?3:K.pageSize,total:h?1:K.total,hideOnSinglePage:ie,onChange:e=>{this.hanldeHelmPageChange(e)}},de=!0,oe=[...te,...ae,...le];if(oe&&oe.length>0){var ce=oe.filter(e=>{return e.name===B});ce&&ce.length>0&&(de=(0,x.fetchMarketAuthority)(ce[0],"ReadInstall"))}I&&h&&("localApplication"===A&&f&&f.length>0||"localApplication"!=A&&v&&v.length>0)&&this.loadMore,u.default,!b&&f&&f.length;var ue=D.default.createElement(u.default,{bordered:!1,grid:{gutter:24,lg:3,md:2,sm:1,xs:1},pagination:se,dataSource:v,renderItem:e=>D.default.createElement(u.default.Item,{style:{border:"none"}},this.renderApp(e,de))}),pe=D.default.createElement(u.default,{bordered:!1,grid:{gutter:24,lg:3,md:2,sm:1,xs:1},pagination:re,dataSource:F,renderItem:e=>{var t=e;return e.versions&&e.versions.length>0&&(t=Object.assign({},e,e.versions[0])),D.default.createElement(u.default.Item,{style:{border:"none"}},this.renderApp(t,!0,"helm"))}}),ge="localApplication"==A?U:Q,me=D.default.createElement("div",{style:{textAlign:"center"}},D.default.createElement("span",{id:"searchWrap",style:{display:"inline-block"}},D.default.createElement(c.default.Search,{ref:"searchs",placeholder:"\u8bf7\u8f93\u5165\u5e94\u7528\u540d\u79f0",enterButton:"\u641c\u7d22",size:"large",value:ge,onChange:e=>{this.setState({app_name:e.target.value,cloudApp_name:e.target.value})},defaultValue:ge,onSearch:this.handleSearch,style:{width:500}}))),Ie=[{key:"",tab:"\u5168\u90e8"}],he=[{key:"enterprise",tab:"\u516c\u53f8\u53d1\u5e03"},{key:"team",tab:"\u56e2\u961f\u53d1\u5e03"}],Ce=(Ie.concat(he),[]);Ce=(0,z.createTeam)((0,z.createEnterprise)(Ce,a),l,i),Ce.push({title:"\u521b\u5efa\u7ec4\u4ef6"});var fe=D.default.createElement("div",{style:{height:"255px",lineHeight:"255px",textAlign:"center"}},D.default.createElement(o.default,{size:"large"}));return D.default.createElement("div",null,J&&D.default.createElement(E.default,{eid:a.enterprise_id,marketName:J,title:"\u83b7\u53d6\u4e91\u5e94\u7528\u5546\u5e97\u6388\u6743",onCancel:()=>{this.setState({authorizations:!1})},currStep:2}),$&&D.default.createElement(Z.default,{installLoading:W,data:$,onSubmit:this.handleCreateHelm,onCancel:this.onCancelCreate}),O&&D.default.createElement(T.default,{disabled:t.effects["createApp/installApp"],onSubmit:I?this.handleCreate:"localApplication"==A?this.handleCreate:this.handleCloudCreate,onCancel:this.onCancelCreate,showCreate:O,addAppLoading:ee}),X&&D.default.createElement(P.default,{onOk:this.hideMarketAppDetail,onCancel:this.hideMarketAppDetail,app:Y}),I&&C&&D.default.createElement(s.default,{title:"\u786e\u8ba4\u8981\u5b89\u88c5\u6b64\u5e94\u7528\u4f5c\u4e3a\u4f60\u7684\u7ec4\u4ef6\u4e48\uff1f",className:w.default.TelescopicModal,visible:C,onOk:this.handleInstallBounced,onCancel:()=>{this.setState({installBounced:!1})},footer:D.default.createElement("div",null,D.default.createElement(d.default,{onClick:()=>{this.setState({installBounced:!1,is_deploy:!0})}},"\u53d6\u6d88"),D.default.createElement(d.default,{onClick:this.handleInstallBounced,type:"primary",style:{marginRight:"5px"},loading:t.effects["createApp/installApp"]},"\u5b89\u88c5"),D.default.createElement(r.default,{size:"small",onClick:this.renderSuccessOnChange,checked:H},"\u5e76\u6784\u5efa\u542f\u52a8"))},C.describe&&D.default.createElement("p",{style:{background:"rgba(22, 184, 248, 0.1)",padding:"8px"}},C.describe),this.renderFormComponent()),oe&&oe.length>0&&D.default.createElement("div",null,D.default.createElement(k.default,{isSvg:!0,breadcrumbList:Ce,content:I&&h?"":me,tabList:oe,tabActiveKey:A,onTabChange:this.handleTabMaxChange,isFooter:!!I},"localApplication"!==A&&!de&&D.default.createElement(n.default,{message:D.default.createElement("div",null,"\u5f53\u524d\u5e02\u573a\u6ca1\u6709\u5b89\u88c5\u6743\u9650\uff0c",D.default.createElement("a",{onClick:()=>{this.handleCertification(A)}},"\u53bb\u6388\u6743")),type:"success",style:{margin:"-10px 0 15px 0"}}),A.indexOf("Helm-")>-1&&g?D.default.createElement("div",null,q?fe:pe):"localApplication"===A?D.default.createElement("div",{style:{marginBottom:!h&&I&&"Service"===I&&"40px"}}):D.default.createElement("div",null,S&&-1!==S?fe:D.default.createElement("div",null,D.default.createElement("div",{className:V.default.cardList,style:{paddingBottom:"20px",marginBottom:h?"0px":"40px"}},-1!==S&&ue,j&&D.default.createElement(n.default,{style:{textAlign:"center",marginBottom:16},message:j,type:"warning"})))))))}},y=N))||y)||y);t.default=J},IkpK:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iODRweCIgaGVpZ2h0PSIxMDVweCIgdmlld0JveD0iMCAwIDg0IDEwNSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNTIuNSAoNjc0NjkpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPkdyb3VwPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+CiAgICAgICAgPHBhdGggZD0iTTQwLjcwOTM3NDgsMC45ODc1MzAyNzUgTDczLjcwOTM3NDgsMjIuMjYzODQ2MSBDNzUuMTM3MjgxMSwyMy4xODQ0Njk5IDc2LDI0Ljc2NzE4MTggNzYsMjYuNDY2MTQxNyBMNzYsNTkuODMyMDMxMiBMNzYsNzAuMDE1MjUxNCBDNzYsNzEuNzE0MjExMyA3NS4xMzcyODExLDczLjI5NjkyMzIgNzMuNzA5Mzc0OCw3NC4yMTc1NDcgTDQwLjcwOTM3NDgsOTUuNDkzODYyOCBDMzkuMDU5NzAwNCw5Ni41NTc0Njg3IDM2Ljk0MDI5OTYsOTYuNTU3NDY4NyAzNS4yOTA2MjUyLDk1LjQ5Mzg2MjggTDIuMjkwNjI1MjEsNzQuMjE3NTQ3IEMwLjg2MjcxODg3LDczLjI5NjkyMzIgOS44OTE5Nzg3NGUtMTUsNzEuNzE0MjExMyAxLjQyMTA4NTQ3ZS0xNCw3MC4wMTUyNTE0IEwtMS43NzYzNTY4NGUtMTUsMjYuNDY2MTQxNyBDLTMuNDkzMzk4OTRlLTE1LDI0Ljc2NzE4MTggMC44NjI3MTg4NywyMy4xODQ0Njk5IDIuMjkwNjI1MjEsMjIuMjYzODQ2MSBMMzUuMjkwNjI1MiwwLjk4NzUzMDI3NSBDMzYuOTQwMjk5NiwtMC4wNzYwNzU2MDE0IDM5LjA1OTcwMDQsLTAuMDc2MDc1NjAxNCA0MC43MDkzNzQ4LDAuOTg3NTMwMjc1IFoiIGlkPSJwYXRoLTEiPjwvcGF0aD4KICAgICAgICA8ZmlsdGVyIHg9Ii03LjklIiB5PSItNC4yJSIgd2lkdGg9IjExNS44JSIgaGVpZ2h0PSIxMTIuNSUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0yIj4KICAgICAgICAgICAgPGZlTW9ycGhvbG9neSByYWRpdXM9IjIiIG9wZXJhdG9yPSJkaWxhdGUiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dTcHJlYWRPdXRlcjEiPjwvZmVNb3JwaG9sb2d5PgogICAgICAgICAgICA8ZmVPZmZzZXQgZHg9IjAiIGR5PSIyIiBpbj0ic2hhZG93U3ByZWFkT3V0ZXIxIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4KICAgICAgICAgICAgPGZlTW9ycGhvbG9neSByYWRpdXM9IjIiIG9wZXJhdG9yPSJlcm9kZSIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd0lubmVyIj48L2ZlTW9ycGhvbG9neT4KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMiIgaW49InNoYWRvd0lubmVyIiByZXN1bHQ9InNoYWRvd0lubmVyIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVDb21wb3NpdGUgaW49InNoYWRvd09mZnNldE91dGVyMSIgaW4yPSJzaGFkb3dJbm5lciIgb3BlcmF0b3I9Im91dCIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiPjwvZmVDb21wb3NpdGU+CiAgICAgICAgICAgIDxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjEiIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUdhdXNzaWFuQmx1cj4KICAgICAgICAgICAgPGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAuOTAzNjY3ODIxICAgMCAwIDAgMCAwLjkwMDU0MDc5MiAgIDAgMCAwIDAgMC45MDQ3MzUzMzIgIDAgMCAwIDEgMCIgdHlwZT0ibWF0cml4IiBpbj0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUNvbG9yTWF0cml4PgogICAgICAgIDwvZmlsdGVyPgogICAgICAgIDxmaWx0ZXIgeD0iLTkuMiUiIHk9Ii01LjIlIiB3aWR0aD0iMTE4LjQlIiBoZWlnaHQ9IjExNC42JSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTMiPgogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIzIiBpbj0iU291cmNlQWxwaGEiIHJlc3VsdD0ic2hhZG93Qmx1cklubmVyMSI+PC9mZUdhdXNzaWFuQmx1cj4KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMCIgaW49InNoYWRvd0JsdXJJbm5lcjEiIHJlc3VsdD0ic2hhZG93T2Zmc2V0SW5uZXIxIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVDb21wb3NpdGUgaW49InNoYWRvd09mZnNldElubmVyMSIgaW4yPSJTb3VyY2VBbHBoYSIgb3BlcmF0b3I9ImFyaXRobWV0aWMiIGsyPSItMSIgazM9IjEiIHJlc3VsdD0ic2hhZG93SW5uZXJJbm5lcjEiPjwvZmVDb21wb3NpdGU+CiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwLjkwMzY2NzgyMSAgIDAgMCAwIDAgMC45MDA1NDA3OTIgICAwIDAgMCAwIDAuOTA0NzM1MzMyICAwIDAgMCAxIDAiIHR5cGU9Im1hdHJpeCIgaW49InNoYWRvd0lubmVySW5uZXIxIj48L2ZlQ29sb3JNYXRyaXg+CiAgICAgICAgPC9maWx0ZXI+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iR3JvdXAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQuMDAwMDAwLCAyLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0iUG9seWdvbiI+CiAgICAgICAgICAgICAgICA8dXNlIGZpbGw9ImJsYWNrIiBmaWxsLW9wYWNpdHk9IjEiIGZpbHRlcj0idXJsKCNmaWx0ZXItMikiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgPHVzZSBmaWxsPSJibGFjayIgZmlsbC1vcGFjaXR5PSIxIiBmaWx0ZXI9InVybCgjZmlsdGVyLTMpIiB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgICAgIDx1c2Ugc3Ryb2tlPSIjMDBGRjRBIiBzdHJva2Utd2lkdGg9IjQiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDxjaXJjbGUgaWQ9Ik92YWwiIGZpbGw9IiMwMDAwMDAiIGN4PSIzOCIgY3k9IjQ4IiByPSI4Ij48L2NpcmNsZT4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},JI99:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iODRweCIgaGVpZ2h0PSIxMDVweCIgdmlld0JveD0iMCAwIDg0IDEwNSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNTIuNSAoNjc0NjkpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPkdyb3VwPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+CiAgICAgICAgPHBhdGggZD0iTTQwLjcwOTM3NDgsMC45ODc1MzAyNzUgTDczLjcwOTM3NDgsMjIuMjYzODQ2MSBDNzUuMTM3MjgxMSwyMy4xODQ0Njk5IDc2LDI0Ljc2NzE4MTggNzYsMjYuNDY2MTQxNyBMNzYsNTkuODMyMDMxMiBMNzYsNzAuMDE1MjUxNCBDNzYsNzEuNzE0MjExMyA3NS4xMzcyODExLDczLjI5NjkyMzIgNzMuNzA5Mzc0OCw3NC4yMTc1NDcgTDQwLjcwOTM3NDgsOTUuNDkzODYyOCBDMzkuMDU5NzAwNCw5Ni41NTc0Njg3IDM2Ljk0MDI5OTYsOTYuNTU3NDY4NyAzNS4yOTA2MjUyLDk1LjQ5Mzg2MjggTDIuMjkwNjI1MjEsNzQuMjE3NTQ3IEMwLjg2MjcxODg3LDczLjI5NjkyMzIgOS44OTE5Nzg3NGUtMTUsNzEuNzE0MjExMyAxLjQyMTA4NTQ3ZS0xNCw3MC4wMTUyNTE0IEwtMS43NzYzNTY4NGUtMTUsMjYuNDY2MTQxNyBDLTMuNDkzMzk4OTRlLTE1LDI0Ljc2NzE4MTggMC44NjI3MTg4NywyMy4xODQ0Njk5IDIuMjkwNjI1MjEsMjIuMjYzODQ2MSBMMzUuMjkwNjI1MiwwLjk4NzUzMDI3NSBDMzYuOTQwMjk5NiwtMC4wNzYwNzU2MDE0IDM5LjA1OTcwMDQsLTAuMDc2MDc1NjAxNCA0MC43MDkzNzQ4LDAuOTg3NTMwMjc1IFoiIGlkPSJwYXRoLTEiPjwvcGF0aD4KICAgICAgICA8ZmlsdGVyIHg9Ii03LjklIiB5PSItNC4yJSIgd2lkdGg9IjExNS44JSIgaGVpZ2h0PSIxMTIuNSUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0yIj4KICAgICAgICAgICAgPGZlTW9ycGhvbG9neSByYWRpdXM9IjIiIG9wZXJhdG9yPSJkaWxhdGUiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dTcHJlYWRPdXRlcjEiPjwvZmVNb3JwaG9sb2d5PgogICAgICAgICAgICA8ZmVPZmZzZXQgZHg9IjAiIGR5PSIyIiBpbj0ic2hhZG93U3ByZWFkT3V0ZXIxIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4KICAgICAgICAgICAgPGZlTW9ycGhvbG9neSByYWRpdXM9IjIiIG9wZXJhdG9yPSJlcm9kZSIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd0lubmVyIj48L2ZlTW9ycGhvbG9neT4KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMiIgaW49InNoYWRvd0lubmVyIiByZXN1bHQ9InNoYWRvd0lubmVyIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVDb21wb3NpdGUgaW49InNoYWRvd09mZnNldE91dGVyMSIgaW4yPSJzaGFkb3dJbm5lciIgb3BlcmF0b3I9Im91dCIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiPjwvZmVDb21wb3NpdGU+CiAgICAgICAgICAgIDxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjEiIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUdhdXNzaWFuQmx1cj4KICAgICAgICAgICAgPGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAuOTAzNjY3ODIxICAgMCAwIDAgMCAwLjkwMDU0MDc5MiAgIDAgMCAwIDAgMC45MDQ3MzUzMzIgIDAgMCAwIDEgMCIgdHlwZT0ibWF0cml4IiBpbj0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUNvbG9yTWF0cml4PgogICAgICAgIDwvZmlsdGVyPgogICAgICAgIDxmaWx0ZXIgeD0iLTkuMiUiIHk9Ii01LjIlIiB3aWR0aD0iMTE4LjQlIiBoZWlnaHQ9IjExNC42JSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTMiPgogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIzIiBpbj0iU291cmNlQWxwaGEiIHJlc3VsdD0ic2hhZG93Qmx1cklubmVyMSI+PC9mZUdhdXNzaWFuQmx1cj4KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMCIgaW49InNoYWRvd0JsdXJJbm5lcjEiIHJlc3VsdD0ic2hhZG93T2Zmc2V0SW5uZXIxIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVDb21wb3NpdGUgaW49InNoYWRvd09mZnNldElubmVyMSIgaW4yPSJTb3VyY2VBbHBoYSIgb3BlcmF0b3I9ImFyaXRobWV0aWMiIGsyPSItMSIgazM9IjEiIHJlc3VsdD0ic2hhZG93SW5uZXJJbm5lcjEiPjwvZmVDb21wb3NpdGU+CiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwLjkwMzY2NzgyMSAgIDAgMCAwIDAgMC45MDA1NDA3OTIgICAwIDAgMCAwIDAuOTA0NzM1MzMyICAwIDAgMCAxIDAiIHR5cGU9Im1hdHJpeCIgaW49InNoYWRvd0lubmVySW5uZXIxIj48L2ZlQ29sb3JNYXRyaXg+CiAgICAgICAgPC9maWx0ZXI+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iR3JvdXAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQuMDAwMDAwLCAyLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0iUG9seWdvbiI+CiAgICAgICAgICAgICAgICA8dXNlIGZpbGw9ImJsYWNrIiBmaWxsLW9wYWNpdHk9IjEiIGZpbHRlcj0idXJsKCNmaWx0ZXItMikiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgPHVzZSBmaWxsPSJibGFjayIgZmlsbC1vcGFjaXR5PSIxIiBmaWx0ZXI9InVybCgjZmlsdGVyLTMpIiB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgICAgIDx1c2Ugc3Ryb2tlPSIjQ0QwMjAwIiBzdHJva2Utd2lkdGg9IjQiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDxjaXJjbGUgaWQ9Ik92YWwiIGZpbGw9IiMwMDAwMDAiIGN4PSIzOCIgY3k9IjQ4IiByPSI4Ij48L2NpcmNsZT4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},Kia0:function(e,t,a){e.exports={tabTitle:"tabTitle___2CONk",tabTr:"tabTr___3iaGW",w500:"w500___orTyB",w300:"w300___1jikJ",w380:"w380___OrUuz",over:"over___3at-n"}},Mw2C:function(e,t,a){"use strict";var l=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,s,r,d=l(a("jehZ")),o=i(a("q1tI")),c=a("MuoO"),u=i(a("U8JG")),p=l(a("ZIYD")),g=l(a("SSRH")),m=l(a("yCR+")),I=l(a("TbCP")),h=l(a("cYkQ")),C=l(a("aiW3")),f=l(a("bKuN")),A=l(a("JI99")),v=l(a("IkpK")),y=l(a("oWzr")),N=l(a("SHsa")),M=(n=(0,c.connect)(),n((r=class extends o.PureComponent{constructor(e){super(e),this.config=(e=>{var t="The Internet"==e?[[.5,2.5]]:[[.5,-2.5],[.5,3.5]];return{draw(t){var a=t.getGraphicGroup(),l=t.getModel(),i=10,n=10,s=-i/2,r=-n/2,d=3,o="The Internet"==e?23:16,c="The Internet"==e?22:20,u=a.addShape("rect",{attrs:{x:s+o,y:r+c,width:6,height:6,radius:d,stroke:"#000000",fill:"#000000"}});a.addShape("image",{attrs:{img:"third_party"==e?N.default:"The Internet"==e?g.default:"running"==e?m.default:"succeeded"==e?m.default:"closed"==e?h.default:"undeploy"==e?I.default:"starting"==e?C.default:"checking"==e?C.default:"stoping"==e?C.default:"creating"==e?y.default:"upgrade"==e?v.default:"unusual"==e?A.default:"Owed"==e?A.default:"expired"==e?A.default:"Expired"==e?A.default:"Unknown"==e?A.default:"unknown"==e?A.default:"Unknow"==e?A.default:"unknow"==e?A.default:"stopping"==e?f.default:"abnormal"==e?A.default:"some_abnormal"==e?A.default:"building"==e?y.default:"build_failure"==e?A.default:"",x:s,y:r,width:"The Internet"==e?53:38,height:"The Internet"==e?45:48}});var p=l.label?l.label:this.label,M=p.length>=3?0:10;return a.addShape("text",{attrs:{text:p,x:s+M,y:r+46,textAlign:"left",textBaseline:"top",fill:"rgba(0,0,0,0.65)"}}),u},anchor:t}}),this.state={colorDataType:["The Internet","Unknow","Unknown","unknown","running","closed","undeploy","starting","checking","stoping","upgrade","unusual","Owed","expired","Expired","internet","unknow","stopping","abnormal","some_abnormal","building","build_failure","creating","third_party","succeeded"]}}render(){var e=this.state.colorDataType,t=this.props,a=(t.flagHeight,t.iframeHeight);return o.default.createElement("div",{style:{height:a,background:"#fff"},bordered:!1},o.default.createElement(u.default,null,e.map((t,a)=>{return o.default.createElement(u.RegisterNode,{key:a,name:e[a],config:this.config(e[a])})}),o.default.createElement(p.default,(0,d.default)({iframeHeight:a},this.props))))}},s=r))||s),b=M;t.default=b},PKy1:function(e,t,a){e.exports={yaml_container:"yaml_container___2l40d",update:"update___lAF9J",delete:"delete___wpCYi",fileName:"fileName___2TOVl"}},SHsa:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iODRweCIgaGVpZ2h0PSIxMDVweCIgdmlld0JveD0iMCAwIDg0IDEwNSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNTIuNSAoNjc0NjkpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPkdyb3VwPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+CiAgICAgICAgPHBhdGggZD0iTTQwLjcwOTM3NDgsMC45ODc1MzAyNzUgTDczLjcwOTM3NDgsMjIuMjYzODQ2MSBDNzUuMTM3MjgxMSwyMy4xODQ0Njk5IDc2LDI0Ljc2NzE4MTggNzYsMjYuNDY2MTQxNyBMNzYsNTkuODMyMDMxMiBMNzYsNzAuMDE1MjUxNCBDNzYsNzEuNzE0MjExMyA3NS4xMzcyODExLDczLjI5NjkyMzIgNzMuNzA5Mzc0OCw3NC4yMTc1NDcgTDQwLjcwOTM3NDgsOTUuNDkzODYyOCBDMzkuMDU5NzAwNCw5Ni41NTc0Njg3IDM2Ljk0MDI5OTYsOTYuNTU3NDY4NyAzNS4yOTA2MjUyLDk1LjQ5Mzg2MjggTDIuMjkwNjI1MjEsNzQuMjE3NTQ3IEMwLjg2MjcxODg3LDczLjI5NjkyMzIgOS44OTE5Nzg3NGUtMTUsNzEuNzE0MjExMyAxLjQyMTA4NTQ3ZS0xNCw3MC4wMTUyNTE0IEwtMS43NzYzNTY4NGUtMTUsMjYuNDY2MTQxNyBDLTMuNDkzMzk4OTRlLTE1LDI0Ljc2NzE4MTggMC44NjI3MTg4NywyMy4xODQ0Njk5IDIuMjkwNjI1MjEsMjIuMjYzODQ2MSBMMzUuMjkwNjI1MiwwLjk4NzUzMDI3NSBDMzYuOTQwMjk5NiwtMC4wNzYwNzU2MDE0IDM5LjA1OTcwMDQsLTAuMDc2MDc1NjAxNCA0MC43MDkzNzQ4LDAuOTg3NTMwMjc1IFoiIGlkPSJwYXRoLTEiPjwvcGF0aD4KICAgICAgICA8ZmlsdGVyIHg9Ii03LjklIiB5PSItNC4yJSIgd2lkdGg9IjExNS44JSIgaGVpZ2h0PSIxMTIuNSUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0yIj4KICAgICAgICAgICAgPGZlTW9ycGhvbG9neSByYWRpdXM9IjIiIG9wZXJhdG9yPSJkaWxhdGUiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dTcHJlYWRPdXRlcjEiPjwvZmVNb3JwaG9sb2d5PgogICAgICAgICAgICA8ZmVPZmZzZXQgZHg9IjAiIGR5PSIyIiBpbj0ic2hhZG93U3ByZWFkT3V0ZXIxIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4KICAgICAgICAgICAgPGZlTW9ycGhvbG9neSByYWRpdXM9IjIiIG9wZXJhdG9yPSJlcm9kZSIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd0lubmVyIj48L2ZlTW9ycGhvbG9neT4KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMiIgaW49InNoYWRvd0lubmVyIiByZXN1bHQ9InNoYWRvd0lubmVyIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVDb21wb3NpdGUgaW49InNoYWRvd09mZnNldE91dGVyMSIgaW4yPSJzaGFkb3dJbm5lciIgb3BlcmF0b3I9Im91dCIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiPjwvZmVDb21wb3NpdGU+CiAgICAgICAgICAgIDxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjEiIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUdhdXNzaWFuQmx1cj4KICAgICAgICAgICAgPGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAuOTAzNjY3ODIxICAgMCAwIDAgMCAwLjkwMDU0MDc5MiAgIDAgMCAwIDAgMC45MDQ3MzUzMzIgIDAgMCAwIDEgMCIgdHlwZT0ibWF0cml4IiBpbj0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUNvbG9yTWF0cml4PgogICAgICAgIDwvZmlsdGVyPgogICAgICAgIDxmaWx0ZXIgeD0iLTkuMiUiIHk9Ii01LjIlIiB3aWR0aD0iMTE4LjQlIiBoZWlnaHQ9IjExNC42JSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTMiPgogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIzIiBpbj0iU291cmNlQWxwaGEiIHJlc3VsdD0ic2hhZG93Qmx1cklubmVyMSI+PC9mZUdhdXNzaWFuQmx1cj4KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMCIgaW49InNoYWRvd0JsdXJJbm5lcjEiIHJlc3VsdD0ic2hhZG93T2Zmc2V0SW5uZXIxIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVDb21wb3NpdGUgaW49InNoYWRvd09mZnNldElubmVyMSIgaW4yPSJTb3VyY2VBbHBoYSIgb3BlcmF0b3I9ImFyaXRobWV0aWMiIGsyPSItMSIgazM9IjEiIHJlc3VsdD0ic2hhZG93SW5uZXJJbm5lcjEiPjwvZmVDb21wb3NpdGU+CiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwLjkwMzY2NzgyMSAgIDAgMCAwIDAgMC45MDA1NDA3OTIgICAwIDAgMCAwIDAuOTA0NzM1MzMyICAwIDAgMCAxIDAiIHR5cGU9Im1hdHJpeCIgaW49InNoYWRvd0lubmVySW5uZXIxIj48L2ZlQ29sb3JNYXRyaXg+CiAgICAgICAgPC9maWx0ZXI+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iR3JvdXAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQuMDAwMDAwLCAyLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0iUG9seWdvbiI+CiAgICAgICAgICAgICAgICA8dXNlIGZpbGw9ImJsYWNrIiBmaWxsLW9wYWNpdHk9IjEiIGZpbHRlcj0idXJsKCNmaWx0ZXItMikiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgPHVzZSBmaWxsPSJibGFjayIgZmlsbC1vcGFjaXR5PSIxIiBmaWx0ZXI9InVybCgjZmlsdGVyLTMpIiB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgICAgIDx1c2Ugc3Ryb2tlPSIjNUJCMUZBIiBzdHJva2Utd2lkdGg9IjQiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDxjaXJjbGUgaWQ9Ik92YWwiIGZpbGw9IiMwMDAwMDAiIGN4PSIzOCIgY3k9IjQ4IiByPSI4Ij48L2NpcmNsZT4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},SSRH:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTEycHgiIGhlaWdodD0iODZweCIgdmlld0JveD0iMCAwIDExMiA4NiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNDkuMyAoNTExNjcpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPkdyb3VwIDI8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBkPSJNODEuNzcyNTc5NCwzNC4wNjM3NDA4IEM4Mi4yMjEzMDU4LDM0LjAyMTUxNjQgODIuNjc0Mzg0NywzNCA4My4xMzEwNzIzLDM0IEM5Mi40NDc1MjQzLDM0IDEwMCw0Mi45NTQzMDQ1IDEwMCw1NCBDMTAwLDY1LjA0NTY5NTUgOTIuNDQ3NTI0Myw3NCA4My4xMzEwNzIzLDc0IEw3OCw3NCBMNjAuMTc2NTc4LDc0IEwxOC4yNzI3NDYsNzQgQzguMTgwOTg2NTQsNzQgMCw2NC4xNTAyNjUxIDAsNTIgQzAsNDEuNjE2NTE0MSA1Ljk3NDc2MDgsMzIuOTEzMTU3OSAxNC4wMTA4NzkxLDMwLjYwMTU4NjEgQzE0LjAwMzY1MDcsMzAuNDAyMTA4OSAxNCwzMC4yMDE1NTE4IDE0LDMwIEMxNCwyMi4yNjgwMTMxIDE5LjM3MjU4MjcsMTYgMjYsMTYgQzI4LjkxMjYxNjYsMTYgMzEuNTgyODcxMywxNy4yMTA2MjAyIDMzLjY2MTI0MDEsMTkuMjI0MDgyOCBDMzcuMjY5MDgzOSw3Ljk3OTI0NjM2IDQ2LjM1ODAxOTUsMCA1NywwIEM3MC44MDcxMTk0LDAgODIsMTMuNDMxNDU2NyA4MiwzMCBDODIsMzEuMzc4MjYzNiA4MS45MjI1NDcxLDMyLjczNDgxOTEgODEuNzcyNTc5NCwzNC4wNjM3NDA4IFoiIGlkPSJwYXRoLTEiPjwvcGF0aD4KICAgICAgICA8ZmlsdGVyIHg9Ii05LjAlIiB5PSItOS41JSIgd2lkdGg9IjExOC4wJSIgaGVpZ2h0PSIxMjQuMyUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0yIj4KICAgICAgICAgICAgPGZlTW9ycGhvbG9neSByYWRpdXM9IjIiIG9wZXJhdG9yPSJkaWxhdGUiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dTcHJlYWRPdXRlcjEiPjwvZmVNb3JwaG9sb2d5PgogICAgICAgICAgICA8ZmVPZmZzZXQgZHg9IjAiIGR5PSIyIiBpbj0ic2hhZG93U3ByZWFkT3V0ZXIxIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4KICAgICAgICAgICAgPGZlTW9ycGhvbG9neSByYWRpdXM9IjIiIG9wZXJhdG9yPSJlcm9kZSIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd0lubmVyIj48L2ZlTW9ycGhvbG9neT4KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMiIgaW49InNoYWRvd0lubmVyIiByZXN1bHQ9InNoYWRvd0lubmVyIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVDb21wb3NpdGUgaW49InNoYWRvd09mZnNldE91dGVyMSIgaW4yPSJzaGFkb3dJbm5lciIgb3BlcmF0b3I9Im91dCIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiPjwvZmVDb21wb3NpdGU+CiAgICAgICAgICAgIDxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjIiIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUdhdXNzaWFuQmx1cj4KICAgICAgICAgICAgPGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAuOTAzNjY3ODIxICAgMCAwIDAgMCAwLjkwMDU0MDc5MiAgIDAgMCAwIDAgMC45MDQ3MzUzMzIgIDAgMCAwIDEgMCIgdHlwZT0ibWF0cml4IiBpbj0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUNvbG9yTWF0cml4PgogICAgICAgIDwvZmlsdGVyPgogICAgICAgIDxmaWx0ZXIgeD0iLTkuMCUiIHk9Ii05LjUlIiB3aWR0aD0iMTE4LjAlIiBoZWlnaHQ9IjEyNC4zJSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTMiPgogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIzIiBpbj0iU291cmNlQWxwaGEiIHJlc3VsdD0ic2hhZG93Qmx1cklubmVyMSI+PC9mZUdhdXNzaWFuQmx1cj4KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMCIgaW49InNoYWRvd0JsdXJJbm5lcjEiIHJlc3VsdD0ic2hhZG93T2Zmc2V0SW5uZXIxIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVDb21wb3NpdGUgaW49InNoYWRvd09mZnNldElubmVyMSIgaW4yPSJTb3VyY2VBbHBoYSIgb3BlcmF0b3I9ImFyaXRobWV0aWMiIGsyPSItMSIgazM9IjEiIHJlc3VsdD0ic2hhZG93SW5uZXJJbm5lcjEiPjwvZmVDb21wb3NpdGU+CiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwLjkwMzY2NzgyMSAgIDAgMCAwIDAgMC45MDA1NDA3OTIgICAwIDAgMCAwIDAuOTA0NzM1MzMyICAwIDAgMCAxIDAiIHR5cGU9Im1hdHJpeCIgaW49InNoYWRvd0lubmVySW5uZXIxIj48L2ZlQ29sb3JNYXRyaXg+CiAgICAgICAgPC9maWx0ZXI+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iR3JvdXAtMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNi4wMDAwMDAsIDQuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIGlkPSJPdmFsLTEiPgogICAgICAgICAgICAgICAgPHVzZSBmaWxsPSJibGFjayIgZmlsbC1vcGFjaXR5PSIxIiBmaWx0ZXI9InVybCgjZmlsdGVyLTIpIiB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iYmxhY2siIGZpbGwtb3BhY2l0eT0iMSIgZmlsdGVyPSJ1cmwoI2ZpbHRlci0zKSIgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+CiAgICAgICAgICAgICAgICA8dXNlIHN0cm9rZT0iIzVCQjFGQSIgc3Ryb2tlLXdpZHRoPSI0IiB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8Y2lyY2xlIGlkPSJPdmFsIiBmaWxsPSIjMDAwMDAwIiBjeD0iNTAiIGN5PSI0NSIgcj0iOCI+PC9jaXJjbGU+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},Sp8k:function(e,t,a){e.exports={headerBox:"headerBox___Bdnma",icons:"icons___R3LPa",verticalCen:"verticalCen___1P_Da",pageHeader:"pageHeader___2fFnz",detail:"detail____dhkg",row:"row___3BugX",breadcrumb:"breadcrumb___9Niy0",tabs:"tabs___IFWEi",logo:"logo___3AfRG",title:"title___sCJkV",action:"action___3Mhs5",content:"content___2y83l",extraContent:"extraContent___1z2nb",main:"main___dIWGW",ServiceTitle:"ServiceTitle___MH7wW",ServiceBox:"ServiceBox___2oMA_",ServiceDiv:"ServiceDiv___1D9yv",ServiceSmallTitle:"ServiceSmallTitle___15zpy"}},T0wR:function(e,t,a){"use strict";var l=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("q1tI")),s=l(a("8vpL"));class r extends n.PureComponent{render(){var e=this.props,t=e.group_id,a=e.iframeHeight;return n.default.createElement("div",{style:{height:a,background:"#fff"},bordered:!1},n.default.createElement(s.default,{iframeHeight:a,group_id:t}))}}t.default=r},TbCP:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iODRweCIgaGVpZ2h0PSIxMDVweCIgdmlld0JveD0iMCAwIDg0IDEwNSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNTIuNSAoNjc0NjkpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPkdyb3VwIENvcHk8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBkPSJNNDAuNzA5Mzc0OCwwLjk4NzUzMDI3NSBMNzMuNzA5Mzc0OCwyMi4yNjM4NDYxIEM3NS4xMzcyODExLDIzLjE4NDQ2OTkgNzYsMjQuNzY3MTgxOCA3NiwyNi40NjYxNDE3IEw3Niw3MC4wMTUyNTE0IEM3Niw3MS43MTQyMTEzIDc1LjEzNzI4MTEsNzMuMjk2OTIzMiA3My43MDkzNzQ4LDc0LjIxNzU0NyBMNDAuNzA5Mzc0OCw5NS40OTM4NjI4IEMzOS4wNTk3MDA0LDk2LjU1NzQ2ODcgMzYuOTQwMjk5Niw5Ni41NTc0Njg3IDM1LjI5MDYyNTIsOTUuNDkzODYyOCBMMi4yOTA2MjUyMSw3NC4yMTc1NDcgQzAuODYyNzE4ODcsNzMuMjk2OTIzMiAyLjI0MTI1MjMxZS0xNCw3MS43MTQyMTEzIDIuMjIwNDQ2MDVlLTE0LDcwLjAxNTI1MTQgTC04Ljg4MTc4NDJlLTE2LDI2LjQ2NjE0MTcgQy0yLjYwNTIyMDUyZS0xNSwyNC43NjcxODE4IDAuODYyNzE4ODcsMjMuMTg0NDY5OSAyLjI5MDYyNTIxLDIyLjI2Mzg0NjEgTDM1LjI5MDYyNTIsMC45ODc1MzAyNzUgQzM2Ljk0MDI5OTYsLTAuMDc2MDc1NjAxNCAzOS4wNTk3MDA0LC0wLjA3NjA3NTYwMTQgNDAuNzA5Mzc0OCwwLjk4NzUzMDI3NSBaIiBpZD0icGF0aC0xIj48L3BhdGg+CiAgICAgICAgPGZpbHRlciB4PSItNy45JSIgeT0iLTMuOSUiIHdpZHRoPSIxMTUuOCUiIGhlaWdodD0iMTEyLjAlIiBmaWx0ZXJVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIGlkPSJmaWx0ZXItMiI+CiAgICAgICAgICAgIDxmZU1vcnBob2xvZ3kgcmFkaXVzPSIyIiBvcGVyYXRvcj0iZGlsYXRlIiBpbj0iU291cmNlQWxwaGEiIHJlc3VsdD0ic2hhZG93U3ByZWFkT3V0ZXIxIj48L2ZlTW9ycGhvbG9neT4KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMiIgaW49InNoYWRvd1NwcmVhZE91dGVyMSIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiPjwvZmVPZmZzZXQ+CiAgICAgICAgICAgIDxmZU1vcnBob2xvZ3kgcmFkaXVzPSIyIiBvcGVyYXRvcj0iZXJvZGUiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dJbm5lciI+PC9mZU1vcnBob2xvZ3k+CiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9IjIiIGluPSJzaGFkb3dJbm5lciIgcmVzdWx0PSJzaGFkb3dJbm5lciI+PC9mZU9mZnNldD4KICAgICAgICAgICAgPGZlQ29tcG9zaXRlIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIGluMj0ic2hhZG93SW5uZXIiIG9wZXJhdG9yPSJvdXQiIHJlc3VsdD0ic2hhZG93T2Zmc2V0T3V0ZXIxIj48L2ZlQ29tcG9zaXRlPgogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIxIiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVHYXVzc2lhbkJsdXI+CiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwLjkwMzY2NzgyMSAgIDAgMCAwIDAgMC45MDA1NDA3OTIgICAwIDAgMCAwIDAuOTA0NzM1MzMyICAwIDAgMCAxIDAiIHR5cGU9Im1hdHJpeCIgaW49InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVDb2xvck1hdHJpeD4KICAgICAgICA8L2ZpbHRlcj4KICAgICAgICA8ZmlsdGVyIHg9Ii05LjIlIiB5PSItNS4wJSIgd2lkdGg9IjExOC40JSIgaGVpZ2h0PSIxMTQuMSUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0zIj4KICAgICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMyIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd0JsdXJJbm5lcjEiPjwvZmVHYXVzc2lhbkJsdXI+CiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9IjAiIGluPSJzaGFkb3dCbHVySW5uZXIxIiByZXN1bHQ9InNoYWRvd09mZnNldElubmVyMSI+PC9mZU9mZnNldD4KICAgICAgICAgICAgPGZlQ29tcG9zaXRlIGluPSJzaGFkb3dPZmZzZXRJbm5lcjEiIGluMj0iU291cmNlQWxwaGEiIG9wZXJhdG9yPSJhcml0aG1ldGljIiBrMj0iLTEiIGszPSIxIiByZXN1bHQ9InNoYWRvd0lubmVySW5uZXIxIj48L2ZlQ29tcG9zaXRlPgogICAgICAgICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMC45MDM2Njc4MjEgICAwIDAgMCAwIDAuOTAwNTQwNzkyICAgMCAwIDAgMCAwLjkwNDczNTMzMiAgMCAwIDAgMSAwIiB0eXBlPSJtYXRyaXgiIGluPSJzaGFkb3dJbm5lcklubmVyMSI+PC9mZUNvbG9yTWF0cml4PgogICAgICAgIDwvZmlsdGVyPgogICAgPC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Ikdyb3VwLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQuMDAwMDAwLCAyLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0iUG9seWdvbiI+CiAgICAgICAgICAgICAgICA8dXNlIGZpbGw9ImJsYWNrIiBmaWxsLW9wYWNpdHk9IjEiIGZpbHRlcj0idXJsKCNmaWx0ZXItMikiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgPHVzZSBmaWxsPSJibGFjayIgZmlsbC1vcGFjaXR5PSIxIiBmaWx0ZXI9InVybCgjZmlsdGVyLTMpIiB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgICAgIDx1c2Ugc3Ryb2tlPSIjNzA4MDkwIiBzdHJva2Utd2lkdGg9IjQiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDxjaXJjbGUgaWQ9Ik92YWwiIGZpbGw9IiMwMDAwMDAiIGN4PSIzOCIgY3k9IjQ4IiByPSI4Ij48L2NpcmNsZT4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},VJda:function(e,t,a){e.exports={nameID:"nameID___neYJ7",icon:"icon___10buC",iconm:"iconm___rowBO",tableList:"tableList___3kkUe",tableListOperator:"tableListOperator___C1LIL"}},Z0Jj:function(e,t,a){"use strict";var l=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var n=l(a("kLXV"));a("7Kak");var s=l(a("9yH6"));a("jCWc");var r=l(a("kPKH"));a("14J3");var d=l(a("BMrR"));a("T2oS");var o=l(a("W9HT"));a("5Dmo");var c=l(a("3S7+"));a("/zsF");var u=l(a("PArb"));a("+L6B");var p=l(a("2/Rp"));a("Pwec");var g=l(a("CtXQ"));a("/xke");var m,I,h,C=l(a("TeRw")),f=l(a("jehZ")),A=l(a("qCJ4")),v=l(a("4SMx")),y=l(a("ri62")),N=l(a("18gR")),M=a("RBnf"),b=a("MuoO"),S=a("7DNP"),D=l(a("wd/R")),E=i(a("q1tI")),Z=l(a("Jxxo")),T=l(a("q76B")),w=l(a("3jFV")),j=l(a("YCtL")),G=a("xpXo"),P=l(a("8+Sn")),k=l(a("QDog")),x=l(a("mWxT")),z=l(a("ZgmS")),_=l(a("i+gw")),L=l(a("T0wR")),R=l(a("Zob5")),V=l(a("0fGy")),W=l(a("Mw2C")),B=l(a("puIC")),J=(m=(0,b.connect)(e=>{var t=e.user,a=e.application,l=e.teamControl,i=e.enterprise,n=e.loading,s=e.global;return{buildShapeLoading:n.effects["global/buildShape"],editGroupLoading:n.effects["application/editGroup"],deleteLoading:n.effects["application/delete"],currUser:t.currentUser,apps:a.apps,groupDetail:a.groupDetail||{},currentTeam:l.currentTeam,currentRegionName:l.currentRegionName,currentEnterprise:i.currentEnterprise,novices:s.novices}}),m((h=class extends E.PureComponent{constructor(e){var t;super(e),t=this,this.onCancel=(()=>{this.setState({customSwitch:!1})}),this.closeTimer=(()=>{this.timer&&clearInterval(this.timer)}),this.loading=(()=>{this.fetchAppDetail(),this.loadTopology(!0),this.fetchAppDetailState()}),this.handleNewbieGuiding=(e=>{var t=e.nextStep;return E.default.createElement(N.default,(0,f.default)({},e,{totals:2,handleClose:()=>{this.handleGuideStep("close")},handleNext:()=>{t&&(document.getElementById("scroll_div").scrollIntoView(),this.handleGuideStep(t))}}))}),this.handleGuideStep=(e=>{this.setState({guideStep:e})}),this.handleError=(e=>{var t=this.state.componentTimer;if(!t)return null;e&&e.data&&e.data.msg_show&&C.default.warning({message:"\u8bf7\u6c42\u9519\u8bef",description:e.data.msg_show})}),this.handleTimers=((e,t,a)=>{var l=this.state.componentTimer;if(!l)return null;this[e]=setTimeout(()=>{t()},a)}),this.fetchAppDetail=(()=>{var e=this.props.dispatch,t=this.props.match.params,a=t.teamName,l=t.regionName,i=t.appID;e({type:"application/fetchGroupDetail",payload:{team_name:a,region_name:l,group_id:i},callback:e=>{e&&200===e.status_code&&this.setState({currApp:e.bean})},handleError:t=>{var a=this.state.componentTimer;if(!a)return null;t&&404===t.code&&e(S.routerRedux.push("/team/".concat(k.default.getCurrTeamName(),"/region/").concat(k.default.getCurrRegionName(),"/apps")))}})}),this.handleWaitLevel=(()=>{var e=this.props.dispatch,t=this.props.match.params,a=t.teamName,l=t.appID;e({type:"application/fetchToupgrade",payload:{team_name:a,group_id:l},callback:e=>{var t=e&&e.bean||{};this.setState({upgradableNumLoading:!1,upgradableNum:t&&t.upgradable_num||0})}})}),this.fetchAppDetailState=(()=>{var e=this.props.dispatch,t=this.props.match.params,a=t.teamName,l=t.appID;e({type:"application/fetchAppDetailState",payload:{team_name:a,group_id:l},callback:e=>{this.setState({resources:e.list,appStatusConfig:!0})}})}),this.handleFormReset=(()=>{var e=this.props.form;e.resetFields(),this.loadApps()}),this.handleSearch=(e=>{e.preventDefault(),this.loadApps()}),this.changeType=(e=>{this.setState({type:e})}),this.toDelete=(()=>{this.closeComponentTimer(),this.setState({toDelete:!0})}),this.cancelDelete=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t.setState({toDelete:!1}),e&&t.openComponentTimer()},this.closeComponentTimer=(()=>{this.setState({componentTimer:!1}),this.closeTimer()}),this.openComponentTimer=(()=>{this.setState({componentTimer:!0},()=>{this.loadTopology(!0)})}),this.handleDelete=(()=>{var e=this.props.dispatch;e({type:"application/delete",payload:{team_name:k.default.getCurrTeamName(),group_id:this.getGroupId()},callback:t=>{t&&200===t.status_code&&(C.default.success({message:"\u5220\u9664\u6210\u529f"}),this.closeComponentTimer(),this.cancelDelete(!1),e(S.routerRedux.replace("/team/".concat(k.default.getCurrTeamName(),"/region/").concat(k.default.getCurrRegionName(),"/apps"))))}})}),this.newAddress=(e=>{this.props.dispatch({type:"global/fetchGroups",payload:{team_name:k.default.getCurrTeamName()},callback:t=>{t&&t.length?e==t[0].group_id?this.newAddress(e):this.props.dispatch(S.routerRedux.push("/team/".concat(k.default.getCurrTeamName(),"/region/").concat(k.default.getCurrRegionName(),"/apps/").concat(t[0].group_id))):this.props.dispatch(S.routerRedux.push("/team/".concat(k.default.getCurrTeamName(),"/region/").concat(k.default.getCurrRegionName(),"/index")))}})}),this.toEdit=(()=>{this.setState({toEdit:!0})}),this.cancelEdit=(()=>{this.setState({toEdit:!1})}),this.handleToEditAppDirector=(()=>{this.setState({toEditAppDirector:!0})}),this.cancelEditAppDirector=(()=>{this.setState({toEditAppDirector:!1})}),this.handleEdit=(e=>{var t=this.props.dispatch;t({type:"application/editGroup",payload:{team_name:k.default.getCurrTeamName(),group_id:this.getGroupId(),group_name:e.group_name,note:e.note,username:e.username,logo:e.logo,k8s_app:e.k8s_app},callback:e=>{e&&200===e.status_code&&(C.default.success({message:"\u4fee\u6539\u6210\u529f"}),t({type:"application/editGroups",payload:{team_name:k.default.getCurrTeamName(),group_id:this.getGroupId()},callback:e=>{C.default.success({message:"\u91cd\u542f\u5e94\u7528\u540e\u751f\u6548"})}})),this.handleUpDataHeader(),this.cancelEdit(),this.cancelEditAppDirector(),this.fetchAppDetail(),t({type:"global/fetchGroups",payload:{team_name:k.default.getCurrTeamName()}})}})}),this.handleUpDataHeader=(()=>{var e=this.props.dispatch;e({type:"global/IsUpDataHeader",payload:{isUpData:!0}})}),this.handleTopology=(e=>{this.setState({promptModal:!0,code:e})}),this.handleOpenRapidCopy=(()=>{this.setState({rapidCopy:!0})}),this.handleCloseRapidCopy=(()=>{this.setState({rapidCopy:!1})}),this.handlePromptModalOpen=(()=>{var e=this.state,t=e.code,a=e.serviceIds,l=this.props.dispatch;"restart"===t?(0,G.batchOperation)({action:t,team_name:k.default.getCurrTeamName(),serviceIds:a&&a.join(",")}).then(e=>{e&&200===e.status_code&&(C.default.success({message:"\u91cd\u542f\u6210\u529f"}),this.handlePromptModalClose()),this.loadTopology(!1)}):l({type:"global/buildShape",payload:{tenantName:k.default.getCurrTeamName(),group_id:this.getGroupId(),action:t},callback:e=>{e&&200===e.status_code&&(C.default.success({message:e.msg_show||"\u6784\u5efa\u6210\u529f",duration:"3"}),this.handlePromptModalClose()),this.loadTopology(!1)}})}),this.handlePromptModalClose=(()=>{this.setState({promptModal:!1,code:""})}),this.handleSizeChange=(e=>{this.setState({size:e.target.value})}),this.handleSwitch=(()=>{this.setState({customSwitch:!0})}),this.handleJump=(e=>{var t=this.props,a=t.dispatch,l=t.appID;a(S.routerRedux.push("/team/".concat(k.default.getCurrTeamName(),"/region/").concat(k.default.getCurrRegionName(),"/apps/").concat(l,"/").concat(e)))}),this.heightOnchage=(e=>{e?this.setState({flagHeight:!1,iframeHeight:"500px"}):this.setState({flagHeight:!0,iframeHeight:"70vh"})}),this.state={type:"shape",toDelete:!1,toEdit:!1,toEditAppDirector:!1,service_alias:[],serviceIds:[],linkList:[],jsonDataLength:0,promptModal:!1,code:"",size:"large",currApp:{},rapidCopy:!1,componentTimer:!0,customSwitch:!1,resources:{},upgradableNum:0,upgradableNumLoading:!0,appStatusConfig:!1,guideStep:1,aggregation:!1,common:!0,compile:!1,flagHeight:!1,iframeHeight:"500px"}}componentDidMount(){this.loading(),this.handleWaitLevel()}componentWillUnmount(){this.closeTimer();var e=this.props.dispatch;e({type:"application/clearGroupDetail"})}getGroupId(){return this.props.appID}loadTopology(e){var t=this.props.dispatch,a=k.default.getCurrTeamName(),l=k.default.getCurrRegionName();P.default.set("team_name",a),P.default.set("region_name",l),t({type:"global/fetAllTopology",payload:{region_name:l,team_name:a,groupId:this.getGroupId()},callback:t=>{if(t&&200===t.status_code){var a=t.bean;if("{}"===JSON.stringify(a))return;var l=[],i=[],n=a.json_data;Object.keys(n).map(e=>{l.push(e),"running"==n[e].cur_status&&1==n[e].is_internet&&i.push(n[e].service_alias)}),this.setState({jsonDataLength:Object.keys(n).length,service_alias:i,serviceIds:l},()=>{this.loadLinks(i.join("-"),e)})}}})}loadLinks(e,t){var a=this.props.dispatch;a({type:"global/queryLinks",payload:{service_alias:e,team_name:k.default.getCurrTeamName()},callback:e=>{e&&200===e.status_code&&this.setState({linkList:e.list||[]},()=>{t&&this.handleTimers("timer",()=>{this.fetchAppDetailState(),this.fetchAppDetail(),this.loadTopology(!0)},1e4)})},handleError:e=>{this.handleError(e),this.handleTimers("timer",()=>{this.fetchAppDetailState(),this.fetchAppDetail(),this.loadTopology(!0)},2e4)}})}render(){var e=this.props,t=e.groupDetail,a=e.appPermissions,l=a.isShare,i=a.isBackup,m=a.isUpgrade,I=a.isEdit,h=a.isDelete,C=a.isStart,f=a.isStop,N=a.isUpdate,b=a.isConstruct,S=a.isCopy,G=e.buildShapeLoading,P=e.editGroupLoading,J=e.deleteLoading,O=e.novices,X=e.appConfigGroupPermissions.isAccess,Y=e.componentPermissions,H=e.operationPermissions.isAccess,U=e.componentPermissions,Q=U.isAccess,F=U.isCreate,K=U.isConstruct,q=U.isRestart,$=this.state,ee=$.currApp,te=$.resources,ae=$.rapidCopy,le=$.jsonDataLength,ie=$.linkList,ne=$.code,se=$.promptModal,re=$.toEdit,de=$.toEditAppDirector,oe=$.toDelete,ce=$.type,ue=$.customSwitch,pe=$.serviceIds,ge=$.upgradableNumLoading,me=$.upgradableNum,Ie=$.appStatusConfig,he=$.guideStep,Ce=$.aggregation,fe=$.common,Ae=$.compile,ve=$.flagHeight,ye=$.iframeHeight,Ne={start:"\u542f\u52a8",restart:"\u91cd\u542f",stop:"\u505c\u7528",deploy:"\u6784\u5efa"},Me=!(le>0),be={marginRight:"10px"},Se=E.default.createElement("div",{className:B.default.pageHeaderContent},E.default.createElement("div",{className:B.default.contentl},E.default.createElement("div",{className:B.default.conBoxt},E.default.createElement("div",{className:B.default.contentTitle},E.default.createElement("span",null,ee.group_name||"-"),E.default.createElement(g.default,{style:{cursor:"pointer",marginLeft:"5px"},onClick:this.toEdit,type:"edit"})),te.status&&E.default.createElement("div",{className:B.default.extraContent},"CLOSED"!==te.status&&N&&E.default.createElement(p.default,{style:be,onClick:()=>{this.handleTopology("upgrade")},disabled:Me},"\u66f4\u65b0"),b&&K&&E.default.createElement(p.default,{style:be,disabled:Me,onClick:()=>{this.handleTopology("deploy")}},"\u6784\u5efa"),S&&E.default.createElement(p.default,{style:be,disabled:Me,onClick:this.handleOpenRapidCopy},"\u5feb\u901f\u590d\u5236"),ie.length>0&&E.default.createElement(j.default,{linkList:ie}))),E.default.createElement("div",{className:B.default.content_Box},Ie&&E.default.createElement(Z.default,{AppStatus:te.status}),te.status&&C&&E.default.createElement("span",null,E.default.createElement("a",{onClick:()=>{this.handleTopology("start")},disabled:Me},"\u542f\u52a8"),E.default.createElement(u.default,{type:"vertical"})),te.status&&("ABNORMAL"===te.status||"PARTIAL_ABNORMAL"===te.status)&&pe&&pe.length>0&&q&&E.default.createElement("span",null,E.default.createElement("a",{onClick:()=>{this.handleTopology("restart")},disabled:Me},"\u91cd\u542f"),E.default.createElement(u.default,{type:"vertical"})),h&&"RUNNING"!==te.status&&E.default.createElement("a",{onClick:this.toDelete},"\u5220\u9664"),te.status&&"CLOSED"!==te.status&&f&&E.default.createElement("span",null,"RUNNING"!==te.status&&E.default.createElement(u.default,{type:"vertical"}),E.default.createElement("a",{onClick:()=>{this.handleTopology("stop")}},"\u505c\u7528"))),E.default.createElement("div",{className:B.default.connect_Bot},E.default.createElement("div",{className:B.default.connect_Box},E.default.createElement("div",{className:B.default.connect_Boxs},E.default.createElement("div",null,"\u4f7f\u7528\u5185\u5b58"),E.default.createElement("div",null,"".concat(z.default.unit(te.memory||0,"MB")))),E.default.createElement("div",{className:B.default.connect_Boxs},E.default.createElement("div",null,"\u4f7f\u7528CPU"),E.default.createElement("div",null,te.cpu&&te.cpu/1e3||0,"Core"))),E.default.createElement("div",{className:B.default.connect_Box},E.default.createElement("div",{className:B.default.connect_Boxs},E.default.createElement("div",null,"\u4f7f\u7528\u78c1\u76d8"),E.default.createElement("div",null,"".concat(z.default.unit(te.disk||0,"KB")))),E.default.createElement("div",{className:B.default.connect_Boxs},E.default.createElement("div",null,"\u7ec4\u4ef6\u6570\u91cf"),E.default.createElement("div",null,ee.service_num||0))))),E.default.createElement("div",{className:B.default.contentr},E.default.createElement("div",{className:B.default.conrHeader},E.default.createElement("div",null,E.default.createElement("span",null,"\u521b\u5efa\u65f6\u95f4"),E.default.createElement("span",null,ee.create_time?(0,D.default)(ee.create_time).locale("zh-cn").format("YYYY-MM-DD HH:mm:ss"):"-")),E.default.createElement("div",null,E.default.createElement("span",null,"\u66f4\u65b0\u65f6\u95f4"),E.default.createElement("span",null,ee.update_time?(0,D.default)(ee.update_time).locale("zh-cn").format("YYYY-MM-DD HH:mm:ss"):"-"))),E.default.createElement("div",{className:B.default.conrHeader},E.default.createElement("div",null,E.default.createElement("span",null,"\u6cbb\u7406\u6a21\u5f0f"),E.default.createElement("span",null,ee.governance_mode?k.default.fetchGovernanceMode(ee.governance_mode):"-"),ee.governance_mode&&I&&E.default.createElement("a",{style:{marginLeft:"5px"},onClick:this.handleSwitch},"\u5207\u6362")),E.default.createElement("div",null,E.default.createElement("span",null,"\u8d1f\u8d23\u4eba"),E.default.createElement("span",null,ee.principal?E.default.createElement(c.default,{placement:"top",title:E.default.createElement("div",null,E.default.createElement("div",null,"\u8d26\u53f7:",ee.username),E.default.createElement("div",null,"\u59d3\u540d:",ee.principal),E.default.createElement("div",null,"\u90ae\u7bb1:",ee.email))},E.default.createElement("span",{style:{color:"rgba(0, 0, 0, 0.85)"}},ee.principal)):"-",I&&E.default.createElement(g.default,{style:{cursor:"pointer",marginLeft:"5px"},onClick:this.handleToEditAppDirector,type:"edit"})))),E.default.createElement("div",{className:B.default.conrBot},E.default.createElement("div",{className:B.default.conrBox},E.default.createElement("div",null,"\u5907\u4efd"),E.default.createElement("div",{onClick:()=>{i&&this.handleJump("backup")}},E.default.createElement("a",null,ee.backup_num||0))),E.default.createElement("div",{className:B.default.conrBox},E.default.createElement("div",null,"\u6a21\u578b\u53d1\u5e03"),E.default.createElement("div",{onClick:()=>{l&&this.handleJump("publish")}},E.default.createElement("a",null,ee.share_num||0))),E.default.createElement("div",{className:B.default.conrBox},E.default.createElement("div",null,"\u7f51\u5173\u7b56\u7565"),E.default.createElement("div",{onClick:()=>{H&&this.handleJump("gateway")}},E.default.createElement("a",null,ee.ingress_num||0))),E.default.createElement("div",{className:B.default.conrBox},E.default.createElement("div",null,"\u5f85\u5347\u7ea7"),E.default.createElement("div",{onClick:()=>{!ge&&m&&this.handleJump("upgrade")}},E.default.createElement("a",null,ge?E.default.createElement(o.default,null):me))),E.default.createElement("div",{className:B.default.conrBox},E.default.createElement("div",null,"\u914d\u7f6e\u7ec4"),E.default.createElement("div",{onClick:()=>{X&&this.handleJump("configgroups")}},E.default.createElement("a",null,ee.config_group_num||0)))))),De=E.default.createElement("div",{className:B.default.pageHeaderContents},E.default.createElement("div",{className:B.default.contentl},E.default.createElement("div",{className:B.default.conBoxt},E.default.createElement("div",{className:B.default.contentTitle},E.default.createElement("span",null,ee.group_name||"-"),E.default.createElement(g.default,{style:{cursor:"pointer",marginLeft:"5px"},onClick:this.toEdit,type:"edit"})),E.default.createElement("div",{className:B.default.content_Box},Ie&&E.default.createElement(Z.default,{AppStatus:te.status}),te.status&&C&&E.default.createElement("span",null,E.default.createElement("a",{onClick:()=>{this.handleTopology("start")},disabled:Me},"\u542f\u52a8"),E.default.createElement(u.default,{type:"vertical"})),te.status&&("ABNORMAL"===te.status||"PARTIAL_ABNORMAL"===te.status)&&pe&&pe.length>0&&q&&E.default.createElement("span",null,E.default.createElement("a",{onClick:()=>{this.handleTopology("restart")},disabled:Me},"\u91cd\u542f"),E.default.createElement(u.default,{type:"vertical"})),h&&"RUNNING"!==te.status&&E.default.createElement("a",{onClick:this.toDelete},"\u5220\u9664"),te.status&&"CLOSED"!==te.status&&f&&E.default.createElement("span",null,"RUNNING"!==te.status&&E.default.createElement(u.default,{type:"vertical"}),E.default.createElement("a",{onClick:()=>{this.handleTopology("stop")}},"\u505c\u7528"))),te.status&&E.default.createElement("div",{className:B.default.extraContent},"CLOSED"!==te.status&&N&&E.default.createElement(p.default,{style:be,onClick:()=>{this.handleTopology("upgrade")},disabled:Me},"\u66f4\u65b0"),b&&K&&E.default.createElement(p.default,{style:be,disabled:Me,onClick:()=>{this.handleTopology("deploy")}},"\u6784\u5efa"),S&&E.default.createElement(p.default,{style:be,disabled:Me,onClick:this.handleOpenRapidCopy},"\u5feb\u901f\u590d\u5236"),ie.length>0&&E.default.createElement(j.default,{linkList:ie})))),E.default.createElement("div",{className:B.default.contentr},E.default.createElement("div",{className:B.default.conrHeader},E.default.createElement("div",null,E.default.createElement("span",null,"\u521b\u5efa\u65f6\u95f4"),E.default.createElement("span",null,ee.create_time?(0,D.default)(ee.create_time).locale("zh-cn").format("YYYY-MM-DD HH:mm:ss"):"-")),E.default.createElement("div",null,E.default.createElement("span",null,"\u66f4\u65b0\u65f6\u95f4"),E.default.createElement("span",null,ee.update_time?(0,D.default)(ee.update_time).locale("zh-cn").format("YYYY-MM-DD HH:mm:ss"):"-"))))),Ee=k.default.getCurrTeamName(),Ze=k.default.getCurrRegionName(),Te={position:"relative",zIndex:1e3,padding:"0 16px",margin:"0 -16px",background:"#fff"},we=x.default.handleNewbie(O,"applicationInfo");return E.default.createElement(E.Fragment,null,E.default.createElement(d.default,{style:we&&1===he?Te:{}},ve?De:Se),1===he&&this.handleNewbieGuiding({tit:"\u5e94\u7528\u4fe1\u606f",showSvg:!1,showArrow:!0,send:!1,configName:"applicationInfo",desc:"\u5e94\u7528\u7531\u4e00\u4e2a\u6216\u591a\u4e2a\u670d\u52a1\u7ec4\u6210\uff0c\u53ef\u4ee5\u7ba1\u7406\u4e00\u4e2a\u5b8c\u6574\u4e1a\u52a1\u7cfb\u7edf\uff0c\u6bd4\u5982\uff1aOA\u3001CRM\u3001ERP\u7b49\uff0c\u4e5f\u53ef\u4ee5\u7ba1\u7406\u4e00\u4e2a\u5b8c\u6574\u7684\u5fae\u670d\u52a1\u67b6\u6784\u7684\u7cfb\u7edf\uff0c\u8fd9\u91cc\u5c55\u793a\u4e86\u5e94\u7528\u7684\u57fa\u672c\u4fe1\u606f\u3002",nextStep:2,conPosition:{top:"336px",left:"42%"}}),ue&&E.default.createElement(y.default,{mode:ee&&ee.governance_mode,appID:this.getGroupId(),onCancel:this.onCancel,onOk:this.fetchAppDetail}),E.default.createElement(d.default,{className:B.default.rowArrow,style:2===he?Te:{}},E.default.createElement("div",{className:B.default.iconBox,onClick:()=>{this.heightOnchage(ve)}},ve?E.default.createElement("div",{className:B.default.showOrhide},E.default.createElement(M.DownOutlined,null)):E.default.createElement("div",{className:B.default.showOrhide},E.default.createElement(M.UpOutlined,null))),E.default.createElement(d.default,{style:{display:"flex",background:"#FFFFFF",height:"60px",alignItems:"center",borderBottom:"1px solid #e8e8e8"}},E.default.createElement(r.default,{span:5,style:{paddingleft:"12px"}},E.default.createElement("a",{onClick:()=>{this.changeType("shape"),this.setState({aggregation:!1,common:!0,compile:!1})},style:{marginLeft:"30px",color:"list"!==ce?"#1890ff":"rgba(0, 0, 0, 0.65)"}},"\u62d3\u6251\u56fe"),Q&&E.default.createElement("a",{onClick:()=>{this.changeType("list")},style:{marginLeft:"30px",color:"list"===ce?"#1890ff":"rgba(0, 0, 0, 0.65)"}},"\u5217\u8868")),E.default.createElement(r.default,{className:B.default.topoBtn,span:11,style:{paddingleft:"12px"}},"list"!==ce&&F&&E.default.createElement(s.default.Group,null,fe?E.default.createElement(s.default.Button,{style:{width:"70px",textAlign:"center",height:"32px",lineHeight:"32px",fontSize:"13px",padding:"0px",background:"#4C73B0",color:"#F6F7FA",borderColor:"#4C73B0"},onClick:()=>{this.changeType("shape"),this.setState({aggregation:!1,common:!0,compile:!1})},disabled:!0},"\u666e\u901a\u6a21\u5f0f"):E.default.createElement(s.default.Button,{style:{width:"70px",textAlign:"center",height:"32px",lineHeight:"32px",fontSize:"13px",padding:"0px",background:"#fff",color:"#595959",borderColor:"#D9D9D9"},onClick:()=>{this.changeType("shape"),this.setState({aggregation:!1,common:!0,compile:!1})}},"\u666e\u901a\u6a21\u5f0f"),Ce?E.default.createElement(s.default.Button,{style:{width:"70px",textAlign:"center",height:"32px",lineHeight:"32px",fontSize:"13px",padding:"0px",background:"#4C73B0",color:"#F6F7FA",borderColor:"#4C73B0"},onClick:()=>{this.changeType("aggregation"),this.setState({aggregation:!0,common:!1,compile:!1})},disabled:!0},"\u805a\u5408\u6a21\u5f0f"):E.default.createElement(s.default.Button,{style:{width:"70px",textAlign:"center",height:"32px",lineHeight:"32px",fontSize:"13px",padding:"0px",background:"#fff",color:"#595959",borderColor:"#D9D9D9"},onClick:()=>{this.changeType("aggregation"),this.setState({aggregation:!0,common:!1,compile:!1})}},"\u805a\u5408\u6a21\u5f0f"),Ae?E.default.createElement(s.default.Button,{style:{width:"70px",textAlign:"center",height:"32px",lineHeight:"32px",fontSize:"13px",padding:"0px",background:"#4C73B0",color:"#F6F7FA",borderColor:"#4C73B0"},onClick:()=>{this.changeType("shapes"),this.setState({aggregation:!1,common:!1,compile:!0})},disabled:!0},"\u7f16\u6392\u6a21\u5f0f"):E.default.createElement(s.default.Button,{style:{width:"70px",textAlign:"center",height:"32px",lineHeight:"32px",fontSize:"13px",padding:"0px",background:"#fff",color:"#595959",borderColor:"#D9D9D9"},onClick:()=>{this.changeType("shapes"),this.setState({aggregation:!1,common:!1,compile:!0})}},"\u7f16\u6392\u6a21\u5f0f"))),E.default.createElement(r.default,{span:4,style:{textAlign:"right"}}),E.default.createElement(r.default,{span:4,style:{textAlign:"center"}},F&&K&&E.default.createElement(_.default,{groupId:this.getGroupId(),refreshCurrent:()=>{this.loading()},onload:()=>{this.setState({type:"spin"},()=>{this.setState({type:"large"==this.state.size?"shape":"list"})})}}))),ae&&E.default.createElement(w.default,{copyFlag:!0,on:this.handleCloseRapidCopy,onCancel:this.handleCloseRapidCopy,title:"\u5e94\u7528\u590d\u5236"}),"list"===ce&&E.default.createElement(V.default,{componentPermissions:Y,groupId:this.getGroupId()}),"shape"===ce&&E.default.createElement(R.default,{style:{height:ye},group_id:this.getGroupId(),flagHeight:ve,iframeHeight:ye}),"aggregation"===ce&&E.default.createElement(L.default,{group_id:this.getGroupId(),flagHeight:ve,iframeHeight:ye}),"spin"===ce&&E.default.createElement(o.default,null),"shapes"===ce&&E.default.createElement(W.default,{changeType:e=>{this.changeType(e)},key:ye,iframeHeight:ye,group_id:this.getGroupId(),flagHeight:ve})),2===he&&this.handleNewbieGuiding({tit:"\u5e94\u7528\u62d3\u6251\u56fe",btnText:"\u5df2\u77e5\u6653",showSvg:!1,showArrow:!0,send:!0,configName:"applicationInfo",desc:"\u8fd9\u662f\u5e94\u7528\u5185\u90e8\u7684\u670d\u52a1\u62d3\u6251\u56fe\uff0c\u901a\u8fc7\u62d3\u6251\u56fe\u53ef\u4ee5\u6574\u4f53\u4e86\u89e3\u670d\u52a1\u7684\u8fd0\u884c\u72b6\u6001\u548c\u4f9d\u8d56\u5173\u7cfb\uff0c\u6bcf\u4e2a\u516d\u8fb9\u5f62\u5c31\u662f\u4e00\u4e2a\u670d\u52a1\uff0c\u70b9\u51fb\u516d\u8fb9\u5f62\u53ef\u4ee5\u8fdb\u5165\u670d\u52a1\u7684\u7ba1\u7406\u9875\u9762\u3002",nextStep:3,conPosition:{bottom:"-16px",left:"45%"}}),we&&E.default.createElement("div",{id:"scroll_div",style:{marginTop:"180px"}}),oe&&E.default.createElement(T.default,{title:"\u5220\u9664\u5e94\u7528",desc:"\u786e\u5b9a\u8981\u6b64\u5220\u9664\u6b64\u5e94\u7528\u5417\uff1f",subDesc:"\u6b64\u64cd\u4f5c\u4e0d\u53ef\u6062\u590d",loading:J,onOk:this.handleDelete,onCancel:this.cancelDelete}),re&&E.default.createElement(A.default,{isAddGroup:!1,group_name:t.group_name,logo:t.logo,note:t.note,loading:P,k8s_app:t.k8s_app,title:"\u4fee\u6539\u5e94\u7528\u4fe1\u606f",onCancel:this.cancelEdit,onOk:this.handleEdit,isEditEnglishName:ee.can_edit}),de&&E.default.createElement(v.default,{teamName:Ee,regionName:Ze,group_name:t.group_name,note:t.note,loading:P,principal:ee.username,onCancel:this.cancelEditAppDirector,onOk:this.handleEdit}),se&&E.default.createElement(n.default,{title:"\u53cb\u60c5\u63d0\u793a",confirmLoading:G,visible:se,onOk:this.handlePromptModalOpen,onCancel:this.handlePromptModalClose},E.default.createElement("p",null,Ne[ne],"\u5f53\u524d\u5e94\u7528\u4e0b\u7684\u5168\u90e8\u7ec4\u4ef6\uff1f")))}},I=h))||I);t.default=J},ZIYD:function(e,t,a){"use strict";var l=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a("jehZ"));a("2qtc");var s=l(a("kLXV"));a("/xke");var r=l(a("TeRw")),d=l(a("p0pE"));a("y8nQ");var o=l(a("Vl3Y"));a("sRBo");var c=l(a("kaz8"));a("7Kak");var u,p,g,m,I=l(a("9yH6")),h=l(a("409L")),C=a("MuoO"),f=a("U8JG"),A=i(a("q1tI")),v=a("xpXo"),y=l(a("8+Sn")),N=l(a("QDog")),M=(l(a("puIC")),I.default.Group),b=(c.default.Group,{labelCol:{span:5},wrapperCol:{span:19}}),S=(u=o.default.create(),p=(0,C.connect)(),u(g=p((m=class extends A.PureComponent{constructor(e){super(e),this.changeType=(()=>{this.props.changeType("shape")}),this.loadTopology=(()=>{var e=this.props,t=e.dispatch,a=e.group_id,l=N.default.getCurrTeamName(),i=N.default.getCurrRegionName();y.default.set("team_name",l),y.default.set("region_name",i),t({type:"global/fetAllTopology",payload:{region_name:i,team_name:l,groupId:a},callback:e=>{if(e&&200===e.status_code){var t=this.goodrainData2scopeData(e.bean);this.setState({data:t,registerData:t.registerData,flag:!0})}}})}),this.handleLayout=(()=>{var e=this.editor.propsAPI.read,t=(new h.default.graphlib.Graph).setGraph({}).setDefaultEdgeLabel(()=>{return{}});data.nodes.forEach(e=>{var a=e.size.split("*"),l=Number(a[0]),i=Number(a[1]);t.setNode(e.id,{width:l,height:i})}),data.edges.forEach(e=>{t.setEdge(e.source,e.target)}),h.default.layout(t);var a=data.nodes.map(e=>{var a=t.node(e.id);return(0,d.default)({},e,{x:a.x,y:a.y})});e({nodes:a,edges:data.edges})}),this.handleOk=(()=>{var e=this.state,t=e.name,a=e.id,l=e.foreignType,i=e.shape,n=this.props.form;n.validateFields((e,n)=>{e||(0===l&&(0,v.addRelationedApp)({team_name:N.default.getCurrTeamName(),app_alias:t,dep_service_id:a,open_inner:!0,container_port:n.container_port}).then(e=>{if(e&&200===e.status_code)return this.loadTopology(),"undeploy"==i||"closed"==i||"stopping"==i?r.default.success({message:"\u4f9d\u8d56\u6dfb\u52a0\u6210\u529f\u3002"}):this.handleUpdateConfirm(t,"\u4f9d\u8d56\u6dfb\u52a0\u6210\u529f\uff0c\u9700\u8981\u66f4\u65b0\u624d\u80fd\u751f\u6548\u3002"),void this.setState({visible:!1,shape:""});this.setState({visible:!1,shape:""}),this.handleUndo()}),1===l&&this.props.dispatch({type:"appControl/openExternalPort",payload:{team_name:N.default.getCurrTeamName(),app_alias:t,container_port:n.container_port,open_outer:!0},callback:e=>{if(e&&200===e.status_code)return r.default.success({message:e.msg_show}),this.setState({visible:!1,shape:""}),void this.loadTopology();this.setState({visible:!1,shape:""}),this.handleUndo()}}))})}),this.handleCancel=(e=>{this.setState({visible:!1}),this.handleUndo()}),this.handleSubmitAddRelation=((e,t,a,l)=>{(0,v.addRelationedApp)({team_name:N.default.getCurrTeamName(),app_alias:e,dep_service_id:t}).then(i=>{return i&&212===i.status_code?"\u5f53\u524d\u5e94\u7528\u5df2\u88ab\u5173\u8054"==i.msg_show?void this.handleUndo():(this.loadTopology(),void r.default.success({message:i.msg_show})):i&&201===i.status_code?0==i.list.length?(this.handleUndo(),void r.default.warning({message:"\u6682\u65e0\u7aef\u53e3\u53ef\u7528"})):void this.setState({visible:!0,foreignType:0,foreignTypeName:a,list:i.list||[],name:e,shape:l,id:t}):i&&200===i.status_code?(this.loadTopology(),void("undeploy"==l||"closed"==l||"stopping"==l?r.default.success({message:"\u4f9d\u8d56\u6dfb\u52a0\u6210\u529f\u3002"}):this.handleUpdateConfirm(e,"\u4f9d\u8d56\u6dfb\u52a0\u6210\u529f\uff0c\u9700\u8981\u66f4\u65b0\u624d\u80fd\u751f\u6548\u3002"))):void this.handleUndo()})}),this.handleDeleteRelationedApp=(e=>{var t=this.state.edgeData;if(t){var a=t.source.model.service_alias,l=t.target.model.service_alias,i=(t.source.model.shape,t.target.model.shape,t.target.id);a?(0,v.removeRelationedApp)({team_name:N.default.getCurrTeamName(),app_alias:a,dep_service_id:i}).then(e=>{e&&200===e.status_code&&(r.default.success({message:e.msg_show}),this.loadTopology(),this.setState({edgeData:"",edgeVisible:!1}))}):this.props.dispatch({type:"appControl/openExternalPort",payload:{team_name:N.default.getCurrTeamName(),app_alias:l,close_outer:!0},callback:e=>{e&&200===e.status_code&&(r.default.success({message:e.msg_show}),this.loadTopology(),this.setState({edgeData:"",edgeVisible:!1}))}})}}),this.handleUndo=(()=>{setTimeout(()=>{this.props.propsAPI.executeCommand("undo")},100)}),this.handleSubmitOpenExternalPort=((e,t,a)=>{this.props.dispatch({type:"appControl/openExternalPort",payload:{team_name:N.default.getCurrTeamName(),app_alias:e,container_port:"",open_outer:""},callback:l=>{return l&&200===l.status_code?"\u8be5\u7ec4\u4ef6\u5df2\u5f00\u542f\u5bf9\u5916\u7aef\u53e3"==l.msg_show?void this.handleUndo():(r.default.success({message:l.msg_show}),void this.loadTopology()):l&&201===l.status_code?0==l.list.length?(this.handleUndo(),void r.default.warning({message:"\u6682\u65e0\u7aef\u53e3\u53ef\u7528"})):void this.setState({visible:!0,foreignType:1,foreignTypeName:t,list:l.list||[],name:e,shape:a}):void this.handleUndo()}})}),this.onSaveEdgeData=(e=>{this.setState({edgeData:e,edgeTitle:e.source.model.service_alias?A.default.createElement("div",null,"\u662f\u5426\u53d6\u6d88",A.default.createElement("a",null,e.source.model.label),"\u4f9d\u8d56",A.default.createElement("a",null,e.target.model.label)):A.default.createElement("div",null,"\u662f\u5426\u5173\u95ed",A.default.createElement("a",null,e.target.model.label),"\u7ec4\u4ef6\u7684\u6240\u6709\u5bf9\u5916\u7aef\u53e3")})}),this.onEdgeOpen=(()=>{this.state.edgeData&&this.setState({edgeVisible:!0})}),this.handleUpdateConfirm=((e,t)=>{s.default.confirm({title:t,content:"",okText:"\u66f4\u65b0",cancelText:"\u53d6\u6d88",onOk(){(0,v.updateRolling)({team_name:N.default.getCurrTeamName(),app_alias:e}).then(e=>{e&&r.default.success({message:"\u64cd\u4f5c\u6210\u529f\uff0c\u66f4\u65b0\u4e2d"})})}})}),this.state={data:{},visible:!1,edgeVisible:!1,list:[],name:"",id:"",foreignType:0,registerData:[],edgeData:"",edgeTitle:"",foreignTypeName:"",shape:"",flag:!1}}componentDidMount(){this.loadTopology()}componentDidUpdate(){this.state.data.nodes&&this.state.data.nodes.length>10&&this.props.propsAPI.executeCommand("autoZoom")}goodrainData2scopeData(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e.json_data),a={},l={},i={},n={},s=t.length,r={nodes:[{type:"node",size:"60*60",shape:"The Internet",color:"#030303",label:"\u7f51\u5173",stack:!0,stackNum:1,linkable:!0,rank:"internet",cur_status:"running",x:document.body.clientWidth/2-(t.length>0?t.length/2*100:0),y:15,id:"The Internet",index:0}],edges:[],registerData:[]},o=[];function c(e){return"running"!==e.cur_status?1:(e.node_num=e.node_num||1,e.node_num>3?3:e.node_num)}t.length||window.parent&&window.parent.onNodesEmpty&&window.parent.onNodesEmpty(),t.forEach(t=>{if(Object.prototype.hasOwnProperty.call(e.json_data,t)){if(a={},i={style:{lineWidth:2,stroke:"#B6B6CD"}},l=e.json_data[t],a.type="node",a.size="75*75",a.shape=l.cur_status,a.color="#030303",a.label=l.service_cname,a.cur_status=l.cur_status,a.service_alias=l.service_alias,a.id=l.service_id,a.lineTip=l.lineTip,a.labelMinor="",a.rank=a.cur_status,a.stack=!0,a.stackNum=c(l),a.linkable="running"===l.cur_status?1:0,a.adjacency=e.json_svg[t]||[],l.is_internet&&(i.source="The Internet",i.target=t,r.edges.push(i)),e.json_svg[t]&&e.json_svg[t].length>0)for(var s=0;s<e.json_svg[t].length;s++)n={},n.source=l.service_id,n.target=e.json_svg[t][s],n.style={lineWidth:2,stroke:"#B6B6CD"},o.push(n);r.registerData.push(l.cur_status),r.nodes.push(a)}}),r.edges=Array.from(new Set(r.edges)),o=Array.from(new Set(o));var u=r.edges.concat(o);r.edges=u,r.nodes[0].x=Number((document.body.clientWidth-352-100*s/2)/2);var p=(new h.default.graphlib.Graph).setGraph({}).setDefaultEdgeLabel(()=>{return{}});r.nodes.forEach(e=>{var t=e.size.split("*"),a=Number(t[0]),l=Number(t[1]);p.setNode(e.id,{width:a,height:l})}),r.edges.forEach(e=>{p.setEdge(e.source,e.target)}),h.default.layout(p);var g=r.nodes.map(e=>{var t=p.node(e.id);return(0,d.default)({},e,{x:t.x+430,y:t.y})});return r.nodes=g,r}render(){var e=this.state,t=e.data,a=e.list,l=e.visible,i=e.foreignType,r=e.edgeVisible,d=(e.edgeData,e.edgeTitle),c=e.foreignTypeName,u=this.props,p=(u.flagHeight,u.iframeHeight),g=this.props.form,m=g.getFieldDecorator;g.getFieldValue;return A.default.createElement("div",{style:{height:p}},l&&A.default.createElement(s.default,{title:1===i?A.default.createElement("div",null,A.default.createElement("a",null,c),"\u7ec4\u4ef6\u672a\u5f00\u542f\u5bf9\u5916\u7aef\u53e3"):A.default.createElement("div",null,"\u8981\u5173\u8054\u7684",A.default.createElement("a",null,c),"\u7ec4\u4ef6\u6682\u672a\u5f00\u542f\u5bf9\u5185\u7aef\u53e3\uff0c\u662f\u5426\u6253\u5f00?"),visible:l,onOk:this.handleOk,onCancel:this.handleCancel},A.default.createElement(o.default,{onSubmit:this.handleOk,layout:"horizontal",hideRequiredMark:!0},A.default.createElement(o.default.Item,(0,n.default)({},b,{label:"\u9009\u62e9\u7aef\u53e3"}),m("container_port",{initialValue:a[0],rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7aef\u53e3"}]})(A.default.createElement(M,null,a.map((e,t)=>{return A.default.createElement(I.default,{key:t,value:e},e)})))))),r&&A.default.createElement(s.default,{title:"",visible:r,onOk:this.handleDeleteRelationedApp,onCancel:()=>{this.setState({edgeVisible:!1,edgeData:""})}},A.default.createElement("h3",null,d)),A.default.createElement(f.RegisterCommand,{name:"delete",config:{shortcutCodes:[]},extend:"delete"}),A.default.createElement(f.Flow,{style:{width:"100%",height:p},data:t,noEndEdge:!1,onKeyDown:e=>{"Backspace"==e.domEvent.key&&this.onEdgeOpen()},onEdgeClick:e=>{e.shape._attrs.stroke="#5BB1FA",e.shape._attrs.lineWidth=3,this.onSaveEdgeData(e.item)},onAfterChange:e=>{var t=e.action,a=e.item;if("add"==t){var l=a.source.model.service_alias,i=a.target.model.service_alias,n=a.source.model.shape,s=a.target.model.shape,r=a.source.id,d=a.target.id,o=a.target.model.label;"The Internet"==r?this.handleSubmitOpenExternalPort(i,o,s):"The Internet"==d?this.handleUndo():"The Internet"!=l&&this.handleSubmitAddRelation(l,d,o,n)}}}))}},g=m))||g)||g),D=(0,f.withPropsAPI)(S);t.default=D},Zob5:function(e,t,a){"use strict";var l=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("q1tI")),s=l(a("Msyt"));class r extends n.PureComponent{render(){var e=this.props,t=e.group_id,a=e.iframeHeight;return n.default.createElement("div",{style:{height:a,background:"#fff"},bordered:!1},n.default.createElement(s.default,{iframeHeight:a,group_id:t}))}}t.default=r},aiW3:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iODRweCIgaGVpZ2h0PSIxMDVweCIgdmlld0JveD0iMCAwIDg0IDEwNSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNTIuNSAoNjc0NjkpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPkdyb3VwPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+CiAgICAgICAgPHBhdGggZD0iTTQwLjcwOTM3NDgsMC45ODc1MzAyNzUgTDczLjcwOTM3NDgsMjIuMjYzODQ2MSBDNzUuMTM3MjgxMSwyMy4xODQ0Njk5IDc2LDI0Ljc2NzE4MTggNzYsMjYuNDY2MTQxNyBMNzYsNTkuODMyMDMxMiBMNzYsNzAuMDE1MjUxNCBDNzYsNzEuNzE0MjExMyA3NS4xMzcyODExLDczLjI5NjkyMzIgNzMuNzA5Mzc0OCw3NC4yMTc1NDcgTDQwLjcwOTM3NDgsOTUuNDkzODYyOCBDMzkuMDU5NzAwNCw5Ni41NTc0Njg3IDM2Ljk0MDI5OTYsOTYuNTU3NDY4NyAzNS4yOTA2MjUyLDk1LjQ5Mzg2MjggTDIuMjkwNjI1MjEsNzQuMjE3NTQ3IEMwLjg2MjcxODg3LDczLjI5NjkyMzIgOS44OTE5Nzg3NGUtMTUsNzEuNzE0MjExMyAxLjQyMTA4NTQ3ZS0xNCw3MC4wMTUyNTE0IEwtMS43NzYzNTY4NGUtMTUsMjYuNDY2MTQxNyBDLTMuNDkzMzk4OTRlLTE1LDI0Ljc2NzE4MTggMC44NjI3MTg4NywyMy4xODQ0Njk5IDIuMjkwNjI1MjEsMjIuMjYzODQ2MSBMMzUuMjkwNjI1MiwwLjk4NzUzMDI3NSBDMzYuOTQwMjk5NiwtMC4wNzYwNzU2MDE0IDM5LjA1OTcwMDQsLTAuMDc2MDc1NjAxNCA0MC43MDkzNzQ4LDAuOTg3NTMwMjc1IFoiIGlkPSJwYXRoLTEiPjwvcGF0aD4KICAgICAgICA8ZmlsdGVyIHg9Ii03LjklIiB5PSItNC4yJSIgd2lkdGg9IjExNS44JSIgaGVpZ2h0PSIxMTIuNSUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0yIj4KICAgICAgICAgICAgPGZlTW9ycGhvbG9neSByYWRpdXM9IjIiIG9wZXJhdG9yPSJkaWxhdGUiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dTcHJlYWRPdXRlcjEiPjwvZmVNb3JwaG9sb2d5PgogICAgICAgICAgICA8ZmVPZmZzZXQgZHg9IjAiIGR5PSIyIiBpbj0ic2hhZG93U3ByZWFkT3V0ZXIxIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4KICAgICAgICAgICAgPGZlTW9ycGhvbG9neSByYWRpdXM9IjIiIG9wZXJhdG9yPSJlcm9kZSIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd0lubmVyIj48L2ZlTW9ycGhvbG9neT4KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMiIgaW49InNoYWRvd0lubmVyIiByZXN1bHQ9InNoYWRvd0lubmVyIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVDb21wb3NpdGUgaW49InNoYWRvd09mZnNldE91dGVyMSIgaW4yPSJzaGFkb3dJbm5lciIgb3BlcmF0b3I9Im91dCIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiPjwvZmVDb21wb3NpdGU+CiAgICAgICAgICAgIDxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjEiIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUdhdXNzaWFuQmx1cj4KICAgICAgICAgICAgPGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAuOTAzNjY3ODIxICAgMCAwIDAgMCAwLjkwMDU0MDc5MiAgIDAgMCAwIDAgMC45MDQ3MzUzMzIgIDAgMCAwIDEgMCIgdHlwZT0ibWF0cml4IiBpbj0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUNvbG9yTWF0cml4PgogICAgICAgIDwvZmlsdGVyPgogICAgICAgIDxmaWx0ZXIgeD0iLTkuMiUiIHk9Ii01LjIlIiB3aWR0aD0iMTE4LjQlIiBoZWlnaHQ9IjExNC42JSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTMiPgogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIzIiBpbj0iU291cmNlQWxwaGEiIHJlc3VsdD0ic2hhZG93Qmx1cklubmVyMSI+PC9mZUdhdXNzaWFuQmx1cj4KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMCIgaW49InNoYWRvd0JsdXJJbm5lcjEiIHJlc3VsdD0ic2hhZG93T2Zmc2V0SW5uZXIxIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVDb21wb3NpdGUgaW49InNoYWRvd09mZnNldElubmVyMSIgaW4yPSJTb3VyY2VBbHBoYSIgb3BlcmF0b3I9ImFyaXRobWV0aWMiIGsyPSItMSIgazM9IjEiIHJlc3VsdD0ic2hhZG93SW5uZXJJbm5lcjEiPjwvZmVDb21wb3NpdGU+CiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwLjkwMzY2NzgyMSAgIDAgMCAwIDAgMC45MDA1NDA3OTIgICAwIDAgMCAwIDAuOTA0NzM1MzMyICAwIDAgMCAxIDAiIHR5cGU9Im1hdHJpeCIgaW49InNoYWRvd0lubmVySW5uZXIxIj48L2ZlQ29sb3JNYXRyaXg+CiAgICAgICAgPC9maWx0ZXI+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iR3JvdXAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQuMDAwMDAwLCAyLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0iUG9seWdvbiI+CiAgICAgICAgICAgICAgICA8dXNlIGZpbGw9ImJsYWNrIiBmaWxsLW9wYWNpdHk9IjEiIGZpbHRlcj0idXJsKCNmaWx0ZXItMikiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgPHVzZSBmaWxsPSJibGFjayIgZmlsbC1vcGFjaXR5PSIxIiBmaWx0ZXI9InVybCgjZmlsdGVyLTMpIiB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgICAgIDx1c2Ugc3Ryb2tlPSIjRjY5RDRBIiBzdHJva2Utd2lkdGg9IjQiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDxjaXJjbGUgaWQ9Ik92YWwiIGZpbGw9IiMwMDAwMDAiIGN4PSIzOCIgY3k9IjQ4IiByPSI4Ij48L2NpcmNsZT4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},bKuN:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iODRweCIgaGVpZ2h0PSIxMDVweCIgdmlld0JveD0iMCAwIDg0IDEwNSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNTIuNSAoNjc0NjkpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPkdyb3VwPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+CiAgICAgICAgPHBhdGggZD0iTTQwLjcwOTM3NDgsMC45ODc1MzAyNzUgTDczLjcwOTM3NDgsMjIuMjYzODQ2MSBDNzUuMTM3MjgxMSwyMy4xODQ0Njk5IDc2LDI0Ljc2NzE4MTggNzYsMjYuNDY2MTQxNyBMNzYsNTkuODMyMDMxMiBMNzYsNzAuMDE1MjUxNCBDNzYsNzEuNzE0MjExMyA3NS4xMzcyODExLDczLjI5NjkyMzIgNzMuNzA5Mzc0OCw3NC4yMTc1NDcgTDQwLjcwOTM3NDgsOTUuNDkzODYyOCBDMzkuMDU5NzAwNCw5Ni41NTc0Njg3IDM2Ljk0MDI5OTYsOTYuNTU3NDY4NyAzNS4yOTA2MjUyLDk1LjQ5Mzg2MjggTDIuMjkwNjI1MjEsNzQuMjE3NTQ3IEMwLjg2MjcxODg3LDczLjI5NjkyMzIgOS44OTE5Nzg3NGUtMTUsNzEuNzE0MjExMyAxLjQyMTA4NTQ3ZS0xNCw3MC4wMTUyNTE0IEwtMS43NzYzNTY4NGUtMTUsMjYuNDY2MTQxNyBDLTMuNDkzMzk4OTRlLTE1LDI0Ljc2NzE4MTggMC44NjI3MTg4NywyMy4xODQ0Njk5IDIuMjkwNjI1MjEsMjIuMjYzODQ2MSBMMzUuMjkwNjI1MiwwLjk4NzUzMDI3NSBDMzYuOTQwMjk5NiwtMC4wNzYwNzU2MDE0IDM5LjA1OTcwMDQsLTAuMDc2MDc1NjAxNCA0MC43MDkzNzQ4LDAuOTg3NTMwMjc1IFoiIGlkPSJwYXRoLTEiPjwvcGF0aD4KICAgICAgICA8ZmlsdGVyIHg9Ii03LjklIiB5PSItNC4yJSIgd2lkdGg9IjExNS44JSIgaGVpZ2h0PSIxMTIuNSUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0yIj4KICAgICAgICAgICAgPGZlTW9ycGhvbG9neSByYWRpdXM9IjIiIG9wZXJhdG9yPSJkaWxhdGUiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dTcHJlYWRPdXRlcjEiPjwvZmVNb3JwaG9sb2d5PgogICAgICAgICAgICA8ZmVPZmZzZXQgZHg9IjAiIGR5PSIyIiBpbj0ic2hhZG93U3ByZWFkT3V0ZXIxIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4KICAgICAgICAgICAgPGZlTW9ycGhvbG9neSByYWRpdXM9IjIiIG9wZXJhdG9yPSJlcm9kZSIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd0lubmVyIj48L2ZlTW9ycGhvbG9neT4KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMiIgaW49InNoYWRvd0lubmVyIiByZXN1bHQ9InNoYWRvd0lubmVyIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVDb21wb3NpdGUgaW49InNoYWRvd09mZnNldE91dGVyMSIgaW4yPSJzaGFkb3dJbm5lciIgb3BlcmF0b3I9Im91dCIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiPjwvZmVDb21wb3NpdGU+CiAgICAgICAgICAgIDxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjEiIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUdhdXNzaWFuQmx1cj4KICAgICAgICAgICAgPGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAuOTAzNjY3ODIxICAgMCAwIDAgMCAwLjkwMDU0MDc5MiAgIDAgMCAwIDAgMC45MDQ3MzUzMzIgIDAgMCAwIDEgMCIgdHlwZT0ibWF0cml4IiBpbj0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUNvbG9yTWF0cml4PgogICAgICAgIDwvZmlsdGVyPgogICAgICAgIDxmaWx0ZXIgeD0iLTkuMiUiIHk9Ii01LjIlIiB3aWR0aD0iMTE4LjQlIiBoZWlnaHQ9IjExNC42JSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTMiPgogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIzIiBpbj0iU291cmNlQWxwaGEiIHJlc3VsdD0ic2hhZG93Qmx1cklubmVyMSI+PC9mZUdhdXNzaWFuQmx1cj4KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMCIgaW49InNoYWRvd0JsdXJJbm5lcjEiIHJlc3VsdD0ic2hhZG93T2Zmc2V0SW5uZXIxIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVDb21wb3NpdGUgaW49InNoYWRvd09mZnNldElubmVyMSIgaW4yPSJTb3VyY2VBbHBoYSIgb3BlcmF0b3I9ImFyaXRobWV0aWMiIGsyPSItMSIgazM9IjEiIHJlc3VsdD0ic2hhZG93SW5uZXJJbm5lcjEiPjwvZmVDb21wb3NpdGU+CiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwLjkwMzY2NzgyMSAgIDAgMCAwIDAgMC45MDA1NDA3OTIgICAwIDAgMCAwIDAuOTA0NzM1MzMyICAwIDAgMCAxIDAiIHR5cGU9Im1hdHJpeCIgaW49InNoYWRvd0lubmVySW5uZXIxIj48L2ZlQ29sb3JNYXRyaXg+CiAgICAgICAgPC9maWx0ZXI+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iR3JvdXAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQuMDAwMDAwLCAyLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0iUG9seWdvbiI+CiAgICAgICAgICAgICAgICA8dXNlIGZpbGw9ImJsYWNrIiBmaWxsLW9wYWNpdHk9IjEiIGZpbHRlcj0idXJsKCNmaWx0ZXItMikiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgPHVzZSBmaWxsPSJibGFjayIgZmlsbC1vcGFjaXR5PSIxIiBmaWx0ZXI9InVybCgjZmlsdGVyLTMpIiB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgICAgIDx1c2Ugc3Ryb2tlPSIjMjAxMjRBIiBzdHJva2Utd2lkdGg9IjQiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDxjaXJjbGUgaWQ9Ik92YWwiIGZpbGw9IiMwMDAwMDAiIGN4PSIzOCIgY3k9IjQ4IiByPSI4Ij48L2NpcmNsZT4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},cYkQ:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iODRweCIgaGVpZ2h0PSIxMDVweCIgdmlld0JveD0iMCAwIDg0IDEwNSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNTIuNSAoNjc0NjkpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPkdyb3VwPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+CiAgICAgICAgPHBhdGggZD0iTTQwLjcwOTM3NDgsMC45ODc1MzAyNzUgTDczLjcwOTM3NDgsMjIuMjYzODQ2MSBDNzUuMTM3MjgxMSwyMy4xODQ0Njk5IDc2LDI0Ljc2NzE4MTggNzYsMjYuNDY2MTQxNyBMNzYsNTkuODMyMDMxMiBMNzYsNzAuMDE1MjUxNCBDNzYsNzEuNzE0MjExMyA3NS4xMzcyODExLDczLjI5NjkyMzIgNzMuNzA5Mzc0OCw3NC4yMTc1NDcgTDQwLjcwOTM3NDgsOTUuNDkzODYyOCBDMzkuMDU5NzAwNCw5Ni41NTc0Njg3IDM2Ljk0MDI5OTYsOTYuNTU3NDY4NyAzNS4yOTA2MjUyLDk1LjQ5Mzg2MjggTDIuMjkwNjI1MjEsNzQuMjE3NTQ3IEMwLjg2MjcxODg3LDczLjI5NjkyMzIgOS44OTE5Nzg3NGUtMTUsNzEuNzE0MjExMyAxLjQyMTA4NTQ3ZS0xNCw3MC4wMTUyNTE0IEwtMS43NzYzNTY4NGUtMTUsMjYuNDY2MTQxNyBDLTMuNDkzMzk4OTRlLTE1LDI0Ljc2NzE4MTggMC44NjI3MTg4NywyMy4xODQ0Njk5IDIuMjkwNjI1MjEsMjIuMjYzODQ2MSBMMzUuMjkwNjI1MiwwLjk4NzUzMDI3NSBDMzYuOTQwMjk5NiwtMC4wNzYwNzU2MDE0IDM5LjA1OTcwMDQsLTAuMDc2MDc1NjAxNCA0MC43MDkzNzQ4LDAuOTg3NTMwMjc1IFoiIGlkPSJwYXRoLTEiPjwvcGF0aD4KICAgICAgICA8ZmlsdGVyIHg9Ii03LjklIiB5PSItNC4yJSIgd2lkdGg9IjExNS44JSIgaGVpZ2h0PSIxMTIuNSUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0yIj4KICAgICAgICAgICAgPGZlTW9ycGhvbG9neSByYWRpdXM9IjIiIG9wZXJhdG9yPSJkaWxhdGUiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dTcHJlYWRPdXRlcjEiPjwvZmVNb3JwaG9sb2d5PgogICAgICAgICAgICA8ZmVPZmZzZXQgZHg9IjAiIGR5PSIyIiBpbj0ic2hhZG93U3ByZWFkT3V0ZXIxIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4KICAgICAgICAgICAgPGZlTW9ycGhvbG9neSByYWRpdXM9IjIiIG9wZXJhdG9yPSJlcm9kZSIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd0lubmVyIj48L2ZlTW9ycGhvbG9neT4KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMiIgaW49InNoYWRvd0lubmVyIiByZXN1bHQ9InNoYWRvd0lubmVyIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVDb21wb3NpdGUgaW49InNoYWRvd09mZnNldE91dGVyMSIgaW4yPSJzaGFkb3dJbm5lciIgb3BlcmF0b3I9Im91dCIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiPjwvZmVDb21wb3NpdGU+CiAgICAgICAgICAgIDxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjEiIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUdhdXNzaWFuQmx1cj4KICAgICAgICAgICAgPGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAuOTAzNjY3ODIxICAgMCAwIDAgMCAwLjkwMDU0MDc5MiAgIDAgMCAwIDAgMC45MDQ3MzUzMzIgIDAgMCAwIDEgMCIgdHlwZT0ibWF0cml4IiBpbj0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUNvbG9yTWF0cml4PgogICAgICAgIDwvZmlsdGVyPgogICAgICAgIDxmaWx0ZXIgeD0iLTkuMiUiIHk9Ii01LjIlIiB3aWR0aD0iMTE4LjQlIiBoZWlnaHQ9IjExNC42JSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTMiPgogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIzIiBpbj0iU291cmNlQWxwaGEiIHJlc3VsdD0ic2hhZG93Qmx1cklubmVyMSI+PC9mZUdhdXNzaWFuQmx1cj4KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMCIgaW49InNoYWRvd0JsdXJJbm5lcjEiIHJlc3VsdD0ic2hhZG93T2Zmc2V0SW5uZXIxIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVDb21wb3NpdGUgaW49InNoYWRvd09mZnNldElubmVyMSIgaW4yPSJTb3VyY2VBbHBoYSIgb3BlcmF0b3I9ImFyaXRobWV0aWMiIGsyPSItMSIgazM9IjEiIHJlc3VsdD0ic2hhZG93SW5uZXJJbm5lcjEiPjwvZmVDb21wb3NpdGU+CiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwLjkwMzY2NzgyMSAgIDAgMCAwIDAgMC45MDA1NDA3OTIgICAwIDAgMCAwIDAuOTA0NzM1MzMyICAwIDAgMCAxIDAiIHR5cGU9Im1hdHJpeCIgaW49InNoYWRvd0lubmVySW5uZXIxIj48L2ZlQ29sb3JNYXRyaXg+CiAgICAgICAgPC9maWx0ZXI+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iR3JvdXAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQuMDAwMDAwLCAyLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0iUG9seWdvbiI+CiAgICAgICAgICAgICAgICA8dXNlIGZpbGw9ImJsYWNrIiBmaWxsLW9wYWNpdHk9IjEiIGZpbHRlcj0idXJsKCNmaWx0ZXItMikiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgPHVzZSBmaWxsPSJibGFjayIgZmlsbC1vcGFjaXR5PSIxIiBmaWx0ZXI9InVybCgjZmlsdGVyLTMpIiB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgICAgIDx1c2Ugc3Ryb2tlPSIjMDAwMDIxIiBzdHJva2Utd2lkdGg9IjQiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDxjaXJjbGUgaWQ9Ik92YWwiIGZpbGw9IiMwMDAwMDAiIGN4PSIzOCIgY3k9IjQ4IiByPSI4Ij48L2NpcmNsZT4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},gNmc:function(e,t,a){e.exports={antd_form:"antd_form___2qDMM",description:"description___2KDe5",ulStyle:"ulStyle___jl4kp",over_hr:"over_hr___md_Og"}},hJtr:function(e,t,a){"use strict";var l=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var n,s,r,d=l(a("bx4M")),o=l(a("jehZ")),c=l(a("p0pE")),u=i(a("q1tI")),p=a("MuoO"),g=(a("7DNP"),l(a("51sS"))),m=l(a("QDog")),I=l(a("wNA6")),h=l(a("/BFj")),C=(n=(0,p.connect)(e=>{var t=e.user,a=e.global;return{currUser:t.currentUser,groups:a.groups}}),n((r=class extends u.PureComponent{constructor(e){super(e),this.onAddGroup=(()=>{this.setState({addGroup:!0})}),this.cancelAddGroup=(()=>{this.setState({addGroup:!1})}),this.handleAddGroup=(e=>{var t=this.props.form.setFieldsValue;this.props.dispatch({type:"application/addGroup",payload:(0,c.default)({team_name:m.default.getCurrTeamName()},e),callback:e=>{e&&this.props.dispatch({type:"global/fetchGroups",payload:{team_name:m.default.getCurrTeamName(),region_name:m.default.getCurrRegionName()},callback:()=>{t({group_id:e.group_id}),this.cancelAddGroup()}})}})}),this.hideShowKey=(()=>{this.setState({showKey:!1})}),this.handleSubmit=((e,t)=>{var a=this.props,l=(a.form,a.dispatch),i=m.default.getCurrTeamName(),n=m.default.getCurrRegionName();l({type:"createApp/createJarWarFormSubmit",payload:(0,c.default)({region_name:n,team_name:i,event_id:t},e),callback:e=>{}})}),this.state={codeType:"Git",showUsernameAndPass:!1,showKey:!1,addGroup:!1}}render(){var e=decodeURIComponent(this.props.handleType&&"Service"===this.props.handleType?"":this.props.match.params.image||"");return u.default.createElement(d.default,null,u.default.createElement(h.default,null),u.default.createElement("div",{className:g.default.formWrap,style:{width:this.props.handleType&&"Service"===this.props.handleType?"auto":"500px"}},u.default.createElement(I.default,(0,o.default)({data:{docker_cmd:e||""},onSubmit:this.handleSubmit},this.props))))}},s=r))||s);t.default=C},"i+gw":function(e,t,a){"use strict";var l=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("bbsP");var n=l(a("/wGt")),s=l(a("jehZ"));a("fOrg");var r=l(a("+KLJ"));a("jCWc");var d=l(a("kPKH"));a("14J3");var o=l(a("BMrR"));a("+L6B");var c=l(a("2/Rp"));a("Pwec");var u,p,g,m=l(a("CtXQ")),I=l(a("p0pE")),h=a("MuoO"),C=i(a("q1tI")),f=l(a("I3bc")),A=l(a("QDog")),v=l(a("tH/r")),y=l(a("mWxT")),N=a("+n12"),M=l(a("zNpR")),b=l(a("9Y44")),S=l(a("vOCT")),D=l(a("sXRX")),E=l(a("CNGZ")),Z=l(a("06/0")),T=l(a("hJtr")),w=l(a("2Hi/")),j=l(a("Gl/x")),G=l(a("puIC")),P=(u=(0,h.connect)(e=>{var t=e.user,a=e.application,l=e.global,i=e.enterprise;return{currUser:t.currentUser,apps:a.apps,groupDetail:a.groupDetail||{},groups:l.groups||[],rainbondInfo:l.rainbondInfo,enterprise:l.enterprise,currentEnterprise:i.currentEnterprise}}),u((g=class extends C.PureComponent{constructor(e){var t;super(e),t=this,this.getGitServerName=(e=>{var t=e.oauth_type,a=e.name,l=void 0===a?"":a,i={github:"Github",gitlab:"Gitlab",gitee:"Gitee"},n=i[t]||"",s=n?"".concat(n," ").concat(l&&"(".concat(l,")")):"".concat(l,"\u9879\u76ee");return s}),this.toAddService=(()=>{this.setState({toAddService:!0,isDrawer:!0})}),this.toAddThirdParty=(()=>{this.setState({flagThirdParty:!this.state.flagThirdParty})}),this.cancelAddService=(()=>{this.setState({toAddService:!1},()=>{this.setState({ServiceComponentTwoPage:null,ServiceComponentOnePage:!0,moreState:!0,ButtonGroup:!1,ServiceComponentThreePage:!1,scopeProMax:!1})})}),this.handleServiceComponent=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;t.setState({ServiceComponentOnePage:e,ServiceComponentTwoPage:a,ServiceComponentThreePage:l,[i]:n}),!1!==e&&null!==a&&null!==l||t.setState({ButtonGroup:null,ButtonGroupState:!0}),a&&t.setState({BackType:a}),"market"!==a&&t.setState({moreState:!0})},this.setJwar=(e=>{this.setState({event_id:e})}),this.setYaml=(e=>{this.setState({event_id:e})}),this.handleBackEvents=(()=>{var e=this.state,t=e.ServiceComponentTwoPage,a=e.ServiceComponentThreePage,l=e.BackType;t?this.setState({ServiceComponentTwoPage:null,ServiceComponentOnePage:!0,ButtonGroup:null,ButtonGroupState:!0}):a&&this.setState({ServiceComponentThreePage:null,ServiceComponentTwoPage:l,ButtonGroup:null,ButtonGroupState:!0}),"market"===t&&this.setState({moreState:!0})}),this.handleServiceBotton=((e,t,a)=>{this.setState({ButtonGroup:e,ButtonGroupState:t,errState:a})}),this.refreshCurrent=(()=>{this.setState({CustomButton:!1,toAddService:!1,ServiceComponentOnePage:!0,ServiceComponentTwoPage:null,ServiceComponentThreePage:null,ServiceGetData:null,ButtonGroup:!1,ButtonGroupState:!0,handleType:null,moreState:!0},()=>{this.props.refreshCurrent()})}),this.getValue=(e=>{this.setState({isDrawer:e})}),this.handleScopeMax=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.setState({scopeProMax:e})},this.state={CustomButton:!1,toAddService:!1,flagThirdParty:!1,ServiceComponentOnePage:!0,ServiceComponentTwoPage:null,ServiceComponentThreePage:null,ServiceGetData:null,ButtonGroup:!1,ButtonGroupState:!0,handleType:null,moreState:!0,BackType:null,errState:!0,isDrawer:!0,scopeProMax:"",event_id:""}}render(){var e=this.props,t=e.rainbondInfo,a=e.enterprise,l=e.groupId,i=e.onload,u=this.state,p=u.ButtonGroup,g=u.moreState,h=u.ServiceComponentOnePage,P=u.ServiceComponentTwoPage,k=u.ServiceComponentThreePage,x=u.ServiceGetData,z=u.ButtonGroupState,_=u.gitType,L=u.gitServiceID,R=u.scopeProMax,V=u.errState,W=u.toAddService,B=(u.flagThirdParty,u.localAppTab,u.rainStoreTab,u.helmStoreTab,u.isDrawer),J=u.event_id,O=A.default.fetchSvg("codeSvg"),X=A.default.fetchSvg("dockerSvg"),Y=A.default.fetchSvg("uploadYaml"),H=A.default.fetchSvg("uploadJarWar"),U=(A.default.fetchSvg("third_party"),v.default.getEnableGitOauthServer(a)),Q={handleType:"Service",ButtonGroupState:z,refreshCurrent:this.refreshCurrent,handleServiceBotton:this.handleServiceBotton},F=(0,I.default)({groupId:l},Q,{handleServiceGetData:e=>{this.handleServiceComponent(!1,null,"check","ServiceGetData",e)}}),K=(0,I.default)({},F,{scopeProMax:R,moreState:g}),q={marginRight:8};return C.default.createElement("div",null,C.default.createElement(c.default,{type:"primary",onClick:this.toAddService,style:{marginLeft:"12px",color:"#595959",borderColor:"#D9D9D9",background:"#fff"}},C.default.createElement(m.default,{type:"plus"}),"\u6dfb\u52a0\u7ec4\u4ef6"),C.default.createElement(n.default,{title:"\u6dfb\u52a0\u7ec4\u4ef6",placement:"right",onClose:this.cancelAddService,visible:W,maskClosable:!1,width:550,style:{display:B?"block":"none"}},h&&C.default.createElement("div",{style:{marginTop:"-12px"}},C.default.createElement("div",{className:G.default.ServiceBox},C.default.createElement(o.default,null,C.default.createElement("p",{className:G.default.ServiceTitle},"\u4ece\u6e90\u4ee3\u7801\u5f00\u59cb")),C.default.createElement(o.default,null,C.default.createElement(d.default,{span:8,className:G.default.ServiceDiv,onClick:()=>{this.handleServiceComponent(!1,"custom")}},O,C.default.createElement("p",{className:G.default.ServiceSmallTitle},"\u81ea\u5b9a\u4e49\u4ed3\u5e93")),U&&U.length>0&&U.map(e=>{var t=e.service_id,a=e.oauth_type;return C.default.createElement(d.default,{key:t,span:8,className:G.default.ServiceDiv,onClick:()=>{this.setState({gitType:a,gitServiceID:t},()=>{this.handleServiceComponent(!1,"gitrepostory")})}},v.default.getIcon(e,"50px"),C.default.createElement("p",{className:G.default.ServiceSmallTitle},this.getGitServerName(e)))})),C.default.createElement(o.default,{style:{marginBottom:"2px"}},y.default.documentPlatform_url(t)&&C.default.createElement(r.default,{message:C.default.createElement("p",{className:G.default.prompt},"\u6ce8:\u652f\u6301",Object.keys(N.languageObj).map(e=>{return C.default.createElement("a",{key:e,href:N.languageObj[e],target:"_blank",rel:"noopener noreferrer"},e)}),"\u7b49\u8bed\u8a00\u89c4\u8303"),type:"info",style:{height:"50px"},showIcon:!0}))),C.default.createElement("div",{className:G.default.ServiceBox},C.default.createElement(o.default,null,C.default.createElement("p",{className:G.default.ServiceTitle},"\u4ece\u955c\u50cf\u5f00\u59cb")),C.default.createElement(o.default,{style:{marginTop:"-8px"}},C.default.createElement(d.default,{span:8,className:G.default.ServiceDiv,onClick:()=>{this.handleServiceComponent(!1,"imageName")}},X,C.default.createElement("p",{className:G.default.ServiceSmallTitle},"\u6307\u5b9a\u955c\u50cf")),C.default.createElement(d.default,{span:8,className:G.default.ServiceDiv,onClick:()=>{this.handleServiceComponent(!1,"imageCmd")}},X,C.default.createElement("p",{className:G.default.ServiceSmallTitle},"\u6307\u5b9aDockerRun\u547d\u4ee4")))),C.default.createElement("div",{className:G.default.ServiceBox},C.default.createElement(o.default,null,C.default.createElement("p",{className:G.default.ServiceTitle,style:{marginBottom:"20px"}},"\u4ece\u5e94\u7528\u5e02\u573a\u5f00\u59cb")),C.default.createElement(o.default,null,C.default.createElement(j.default,(0,s.default)({},K,{isHelm:!1,handleServiceComponent:e=>{this.handleServiceComponent(!1,"market",null,"moreState",!1),this.handleScopeMax(e)}})))),C.default.createElement("div",{className:G.default.ServiceBox},C.default.createElement(M.default,{content:this.getValue.bind(this),groupId:l})),C.default.createElement("div",{className:G.default.ServiceBox,style:{marginBottom:"60px"}},C.default.createElement(o.default,null,C.default.createElement("p",{className:G.default.ServiceTitle},"\u4ece\u4e0a\u4f20\u6587\u4ef6\u5305\u5f00\u59cb")),C.default.createElement(o.default,null,C.default.createElement(d.default,{span:8,className:G.default.ServiceDiv,onClick:()=>{this.handleServiceComponent(!1,"jwar")}},H,C.default.createElement("p",{className:G.default.ServiceSmallTitle},"Jar\u3001War")),C.default.createElement(d.default,{span:8,className:G.default.ServiceDiv,onClick:()=>{this.handleServiceComponent(!1,"yaml")}},Y,C.default.createElement("p",{className:G.default.ServiceSmallTitle},"Yaml"))))),"custom"===P&&C.default.createElement(b.default,F),"gitrepostory"===P&&C.default.createElement(f.default,(0,s.default)({},F,{type:L,gitType:_})),"check"===k&&x&&C.default.createElement(S.default,(0,s.default)({},Q,{event_id:J,ServiceGetData:x,ErrState:V,handleServiceDataState:(e,t,a,l)=>{this.handleServiceComponent(e,t,a,"ServiceGetData",l),i&&i()}})),"imageName"===P&&C.default.createElement(E.default,F),"imageCmd"===P&&C.default.createElement(D.default,F),"jwar"===P&&C.default.createElement(Z.default,(0,s.default)({},F,{setPare:this.setJwar})),"yaml"===P&&C.default.createElement(T.default,(0,s.default)({},F,{setPare:this.setYaml})),"market"===P&&C.default.createElement(w.default,(0,s.default)({},K,{isHelm:!1,isAddMarket:!0,scopeMax:R||"localApplication",handleServiceComponent:()=>{this.handleServiceComponent(!1,"market",null)}})),C.default.createElement("div",{style:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",left:0,background:"#fff",borderRadius:"0 0 4px 4px",display:"flex",justifyContent:"flex-end",zIndex:99999}},!h&&"check"!==k&&C.default.createElement(c.default,{style:q,onClick:this.handleBackEvents},"\u4e0a\u4e00\u6b65"),p&&C.default.createElement("span",{style:q},p),C.default.createElement(c.default,{style:q,onClick:this.cancelAddService},"\u53d6\u6d88"))))}},p=g))||p);t.default=P},jWJt:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=l(a("jehZ")),n=l(a("Y/ft")),s=a("7DNP"),r=l(a("q1tI")),d=l(a("ZShK")),o=l(a("EhCg")),c=l(a("fxZG")),u=l(a("8+Sn")),p=e=>{var t=e.isFooter,a=e.children,l=e.wrapperClassName,p=e.top,g=(0,n.default)(e,["isFooter","children","wrapperClassName","top"]);return r.default.createElement("div",{style:{margin:"-24px -24px 0"},className:l},p,r.default.createElement(o.default,(0,i.default)({key:"pageheader"},g,{linkElement:s.Link})),a?r.default.createElement("div",{className:c.default.content},a):null,!t&&"false"===u.default.get("enterprise_edition")&&r.default.createElement(d.default,null))};t.default=p},movk:function(e,t,a){"use strict";var l=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var n=l(a("kLXV"));a("14J3");var s=l(a("BMrR"));a("jCWc");var r=l(a("kPKH"));a("g9YV");var d=l(a("wCAj"));a("+L6B");var o,c,u,p=l(a("2/Rp")),g=i(a("q1tI")),m=a("MuoO"),I=a("xpXo"),h=l(a("QDog")),C=(o=(0,m.connect)(e=>{var t=e.loading;return{batchDeleteLoading:t.effects["appControl/putBatchDelete"]}},null,null,{pure:!1}),o((u=class extends g.PureComponent{constructor(e){super(e),this.handleDelete=(()=>{this.setState({confirm:!0});var e=this.props,t=e.dispatch,a=e.batchDeleteApps,l=a.map(e=>{return e.service_id});t({type:"appControl/putBatchDelete",payload:{team_name:h.default.getCurrTeamName(),serviceIds:l.join(",")},callback:e=>{e&&this.setState({apps:e.list})}})}),this.reDelete=(e=>{(0,I.reDelete)({team_name:h.default.getCurrTeamName(),service_id:e}).then(t=>{if(t){var a=[];this.state.apps.map(t=>{t.service_id==e&&(t.status=200,t.msg="\u5220\u9664\u6210\u529f"),a.push(t)}),this.setState({apps:a})}})});var t=this.props.batchDeleteApps;this.state={batchDeleteApps:t,apps:t.map(e=>{if(e)return{service_id:e.service_id,service_cname:e.service_cname,msg:"\u6b63\u5728\u5220\u9664",status:0}}),confirm:!1}}render(){var e=this.props,t=e.batchDeleteLoading,a=e.onCancel,l=this.state,i=l.confirm,o=l.apps;return g.default.createElement(n.default,{title:"\u786e\u8ba4\u6279\u91cf\u5220\u9664",visible:!0,width:600,onCancel:a,footer:g.default.createElement(p.default,{onClick:a},"\u5b8c\u6210")},i?g.default.createElement(d.default,{dataSource:o||[],columns:[{title:"\u7ec4\u4ef6\u540d\u79f0",dataIndex:"service_cname"},{title:"\u53cd\u9988\u4fe1\u606f",dataIndex:"msg",render:e=>{var t={success:"\u5220\u9664\u6210\u529f"};return g.default.createElement("span",null,t[e]||e)}},{title:"\u64cd\u4f5c",dataIndex:"action",render:(e,t)=>{return 412==t.status?g.default.createElement("a",{target:"_blank",onClick:()=>{this.reDelete(t.service_id)}},"\u786e\u8ba4\u5220\u9664"):409==t.status?"\u8bf7\u5148\u5173\u95ed\u7ec4\u4ef6":200==t.status?"\u5df2\u5220\u9664":void 0}}]}):g.default.createElement("div",{style:{textAlign:"center"}},g.default.createElement("p",null,o&&o.length&&void 0!=o[0]?"\u5373\u5c06\u5220\u9664\u4ee5\u4e0b\u7ec4\u4ef6":"\u8bf7\u5237\u65b0\u6570\u636e\u540e\u5220\u9664"),g.default.createElement(s.default,null,o.map(e=>{return void 0==e?null:g.default.createElement(r.default,{span:8,key:"col".concat(e.service_id),style:{overflow:"auto"}},g.default.createElement("p",{key:e.service_id},e.service_cname))})),o&&o.length&&void 0!==o[0]&&g.default.createElement(p.default,{type:"primary",loading:t,onClick:this.handleDelete},"\u786e\u5b9a\u6279\u91cf\u5220\u9664")))}},c=u))||c);t.default=C},oWzr:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjcwcHgiIGhlaWdodD0iNDA3cHgiIHZpZXdCb3g9IjAgMCAyNzAgNDA3IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA1Mi41ICg2NzQ2OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+R3JvdXA8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8ZmlsdGVyIHg9Ii04MTEuOCUiIHk9Ii02MzQuMCUiIHdpZHRoPSIxNzIzLjclIiBoZWlnaHQ9IjEzNzIuMiUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0xIj4KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMjE1IiBpbj0iU291cmNlQWxwaGEiIHJlc3VsdD0ic2hhZG93T2Zmc2V0T3V0ZXIxIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSI1OS41IiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVHYXVzc2lhbkJsdXI+CiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwICAgMCAwIDAgMCAwLjQ2NjY2NjY2NyAgIDAgMCAwIDAgMSAgMCAwIDAgMSAwIiB0eXBlPSJtYXRyaXgiIGluPSJzaGFkb3dCbHVyT3V0ZXIxIiByZXN1bHQ9InNoYWRvd01hdHJpeE91dGVyMSI+PC9mZUNvbG9yTWF0cml4PgogICAgICAgICAgICA8ZmVNZXJnZT4KICAgICAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj0ic2hhZG93TWF0cml4T3V0ZXIxIj48L2ZlTWVyZ2VOb2RlPgogICAgICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJTb3VyY2VHcmFwaGljIj48L2ZlTWVyZ2VOb2RlPgogICAgICAgICAgICA8L2ZlTWVyZ2U+CiAgICAgICAgPC9maWx0ZXI+CiAgICAgICAgPHBhdGggZD0iTTQwLjcwOTM3NDgsMC45ODc1MzAyNzUgTDczLjcwOTM3NDgsMjIuMjYzODQ2MSBDNzUuMTM3MjgxMSwyMy4xODQ0Njk5IDc2LDI0Ljc2NzE4MTggNzYsMjYuNDY2MTQxNyBMNzYsNTkuODMyMDMxMiBMNzYsNzAuMDE1MjUxNCBDNzYsNzEuNzE0MjExMyA3NS4xMzcyODExLDczLjI5NjkyMzIgNzMuNzA5Mzc0OCw3NC4yMTc1NDcgTDQwLjcwOTM3NDgsOTUuNDkzODYyOCBDMzkuMDU5NzAwNCw5Ni41NTc0Njg3IDM2Ljk0MDI5OTYsOTYuNTU3NDY4NyAzNS4yOTA2MjUyLDk1LjQ5Mzg2MjggTDIuMjkwNjI1MjEsNzQuMjE3NTQ3IEMwLjg2MjcxODg3LDczLjI5NjkyMzIgOS44OTE5Nzg3NGUtMTUsNzEuNzE0MjExMyAxLjQyMTA4NTQ3ZS0xNCw3MC4wMTUyNTE0IEwtMS43NzYzNTY4NGUtMTUsMjYuNDY2MTQxNyBDLTMuNDkzMzk4OTRlLTE1LDI0Ljc2NzE4MTggMC44NjI3MTg4NywyMy4xODQ0Njk5IDIuMjkwNjI1MjEsMjIuMjYzODQ2MSBMMzUuMjkwNjI1MiwwLjk4NzUzMDI3NSBDMzYuOTQwMjk5NiwtMC4wNzYwNzU2MDE0IDM5LjA1OTcwMDQsLTAuMDc2MDc1NjAxNCA0MC43MDkzNzQ4LDAuOTg3NTMwMjc1IFoiIGlkPSJwYXRoLTIiPjwvcGF0aD4KICAgICAgICA8ZmlsdGVyIHg9Ii03LjklIiB5PSItNC4yJSIgd2lkdGg9IjExNS44JSIgaGVpZ2h0PSIxMTIuNSUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0zIj4KICAgICAgICAgICAgPGZlTW9ycGhvbG9neSByYWRpdXM9IjIiIG9wZXJhdG9yPSJkaWxhdGUiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dTcHJlYWRPdXRlcjEiPjwvZmVNb3JwaG9sb2d5PgogICAgICAgICAgICA8ZmVPZmZzZXQgZHg9IjAiIGR5PSIyIiBpbj0ic2hhZG93U3ByZWFkT3V0ZXIxIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4KICAgICAgICAgICAgPGZlTW9ycGhvbG9neSByYWRpdXM9IjIiIG9wZXJhdG9yPSJlcm9kZSIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd0lubmVyIj48L2ZlTW9ycGhvbG9neT4KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMiIgaW49InNoYWRvd0lubmVyIiByZXN1bHQ9InNoYWRvd0lubmVyIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVDb21wb3NpdGUgaW49InNoYWRvd09mZnNldE91dGVyMSIgaW4yPSJzaGFkb3dJbm5lciIgb3BlcmF0b3I9Im91dCIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiPjwvZmVDb21wb3NpdGU+CiAgICAgICAgICAgIDxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjEiIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUdhdXNzaWFuQmx1cj4KICAgICAgICAgICAgPGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAuOTAzNjY3ODIxICAgMCAwIDAgMCAwLjkwMDU0MDc5MiAgIDAgMCAwIDAgMC45MDQ3MzUzMzIgIDAgMCAwIDEgMCIgdHlwZT0ibWF0cml4IiBpbj0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUNvbG9yTWF0cml4PgogICAgICAgIDwvZmlsdGVyPgogICAgICAgIDxmaWx0ZXIgeD0iLTkuMiUiIHk9Ii01LjIlIiB3aWR0aD0iMTE4LjQlIiBoZWlnaHQ9IjExNC42JSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTQiPgogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIzIiBpbj0iU291cmNlQWxwaGEiIHJlc3VsdD0ic2hhZG93Qmx1cklubmVyMSI+PC9mZUdhdXNzaWFuQmx1cj4KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMCIgaW49InNoYWRvd0JsdXJJbm5lcjEiIHJlc3VsdD0ic2hhZG93T2Zmc2V0SW5uZXIxIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVDb21wb3NpdGUgaW49InNoYWRvd09mZnNldElubmVyMSIgaW4yPSJTb3VyY2VBbHBoYSIgb3BlcmF0b3I9ImFyaXRobWV0aWMiIGsyPSItMSIgazM9IjEiIHJlc3VsdD0ic2hhZG93SW5uZXJJbm5lcjEiPjwvZmVDb21wb3NpdGU+CiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwLjkwMzY2NzgyMSAgIDAgMCAwIDAgMC45MDA1NDA3OTIgICAwIDAgMCAwIDAuOTA0NzM1MzMyICAwIDAgMCAxIDAiIHR5cGU9Im1hdHJpeCIgaW49InNoYWRvd0lubmVySW5uZXIxIj48L2ZlQ29sb3JNYXRyaXg+CiAgICAgICAgPC9maWx0ZXI+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iR3JvdXAiIGZpbHRlcj0idXJsKCNmaWx0ZXItMSkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDk3LjAwMDAwMCwgMi4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9IlBvbHlnb24iPgogICAgICAgICAgICAgICAgPHVzZSBmaWxsPSJibGFjayIgZmlsbC1vcGFjaXR5PSIxIiBmaWx0ZXI9InVybCgjZmlsdGVyLTMpIiB4bGluazpocmVmPSIjcGF0aC0yIj48L3VzZT4KICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iYmxhY2siIGZpbGwtb3BhY2l0eT0iMSIgZmlsdGVyPSJ1cmwoI2ZpbHRlci00KSIgeGxpbms6aHJlZj0iI3BhdGgtMiI+PC91c2U+CiAgICAgICAgICAgICAgICA8dXNlIHN0cm9rZT0iIzAwNzcxMCIgc3Ryb2tlLXdpZHRoPSI0IiB4bGluazpocmVmPSIjcGF0aC0yIj48L3VzZT4KICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8Y2lyY2xlIGlkPSJPdmFsIiBmaWxsPSIjMDAwMDAwIiBjeD0iMzgiIGN5PSI0OCIgcj0iOCI+PC9jaXJjbGU+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},ogb6:function(e,t,a){"use strict";var l=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("14J3");var n=l(a("BMrR"));a("giR+");var s=l(a("fyUT"));a("7Kak");var r=l(a("9yH6"));a("5NDa");var d=l(a("5rEg")),o=l(a("jehZ"));a("jCWc");var c=l(a("kPKH"));a("OaEy");var u,p,g,m=l(a("2fM7")),I=a("MuoO"),h=i(a("q1tI")),C=l(a("gNmc")),f=m.default.Option,A=(u=(0,I.connect)(e=>{var t=e.user,a=e.loading;return{currUser:t.currentUser,addHttpStrategyLoading:a.effects["gateWay/addHttpStrategy"],editHttpStrategyLoading:a.effects["gateWay/editHttpStrategy"]}}),u((g=class extends h.PureComponent{constructor(e){super(e),this.onChangeSwitch=((e,t)=>{var a=this.props,l=a.upDateQuestions,i=a.data;i.map(a=>{a.variable===t.variable&&(a.default=e)}),l&&l(i)}),this.handleOk=(e=>{e.preventDefault();var t=this.props,a=t.onOk,l=t.form;l.validateFields((e,t)=>{!e&&a&&a(t)})}),this.handleIsNext=(e=>{var t=this.props.getFieldValue;if(e&&e.indexOf("=")>-1){var a=e.split("=")[0],l=a.replace(new RegExp("\\.","g"),"#-#"),i=t(l)||!1,n="".concat(a,"=").concat(i);return!(e.indexOf(n)<0)}return!0}),this.handleFormItem=(e=>{var t=[];return e.map((a,l)=>{var i=a.type,n=a.subquestions,s=a.default,r=a.group,d=a.show_subquestion_if,o=a.showSubquestionIf,u=a.show_if,p=a.showIf,g=n&&n.length>0,m=o||d,I=u||p||!1,f=this.handleIsNext(I),A=h.default.createElement(h.Fragment,null,f&&this.FormItemBox(a),g&&("boolean"!==i||"".concat(s)=="".concat(m))&&f&&n.map(e=>{var t=e.show_if||e.showIf||!1;return this.handleIsNext(t)&&this.FormItemBox(e)})),v=l<1?0:l-1;return l>0&&t.push(e[v].group),h.default.createElement(h.Fragment,null,t.includes(r)?A:h.default.createElement(h.Fragment,null,h.default.createElement(c.default,{span:24},h.default.createElement("div",{className:C.default.over_hr},h.default.createElement("span",null,r))),A))})}),this.FormItemBox=(e=>{var t=this.props,a=t.Form,l=t.getFieldDecorator,i=a.Item,n={labelCol:{xs:{span:24},sm:{span:24}},wrapperCol:{xs:{span:23},sm:{span:23}}},s=e.variable,r=e.required,d=void 0!==r&&r,u=e.default,p=e.description,g=e.label,m=e.type,I=e.min,f=void 0===I?"":I,A=this.handleBox(e,m,u),v=s.replace(new RegExp("\\.","g"),"#-#");return A?h.default.createElement(c.default,{span:12},h.default.createElement(i,(0,o.default)({},n,{label:g,className:C.default.antd_form}),l(v,{rules:[{required:d,message:"".concat(g,"\u5fc5\u987b\u8bbe\u7f6e")}],initialValue:u&&"".concat(u)||f})(A),h.default.createElement("div",{className:C.default.description},p))):null}),this.handleBox=((e,t,a)=>{return"string"===t?h.default.createElement(d.default,{placeholder:"\u8bf7\u8f93\u5165"}):"boolean"===t?h.default.createElement(r.default.Group,{defaultChecked:"".concat(a),onChange:t=>{this.onChangeSwitch(t.target.value,e)}},h.default.createElement(r.default,{value:"true"},"\u662f"),h.default.createElement(r.default,{value:"false"},"\u5426")):"int"===t?h.default.createElement(s.default,{style:{width:"100%"},min:e.min||1,max:e.max||255,placeholder:"\u8282\u70b9\u6570\u91cf"}):"enum"===t?h.default.createElement(m.default,{placeholder:"\u8bf7\u9009\u62e9"},e.options&&e.options.map(e=>{return h.default.createElement(f,{key:e,value:e},e)})):"password"===t?h.default.createElement(d.default,{autoComplete:"new-password",type:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"}):null}),this.state={}}render(){var e=this.props.data;return h.default.createElement(h.Fragment,null,h.default.createElement(n.default,null,this.handleFormItem(e)))}},p=g))||p),v=A;t.default=v},ri62:function(e,t,a){"use strict";var l=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var n=l(a("kLXV"));a("g9YV");var s=l(a("wCAj"));a("5NDa");var r=l(a("5rEg"));a("fOrg");var d=l(a("+KLJ"));a("+L6B");var o=l(a("2/Rp"));a("/xke");var c=l(a("TeRw"));a("OaEy");var u=l(a("2fM7"));a("y8nQ");var p,g,m,I,h=l(a("Vl3Y")),C=a("MuoO"),f=i(a("q1tI")),A=l(a("QDog")),v=h.default.Item,y=u.default.Option,N=(p=h.default.create(),g=(0,C.connect)(e=>{var t=e.loading;return{checkK8sLoading:t.effects["application/setCheckK8sServiceName"],governanceLoading:t.effects["application/setgovernancemode"]}}),p(m=g((I=class extends f.PureComponent{constructor(e){super(e),this.setK8sServiceNames=(e=>{var t=this.props,a=t.dispatch,l=t.appID,i=t.onCancel,n=this.state.ServiceNameList,s=[];n.map(t=>{var a=t.service_id,l=t.port_alias,i=t.service_cname,n=t.k8s_service_name,r=t.port,d="".concat(a,"/").concat(l),o="".concat(a,"/").concat(n);d&&o&&s.push({service_cname:i,service_id:a,port:r,port_alias:e[d],k8s_service_name:e[o]})}),a({type:"application/setCheckK8sServiceName",payload:{tenantName:A.default.getCurrTeamName(),group_id:l,arr:s},callback:e=>{e&&200===e.status_code&&(this.handleNotification(),i())}})}),this.handleSubmit=(e=>{e.preventDefault();var t=this.props.form,a=this.state.step;t.validateFields((e,t)=>{e||(a?this.setK8sServiceNames(t):this.handleGovernancemode(t))})}),this.handleGovernancemode=(e=>{var t=this.props,a=t.dispatch,l=t.appID,i=t.onCancel,n=t.onOk;a({type:"application/setgovernancemode",payload:{tenantName:A.default.getCurrTeamName(),group_id:l,governance_mode:e.governance_mode},callback:()=>{n(),"BUILD_IN_SERVICE_MESH"===e.governance_mode?(this.handleNotification(),i()):this.fetchServiceNameList()}})}),this.handleNotification=(()=>{c.default.success({message:"\u5207\u6362\u6210\u529f\u3001\u66f4\u65b0\u7ec4\u4ef6\u540e\u751f\u6548",duration:"3"})}),this.fetchServiceNameList=(()=>{var e=this.props,t=e.dispatch,a=e.appID,l=e.onCancel;t({type:"application/fetchServiceNameList",payload:{tenantName:A.default.getCurrTeamName(),group_id:a},callback:e=>{e&&e.bean&&(e.list&&e.list.length>0?this.setState({step:!0,ServiceNameList:e.list}):(this.handleNotification(),l()))}})}),this.checkK8sServiceName=(e=>{var t=this.props,a=t.dispatch,l=t.appID;a({type:"application/checkK8sServiceName",payload:{tenantName:A.default.getCurrTeamName(),group_id:l,service_alias:e.service_alias,k8s_service_name:e.k8s_service_name},callback:e=>{e&&e.bean&&!e.bean.is_valid&&this.setK8sServiceNames()}})}),this.checkServiceName=((e,t,a)=>{var l=this.props,i=l.dispatch,n=l.appID,s=this.stata.ServiceNameList;try{i({type:"application/checkK8sServiceName",payload:{tenantName:A.default.getCurrTeamName(),group_id:n,service_alias:s[0].service_alias,k8s_service_name:s[0].k8s_service_name},callback:e=>{if(!e||!e.bean||e.bean.is_valid)throw new Error("\u683c\u5f0f\u9519\u8bef!");a()}})}catch(e){return void a(e)}a()}),this.rowKey=((e,t)=>t),this.handleOnCancel=(()=>{var e=this.props.onCancel;this.state.step&&this.handleNotification(),e()}),this.handleChange=(e=>{var t=this.props,a=t.dispatch,l=t.appID;a({type:"application/checkoutGovernanceModel",payload:{team_name:A.default.getCurrTeamName(),app_id:l,governance_mode:e},callback:e=>{e&&this.setState({btnConfig:!1})},handleError:e=>{e&&e.data&&11009===e.data.code&&(c.default.warning({message:"\u672a\u5b89\u88c5\u63a7\u5236\u5e73\u9762\uff0c\u65e0\u6cd5\u5207\u6362"}),this.setState({btnConfig:!0}))}})}),this.state={step:!1,ServiceNameList:[],btnConfig:!1}}render(){var e=[{key:"KUBERNETES_NATIVE_SERVICE",name:"Kubernetes\u539f\u751f service \u6a21\u5f0f"},{key:"BUILD_IN_SERVICE_MESH",name:"\u5185\u7f6e ServiceMesh \u6a21\u5f0f"},{key:"ISTIO_SERVICE_MESH",name:"Istio\u6cbb\u7406\u6a21\u5f0f"}],t=this.props,a=t.loading,l=void 0!==a&&a,i=(t.onCancel,t.form),c=t.checkK8sLoading,p=t.governanceLoading,g=t.mode,m=this.state,I=m.step,C=m.ServiceNameList,A=m.btnConfig,N=i.getFieldDecorator,M=i.getFieldValue,b=M("governance_mode")||g||"KUBERNETES_NATIVE_SERVICE";return f.default.createElement(n.default,{title:"\u5e94\u7528\u6cbb\u7406\u6a21\u5f0f\u5207\u6362",visible:!0,confirmLoading:l||c||p,onOk:this.handleSubmit,onCancel:this.handleOnCancel,width:800,footer:[f.default.createElement(o.default,{onClick:this.handleOnCancel}," \u53d6\u6d88 "),f.default.createElement(o.default,{type:"primary",disabled:A,loading:l||c||p,onClick:this.handleSubmit},"\u786e\u5b9a")]},f.default.createElement(d.default,{style:{marginBottom:"20px"},message:"\u5e94\u7528\u6cbb\u7406\u6a21\u5f0f\u4e3b\u8981\u6307\u7ec4\u4ef6\u95f4\u901a\u4fe1\u6a21\u5f0f\u7684\u6cbb\u7406\uff0c\u76ee\u524d\u652f\u6301\u5185\u7f6eServiceMesh\u6a21\u5f0f,Istio\u6cbb\u7406\u6a21\u5f0f\u548cKubernetes\u539f\u751fService\u6a21\u5f0f",type:"info",showIcon:!0}),f.default.createElement(h.default,{onSubmit:this.handleSubmit},I?f.default.createElement(s.default,{size:"middle",rowKey:this.rowKey,pagination:!1,dataSource:C||[],columns:[{title:"\u7ec4\u4ef6\u540d\u79f0/\u7aef\u53e3",dataIndex:"service_alias",width:200,render:(e,t)=>f.default.createElement("div",null,t.service_cname,"/",t.port)},{title:"\u522b\u540d",dataIndex:"port_alias",width:200,render:(e,t)=>f.default.createElement(v,{style:{marginBottom:0}},N("".concat(t.service_id,"/").concat(t.port_alias),{initialValue:e||"",rules:[{required:!0,message:"\u4e0d\u80fd\u4e3a\u7a7a"}]})(f.default.createElement(r.default,{size:"small"})))},{title:"\u5185\u90e8\u57df\u540d",dataIndex:"k8s_service_name",width:200,render:(e,t)=>f.default.createElement(v,{style:{marginBottom:0}},N("".concat(t.service_id,"/").concat(t.k8s_service_name),{initialValue:e||"",rules:[{required:!0,message:"\u4e0d\u80fd\u4e3a\u7a7a"},{max:63,message:"\u6700\u5927\u957f\u5ea663\u4f4d"},{pattern:/^[a-z]([-a-z0-9]*[a-z0-9])?$/,message:"\u5fc5\u987b\u7531\u5c0f\u5199\u5b57\u6bcd\u3001\u6570\u5b57\u548c-\u7ec4\u6210\uff0c\u5e76\u4e14\u5fc5\u987b\u4ee5\u5c0f\u5199\u5b57\u6bcd\u5f00\u59cb,\u6570\u5b57\u548c\u5c0f\u5199\u5b57\u6bcd\u7ed3\u675f"}]})(f.default.createElement(r.default,{size:"small"})))}]}):f.default.createElement("div",null,f.default.createElement(v,{labelCol:{xs:{span:14},sm:{span:8}},wrapperCol:{xs:{span:14,offset:0},sm:{span:8}},label:"\u6cbb\u7406\u6a21\u5f0f\u9009\u62e9"},N("governance_mode",{initialValue:g||"KUBERNETES_NATIVE_SERVICE",rules:[{required:!0,message:"\u4e0d\u80fd\u4e3a\u7a7a!"}]})(f.default.createElement(u.default,{style:{width:"357px"},onChange:this.handleChange,getPopupContainer:e=>e.parentNode},e.map(e=>{return f.default.createElement(y,{key:e.key,value:e.key},e.name)})))),f.default.createElement("div",{style:{width:"468px",margin:"0 auto",border:"1px solid #ccc",padding:"10px",borderRadius:"8px"}},f.default.createElement("label",{htmlFor:"governance_mode",className:"ant-form-item-required",title:"\u6a21\u5f0f\u8bf4\u660e"},"\u6a21\u5f0f\u8bf4\u660e"),f.default.createElement("div",{style:{marginTop:"10px"}},"KUBERNETES_NATIVE_SERVICE"===b?"\u8be5\u6a21\u5f0f\u7ec4\u4ef6\u95f4\u4f7f\u7528Kubernetes service\u540d\u79f0\u57df\u540d\u8fdb\u884c\u901a\u4fe1\uff0c\u7528\u6237\u9700\u8981\u914d\u7f6e\u6bcf\u4e2a\u7ec4\u4ef6\u7aef\u53e3\u6ce8\u518c\u7684service\u540d\u79f0\uff0c\u6cbb\u7406\u80fd\u529b\u6709\u9650.":"BUILD_IN_SERVICE_MESH"===b?"\u5185\u7f6eServiceMesh\u6a21\u5f0f\u9700\u8981\u7528\u6237\u663e\u793a\u7684\u914d\u7f6e\u7ec4\u4ef6\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u5e73\u53f0\u4f1a\u5728\u4e0b\u6e38\u7ec4\u4ef6\u4e2d\u81ea\u52a8\u6ce8\u5165sidecar\u5bb9\u5668\u7ec4\u6210ServiceMesh\u5fae\u670d\u52a1\u67b6\u6784\uff0c\u4e1a\u52a1\u95f4\u901a\u4fe1\u5730\u5740\u7edf\u4e00\u4e3alocalhost\u6a21\u5f0f":"\u8be5\u6a21\u5f0f\u7ec4\u4ef6\u95f4\u4f7f\u7528Kubernetes service\u540d\u79f0\u57df\u540d\u8fdb\u884c\u901a\u4fe1\uff0c\u7528\u6237\u9700\u8981\u914d\u7f6e\u6bcf\u4e2a\u7ec4\u4ef6\u7aef\u53e3\u6ce8\u518c\u7684service\u540d\u79f0\uff0c\u4e14\u5b89\u88c5Istio  control plane \uff0c\u901a\u8fc7Istio\u8fdb\u884c\u6cbb\u7406\u3002")))))}},m=I))||m)||m);t.default=N},t3BL:function(e,t,a){"use strict";(function(e){var l=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var n=l(a("kLXV"));a("Q9mQ");var s=l(a("diRs"));a("5Dmo");var r=l(a("3S7+"));a("IzEo");var d=l(a("bx4M"));a("Awhp");var o=l(a("KrTs"));a("Pwec");var c=l(a("CtXQ"));a("14J3");var u=l(a("BMrR"));a("fOrg");var p=l(a("+KLJ"));a("jCWc");var g=l(a("kPKH")),m=l(a("jehZ"));a("cWXX");var I=l(a("/ezw"));a("+L6B");var h=l(a("2/Rp"));a("/xke");var C=l(a("TeRw"));a("y8nQ");var f=l(a("Vl3Y"));a("OaEy");var A=l(a("2fM7"));a("FJo9");var v=l(a("L41K"));a("fu2T");var y=l(a("gK9i"));a("Znn+");var N,M,b,S,D=l(a("ZTPi")),E=l(a("qCJ4")),Z=l(a("4SMx")),T=l(a("ZNrE")),w=l(a("YABy")),j=l(a("ogb6")),G=l(a("gNmc")),P=a("RBnf"),k=a("MuoO"),x=a("7DNP"),z=l(a("wd/R")),_=i(a("q1tI")),L=l(a("IujW")),R=a("ArA+"),V=l(a("q76B")),W=l(a("ALo4")),B=l(a("YCtL")),J=a("xpXo"),O=l(a("QDog")),X=l(a("ZgmS")),Y=l(a("ruXZ")),H=l(a("VZuE")),U=l(a("puIC")),Q=D.default.TabPane,F=y.default.Panel,K=v.default.Step,q=A.default.Option,$=f.default.Item,ee=(N=(0,k.connect)(e=>{var t=e.user,a=e.application,l=e.teamControl,i=e.enterprise,n=e.loading,s=e.global;return{buildShapeLoading:n.effects["global/buildShape"],editGroupLoading:n.effects["application/editGroup"],deleteLoading:n.effects["application/delete"],currUser:t.currentUser,collapsed:s.collapsed,apps:a.apps,groupDetail:a.groupDetail||{},currentTeam:l.currentTeam,currentRegionName:l.currentRegionName,currentEnterprise:i.currentEnterprise}}),M=f.default.create(),N(b=M((S=class extends _.PureComponent{constructor(t){var a;super(t),a=this,this.onChangeSteps=(e=>{this.setState({currentSteps:e})}),this.closeTimer=(()=>{this.timer&&clearInterval(this.timer)}),this.loading=(()=>{this.fetchAppDetail(!0)}),this.handleError=(e=>{var t=this.state.componentTimer;if(!t)return null;e&&e.data&&e.data.msg_show&&C.default.warning({message:"\u8bf7\u6c42\u9519\u8bef",description:e.data.msg_show})}),this.handleTimers=((e,t,a)=>{var l=this.state.componentTimer;if(!l)return null;this[e]=setTimeout(()=>{t()},a)}),this.fetchAppDetail=(e=>{var t=this.props.dispatch,a=this.fetchParameter(),l=a.team_name,i=a.region_name,n=a.group_id;t({type:"application/fetchGroupDetail",payload:{team_name:l,region_name:i,group_id:n},callback:t=>{t&&200===t.status_code&&this.setState({currApp:t.bean||{}},()=>{e&&this.fetchAppDetailState(e)})},handleError:a=>{var l=this.state.componentTimer;if(!l)return null;e&&this.fetchAppDetailState(e),a&&404===a.code&&t(x.routerRedux.push("".concat(this.fetchPrefixUrl(),"apps")))}})}),this.fetchAppDetailState=(e=>{var t=this.props,a=t.dispatch,l=t.form,i=this.props.match.params,n=i.teamName,s=i.appID,r=l.getFieldValue,d=r("templateFile"),o=this.state,c=o.appStateMap,u=o.currentSteps,p=o.isScrollToBottom;a({type:"application/fetchAppDetailState",payload:{team_name:n,group_id:s},callback:t=>{var a=t.list||{},l=a&&a.phase&&c[a.phase]||0;this.setState({resources:a,appStateLoading:!1,currentSteps:l>u?l:u},()=>{2===l&&p&&this.scrollToBottom(),l>=2?(e&&this.setState({versionInfoLoading:e}),this.getHelmApplication(!d||e)):this.handleAppInfoLoading(),l>=4&&(this.fetchHelmComponents(),this.fetchAppAccess())}),this.handleTimers("timer",()=>{this.fetchAppDetailState(),this.fetchAppDetail(),this.closeTimer()},5e3)},handleError:e=>{this.setState({appStateLoading:!1}),this.handleAppInfoLoading(),this.handleError(e),this.handleTimers("timer",()=>{this.fetchAppDetailState(),this.fetchAppDetail()},2e4)}})}),this.fetchHelmAppStoresVersions=(e=>{var t=this.props,a=t.dispatch,l=t.currentEnterprise,i=this.state.currApp;a({type:"application/fetchHelmAppStoresVersions",payload:{enterprise_id:l.enterprise_id,version:e,appStoreName:i.app_store_name,templateName:i.app_template_name},callback:e=>{e&&200===e.status_code&&this.setState({versionInfo:e,versionInfoLoading:!1,formData:e&&e.questions&&e.questions.length>0&&e.questions||[]},()=>{e&&e.values&&this.handleTemplateFile(Object.keys(e.values).reverse()[0])})},handleError:e=>{this.handleErrPrompt(e)}})}),this.handleFormReset=(()=>{var e=this.props.form;e.resetFields(),this.loadApps()}),this.handleSearch=(e=>{e.preventDefault(),this.loadApps()}),this.toDelete=(()=>{this.closeComponentTimer(),this.setState({toDelete:!0})}),this.cancelDelete=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];a.setState({toDelete:!1}),e&&a.openComponentTimer()},this.closeComponentTimer=(()=>{this.setState({componentTimer:!1}),this.closeTimer()}),this.openComponentTimer=(()=>{this.setState({componentTimer:!0},()=>{this.fetchAppDetailState()})}),this.handleDelete=(()=>{var e=this.props.dispatch,t=this.fetchParameter(),a=t.team_name,l=t.group_id;e({type:"application/delete",payload:{team_name:a,group_id:l},callback:t=>{t&&200===t.status_code&&(C.default.success({message:"\u5220\u9664\u6210\u529f"}),this.closeComponentTimer(),this.cancelDelete(!1),e(x.routerRedux.push("".concat(this.fetchPrefixUrl(),"apps"))))}})}),this.newAddress=(e=>{var t=this.props.dispatch,a=this.fetchParameter(),l=a.team_name;t({type:"global/fetchGroups",payload:{team_name:l},callback:a=>{a&&a.length?e===a[0].group_id?this.newAddress(e):t(x.routerRedux.push("".concat(this.fetchPrefixUrl(),"apps/").concat(a[0].group_id))):t(x.routerRedux.push("".concat(this.fetchPrefixUrl(),"index")))}})}),this.toEdit=(()=>{this.setState({toEdit:!0})}),this.cancelEdit=(()=>{this.setState({toEdit:!1})}),this.handleToEditAppDirector=(()=>{this.setState({toEditAppDirector:!0})}),this.cancelEditAppDirector=(()=>{this.setState({toEditAppDirector:!1})}),this.handleEdit=(e=>{var t=this.props.dispatch,a=this.fetchParameter(),l=a.team_name,i=a.group_id;t({type:"application/editGroup",payload:{team_name:l,group_id:i,group_name:e.group_name,note:e.note,username:e.username},callback:e=>{e&&200===e.status_code&&C.default.success({message:"\u4fee\u6539\u6210\u529f"}),this.handleUpDataHeader(),this.cancelEdit(),this.cancelEditAppDirector(),this.fetchAppDetail(),t({type:"global/fetchGroups",payload:{team_name:l}})}})}),this.handleUpDataHeader=(()=>{var e=this.props.dispatch;e({type:"global/IsUpDataHeader",payload:{isUpData:!0}})}),this.handlePromptModalOpen=(()=>{var e=this.state,t=e.code,a=e.serviceIds,l=this.props.dispatch,i=this.fetchParameter(),n=i.team_name,s=i.group_id;"restart"===t?(0,J.batchOperation)({action:t,team_name:n,serviceIds:a&&a.join(",")}).then(e=>{e&&200===e.status_code&&(C.default.success({message:"\u91cd\u542f\u6210\u529f"}),this.handlePromptModalClose()),this.fetchAppDetailState(!1)}):l({type:"global/buildShape",payload:{tenantName:n,group_id:s,action:t},callback:e=>{e&&200===e.status_code&&(C.default.success({message:e.msg_show||"\u6784\u5efa\u6210\u529f",duration:"3"}),this.handlePromptModalClose()),this.fetchAppDetailState(!1)}})}),this.handlePromptModalClose=(()=>{this.setState({promptModal:!1,code:""})}),this.handleJump=(e=>{var t=this.props,a=t.dispatch,l=t.appID;a(x.routerRedux.push("".concat(this.fetchPrefixUrl(),"apps/").concat(l,"/").concat(e)))}),this.handleJumpStore=(e=>{var t=this.props.dispatch,a=this.fetchParameter(),l=a.enterprise_id;t(x.routerRedux.push("/enterprise/".concat(l,"/shared/").concat(e)))}),this.beforeUpload=((e,t)=>{var a=e.name.split("."),l=a.length,i="yaml"===a[l-1]||"yml"===a[l-1];return!!i||(t&&C.default.warning({message:"\u8bf7\u4e0a\u4f20\u4ee5.yaml\u3001.yml\u7ed3\u5c3e\u7684 Region Config \u6587\u4ef6"}),!1)}),this.encodeBase64Content=(t=>{var a=t&&e.from(t).toString("base64")||"";return a}),this.decodeBase64Content=(t=>{var a=t&&t.replace(/\s/g,"+")||"";return a&&(a=e.from(a,"base64").toString()),a}),this.handleSubmit=(e=>{var t=this.props.form,a=t.validateFields,l=t.setFields;a((t,a)=>{if(!t){this.setState({submitLoading:!0});var i=this.encodeBase64Content(a.yamls),n=!1,s={};if(a.overrides&&a.overrides.length>0?a.overrides.map(e=>{var t=e.item_key,a=e.item_value;t&&a&&""!==t&&""!==a?s[t]=a:n=!0}):s=void 0,n)return l({overrides:{errors:[new Error("\u8bf7\u586b\u5199\u914d\u7f6e\u9879")]}}),this.setState({submitLoading:!1}),null;Object.keys(a).forEach(e=>{if("templateFile"!==e&&"version"!==e&&"yamls"!==e&&"overrides"!==e){"[Object Object]"!==!Object.prototype.toString.call(s)&&void 0!==s||(s={});var t=e.replace(new RegExp("\\#-#","g"),"."),l=a[e];s[t]="".concat(l)}});var r=Object.assign({},a,{yamls:i,overrides:s});"Create"===e?this.handleInstallHelmApp(r):this.handleEditHelmApp(r)}})}),this.fetchHelmComponents=(()=>{var e=this.props.dispatch,t=this.fetchParameter(),a=t.team_name,l=t.group_id;e({type:"application/fetchHelmComponents",payload:{tenantName:a,groupId:l},callback:e=>{e&&200===e.status_code&&this.setState({components:e.list||[]})}})}),this.fetchAppAccess=(()=>{var e=this.props.dispatch,t=this.fetchParameter(),a=t.team_name,l=t.group_id;e({type:"application/fetchAppAccess",payload:{tenantName:a,groupId:l},callback:e=>{e&&200===e.status_code&&this.setState({linkList:e.list||[]})}})}),this.handleThird=(e=>{var t=this.props.dispatch;t(x.routerRedux.push("".concat(this.fetchPrefixUrl(),"components/").concat(e,"/thirdPartyServices")))}),this.handleComponent=(e=>{var t=this.props.dispatch;t(x.routerRedux.push("".concat(this.fetchPrefixUrl(),"components/").concat(e,"/overview")))}),this.handleInstallHelmApp=(e=>{var t=this.props.dispatch,a=this.fetchParameter(),l=a.team_name,i=a.group_id;t({type:"application/installHelmApp",payload:{team_name:l,group_id:i,overrides:e.overrides,values:e.yamls},callback:e=>{e&&200===e.status_code&&this.setState({currentSteps:3,submitLoading:!1})}})}),this.handleEditHelmApp=(e=>{var t=this.props.dispatch,a=this.state.currApp,l=this.fetchParameter(),i=l.team_name,n=l.group_id;t({type:"application/editHelmApp",payload:{team_name:i,group_id:n,overrides:e.overrides,values:e.yamls,username:a.username,app_name:a.group_name,app_note:a.note,version:e.version},callback:e=>{e&&200===e.status_code&&(this.fetchAppDetailState(),C.default.success({message:"\u66f4\u65b0\u4e2d\u3001\u8bf7\u8010\u5fc3\u7b49\u5f85"})),this.setState({submitLoading:!1})}})}),this.scrollToBottom=(()=>{var e=document.getElementById("messagesEndRef");e&&(e.scrollIntoView({behavior:"smooth"}),this.setState({isScrollToBottom:!1}))}),this.handleOperationBtn=(e=>{var t=this.state,a=t.submitLoading,l=t.errPrompt,i=t.noVersion,n=t.upDataVersion;return _.default.createElement("div",{style:{textAlign:"center"},id:"messagesEndRef"},_.default.createElement(h.default,{onClick:()=>{this.handleSubmit(e)},disabled:n||l||i,loading:a,type:"primary"},"Create"===e?"\u5b89\u88c5":"\u66f4\u65b0"))}),this.getHelmApplication=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=a.props.dispatch,l=a.fetchParameter(),i=l.enterprise_id,n=l.team_name,s=l.group_id,r=a.state.currApp;t({type:"global/fetchHelmApplication",payload:{enterprise_id:i,app_name:r.app_template_name,team_name:n,group_id:s,appStoreName:r.app_store_name},callback:t=>{t&&200===t.status_code?a.setState({versions:t.versions||[]},()=>{a.handleAppVersion(r.version,e,!1)}):a.handleAppInfoLoading()},handleError:e=>{a.handleErrPrompt(e)}})},this.fetchParameter=(()=>{var e=this.props,t=e.currentEnterprise,a=e.appID;return{enterprise_id:t.enterprise_id,team_name:O.default.getCurrTeamName(),region_name:O.default.getCurrRegionName(),group_id:a}}),this.fetchPrefixUrl=(()=>{var e=this.fetchParameter(),t=e.team_name,a=e.region_name;return"/team/".concat(t,"/region/").concat(a,"/")}),this.handleErrPrompt=(e=>{if(e&&e.data&&e.data.code){var t=this.state.promptMap,a=t[e.data.code]||!1;8004===e.data.code?this.setState({noVersion:!0}):a&&this.setState({errPrompt:a,noVersion:!1})}this.handleAppInfoLoading(),this.handleUpDataVersionLoading()}),this.handleAppVersion=((e,t,a)=>{var l=this.state.versions,i={};l.map(t=>{t.version===e&&(i=t)}),i.version&&(this.setState({appInfo:i}),t&&(a&&this.setState({upDataVersion:"\u7248\u672c\u4fe1\u606f\u66f4\u65b0\u4e2d\u3001\u8bf7\u8010\u5fc3\u7b49\u5f85",noVersion:!1}),this.fetchHelmAppStoresVersions(e))),this.handleAppInfoLoading()}),this.handleTemplateFile=(e=>{var t=this.props.form,a=t.setFieldsValue,l=this.state.versionInfo,i=this.CodeMirrorRef;if(l.values){var n=l.values[e]&&this.decodeBase64Content(l.values[e])||"";if(a({yamls:n}),a({templateFile:e}),i){var s=i.getCodeMirror();s.setValue(n)}}this.handleUpDataVersionLoading()}),this.handleUpDataVersionLoading=(()=>{this.setState({upDataVersion:!1})}),this.handleAppInfoLoading=(()=>{this.setState({appInfoLoading:!1})}),this.handleConfing=(()=>{var e=this.props.form,t=e.getFieldDecorator,a=e.setFieldsValue,l=e.getFieldValue,i=this.state,n=i.versionInfo,s=i.versionInfoLoading,r=i.resources,d=i.currentSteps,o=i.versions,c=i.errPrompt,h=i.noVersion,C=i.upDataVersion,v=i.formData,N={labelCol:{xs:{span:24}},wrapperCol:{xs:{span:24}}},M=r.overrides||"";if(M&&M.length>0){var b=[];M.map(e=>{Object.keys(e).forEach(t=>{b.push({item_key:t,item_value:e[t]})})}),M=b}var S=n.values?Object.keys(n.values).reverse():[];return _.default.createElement(f.default,{labelAlign:"left"},_.default.createElement(y.default,{bordered:!1,defaultActiveKey:["2"]},_.default.createElement(F,{header:_.default.createElement("div",{className:U.default.customPanelHeader},_.default.createElement("h6",null,"\u5e94\u7528\u4ecb\u7ecd"),_.default.createElement("p",null,"\u5e94\u7528\u914d\u7f6e\u8bf4\u660e\u548c\u4f7f\u7528\u65b9\u6cd5\u6982\u8ff0")),key:"1",className:U.default.customPanel},_.default.createElement("div",{style:{padding:"15px 30px"}},_.default.createElement(I.default,{loading:s},_.default.createElement(L.default,{className:U.default.customMD,source:n.readme&&this.decodeBase64Content(n.readme)||""})))),_.default.createElement(F,{header:_.default.createElement("div",{className:U.default.customPanelHeader},_.default.createElement("h6",null,"\u914d\u7f6e\u9009\u9879"),_.default.createElement("p",null,"\u57fa\u4e8eHelm\u89c4\u8303\u5e94\u7528\u914d\u7f6e\u7684\u67e5\u770b\u4e0e\u8bbe\u7f6e")),key:"2",className:U.default.customPanel},_.default.createElement(I.default,{loading:s},_.default.createElement("div",{style:{padding:"15px 30px"}},v&&v.length>0&&_.default.createElement(j.default,{Form:f.default,data:v,upDateQuestions:e=>{this.setState({formData:e})},setFieldsValue:a,formItemLayout:N,getFieldValue:l,getFieldDecorator:t}),_.default.createElement("div",{className:G.default.over_hr},_.default.createElement("span",null,"\u901a\u7528\u914d\u7f6e")),_.default.createElement($,(0,m.default)({},N,{label:"Values\u914d\u7f6e"}),t("overrides",{initialValue:M||[],rules:[{required:!1,message:"\u8bf7\u586b\u5199Values\u914d\u7f6e"}]})(_.default.createElement(w.default,{disableds:C||c||h,isHalf:!0,editInfo:M||""}))),_.default.createElement(u.default,null,d>3&&_.default.createElement(g.default,{span:12},_.default.createElement($,(0,m.default)({},N,{label:"\u7248\u672c"}),t("version",{initialValue:r.version||void 0,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7248\u672c"}]})(_.default.createElement(A.default,{placeholder:"\u8bf7\u9009\u62e9\u7248\u672c",style:{width:"95%"},disabled:C||c,onChange:e=>{this.handleAppVersion(e,!0,!0)}},o.map(e=>{var t=e.version;return _.default.createElement(q,{key:t,value:t},r.version===t?"".concat(t," \u5f53\u524d\u7248\u672c"):t)}))))),_.default.createElement(g.default,{span:12},(C||h)&&_.default.createElement(p.default,{style:{marginTop:"40px"},message:h?"\u5e94\u7528\u7248\u672c\u4e0d\u5b58\u5728\u3001\u8bf7\u91cd\u65b0\u9009\u62e9\u7248\u672c":C,type:"warning"}))),_.default.createElement(g.default,{span:24,style:{position:"relative",zIndex:1}},_.default.createElement($,(0,m.default)({},N,{label:"Values\u6587\u4ef6",className:U.default.clearStar}),t("templateFile",{initialValue:S.length>0&&S[0],rules:[{required:!0,message:"\u8bf7\u9009\u62e9Values\u6587\u4ef6"}]})(_.default.createElement(A.default,{placeholder:"\u8bf7\u9009\u62e9Values\u6587\u4ef6",style:{width:"100%"},onChange:this.handleTemplateFile,disabled:C||c||h},S.map(e=>{return _.default.createElement(q,{key:e,value:e},e)}))))),_.default.createElement(T.default,{disabled:!0,data:"",bg:"151718",width:"100%",isUpload:!1,saveRef:e=>{this.CodeMirrorRef=e},marginTop:120,setFieldsValue:a,formItemLayout:N,Form:f.default,getFieldDecorator:t,beforeUpload:this.beforeUpload,mode:"yaml",name:"yamls",message:"\u586b\u5199\u914d\u7f6e"}),d>3&&this.handleOperationBtn("UpDate"))))),d<=2&&this.handleOperationBtn("Create"))}),this.state={linkList:[],versionInfoLoading:!0,versions:[],noVersion:!1,promptMap:{8000:"\u5546\u5e97\u5df2\u88ab\u5220\u9664\u3001\u65e0\u6cd5\u66f4\u65b0\u3002",8003:"\u5e94\u7528\u6a21\u677f\u4e0d\u5b58\u5728\u3001\u65e0\u6cd5\u66f4\u65b0\u3002"},formData:[],appStateLoading:!0,appInfoLoading:!0,appStates:[{key:"initailing",value:"\u521d\u59cb\u5316"},{key:"detecting",value:"\u68c0\u6d4b"},{key:"configuring",value:"\u914d\u7f6e"},{key:"installing",value:"\u5b89\u88c5"}],appType:{ChartReady:"\u62c9\u53d6\u5e94\u7528\u5305",PreInstalled:"\u6821\u9a8c\u5e94\u7528\u5305",ChartParsed:"\u89e3\u6790\u5e94\u7528\u5305"},appStateMap:{initailing:0,detecting:1,configuring:2,installing:3,installed:4},components:[],currentSteps:0,toDelete:!1,toEdit:!1,errPrompt:!1,toEditAppDirector:!1,serviceIds:[],promptModal:!1,code:"",currApp:{},componentTimer:!0,submitLoading:!1,resources:{},versionInfo:{},appInfo:{},isScrollToBottom:!0,upDataVersion:!1},this.CodeMirrorRef=""}componentDidMount(){this.loading()}componentWillUnmount(){this.closeTimer();var e=this.props.dispatch;e({type:"application/clearGroupDetail"})}render(){var e=this.props,t=e.appPermissions,a=t.isUpgrade,l=t.isEdit,i=t.isDelete,g=e.groupDetail,m=e.buildShapeLoading,I=e.editGroupLoading,h=e.deleteLoading,C=e.operationPermissions.isAccess,f=this.state,A=f.versions,y=f.currApp,N=f.resources,M=f.code,b=f.promptModal,S=f.toEdit,T=f.toEditAppDirector,w=f.toDelete,j=f.currentSteps,G=f.appStates,k=f.appType,x=f.errPrompt,L=f.appStateLoading,J=f.components,O=f.linkList,F=f.appInfo,q=f.appInfoLoading,$={start:"\u542f\u52a8",restart:"\u91cd\u542f",stop:"\u505c\u7528",deploy:"\u6784\u5efa"},ee={deployed:"success","pending-install":"success","pending-upgrade":"success","pending-rollback":"success",superseded:"success",failed:"error"},te=_.default.createElement("div",{className:U.default.pageHeaderContent},_.default.createElement(d.default,{style:{padding:0},loading:L||q,className:U.default.contentl},_.default.createElement("div",null,_.default.createElement("div",{className:U.default.conBoxt,style:{justifyContent:"end",alignItems:"end",marginBottom:"42px"}},_.default.createElement("img",{style:{width:"60px",marginRight:"10px"},alt:"",src:F.icon||"https://gw.alipayobjects.com/zos/rmsportal/MjEImQtenlyueSmVEfUD.svg"}),_.default.createElement("div",{style:{width:"70%"}},_.default.createElement("div",{className:U.default.contentTitle,style:{width:"100%"}},_.default.createElement("span",null,y.group_name||"-"),l&&_.default.createElement(c.default,{style:{cursor:"pointer",marginLeft:"5px"},onClick:this.toEdit,type:"edit"})),_.default.createElement("div",{title:F.description||y.note,className:U.default.contentNote},F.description||y.note)),_.default.createElement("div",{className:U.default.helmState},N.status&&_.default.createElement(o.default,{className:U.default.states,status:ee[N.status]||"default",text:H.default.getHelmStatus&&H.default.getHelmStatus([N.status]||!1)}),i&&_.default.createElement("a",{className:U.default.operationState,onClick:this.toDelete},"\u5220\u9664"),O.length>0&&_.default.createElement(B.default,{type:"link",linkList:O}))),_.default.createElement("div",{className:U.default.connect_Bot},_.default.createElement("div",{className:U.default.connect_Box,style:{width:"100%",marginRight:"0"}},_.default.createElement("div",{className:U.default.connect_Boxs},_.default.createElement("div",null,"\u4f7f\u7528\u5185\u5b58"),_.default.createElement("div",null,N.memory?"".concat(X.default.unit(N.memory||0,"MB")):"\u4e0d\u9650\u5236")),_.default.createElement("div",{className:U.default.connect_Boxs},_.default.createElement("div",null,"\u4f7f\u7528CPU"),_.default.createElement("div",null,N.cpu?"".concat(N.cpu/1e3,"Core"):"\u4e0d\u9650\u5236")),_.default.createElement("div",{className:U.default.connect_Boxs},_.default.createElement("div",null,"\u670d\u52a1\u6570\u91cf"),_.default.createElement("div",null,J&&J.length||0)))))),_.default.createElement(d.default,{style:{padding:0,marginRight:0},loading:L,className:U.default.contentl},_.default.createElement("div",{className:U.default.contentr},_.default.createElement("div",{className:U.default.conrHeader},_.default.createElement("div",null,_.default.createElement("span",null,"\u521b\u5efa\u65f6\u95f4"),_.default.createElement("span",null,y.create_time?(0,z.default)(y.create_time).locale("zh-cn").format("YYYY-MM-DD HH:mm:ss"):"-")),_.default.createElement("div",null,_.default.createElement("span",null,"\u66f4\u65b0\u65f6\u95f4"),_.default.createElement("span",null,y.update_time?(0,z.default)(y.update_time).locale("zh-cn").format("YYYY-MM-DD HH:mm:ss"):"-"))),_.default.createElement("div",{className:U.default.conrHeader},_.default.createElement("div",null,_.default.createElement("span",null,"\u8d1f\u8d23\u4eba"),_.default.createElement("span",null,y.principal?_.default.createElement(r.default,{placement:"top",title:_.default.createElement("div",null,_.default.createElement("div",null,"\u8d26\u53f7:",y.username),_.default.createElement("div",null,"\u59d3\u540d:",y.principal),_.default.createElement("div",null,"\u90ae\u7bb1:",y.email))},_.default.createElement("span",{style:{color:"rgba(0, 0, 0, 0.85)"}},y.principal)):"-",l&&_.default.createElement(c.default,{style:{cursor:"pointer",marginLeft:"5px"},onClick:this.handleToEditAppDirector,type:"edit"}))),N.version&&_.default.createElement("div",null,_.default.createElement("span",null,"\u7248\u672c\u53f7"),_.default.createElement("span",null,N.version))),_.default.createElement("div",{className:U.default.conrBot},_.default.createElement("div",{className:U.default.conrBox,style:{width:"33.3%"}},_.default.createElement("div",null,"\u7f51\u5173\u7b56\u7565"),_.default.createElement("div",{onClick:()=>{C&&this.handleJump("gateway")}},_.default.createElement("a",null,y.ingress_num||0))),_.default.createElement("div",{className:U.default.conrBox,style:{width:"33.3%"}},_.default.createElement("div",null,"\u5f85\u5347\u7ea7"),_.default.createElement("div",{onClick:()=>{a&&this.handleJump("upgrade")}},_.default.createElement("a",null,A&&A.length>0&&A.length-1||0))),_.default.createElement("div",{className:U.default.conrBox,style:{width:"33.3%"}},_.default.createElement("div",null,"\u5546\u5e97"),_.default.createElement("div",{onClick:()=>{!x&&y.app_store_name&&this.handleJumpStore(y.app_store_name)}},_.default.createElement("a",{style:{color:x?"rgba(0, 0, 0, 0.45)":"#4d73b1"}},y.app_store_name||"\u5546\u5e97\u5df2\u88ab\u5220\u9664"))))))),ae=this.fetchParameter(),le=ae.team_name,ie=ae.region_name,ne=ae.group_id;return _.default.createElement(_.Fragment,null,_.default.createElement(u.default,null,te),x&&_.default.createElement(p.default,{message:x,type:"warning",style:{marginBottom:"20px"}}),j>3&&_.default.createElement(d.default,{type:"inner",loading:L,title:"\u670d\u52a1\u5b9e\u4f8b",bodyStyle:{padding:"0",background:"#F0F2F5"}},_.default.createElement("div",{style:{background:"#fff"}},J&&J.length>0?_.default.createElement(D.default,{style:{padding:"0 24px 24px"},defaultActiveKey:J[0].service_id},J.map(e=>{if(e.service){var t=e.service_alias,a=e.service_region,l=e.service,i=l.service_name,n=l.pods,r=l.oldPods,d=e.service_id,o=_.default.createElement(R.Link,{to:"/team/".concat(le,"/region/").concat(a,"/components/").concat(t,"/thirdPartyServices")},"\u7ec4\u4ef6\u8be6\u60c5");return _.default.createElement(Q,{tab:_.default.createElement(s.default,{content:o},i),key:d},_.default.createElement(Y.default,{isHelm:!0,key:d,runLoading:!1,new_pods:n,old_pods:r,appAlias:ne}))}})):_.default.createElement("div",{style:{padding:"24px"}},"\u5f53\u524d\u5e94\u7528\u672a\u5b9a\u4e49 Service, \u65e0\u6cd5\u67e5\u8be2\u5b9e\u4f8b\u5217\u8868"))),j>3&&!x&&_.default.createElement("div",{className:U.default.customCollapseBox},this.handleConfing()),j<4&&_.default.createElement(d.default,{style:{marginTop:16},loading:L},j<4&&_.default.createElement(v.default,{type:"navigation",current:j,className:"site-navigation-steps"},G.map((e,t)=>{var a=e.value,l=e.key;return _.default.createElement(K,{title:a,icon:"configuring"!==l&&t===j&&_.default.createElement(P.LoadingOutlined,null)})})),(j<1||3===j)&&_.default.createElement("div",{className:U.default.process},_.default.createElement(W.default,{type:"ing",title:j<1?"\u521d\u59cb\u5316\u4e2d...":"\u5b89\u88c5\u4e2d...",description:"\u6b64\u8fc7\u7a0b\u53ef\u80fd\u6bd4\u8f83\u8017\u65f6\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85",style:{marginTop:48,marginBottom:16}})),j<2&&N.conditions&&N.conditions.length>0&&_.default.createElement("div",{className:U.default.process},_.default.createElement(v.default,{direction:"vertical",style:{paddingLeft:"20%"}},N.conditions.map(e=>{var t=e.status,a=e.message,l=e.type;if(k[l])return _.default.createElement(K,{title:k[l],status:t?"finish":a?"error":"wait",description:_.default.createElement("div",{style:{color:"#ff4d4f"}},a)})}))),2===j&&!x&&_.default.createElement("div",{className:U.default.customCollapse},this.handleConfing())),w&&_.default.createElement(V.default,{title:"\u5220\u9664\u5e94\u7528",desc:"\u786e\u5b9a\u8981\u6b64\u5220\u9664\u6b64\u5e94\u7528\u5417\uff1f",subDesc:"\u6b64\u64cd\u4f5c\u4e0d\u53ef\u6062\u590d",loading:h,onOk:this.handleDelete,onCancel:this.cancelDelete}),S&&_.default.createElement(E.default,{isNoEditName:!0,isAddGroup:!1,group_name:g.group_name,note:g.note,loading:I,title:"\u4fee\u6539\u5e94\u7528\u4fe1\u606f",onCancel:this.cancelEdit,onOk:this.handleEdit}),T&&_.default.createElement(Z.default,{teamName:le,regionName:ie,group_name:g.group_name,note:g.note,loading:I,principal:y.username,onCancel:this.cancelEditAppDirector,onOk:this.handleEdit}),b&&_.default.createElement(n.default,{title:"\u53cb\u60c5\u63d0\u793a",confirmLoading:m,visible:b,onOk:this.handlePromptModalOpen,onCancel:this.handlePromptModalClose},_.default.createElement("p",null,$[M],"\u5f53\u524d\u5e94\u7528\u4e0b\u7684\u5168\u90e8\u7ec4\u4ef6\uff1f")))}},b=S))||b)||b);t.default=ee}).call(this,a("tjlA").Buffer)},wNA6:function(e,t,a){"use strict";var l=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("Pwec");var n=l(a("CtXQ")),s=l(a("jehZ"));a("+L6B");var r=l(a("2/Rp"));a("/xke");var d=l(a("TeRw"));a("y8nQ");var o=l(a("Vl3Y"));a("DZo9");var c=l(a("8z0m"));a("OaEy");var u,p,g,m,I=l(a("2fM7")),h=a("MuoO"),C=i(a("q1tI")),f=l(a("qCJ4")),A=l(a("QDog")),v=(l(a("F5Il")),I.default.Option),y=c.default.Dragger,N={labelCol:{span:5},wrapperCol:{span:19}},M=(u=(0,h.connect)(e=>{var t=e.global,a=e.loading;return{groups:t.groups,createAppByDockerrunLoading:a.effects["createApp/createAppByDockerrun"]}},null,null,{withRef:!0}),p=o.default.create(),u(g=p((m=class extends C.PureComponent{constructor(e){super(e),this.onAddGroup=(()=>{this.setState({addGroup:!0})}),this.cancelAddGroup=(()=>{this.setState({addGroup:!1})}),this.handleAddGroup=(e=>{var t=this.props.form.setFieldsValue;t({group_id:e}),this.cancelAddGroup()}),this.handleJarWarUpload=(()=>{var e=this.props.dispatch,t=A.default.getCurrTeamName(),a=A.default.getCurrRegionName();e({type:"createApp/createJarWarServices",payload:{region:a,team_name:t,component_id:""},callback:e=>{e&&200===e.status_code&&this.setState({record:e.bean,event_id:e.bean.event_id,region_name:e.bean&&e.bean.region,team_name:e.bean&&e.bean.team_name},()=>{""!==e.bean.region&&(this.loop=!0,this.handleJarWarUploadStatus())})}})}),this.handleJarWarUploadRecord=(e=>{var t=this.props.dispatch;t({type:"createApp/createJarWarUploadRecord",payload:{region:A.default.getCurrRegionName(),team_name:A.default.getCurrTeamName(),component_id:"",file_type:e},callback:e=>{e.bean&&e.bean.source_dir&&e.bean.source_dir.length>0?this.setState({existFileList:e.bean.source_dir,event_id:e.bean.event_id}):this.handleJarWarUpload()},handleError:()=>{}})}),this.handleJarWarUploadStatus=(()=>{var e=this.props.dispatch,t=this.state.event_id;e({type:"createApp/createJarWarUploadStatus",payload:{region:A.default.getCurrRegionName(),team_name:A.default.getCurrTeamName(),event_id:t},callback:e=>{e&&e.bean.package_name.length>0&&(this.setState({existFileList:e.bean.package_name}),d.default.success({message:"\u4e0a\u4f20\u6587\u4ef6\u6210\u529f"}),this.loop=!1),this.loop&&setTimeout(()=>{this.handleJarWarUploadStatus()},3e3)},handleError:()=>{}})}),this.handleJarWarUploadDelete=(()=>{var e=this.state.event_id,t=this.props.dispatch;t({type:"createApp/deleteJarWarUploadStatus",payload:{team_name:A.default.getCurrTeamName(),event_id:e},callback:e=>{"ok"==e.bean.res&&(this.setState({existFileList:[]}),d.default.success({message:"\u5220\u9664\u6587\u4ef6\u6210\u529f"}),this.handleJarWarUpload())}})}),this.onChangeUpload=(e=>{var t=e.fileList;t=t.filter(e=>{return!e.response||"success"===e.response.msg}),e&&e.event&&e.event.percent&&this.setState({percents:e.event.percent});var a=e.file.status;"done"===a&&this.setState({percents:!1}),this.setState({fileList:t})}),this.onRemove=(()=>{this.setState({fileList:[]})}),this.handleSubmit=(e=>{e.preventDefault();var t=this.props,a=t.form,l=t.onSubmit,i=this.state.event_id;a.validateFields((e,t)=>{!e&&l&&l(t,i)})}),this.handleValiateNameSpace=((e,t,a)=>{if(!t)return a(new Error("\u8bf7\u8f93\u5165\u7ec4\u4ef6\u82f1\u6587\u540d\u79f0"));if(t&&t.length<=32){var l=/^[a-z]([-a-z0-9]*[a-z0-9])?$/;if(!l.test(t))return a(new Error("\u53ea\u652f\u6301\u5c0f\u5199\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u201c-\u201d\uff0c\u5e76\u4e14\u5fc5\u987b\u4ee5\u5b57\u6bcd\u5f00\u59cb\u3001\u4ee5\u6570\u5b57\u6216\u5b57\u6bcd\u7ed3\u5c3e"));a()}return t.length>32?a(new Error("\u4e0d\u80fd\u5927\u4e8e32\u4e2a\u5b57\u7b26")):void 0}),this.state={showUsernameAndPass:!1,addGroup:!1,fileList:[],isShowCom:!0,record:{},event_id:"",region_name:"",team_name:"",percents:!1,existFileList:[]}}componentWillMount(){this.loop=!1}componentDidMount(){this.handleJarWarUploadRecord("yaml")}componentWillUnmount(){this.loop=!1}render(){var e=this.props.form.getFieldDecorator,t=this.props,a=t.groups,l=t.createAppByDockerrunLoading,i=t.handleType,d=(t.ButtonGroupState,t.groupId),c=(t.showSubmitBtn,t.showCreateGroup),u=void 0===c||c,p=this.state,g=p.fileList,m=(p.defaultRadio,p.isShowCom,p.addGroup,p.record),h=(p.region_name,p.existFileList),A=this.props.data||{},M=(this.props.disableds,i&&"Service"===i);return C.default.createElement(C.Fragment,null,C.default.createElement(o.default,{onSubmit:this.handleSubmit,layout:"horizontal",hideRequiredMark:!0},C.default.createElement(o.default.Item,(0,s.default)({},N,{label:"\u5e94\u7528\u540d\u79f0"}),e("group_id",{initialValue:M?Number(d):A.group_id,rules:[{required:!0,message:"\u8bf7\u9009\u62e9"}]})(C.default.createElement(I.default,{getPopupContainer:e=>e.parentNode,placeholder:"\u8bf7\u9009\u62e9\u8981\u6240\u5c5e\u5e94\u7528",style:{display:"inline-block",width:M?"":292,marginRight:15},disabled:!!M},(a||[]).map(e=>C.default.createElement(v,{value:e.group_id},e.group_name)))),M?null:u?C.default.createElement(r.default,{onClick:this.onAddGroup},"\u65b0\u5efa\u5e94\u7528"):null),C.default.createElement(o.default.Item,(0,s.default)({label:"\u4e0a\u4f20\u6587\u4ef6",extra:"\u652f\u6301yaml\u3001yml\u683c\u5f0f\u4e0a\u4f20\u6587\u4ef6"},N),e("packageTarFile",{rules:[{required:!1,message:"\u8bf7\u4e0a\u4f20\u6587\u4ef6"}]})(C.default.createElement(y,{fileList:g,accept:".yaml,.yml",name:"packageTarFile",onChange:this.onChangeUpload,onRemove:this.onRemove,action:m.upload_url,multiple:!0},C.default.createElement("p",{className:"ant-upload-drag-icon"},C.default.createElement(n.default,{type:"inbox"}))))),C.default.createElement(o.default.Item,N,h.length>0&&h.map(e=>{return C.default.createElement("div",{style:{marginLeft:"100px"}},C.default.createElement(n.default,{style:{marginRight:"6px"},type:"inbox"}),e,C.default.createElement(n.default,{onClick:this.handleJarWarUploadDelete,style:{marginLeft:"12px",color:"red",cursor:"pointer"},type:"delete"}))})),C.default.createElement(o.default.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:N.wrapperCol.span,offset:N.labelCol.span}},label:""},C.default.createElement(r.default,{onClick:this.handleSubmit,type:"primary",loading:l},"\u786e\u8ba4\u521b\u5efa"))),this.state.addGroup&&C.default.createElement(f.default,{onCancel:this.cancelAddGroup,onOk:this.handleAddGroup}))}},g=m))||g)||g);t.default=M},"yCR+":function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iODRweCIgaGVpZ2h0PSIxMDVweCIgdmlld0JveD0iMCAwIDg0IDEwNSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNDkuMyAoNTExNjcpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPkdyb3VwPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+CiAgICAgICAgPHBhdGggZD0iTTQwLjcwOTM3NDgsMC45ODc1MzAyNzUgTDczLjcwOTM3NDgsMjIuMjYzODQ2MSBDNzUuMTM3MjgxMSwyMy4xODQ0Njk5IDc2LDI0Ljc2NzE4MTggNzYsMjYuNDY2MTQxNyBMNzYsNzAuMDE1MjUxNCBDNzYsNzEuNzE0MjExMyA3NS4xMzcyODExLDczLjI5NjkyMzIgNzMuNzA5Mzc0OCw3NC4yMTc1NDcgTDQwLjcwOTM3NDgsOTUuNDkzODYyOCBDMzkuMDU5NzAwNCw5Ni41NTc0Njg3IDM2Ljk0MDI5OTYsOTYuNTU3NDY4NyAzNS4yOTA2MjUyLDk1LjQ5Mzg2MjggTDIuMjkwNjI1MjEsNzQuMjE3NTQ3IEMwLjg2MjcxODg3LDczLjI5NjkyMzIgMy42NDE1MzE1MmUtMTQsNzEuNzE0MjExMyAzLjE5NzQ0MjMxZS0xNCw3MC4wMTUyNTE0IEw1LjMyOTA3MDUyZS0xNSwyNi40NjYxNDE3IEM1LjMyOTA3MDUyZS0xNSwyNC43NjcxODE4IDAuODYyNzE4ODcsMjMuMTg0NDY5OSAyLjI5MDYyNTIxLDIyLjI2Mzg0NjEgTDM1LjI5MDYyNTIsMC45ODc1MzAyNzUgQzM2Ljk0MDI5OTYsLTAuMDc2MDc1NjAxNCAzOS4wNTk3MDA0LC0wLjA3NjA3NTYwMTQgNDAuNzA5Mzc0OCwwLjk4NzUzMDI3NSBaIiBpZD0icGF0aC0xIj48L3BhdGg+CiAgICAgICAgPGZpbHRlciB4PSItNy45JSIgeT0iLTQuMSUiIHdpZHRoPSIxMTUuOCUiIGhlaWdodD0iMTEyLjQlIiBmaWx0ZXJVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIGlkPSJmaWx0ZXItMiI+CiAgICAgICAgICAgIDxmZU1vcnBob2xvZ3kgcmFkaXVzPSIyIiBvcGVyYXRvcj0iZGlsYXRlIiBpbj0iU291cmNlQWxwaGEiIHJlc3VsdD0ic2hhZG93U3ByZWFkT3V0ZXIxIj48L2ZlTW9ycGhvbG9neT4KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMiIgaW49InNoYWRvd1NwcmVhZE91dGVyMSIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiPjwvZmVPZmZzZXQ+CiAgICAgICAgICAgIDxmZU1vcnBob2xvZ3kgcmFkaXVzPSIyIiBvcGVyYXRvcj0iZXJvZGUiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dJbm5lciI+PC9mZU1vcnBob2xvZ3k+CiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9IjIiIGluPSJzaGFkb3dJbm5lciIgcmVzdWx0PSJzaGFkb3dJbm5lciI+PC9mZU9mZnNldD4KICAgICAgICAgICAgPGZlQ29tcG9zaXRlIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIGluMj0ic2hhZG93SW5uZXIiIG9wZXJhdG9yPSJvdXQiIHJlc3VsdD0ic2hhZG93T2Zmc2V0T3V0ZXIxIj48L2ZlQ29tcG9zaXRlPgogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIxIiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVHYXVzc2lhbkJsdXI+CiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwLjkwMzY2NzgyMSAgIDAgMCAwIDAgMC45MDA1NDA3OTIgICAwIDAgMCAwIDAuOTA0NzM1MzMyICAwIDAgMCAxIDAiIHR5cGU9Im1hdHJpeCIgaW49InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVDb2xvck1hdHJpeD4KICAgICAgICA8L2ZpbHRlcj4KICAgICAgICA8ZmlsdGVyIHg9Ii05LjIlIiB5PSItNS4yJSIgd2lkdGg9IjExOC40JSIgaGVpZ2h0PSIxMTQuNSUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0zIj4KICAgICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMyIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd0JsdXJJbm5lcjEiPjwvZmVHYXVzc2lhbkJsdXI+CiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9IjAiIGluPSJzaGFkb3dCbHVySW5uZXIxIiByZXN1bHQ9InNoYWRvd09mZnNldElubmVyMSI+PC9mZU9mZnNldD4KICAgICAgICAgICAgPGZlQ29tcG9zaXRlIGluPSJzaGFkb3dPZmZzZXRJbm5lcjEiIGluMj0iU291cmNlQWxwaGEiIG9wZXJhdG9yPSJhcml0aG1ldGljIiBrMj0iLTEiIGszPSIxIiByZXN1bHQ9InNoYWRvd0lubmVySW5uZXIxIj48L2ZlQ29tcG9zaXRlPgogICAgICAgICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMC45MDM2Njc4MjEgICAwIDAgMCAwIDAuOTAwNTQwNzkyICAgMCAwIDAgMCAwLjkwNDczNTMzMiAgMCAwIDAgMSAwIiB0eXBlPSJtYXRyaXgiIGluPSJzaGFkb3dJbm5lcklubmVyMSI+PC9mZUNvbG9yTWF0cml4PgogICAgICAgIDwvZmlsdGVyPgogICAgPC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Ikdyb3VwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0LjAwMDAwMCwgMi4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9IlBvbHlnb24iPgogICAgICAgICAgICAgICAgPHVzZSBmaWxsPSJibGFjayIgZmlsbC1vcGFjaXR5PSIxIiBmaWx0ZXI9InVybCgjZmlsdGVyLTIpIiB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iYmxhY2siIGZpbGwtb3BhY2l0eT0iMSIgZmlsdGVyPSJ1cmwoI2ZpbHRlci0zKSIgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+CiAgICAgICAgICAgICAgICA8dXNlIHN0cm9rZT0iIzAyRDc3NyIgc3Ryb2tlLXdpZHRoPSI0IiB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8Y2lyY2xlIGlkPSJPdmFsIiBmaWxsPSIjMDAwMDAwIiBjeD0iMzgiIGN5PSI0OCIgcj0iOCI+PC9jaXJjbGU+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},zNpR:function(e,t,a){"use strict";var l=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("bbsP");var n=l(a("/wGt"));a("+L6B");var s=l(a("2/Rp"));a("jCWc");var r=l(a("kPKH"));a("14J3");var d,o,c,u=l(a("BMrR")),p=a("MuoO"),g=i(a("q1tI")),m=l(a("vOCT")),I=l(a("2Hi/")),h=l(a("QDog")),C=l(a("oqMN")),f=l(a("puIC")),A=(d=(0,p.connect)(e=>{var t=e.user,a=e.application,l=e.global;return{currUser:t.currentUser,apps:a.apps,groupDetail:a.groupDetail||{},groups:l.groups||[],rainbondInfo:l.rainbondInfo}}),d((c=class extends g.PureComponent{constructor(e){super(e),this.cancelDelete=(()=>{this.setState({toDelete:!1})}),this.toAdd=(()=>{this.setState({toAdd:!0})}),this.cancelAdd=(()=>{this.setState({toAdd:!1})}),this.toAddService=(()=>{this.setState({toAddService:!0}),this.props.content(this.state.toAddService)}),this.cancelAddService=(()=>{this.setState({toAddService:!1,canceThirdParty:!this.state.canceThirdParty},()=>{this.setState({ServiceComponentTwoPage:"outerCustom",ServiceComponentOnePage:!1,moreState:!0,ButtonGroup:!1,ButtonGroupState:!0,ServiceComponentThreePage:!1})})}),this.handleServiceComponent=((e,t,a,l,i)=>{e=e||!1,t=t||null,a=a||null,i=i||null,this.setState({ServiceComponentOnePage:e,ServiceComponentTwoPage:t,ServiceComponentThreePage:a,[l]:i}),!1!==e&&null!==t&&null!==a||this.setState({ButtonGroup:null,ButtonGroupState:!0}),e&&this.setState({ServiceComponentTwoPage:"outerCustom",ServiceComponentOnePage:!1}),t&&this.setState({BackType:t}),"market"!==t&&this.setState({moreState:!0})}),this.handleBackEvents=(()=>{var e=this.state,t=e.ServiceComponentTwoPage,a=e.ServiceComponentThreePage,l=e.BackType;this.cancelAddService(),this.props.content(this.state.toAddService),a&&this.setState({ServiceComponentThreePage:null,ServiceComponentTwoPage:l,ButtonGroup:null,ButtonGroupState:!0}),"market"==t&&this.setState({moreState:!0})}),this.handleServiceBotton=((e,t,a)=>{this.setState({ButtonGroup:e,ButtonGroupState:t,errState:a})}),this.refreshCurrent=(()=>{this.setState({CustomButton:!1,toAddService:!1,ServiceComponentOnePage:!0,ServiceComponentTwoPage:"outerCustom",ServiceComponentThreePage:null,ServiceGetData:null,ButtonGroup:!1,ButtonGroupState:!0,handleType:null,moreState:!0})}),this.state={CustomButton:!1,toAddService:!1,canceThirdParty:!0,ServiceComponentOnePage:!1,ServiceComponentTwoPage:"outerCustom",ServiceComponentThreePage:null,ServiceGetData:null,ButtonGroup:!1,ButtonGroupState:!0,handleType:null,moreState:!0,BackType:null,errState:!0}}render(){var e=this.props,t=(e.rainbondInfo,e.flagThirdParty,this.state),a=t.ButtonGroup,l=t.moreState,i=(t.ServiceComponentOnePage,t.ServiceComponentTwoPage),d=t.ServiceComponentThreePage,o=t.ServiceGetData,c=t.ButtonGroupState,p=(t.handleType,t.canceThirdParty,h.default.fetchSvg("third_party"));return g.default.createElement("div",null,g.default.createElement("div",{className:f.default.ServiceBox},g.default.createElement(u.default,null,g.default.createElement("p",{className:f.default.ServiceTitle},"\u4ece\u7b2c\u4e09\u65b9\u7ec4\u4ef6\u5f00\u59cb")),g.default.createElement(u.default,{style:{marginBottom:"30px"}},g.default.createElement(r.default,{span:8,className:f.default.ServiceDiv,onClick:this.toAddService},p,g.default.createElement("p",{className:f.default.ServiceSmallTitle},"\u7b2c\u4e09\u65b9\u7ec4\u4ef6")))),g.default.createElement(n.default,{title:"\u6dfb\u52a0\u7b2c\u4e09\u65b9\u7ec4\u4ef6",placement:"right",onClose:this.cancelAddService,visible:this.state.toAddService,toAddThirdParty:this.state.toAddService,maskClosable:!1,width:550},"check"===d&&o&&g.default.createElement(m.default,{ServiceGetData:o,handleType:"Service",ButtonGroupState:c,refreshCurrent:()=>{this.refreshCurrent()},ErrState:this.state.errState,handleServiceBotton:(e,t,a)=>{this.handleServiceBotton(e,t,a)},handleServiceDataState:(e,t,a,l)=>{this.handleServiceComponent(e,t,a,"ServiceGetData",l),this.props.onload&&this.props.onload()}}),"market"===i&&g.default.createElement(I.default,{groupId:this.props.groupId,refreshCurrent:()=>{this.refreshCurrent()},handleType:"Service",moreState:l,ButtonGroupState:c,ErrState:this.state.errState,handleServiceBotton:(e,t)=>{this.handleServiceBotton(e,t)},handleServiceGetData:e=>{this.handleServiceComponent(!1,null,"check","ServiceGetData",e)},handleServiceComponent:()=>{this.handleServiceComponent(!1,"market",null)}}),"outerCustom"===i&&g.default.createElement(C.default,{groupId:this.props.groupId,handleType:"Service",dynamicType:i,ButtonGroupState:c,ErrState:this.state.errState,handleServiceBotton:(e,t)=>{this.handleServiceBotton(e,t)},handleServiceGetData:e=>{this.handleServiceComponent(!1,null,"check","ServiceGetData",e)},handleServiceComponent:()=>{this.handleServiceComponent(!1,"market",null)}}),g.default.createElement("div",{style:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",left:0,background:"#fff",borderRadius:"0 0 4px 4px",display:"flex",justifyContent:"flex-end",zIndex:99999}},"outerCustom"===i&&g.default.createElement(s.default,{style:{marginRight:8},onClick:()=>{this.handleBackEvents(!0,null)}},"\u4e0a\u4e00\u6b65"),a&&g.default.createElement("span",{style:{marginRight:8}},a),g.default.createElement(s.default,{style:{marginRight:8},onClick:this.cancelAddService},"\u53d6\u6d88"))))}},o=c))||o);t.default=A}}]);