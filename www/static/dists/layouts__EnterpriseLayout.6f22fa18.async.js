(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"5DSb":function(e,t,a){"use strict";var i=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("MXD1");var n,s,l,o=i(a("CFYs")),d=r(a("q1tI")),u=a("MuoO"),c=(n=(0,u.connect)(e=>{var t=e.global;return{apploadingnum:t.apploadingnum}},null,null,{pure:!1}),n((l=class extends d.Component{constructor(e){super(e),this.saveRef=(e=>{this.element=e}),this.width=0,this.timer=null,this.total=0,this.loaded=0,this.state={width:0,show:!1}}getCurrentWidth(){var e=100;return this.state.width+=.01*(e-this.state.width),this.state.width>90?90:this.state.width}componentWillReceiveProps(e){var t=this.props.apploadingnum,a=e.apploadingnum;t!==a&&(a>0?(this.start(),this.computedWidth()):0===a&&this.completed())}start(){this.timer||(this.setState({width:0,show:!0}),this.computedWidth(),this.timer=setInterval(()=>{this.computedWidth()},this.props.interval||800))}computedWidth(){var e=this.getCurrentWidth();this.setState({width:e})}addRequest(){this.timer?this.computedWidth():this.start()}removeRequest(){this.loaded++,this.total==this.loaded?this.completed():this.computedWidth()}completed(){this.total=this.loaded=0,this.setState({width:100},()=>{setTimeout(()=>{this.setState({show:!1},()=>{this.setState({width:0})})},500)}),clearInterval(this.timer),this.timer=null}render(){return d.default.createElement("div",{ref:this.saveRef,className:"loadingbar",style:{display:this.state.show?"block":"none",zIndex:9999999,height:"3px",position:"fixed",left:0,top:-10,width:"100%"}},d.default.createElement(o.default,{status:"active",size:"small",percent:this.state.width}))}},s=l))||s);t.default=c},W7L6:function(e,t,a){"use strict";var i=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.getMenuData=void 0;var r=i(a("q1tI")),n=i(a("p0pE")),s=i(a("mWxT")),l=i(a("+iC2")),o=a("+n12");function d(e,t,a){var i=l.default.isCompanyAdmin(t),n=r.default.createElement("i",{className:"anticon"},r.default.createElement("svg",{t:"1584693382814",viewBox:"0 0 1024 1024",version:"1.1","p-id":"812",width:"20",height:"20"},r.default.createElement("path",{d:"M512 542.72L286.72 412.16V151.04L512 20.48l225.28 130.56v261.12L512 542.72zM339.2 381.44L512 481.28l172.8-99.84V181.76L512 81.92l-172.8 99.84v199.68zM776.96 1006.08L551.68 875.52V614.4l225.28-130.56L1002.24 614.4v261.12L776.96 1006.08zM602.88 844.8l172.8 99.84L949.76 844.8V645.12l-172.8-99.84-172.8 99.84V844.8zM247.04 1006.08L21.76 875.52V614.4l225.28-130.56L473.6 614.4v261.12L247.04 1006.08zM74.24 844.8l172.8 99.84L421.12 844.8V645.12l-172.8-99.84-174.08 99.84V844.8z",fill:"#9CA2A8","p-id":"813"}))),o=r.default.createElement("i",{className:"anticon"},r.default.createElement("svg",{t:"1585203404203",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18024",width:"20",height:"20"},r.default.createElement("path",{d:"M111.872 42.666667A26.538667 26.538667 0 0 0 85.333333 69.205333v885.589334c0 14.677333 11.861333 26.538667 26.538667 26.538666h800.256a26.538667 26.538667 0 0 0 26.538667-26.538666V69.205333A26.538667 26.538667 0 0 0 912.128 42.666667H111.872z m0-42.666667h800.256C950.357333 0 981.333333 30.976 981.333333 69.205333v885.589334c0 38.229333-30.976 69.205333-69.205333 69.205333H111.872A69.205333 69.205333 0 0 1 42.666667 954.794667V69.205333C42.666667 30.976 73.642667 0 111.872 0z",fill:"#4A4A4A","p-id":"18025"}),r.default.createElement("path",{d:"M661.333333 128a21.333333 21.333333 0 1 1 42.666667 0v160c0 65.706667-61.226667 117.333333-135.125333 117.333333H455.125333C381.226667 405.333333 320 353.706667 320 288V128a21.333333 21.333333 0 0 1 42.666667 0v160c0 40.362667 40.661333 74.666667 92.458666 74.666667h113.749334c51.797333 0 92.458667-34.304 92.458666-74.666667V128z",fill:"#4A4A4A","p-id":"18026"}))),d=r.default.createElement("i",{className:"anticon"},r.default.createElement("svg",{t:"1607308888685",viewBox:"0 0 1024 1024",version:"1.1","p-id":"5862",width:"20",height:"20"},r.default.createElement("path",{d:"M394.836769 987.615861H163.337688A113.950325 113.950325 0 0 1 46.188758 876.864142V110.798099A113.950325 113.950325 0 0 1 163.337688 0.04638h566.952844A113.950325 113.950325 0 0 1 845.840159 110.798099v338.652369a39.98257 39.98257 0 0 1-77.966011 0V110.798099a39.98257 39.98257 0 0 0-39.98257-36.783965H163.337688a39.98257 39.98257 0 0 0-39.98257 36.783965v766.066043a39.98257 39.98257 0 0 0 39.98257 37.18379h231.499081a36.783964 36.783964 0 1 1 0 73.567929z",fill:"#9ca298","p-id":"5863"}),r.default.createElement("path",{d:"M632.333235 285.921756H262.494462a36.783964 36.783964 0 1 1 0-73.567929h369.838773a36.783964 36.783964 0 1 1 0 73.567929zM632.333235 473.44001H262.494462a36.783964 36.783964 0 1 1 0-73.567929h369.838773a36.783964 36.783964 0 1 1 0 73.567929zM976.982989 746.520964c0-21.190762-13.9939-31.986056-37.18379-33.985185a47.979084 47.979084 0 0 1-47.179433-58.774378c8.796165-39.98257 6.797037-45.58013-30.786578-66.371066l-23.989543-13.194249a51.17769 51.17769 0 0 0-71.5688 5.997386c-27.587973 21.590588-39.98257 21.190762-66.371066 0a51.17769 51.17769 0 0 0-71.568801-6.797037l-39.98257 21.990414a37.583616 37.583616 0 0 0-19.591459 47.579258c12.394597 39.98257-5.59756 65.571415-48.778736 69.969498-17.992157 1.999129-29.986928 11.594945-30.786579 27.587973a749.673189 749.673189 0 0 0 0 94.758691c0 20.391111 13.594074 30.786579 35.984313 32.785708a49.178561 49.178561 0 0 1 48.778736 57.574901c-7.996514 41.981699-7.996514 46.379781 31.986056 67.970369 8.39634 4.797908 16.792679 9.995643 25.588845 14.393725a48.778736 48.778736 0 0 0 64.371938-8.39634c30.786579-26.388496 39.98257-25.988671 72.368451 0a388.230756 388.230756 0 0 0 39.982571 23.189891c29.187276-18.391982 57.974727-34.38501 83.963397-53.576644a35.584487 35.584487 0 0 0 3.598431-31.58623c-14.793551-35.984313 8.796165-67.570543 50.378038-71.568801 17.192505 0 28.78745-10.795294 29.587102-25.98867a831.237632 831.237632 0 0 0 1.199477-93.559214z m-245.093154 139.139343a96.357994 96.357994 0 1 1 96.357994-96.357993 95.958168 95.958168 0 0 1-96.357994 96.357993z",fill:"#9ca298","p-id":"5864"}),r.default.createElement("path",{d:"M223.311543 587.390335l260.286531 0 0 73.967754-260.286531 0 0-73.967754Z",fill:"#9ca298","p-id":"5865"}))),u=r.default.createElement("i",{className:"anticon"},r.default.createElement("svg",{viewBox:"0 0 1024 1024","p-id":"9673",width:"20",height:"20"},r.default.createElement("path",{d:"M834.383448 34.109793H198.867862a141.241379 141.241379 0 0 0-141.241379 141.241379v496.357518a141.241379 141.241379 0 0 0 141.241379 141.241379H834.383448a141.241379 141.241379 0 0 0 141.24138-141.241379V175.351172a141.241379 141.241379 0 0 0-141.24138-141.241379z m-635.515586 70.62069H834.383448a70.62069 70.62069 0 0 1 70.62069 70.620689v496.357518a70.62069 70.62069 0 0 1-70.62069 70.620689H198.867862a70.62069 70.62069 0 0 1-70.62069-70.620689V175.351172a70.62069 70.62069 0 0 1 70.62069-70.620689z",fill:"#9CA2A8","p-id":"9674"}),r.default.createElement("path",{d:"M286.72 514.01269a35.310345 35.310345 0 0 1 35.310345 35.310344v99.751725a35.310345 35.310345 0 0 1-70.62069 0v-99.751725a35.310345 35.310345 0 0 1 35.310345-35.310344zM436.718345 456.951172a35.310345 35.310345 0 0 1 35.310345 35.310345v156.813242a35.310345 35.310345 0 1 1-70.62069 0v-156.777931a35.310345 35.310345 0 0 1 35.310345-35.310345zM586.752 483.116138a35.310345 35.310345 0 0 1 35.310345 35.310345v130.648276a35.310345 35.310345 0 1 1-70.62069 0v-130.648276a35.310345 35.310345 0 0 1 35.310345-35.310345zM736.785655 392.015448a35.310345 35.310345 0 0 1 35.310345 35.310345v221.748966a35.310345 35.310345 0 1 1-70.62069 0v-221.748966a35.310345 35.310345 0 0 1 35.310345-35.310345zM725.768828 202.575448a35.310345 35.310345 0 0 1 43.431724 55.507862l-3.531035 2.718897-143.289379 98.26869a35.310345 35.310345 0 0 1-28.601379 5.12l-4.131311-1.306483-144.948965-56.24938-152.293517 53.318621a35.310345 35.310345 0 0 1-43.431725-17.867034l-1.553655-3.813518a35.310345 35.310345 0 0 1 17.867035-43.431724l3.778207-1.553655 164.652138-57.555862a35.310345 35.310345 0 0 1 19.632551-1.094621l4.802207 1.483035L597.804138 290.251034l127.929379-87.675586zM837.278897 902.708966a35.310345 35.310345 0 0 1 4.13131 70.408827l-4.13131 0.211862h-632.055173a35.310345 35.310345 0 0 1-4.13131-70.373517l4.13131-0.247172h632.055173z",fill:"#9CA2A8","p-id":"9675"}))),c=[{name:"\u603b\u89c8",icon:"dashboard",path:"/enterprise/".concat(e,"/index"),authority:["admin","user"]},{name:"\u5e94\u7528\u5e02\u573a",icon:"share-alt",path:"/enterprise/".concat(e,"/shared/local"),authority:["admin","user"]}];if(s.default.isEnableBillingFunction()&&c.push({name:"\u8ba2\u8d2d",icon:o,path:"/enterprise/".concat(e,"/orders/overviewService"),authority:["admin","user"]}),c.push({name:"\u56e2\u961f",icon:"team",path:"/enterprise/".concat(e,"/teams"),authority:["admin","user"]}),i){if(c.push({name:"\u96c6\u7fa4",icon:n,path:"/enterprise/".concat(e,"/clusters"),authority:["admin","user"]},{name:"\u7528\u6237",icon:"user",path:"/enterprise/".concat(e,"/users"),authority:["admin","user"]}),a&&s.default.isEnableMonitoring(a)&&s.default.fetchMonitoring(a)){var h={slo_monitor_suffix:"\u670d\u52a1\u76d1\u63a7",cluster_monitor_suffix:"\u96c6\u7fa4\u76d1\u63a7",node_monitor_suffix:"\u8282\u70b9\u76d1\u63a7",component_monitor_suffix:"\u7ec4\u4ef6\u76d1\u63a7",system_monitor:"\u7cfb\u7edf\u5927\u5c4f",application_monitor:"\u5e94\u7528\u5927\u5c4f"},p=s.default.fetchMonitoring(a),m=[];Object.keys(p).map(e=>{"home_url"!==e&&m.push({name:h[e],path:"/".concat(e,"/dashboard"),authority:["admin","user"]})}),c.push({name:"\u76d1\u63a7",icon:u,path:"/enterprise/".concat(e,"/monitoring"),authority:["admin","user"],children:m})}c.push({name:"\u65e5\u5fd7",icon:d,path:"/enterprise/".concat(e,"/logs"),authority:["admin","user"]},{name:"\u8bbe\u7f6e",icon:"setting",path:"/enterprise/".concat(e,"/setting"),authority:["admin","user"]})}return c}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0;return e.map(e=>{var i=e.path;(0,o.isUrl)(i)||(i=t+e.path);var r=(0,n.default)({},e,{path:i,authority:e.authority||a});return e.children&&(r.children=u(e.children,"".concat(t).concat(e.path,"/"),e.authority)),r})}var c=(e,t,a)=>{var i=u(d(e,t,a));return i};t.getMenuData=c},uHcJ:function(e,t,a){"use strict";var i=a("tAuX"),r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("5Dmo");var n=r(a("3S7+"));a("B9cy");var s,l=r(a("Ol7k")),o=r(a("TSYQ")),d=a("MuoO"),u=a("7DNP"),c=a("4zCG"),h=r(a("XaGS")),p=r(a("Wwog")),m=r(a("bALw")),f=r(a("17x9")),v=a("s4NR"),g=i(a("q1tI")),b=a("E6Dt"),y=r(a("ZFw/")),E=r(a("3a4m")),w=r(a("W2Kv")),M=a("W7L6"),C=r(a("/VoG")),L=r(a("NtFa")),x=r(a("h3zL")),_=r(a("CmFy")),z=r(a("5DSb")),A=r(a("xqX8")),N=r(a("AgvA")),I=r(a("IamK")),S=r(a("HZnN")),W=r(a("QDog")),V=r(a("mWxT")),k=r(a("+iC2")),D=r(a("2tDf")),T=r(a("R1Dz")),R=l.default.Content,H=(0,p.default)(e=>{var t={},a=e=>{e.forEach(e=>{e.children&&a(e.children),t[e.path]=e})};return a(e),t},h.default),P={"screen-xs":{maxWidth:575},"screen-sm":{minWidth:576,maxWidth:767},"screen-md":{minWidth:768,maxWidth:991},"screen-lg":{minWidth:992,maxWidth:1199},"screen-xl":{minWidth:1200}};(0,c.enquireScreen)(e=>{s=e});class q extends g.PureComponent{constructor(e){super(e),this.fetchLicenses=(()=>{var e=this.props.dispatch;e&&e({type:"global/fetchLicenses",callback:e=>{e&&(!e.is_permanent&&e.is_expired||!e.have_license)?E.default.push({pathname:"/authorization/overdue",query:{isLicense:e.have_license}}):this.getEnterpriseList()},handleError:()=>{E.default.push("/authorization/overdue")}})}),this.getEnterpriseList=(()=>{var e=this.props.dispatch;e({type:"global/fetchEnterpriseList",callback:e=>{if(e&&200===e.status_code){var t=!!(e.list&&e.list.length>0);this.setState({enterpriseList:e.list,ready:t},()=>{t?(this.redirectEnterpriseView(),this.load()):this.handleJumpLogin()})}else this.handleJumpLogin()},handleError:()=>{this.handleJumpLogin()}})}),this.loadClusters=(e=>{var t=this.props,a=t.dispatch,i=t.currentUser;a({type:"region/fetchEnterpriseClusters",payload:{enterprise_id:e,check_status:"no"},callback:t=>{var r=k.default.isCompanyAdmin(i);t&&t.list&&0===t.list.length&&r&&a(u.routerRedux.push("/enterprise/".concat(e,"/shared/local?init=true")))}})}),this.load=(()=>{(0,c.enquireScreen)(e=>{this.setState({isMobile:e})})}),this.getChildContext=(()=>{var e=this.props.location;return{location:e,breadcrumbNameMap:this.breadcrumbNameMap}}),this.matchParamsPath=(e=>{var t=Object.keys(this.breadcrumbNameMap).find(t=>{return(0,m.default)(t).test(e)});return this.breadcrumbNameMap[t]}),this.handleMenuCollapse=(e=>{var t=this.props.dispatch;t({type:"global/changeLayoutCollapsed",payload:e})}),this.handleJumpLogin=(()=>{var e=this.props.dispatch;e(u.routerRedux.push("/user/login"))}),this.redirectEnterpriseView=(()=>{var e=this.props,t=e.dispatch,a=e.currentUser,i=e.rainbondInfo,r=e.match.params.eid,n=this.state.enterpriseList;if((!r||"auto"===r)&&n.length>0){var s=null;n.map(e=>{return e.enterprise_id===a.enterprise_id&&(s=e),e}),null==s&&(s=n[0]),this.handlePutLog(i,s),this.fetchEnterpriseInfo(s.enterprise_id),this.setState({enterpriseInfo:s}),t(u.routerRedux.replace("/enterprise/".concat(s.enterprise_id,"/index")))}else n.map(e=>{return e.enterprise_id===r&&(this.fetchEnterpriseInfo(r),this.handlePutLog(i,e),this.setState({enterpriseInfo:e})),e})}),this.handlePutLog=((e,t)=>{W.default.putLog(Object.assign(e,t))}),this.getNewbieGuideConfig=(e=>{var t=this.props.dispatch;t({type:"global/fetchNewbieGuideConfig",callback:t=>{var a=V.default.handleNewbie(t&&t.list,"welcome");a&&this.loadClusters(e)}})}),this.fetchEnterpriseInfo=(e=>{if(!e)return null;var t=this.props.dispatch;V.default.isEnableBillingFunction()&&this.fetchEnterpriseService(e),this.loadClusters(e),t({type:"global/fetchEnterpriseInfo",payload:{enterprise_id:e},callback:t=>{if(t&&t.bean){var a=V.default.isEnableNewbieGuide(t.bean);a&&this.getNewbieGuideConfig(e)}}})}),this.fetchEnterpriseService=(e=>{var t=this.props.dispatch;t({type:"order/fetchEnterpriseService",payload:{enterprise_id:e}})}),this.breadcrumbNameMap=H((0,M.getMenuData)(this.props.groups)),this.state={isMobile:s,enterpriseList:[],enterpriseInfo:!1,ready:!1,offLineDisNew:[{key:"welcome",value:!0},{key:"applicationInfo",value:!0},{key:"installApp",value:!0}]}}componentDidMount(){this.fetchLicenses()}getContext(){var e=this.props.location;return{location:e,breadcrumbNameMap:this.breadcrumbNameMap}}render(){var e=this.props,t=e.memoryTip,a=e.licenseInfo,i=e.currentUser,r=e.collapsed,s=e.location,d=e.location.pathname,c=e.match.params.eid,h=e.orders,p=e.children,m=e.rainbondInfo,f=e.enterprise,E=e.showAuthCompany,k=e.enterpriseServiceInfo,H=this.state,q=H.enterpriseList,O=H.enterpriseInfo,U=H.ready,j=r?"calc(100% - 416px)":"calc(100% - 116px)",B=V.default.isEnableBillingFunction(),F=(0,v.stringify)({redirect:window.location.href});if(!U||!O||!a)return g.default.createElement(A.default,null);if(!i||!m||0===q.length)return g.default.createElement(u.Redirect,{to:"/user/login?".concat(F)});var G=m.disable_logo?m.logo.value:V.default.fetchLogo(m,f)||w.default,J=()=>{var e=k&&k.type;return g.default.createElement("div",{className:x.default.enterprise},B&&g.default.createElement(n.default,{title:"vip"===e?"\u5c0a\u8d35\u7684\u4ed8\u8d39\u4f01\u4e1a\u7528\u6237":"\u514d\u8d39\u7528\u6237"},W.default.fetchSvg(e||"free")),f&&f.enterprise_alias||O&&O.enterprise_alias)},X=()=>{return g.default.createElement(l.default,null,g.default.createElement(I.default,{currentEnterprise:O,enterpriseList:q,currentUser:i,logo:G,Authorized:S.default,collapsed:r,location:s,isMobile:this.state.isMobile,onCollapse:this.handleMenuCollapse}),g.default.createElement(l.default,null,g.default.createElement(L.default,{eid:c,logo:G,isPubCloud:m&&m.is_public&&m.is_public.enable,currentUser:i,collapsed:r,onCollapse:this.handleMenuCollapse,isMobile:this.state.isMobile,customHeader:J}),g.default.createElement(l.default,{style:{flexDirection:"row"}},g.default.createElement(_.default,{currentEnterprise:O,enterpriseList:q,title:m&&m.title&&m.title.enable&&m.title.value,currentUser:i,Authorized:S.default,menuData:(0,M.getMenuData)(c,i,f),showMenu:!0,pathname:d,location:s,isMobile:this.state.isMobile,collapsed:r,onCollapse:this.handleMenuCollapse}),g.default.createElement(R,{key:c,style:{height:"calc(100vh - 64px)",overflow:"auto",width:j}},g.default.createElement("div",{style:{margin:"24px 24px 0"}},g.default.createElement(S.default,{logined:!0,authority:["admin","user"],noMatch:g.default.createElement(u.Redirect,{to:"/user/login"})},p))))))},Q=V.default.fetchSiteTitle(m);return g.default.createElement(g.Fragment,null,g.default.createElement(y.default,{title:Q},g.default.createElement(b.ContainerQuery,{query:P},e=>g.default.createElement(T.default.Provider,{value:this.getContext()},g.default.createElement("div",{className:(0,o.default)(e)},X())))),g.default.createElement(z.default,null),E&&g.default.createElement(C.default,{eid:c,marketName:E,currStep:0}),t&&g.default.createElement(D.default,{memoryTip:t}),h&&B&&g.default.createElement(N.default,{enterpriseServiceInfo:k,eid:c,orders:h}))}}q.childContextTypes={location:f.default.object,breadcrumbNameMap:f.default.object,currRegion:f.default.string,currTeam:f.default.string};var O=(0,d.connect)(e=>{var t=e.user,a=e.global,i=e.index,r=e.loading,n=e.order;return{licenseInfo:a.licenseInfo,currentUser:t.currentUser,notifyCount:t.notifyCount,collapsed:a.collapsed,groups:a.groups,fetchingNotices:r.effects["global/fetchNotices"],notices:a.notices,currTeam:W.default.getCurrTeamName(),currRegion:W.default.getCurrRegionName(),rainbondInfo:a.rainbondInfo,payTip:a.payTip,memoryTip:a.memoryTip,noMoneyTip:a.noMoneyTip,showAuthCompany:a.showAuthCompany,orders:a.orders,overviewInfo:i.overviewInfo,nouse:a.nouse,enterprise:a.enterprise,enterpriseServiceInfo:n.enterpriseServiceInfo}})(q);t.default=O}}]);