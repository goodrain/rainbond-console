(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[26],{"1cUz":function(e,t,a){e.exports={antd_row:"antd_row___22Eih",antd_form:"antd_form___3vT_u",antd_row_btn:"antd_row_btn___M_ybW",antd_btn:"antd_btn___HnUHl",lists:"lists___PLy7p"}},tYjc:function(e,t,a){"use strict";var n=a("g09b"),s=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var r=n(a("bx4M"));a("+L6B");var l=n(a("2/Rp"));a("FJo9");var i=n(a("L41K"));a("y8nQ");var o,d,u,c,p=n(a("Vl3Y")),h=a("MuoO"),f=a("7DNP"),m=(n(a("Qyje")),s(a("q1tI"))),g=a("LLXN"),_=n(a("2lxJ")),b=(n(a("3a4m")),n(a("ALo4"))),v=n(a("XZXw")),y=n(a("+iC2")),E=n(a("QDog")),w=n(a("1cUz")),L=(p.default.Item,i.default.Step,o=p.default.create(),d=(0,h.connect)(e=>{var t=e.user,a=e.list,n=e.loading,s=e.global,r=e.index;return{user:t.currentUser,list:a,loading:n.models.list,rainbondInfo:s.rainbondInfo,enterprise:s.enterprise,isRegist:s.isRegist,oauthLongin:n.effects["global/creatOauth"],overviewInfo:r.overviewInfo}}),o(u=d((c=class extends m.PureComponent{constructor(e){super(e),this.startPolling=(()=>{this.getRegionLength(),this.pollingTimer=setInterval(this.getRegionLength,3e3)}),this.getRegionLength=(()=>{var e=this.props,t=e.dispatch,a=e.match.params.eid,n=this.props.location.query.token,s=this.props.location.query.host;t({type:"region/fetchHelmJoinStatus",payload:{eid:a,token:n,api_host:s},callback:e=>{200===e.status_code&&("installed"===e.bean.health_status&&clearInterval(this.pollingTimer),this.setState({status:e.bean.health_status}))}})}),this.toLinkNext=(e=>{var t=this.props,a=t.dispatch,n=t.match.params.eid,s=n||E.default.getCurrEnterpriseId();a({type:"region/deleteHelmEvents",payload:{eid:n},callback:t=>{"install"===e?a(f.routerRedux.push("/enterprise/".concat(s,"/provider/ACksterList"))):"finish"===e&&a(f.routerRedux.push("/enterprise/".concat(s,"/clusters")))}})}),this.renderBody=(()=>{var e=this.state.status,t="",a="",n="",s=[],r=m.default.createElement("div",null,(0,g.formatMessage)({id:"enterpriseColony.cloud.Refresh1"}),m.default.createElement("a",{href:"https://www.rainbond.com/docs/troubleshooting/install",target:"_blank"},(0,g.formatMessage)({id:"enterpriseColony.cloud.Refresh2"})));return"installed"===e&&(t="success",a="".concat((0,g.formatMessage)({id:"enterpriseColony.cloud.success"})),n="".concat((0,g.formatMessage)({id:"enterpriseColony.cloud.back"})),s=[m.default.createElement(l.default,{className:w.default.antd_btn,onClick:()=>{this.toLinkNext("finish")},type:"primary"},m.default.createElement(g.FormattedMessage,{id:"enterpriseColony.cloud.return"}))]),"installing"===e&&(t="ing",a="\u6b63\u5728\u5bf9\u63a5\u96c6\u7fa4",s=[m.default.createElement(l.default,{className:w.default.antd_btn,onClick:()=>{this.toLinkNext("install")}},m.default.createElement(g.FormattedMessage,{id:"button.cancel"}))]),m.default.createElement(b.default,{className:w.default.lists,type:t,title:a,actions:s,description:m.default.createElement("div",null,"installing"===e?r:n)})});var t=this.props,a=t.user,n=(t.location.search,y.default.isCompanyAdmin(a));this.state={adminer:n,status:"installing"}}componentWillMount(){var e=this.state.adminer,t=this.props.dispatch;e||t(f.routerRedux.push("/"))}componentWillUnmount(){clearInterval(this.pollingTimer)}componentDidMount(){this.startPolling()}render(){return m.default.createElement(v.default,{title:m.default.createElement(g.FormattedMessage,{id:"enterpriseColony.button.text"}),content:m.default.createElement(g.FormattedMessage,{id:"enterpriseColony.PageHeaderLayout.content"}),titleSvg:_.default.getPageHeaderSvg("clusters",18)},m.default.createElement(r.default,{style:{padding:"24px"}},m.default.createElement(r.default,{bordered:!1},this.renderBody())))}},u=c))||u)||u);t.default=L}}]);