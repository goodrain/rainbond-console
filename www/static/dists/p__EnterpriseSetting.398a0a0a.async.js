(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[52],{"+XgA":function(e,t,a){"use strict";var s=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var i=s(a("kLXV")),r=s(a("jehZ"));a("5NDa");var n=s(a("5rEg"));a("y8nQ");var o,d,u,c,f=s(a("Vl3Y")),p=s(a("PCLb")),m=a("MuoO"),h=l(a("q1tI")),g=a("LLXN"),b=s(a("8+Sn")),v=s(a("e6Ls")),E=f.default.Item,S=(o=f.default.create(),d=(0,m.connect)(e=>{var t=e.loading;return{basicInformationLoading:t.effects["global/putBasicInformation"]}}),o(u=d((c=class extends h.PureComponent{constructor(){super(...arguments),this.onOk=(e=>{e.preventDefault();var t=this.props,a=t.form,s=t.onOk;a.validateFields({force:!0},(e,t)=>{if(!e&&s){if(t.logo.fileList&&t.logo.fileList.length>0){var a=this.handleFileUrl(t.logo.fileList[0]);a&&(t.logo=a)}if(t.favicon.fileList&&t.favicon.fileList.length>0){var l=this.handleFileUrl(t.favicon.fileList[0]);l&&(t.favicon=l)}s(t)}})}),this.handleFileUrl=(e=>{return e.response&&200===e.response.code&&e.response.data.bean&&e.response.data.bean.file_url})}render(){var e=this.props,t=e.title,a=e.onCancel,s=e.form,l=e.loading,o=void 0!==l&&l,d=e.basicInformationLoading,u=e.data,c=void 0===u?{}:u,m=s.getFieldDecorator,S={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}},_=b.default.get("token"),M={};_&&(M.Authorization="GRJWT ".concat(_));var y={formItemLayout:S,form:s,data:c};return h.default.createElement(i.default,{visible:!0,title:t,confirmLoading:o||d,className:v.default.TelescopicModal,onCancel:a,onOk:this.onOk},h.default.createElement(f.default,{onSubmit:this.onOk},h.default.createElement(E,(0,r.default)({},S,{label:(0,g.formatMessage)({id:"enterpriseSetting.basicsSetting.basicInformation.form.label.title"})}),m("title",{initialValue:c.title||"",rules:[{required:!0,message:(0,g.formatMessage)({id:"placeholder.oauth.title"})},{max:64,message:(0,g.formatMessage)({id:"placeholder.appShare.max64"})}]})(h.default.createElement(n.default,{placeholder:(0,g.formatMessage)({id:"placeholder.oauth.title"})}))),h.default.createElement(E,(0,r.default)({},S,{label:(0,g.formatMessage)({id:"enterpriseSetting.basicsSetting.basicInformation.form.label.enterprise_alias"})}),m("enterprise_alias",{initialValue:c.enterprise_alias||"",rules:[{required:!0,message:(0,g.formatMessage)({id:"placeholder.oauth.enterprise_alias"})},{max:64,message:(0,g.formatMessage)({id:"placeholder.appShare.max64"})}]})(h.default.createElement(n.default,{placeholder:(0,g.formatMessage)({id:"placeholder.oauth.enterprise_alias"})}))),h.default.createElement(E,(0,r.default)({},S,{label:(0,g.formatMessage)({id:"enterpriseSetting.basicsSetting.basicInformation.form.label.doc_url"})}),m("doc_url",{rules:[{max:255,message:(0,g.formatMessage)({id:"placeholder.max255"})}],initialValue:c.doc_url||""})(h.default.createElement(n.default,{placeholder:(0,g.formatMessage)({id:"placeholder.oauth.doc_url"})}))),h.default.createElement(p.default,(0,r.default)({},y,{name:"logo",label:(0,g.formatMessage)({id:"enterpriseSetting.basicsSetting.basicInformation.form.label.logo"}),extra:(0,g.formatMessage)({id:"placeholder.oauth.logo"}),initialValue:c.logo,required:!1,uploadBtnStyle:{width:"236px",height:"35px"},imgstyle:{width:"236px",height:"35px"}})),h.default.createElement(p.default,(0,r.default)({},y,{name:"favicon",label:(0,g.formatMessage)({id:"enterpriseSetting.basicsSetting.basicInformation.form.label.favicon"}),extra:(0,g.formatMessage)({id:"placeholder.oauth.favicon"}),initialValue:c.favicon,required:!1,uploadBtnStyle:{width:"33px",height:"33px"},imgstyle:{width:"33px",height:"33px"}}))))}},u=c))||u)||u);t.default=S},"0sAH":function(e,t,a){"use strict";var s=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("14J3");var i=s(a("BMrR"));a("IzEo");var r=s(a("bx4M"));a("bP8k");var n=s(a("gFTJ"));a("cWXX");var o=s(a("/ezw"));a("T2oS");var d=s(a("W9HT"));a("+L6B");var u=s(a("2/Rp"));a("fOrg");var c=s(a("+KLJ"));a("R9oj");var f=s(a("ECub"));a("5Dmo");var p=s(a("3S7+"));a("Pwec");var m=s(a("CtXQ"));a("fu2T");var h,g,b,v=s(a("gK9i")),E=l(a("q1tI")),S=(a("7DNP"),a("MuoO")),_=a("LLXN"),M=s(a("q76B")),y=s(a("QDog")),C=s(a("IujW")),k=s(a("wXOD")),I=s(a("puxM")),w=(s(a("ALo4")),s(a("RsBk"))),O=v.default.Panel,x=(h=(0,S.connect)(),h((b=class extends E.PureComponent{constructor(e){super(e),this.fetchAllVersion=(()=>{var e=this.props,t=e.rainbondInfo,a=e.dispatch,s=this.state,l=(s.activeKey,s.isShowComplete),i=t.version.value.split("-")[0];a({type:"global/fetchAllVersion",callback:e=>{if(e){var t=e.response_data,a=t.filter(e=>e.split("-")[0]===i),s=t[0].split("-")[0]===i;"complete"===l&&this.setState({isShowComplete:"not_start"}),s?this.setState({activeKey:t[0],loading:!1,versionList:a,isShowVersionList:!1},()=>{this.fetchVersionDetails(t[0])}):t[0].split("-")[0]===i||0===a.length?this.setState({isShowVersionList:!1}):(this.setState({activeKey:t[0]},()=>{this.fetchVersionDetails(t[0])}),t.forEach((e,a)=>{e.split("-")[0]===i&&0!==a&&this.setState({loading:!1,versionList:t.slice(0,a)})}))}},handleError:()=>{this.setState({handleError:!0})}})}),this.fetchVersionDetails=(e=>{var t=this.props.dispatch;this.state.activeKey;void 0!==e?this.setState({activeKey:"",isShowContent:!1},()=>{t({type:"global/fetchVersionDetails",payload:{version:e},callback:t=>{t&&t.response_data&&this.setState({selsectValue:t.response_data,activeKey:e,isShowContent:!0,details:t.response_data.body,submit_version:e.split("-")[0]})}})}):this.setState({activeKey:""})}),this.handleSumbit=(()=>{this.setState({isShowModal:!0})}),this.fetchVersionData=(()=>{var e=this.props.dispatch,t=this.state,a=t.isShowComplete,s=t.activeKey;"not_start"===a&&(this.setState({isShowComplete:"pending",isShowModalClose:!1,isShowModalFooter:!1}),e({type:"global/fetchVersionData",payload:{version:s},callback:e=>{this.updateVersion(e.response_data)}})),"complete"===a&&this.setState({isShowModal:!1},()=>{this.fetchAllVersion()})}),this.updateVersion=(e=>{var t=this.props.dispatch;t({type:"global/updateVersion",payload:{value:e},callback:e=>{this.setState({isShowComplete:"complete",isShowModalClose:!0,isShowModalFooter:!0})}})}),this.handleCancel=(()=>{this.setState({isShowModal:!1},()=>{"complete"===this.state.isShowComplete&&this.fetchAllVersion()})}),this.showToUpdata=(e=>{this.setState({toUpdata:e})}),this.handleSubmitUpdata=(()=>{this.setState({toUpdata:!1}),this.fetchVersionData()}),this.complete=(()=>{this.setState({versionList:[],details:"",submit_version:"",activeKey:"",isShowVersionList:!0,loading:!0,isShowModal:!1,isShowContent:!1,isShowModalClose:!0,isShowModalFooter:!0,isShowComplete:"not_start"},()=>{this.fetchAllVersion()})}),this.state={versionList:[],details:"",submit_version:"",activeKey:"",isShowVersionList:!0,loading:!0,isShowModal:!1,isShowContent:!1,isShowModalClose:!0,isShowModalFooter:!0,isShowComplete:"not_start",handleError:!1}}componentDidMount(){this.fetchAllVersion()}render(){var e=this.state,t=e.isShowVersionList,a=e.activeKey,s=e.loading,l=e.versionList,h=e.details,g=e.isShowContent,b=e.isShowModal,S=e.isShowComplete,x=(e.submit_version,e.isShowModalClose,e.isShowModalFooter,e.selsectValue),L=e.toUpdata,A=e.handleError,B=this.props.rainbondInfo,D=B.version.value.split("-")[0],F=E.default.createElement("p",{className:w.default.noversion},(0,_.formatMessage)({id:"platformUpgrade.EscalationState.nowVersionis"}),E.default.createElement("span",null,D)," ",(0,_.formatMessage)({id:"platformUpgrade.EscalationState.read"})),T=null===x||void 0===x?void 0:x.tag_name.split("-")[0],V=E.default.createElement("p",{className:w.default.noversion},(0,_.formatMessage)({id:"platformUpgrade.EscalationState.nowVersionis"}),E.default.createElement("span",null,T)," ",(0,_.formatMessage)({id:"platformUpgrade.EscalationState.newVersion"})),P=(w.default.noversion,(0,_.formatMessage)({id:"platformUpgrade.EscalationState.nowVersionis"}),(0,_.formatMessage)({id:"platformUpgrade.EscalationState.beUpdataVs"}),m.default,e=>E.default.createElement("div",{className:w.default.svg_style},E.default.createElement(p.default,{title:(0,_.formatMessage)({id:"enterpriseSetting.updateVersion.tooltip.title"})},y.default.fetchSvg("updateVersion")),E.default.createElement("span",null,e)));return E.default.createElement(I.default,{sm:840},E.default.createElement("div",{style:{padding:"0"}},A?E.default.createElement(f.default,null):E.default.createElement(E.default.Fragment,null,!b&&E.default.createElement(E.default.Fragment,null,t?E.default.createElement(o.default,{loading:s,active:!0},E.default.createElement(c.default,{className:w.default.alert_style,message:F,type:"info"}),E.default.createElement(v.default,{className:w.default.panel_style,activeKey:a,expandIconPosition:"right",accordion:!0,onChange:this.fetchVersionDetails},l&&l.length>0&&l.map((e,t)=>{return E.default.createElement(O,{header:P(e),key:e,extra:(0,_.formatMessage)({id:"enterpriseSetting.updateVersion.collapse.panel.title"})},g?E.default.createElement(E.default.Fragment,null,E.default.createElement(C.default,{source:h,className:w.default.markdown}),E.default.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},E.default.createElement(u.default,{onClick:this.handleSumbit,type:"primary"},(0,_.formatMessage)({id:"platformUpgrade.EscalationState.goUpdata"})))):E.default.createElement(d.default,{className:w.default.spin_style}))}))):E.default.createElement(E.default.Fragment,null,E.default.createElement(c.default,{className:w.default.alert_style,message:V,type:"success"}),E.default.createElement(n.default,{bordered:!0},E.default.createElement(n.default.Item,{label:(0,_.formatMessage)({id:"platformUpgrade.EscalationState.nowVs"})},null===x||void 0===x?void 0:x.tag_name),E.default.createElement(n.default.Item,{label:(0,_.formatMessage)({id:"platformUpgrade.EscalationState.updatatime"}),span:2},null===x||void 0===x?void 0:x.update_time),E.default.createElement(n.default.Item,{label:(0,_.formatMessage)({id:"platformUpgrade.EscalationState.githubadd"}),span:3},E.default.createElement("a",{href:null===x||void 0===x?void 0:x.html_url,target:"_blank"},null===x||void 0===x?void 0:x.html_url)),E.default.createElement(n.default.Item,{label:(0,_.formatMessage)({id:"platformUpgrade.EscalationState.updatainfo"})},E.default.createElement(C.default,{source:h,className:w.default.markdown}))))),b&&E.default.createElement(E.default.Fragment,null,"not_start"===S?E.default.createElement(E.default.Fragment,null,E.default.createElement(r.default,{title:(0,_.formatMessage)({id:"platformUpgrade.EscalationState.updatadetails"})},E.default.createElement(n.default,{bordered:!0,title:E.default.createElement("div",{className:w.default.DescriptionsTitle},(0,_.formatMessage)({id:"platformUpgrade.EscalationState.vs"}),E.default.createElement("span",null,D),(0,_.formatMessage)({id:"platformUpgrade.EscalationState.updatatovs"}),E.default.createElement("span",null,T))},E.default.createElement(n.default.Item,{label:(0,_.formatMessage)({id:"platformUpgrade.EscalationState.newvs"})},null===x||void 0===x?void 0:x.tag_name),E.default.createElement(n.default.Item,{label:(0,_.formatMessage)({id:"platformUpgrade.EscalationState.newvsupload"}),span:2},null===x||void 0===x?void 0:x.update_time),E.default.createElement(n.default.Item,{label:(0,_.formatMessage)({id:"platformUpgrade.EscalationState.githubadd"}),span:3},E.default.createElement("a",{href:null===x||void 0===x?void 0:x.html_url,target:"_blank"},null===x||void 0===x?void 0:x.html_url)),E.default.createElement(n.default.Item,{label:(0,_.formatMessage)({id:"platformUpgrade.EscalationState.newvsinfo"})},E.default.createElement(C.default,{source:h,className:w.default.markdown})))),E.default.createElement(i.default,{justify:"center",type:"flex",style:{marginTop:24}},E.default.createElement(u.default,{type:"primary",onClick:()=>this.showToUpdata(!0),style:{marginRight:16}},(0,_.formatMessage)({id:"platformUpgrade.EscalationState.updata"})),E.default.createElement(u.default,{onClick:this.handleCancel},(0,_.formatMessage)({id:"platformUpgrade.EscalationState.back"})))):E.default.createElement(E.default.Fragment,null,E.default.createElement(k.default,{isShowComplete:S,complete:this.complete})))),L&&E.default.createElement(M.default,{title:(0,_.formatMessage)({id:"platformUpgrade.EscalationState.updataplatform"}),subDesc:(0,_.formatMessage)({id:"platformUpgrade.EscalationState.310"}),desc:(0,_.formatMessage)({id:"platformUpgrade.EscalationState.info"}),onOk:this.handleSubmitUpdata,onCancel:()=>this.showToUpdata(!1)})))}},g=b))||g);t.default=x},"16D0":function(e,t,a){"use strict";var s=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("Znn+");var i,r,n,o=s(a("ZTPi")),d=a("MuoO"),u=a("7DNP"),c=l(a("q1tI")),f=s(a("XZXw")),p=s(a("+iC2")),m=s(a("2lxJ")),h=s(a("PP4y")),g=s(a("zmPw")),b=a("LLXN"),v=s(a("19Ab")),E=s(a("mWxT")),S=s(a("v10I")),_=s(a("QDog")),M=s(a("0sAH")),y=s(a("K6oN")),C=s(a("W2Kv")),k=s(a("RsBk")),I=o.default.TabPane,w=(i=(0,d.connect)(e=>{var t=e.user,a=e.list,s=e.loading,l=e.global,i=e.index,r=e.region;return{user:t.currentUser,list:a,loading:s.models.list,rainbondInfo:l.rainbondInfo,enterprise:l.enterprise,isRegist:l.isRegist,oauthLongin:s.effects["global/creatOauth"],certificateLongin:s.effects["global/putCertificateType"],objectStorageLongin:s.effects["global/editCloudBackup"],overviewInfo:i.overviewInfo,pluginsList:l.pluginsList,cluster_info:r.cluster_info}}),i((n=class extends c.PureComponent{constructor(e){super(e),this.onChange=(e=>{var t=this.props.dispatch,a=this.state.region_name;this.setState({activeKey:e}),"upload"!=e&&"individuation"!=e&&"OverMark"!=e||t(u.routerRedux.push("/enterprise/".concat(_.default.getCurrEnterpriseId(),"/setting?regionName=").concat(a)))}),this.isShowEnterprisePlugin=(()=>{var e=this.props,t=e.dispatch,a=e.cluster_info;(a||[]).forEach(e=>{t({type:"global/getPluginList",payload:{enterprise_id:_.default.getCurrEnterpriseId(),region_name:e.region_name},callback:t=>{if(t&&t.list){var a=S.default.isInstallEnterprisePlugin(t.list);a&&this.setState({showEnterprisePlugin:!0,region_name:e.region_name})}},handleError:()=>{this.setState({plugins:{},loading:!1})}})})}),this.handlePlatformBasicInfo=(()=>{var e=this.props,t=(e.match.params.eid,e.rainbondInfo),a=e.enterprise,s=(e.objectStorageLongin,{});if(t){var l,i,r=((null===t||void 0===t?void 0:t.disable_logo)?t.logo.value:E.default.fetchLogo(t,a))||C.default,n=(null===t||void 0===t?void 0:t.disable_logo)?t.favicon.value:E.default.fetchFavicon(t),o=t&&t.title&&t.title.value||("rainbond"==t.diy_customer?"\u4e91\u539f\u751f\u5e94\u7528\u7ba1\u7406\u5e73\u53f0":"\u7164\u79d1\u4e91PaaS\u5e73\u53f0"),d=a&&a.enterprise_alias||t&&t.enterprise_alias,u=E.default.documentPlatform_url(a),c=E.default.officialDemoEnable(a),f=t.footer&&t.footer.value||"",p=null===t||void 0===t?void 0:null===(l=t.security_restrictions)||void 0===l?void 0:l.enable,m=(null===t||void 0===t?void 0:null===(i=t.login_image)||void 0===i?void 0:i.value)||"";s={logo:r,title:o,doc_url:u,officialDemo:c,enterprise_alias:d,favicon:n,footer:f,showSecurityRestrictions:p,login_image:m}}return s});var t=this.props.user,a=p.default.isCompanyAdmin(t);this.state={adminer:a,activeKey:"infrastructure",showEnterprisePlugin:!1}}componentWillMount(){var e=this.state.adminer,t=this.props,a=t.dispatch,s=t.location;e||a(u.routerRedux.push("/")),this.isShowEnterprisePlugin(),"updateVersion"==s.query.type&&this.setState({activeKey:"updateversion"})}render(){var e=this.state,t=e.adminer,a=e.activeKey,s=e.showEnterprisePlugin,l=this.props,i=l.match.params.eid,r=(l.rainbondInfo,l.enterprise,l.objectStorageLongin);return c.default.createElement(f.default,{title:c.default.createElement(b.FormattedMessage,{id:"enterpriseSetting.PageHeaderLayout.title"}),content:c.default.createElement(b.FormattedMessage,{id:"enterpriseSetting.PageHeaderLayout.content"}),titleSvg:m.default.getPageHeaderSvg("setting",18),isContent:!0},c.default.createElement(o.default,{onChange:this.onChange,activeKey:a,type:"card",className:k.default.tabBarStyle,destroyInactiveTabPane:!0},c.default.createElement(I,{tab:c.default.createElement("div",null,c.default.createElement(b.FormattedMessage,{id:"enterpriseSetting.TabPane.basicsSetting"})),key:"infrastructure"},c.default.createElement(g.default,this.props)),t&&c.default.createElement(I,{tab:c.default.createElement("div",null,c.default.createElement(b.FormattedMessage,{id:"enterpriseSetting.TabPane.enterpriseAdmin"})),key:"management"},c.default.createElement(v.default,this.props)),s&&c.default.createElement(I,{tab:c.default.createElement("div",null,c.default.createElement(b.FormattedMessage,{id:"enterpriseSetting.TabPane.individuation"})),key:"individuation"},c.default.createElement(y.default,{key:"Customization",type:"Customization",componentData:{eid:i,loading:r,data:this.handlePlatformBasicInfo()}})),t&&c.default.createElement(I,{tab:c.default.createElement("div",null,c.default.createElement(b.FormattedMessage,{id:"enterpriseSetting.TabPane.dataBackups"})),key:"backup"},c.default.createElement(h.default,this.props)),s&&c.default.createElement(I,{tab:c.default.createElement("div",null,c.default.createElement(b.FormattedMessage,{id:"enterpriseSetting.TabPane.upload"})),key:"upload"},c.default.createElement(y.default,{type:"PackageUpload",key:"PackageUpload"})),s&&c.default.createElement(I,{tab:c.default.createElement("div",null,"\u8d85\u5206\u6bd4\u4f8b"),key:"OverMark"},c.default.createElement(y.default,{key:"OverMark",type:"OverMark",componentData:{eid:i,loading:r,data:this.handlePlatformBasicInfo()}})),c.default.createElement(I,{tab:c.default.createElement("div",null,c.default.createElement(b.FormattedMessage,{id:"enterpriseSetting.TabPane.updateVersion"})),key:"updateversion"},c.default.createElement(M.default,this.props))))}},r=n))||r);t.default=w},"19Ab":function(e,t,a){"use strict";var s=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("T2oS");var i=s(a("W9HT"));a("R9oj");var r=s(a("ECub"));a("IzEo");var n=s(a("bx4M"));a("14J3");var o=s(a("BMrR"));a("jCWc");var d=s(a("kPKH"));a("+L6B");var u=s(a("2/Rp"));a("lUTK");s(a("BvKs"));a("/xke");var c,f,p,m=s(a("TeRw")),h=s(a("p0pE")),g=s(a("hMqj")),b=s(a("+iC2")),v=a("MuoO"),E=s(a("wd/R")),S=l(a("q1tI")),_=s(a("hEzB")),M=s(a("q76B")),y=s(a("puxM")),C=a("LLXN"),k=s(a("RsBk")),I=(c=(0,v.connect)(e=>{var t=e.user,a=e.loading,s=e.global;return{user:t.currentUser,loading:a.models.list,rainbondInfo:s.rainbondInfo,enterprise:s.enterprise,oauthLongin:a.effects["global/creatOauth"]}}),c((p=class extends S.PureComponent{constructor(e){super(e),this.onAddAdmin=(()=>{this.setState({showAddAdmin:!0})}),this.getEnterpriseAdmins=(()=>{var e=this.props,t=e.dispatch,a=e.match.params.eid;t({type:"global/fetchEnterpriseAdmin",payload:{enterprise_id:a},callback:e=>{e&&200===e.status_code&&this.setState({adminList:e.list,enterpriseAdminLoading:!1})}})}),this.handleEdit=(e=>{this.setState({showAddAdmin:!0,info:e})}),this.handleCreateAdmin=(e=>{var t=this.props,a=t.dispatch,s=t.match.params.eid,l=this.state.info;a(l?{type:"global/editEnterpriseAdminTeams",payload:(0,h.default)({enterprise_id:s},e),callback:()=>{m.default.success({message:(0,C.formatMessage)({id:"notification.success.edit"})}),this.getEnterpriseAdmins(),this.cancelCreateAdmin()}}:{type:"global/addEnterpriseAdminTeams",payload:(0,h.default)({enterprise_id:s},e),callback:()=>{m.default.success({message:(0,C.formatMessage)({id:"notification.success.add"})}),this.getEnterpriseAdmins(),this.cancelCreateAdmin()}})}),this.cancelCreateAdmin=(()=>{this.setState({showAddAdmin:!1,info:!1})}),this.showDelTeam=(e=>{this.setState({showDelTeam:!0,exitAdminNameID:e})}),this.hideDelAdmin=(()=>{this.setState({showDelTeam:!1})}),this.handleDelAdmin=(()=>{var e=this.state.exitAdminNameID;this.props.dispatch({type:"global/deleteEnterpriseAdmin",payload:{user_id:e},callback:()=>{m.default.success({message:(0,C.formatMessage)({id:"notification.success.delete"})}),this.getEnterpriseAdmins(),this.hideDelAdmin()}})}),this.fetchEnterpriseInfo=(()=>{var e=this.props,t=e.dispatch,a=e.match.params.eid;t({type:"global/fetchEnterpriseInfo",payload:{enterprise_id:a}}),t({type:"user/fetchCurrent"})});var t=this.props.user,a=b.default.isCompanyAdmin(t);this.state={adminer:a,adminList:[],showAddAdmin:!1,exitAdminNameID:"",enterpriseAdminLoading:!1,showDelTeam:!1,info:!1}}componentWillMount(){this.fetchEnterpriseInfo(),this.getEnterpriseAdmins()}render(){var e=this.props,t=e.match.params.eid,a=e.user,s=this.state,l=s.adminList,c=s.enterpriseAdminLoading,f=s.showAddAdmin,p=s.showDelTeam,m=s.info,h=s.adminer,b=a&&a.user_id,v=l&&l.length>0&&l,I=S.default.createElement(u.default,{type:"primary",onClick:this.onAddAdmin,icon:"plus"},S.default.createElement(C.FormattedMessage,{id:"enterpriseSetting.enterpriseAdmin.col.time.add"})),w=S.default.createElement(n.default,{extra:h&&I},v&&S.default.createElement(o.default,{className:k.default.teamMinTit,type:"flex",align:"middle",style:{padding:16,background:"#FAFAFA"}},S.default.createElement(d.default,{span:5,style:{paddingLeft:14}},S.default.createElement(C.FormattedMessage,{id:"enterpriseSetting.enterpriseAdmin.col.designation"})),S.default.createElement(d.default,{span:5,style:{paddingLeft:14}},S.default.createElement(C.FormattedMessage,{id:"enterpriseSetting.enterpriseAdmin.col.name"})),S.default.createElement(d.default,{span:6,style:{paddingLeft:14}},S.default.createElement(C.FormattedMessage,{id:"enterpriseSetting.enterpriseAdmin.col.role"})),S.default.createElement(d.default,{span:5,style:{paddingLeft:14}},S.default.createElement(C.FormattedMessage,{id:"enterpriseSetting.enterpriseAdmin.col.time"})),S.default.createElement(d.default,{span:3,style:{paddingLeft:14}},"\u64cd\u4f5c")),v?v.map(e=>{var t=e.user_id,a=e.create_time,s=e.nick_name,l=e.real_name,i=e.roles;return S.default.createElement(n.default,{key:t,style:{marginBottom:"10px"},bodyStyle:{padding:0},style:{border:0,borderBottom:"1px solid #F1F0F3"},hoverable:!0},S.default.createElement(o.default,{type:"flex",align:"middle",style:{paddingLeft:"24px",height:"70px"}},S.default.createElement(d.default,{span:5},s),S.default.createElement(d.default,{span:5},l),S.default.createElement(d.default,{span:6},i.map(e=>{return S.default.createElement("span",{style:{marginRight:"5px"}},g.default.roleMap(e))})),S.default.createElement(d.default,{span:5},(0,E.default)(a).format("YYYY-MM-DD HH:mm:ss")),S.default.createElement(d.default,{span:3},b!=t&&S.default.createElement("a",{href:"javascript:;",onClick:()=>{this.showDelTeam(e.user_id)}},S.default.createElement(C.FormattedMessage,{id:"enterpriseSetting.enterpriseAdmin.col.Menu.delete"})))))}):S.default.createElement(r.default,{image:r.default.PRESENTED_IMAGE_SIMPLE}));return S.default.createElement(y.default,{sm:840},f&&S.default.createElement(_.default,{eid:t,info:m,onOk:this.handleCreateAdmin,onCancel:this.cancelCreateAdmin}),p&&S.default.createElement(M.default,{onOk:this.handleDelAdmin,title:(0,C.formatMessage)({id:"confirmModal.admin.delete.title"}),subDesc:(0,C.formatMessage)({id:"confirmModal.delete.strategy.subDesc"}),desc:(0,C.formatMessage)({id:"confirmModal.delete.admin.desc"}),onCancel:this.hideDelAdmin}),c?S.default.createElement("div",{className:k.default.example},S.default.createElement(i.default,null)):w)}},f=p))||f);t.default=I},"4pKa":function(e,t,a){"use strict";var s=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.loadBackups=n,t.createBackup=d,t.removeBackup=c,t.recoverBackup=p;var l=s(a("d6i3")),i=s(a("1l/V")),r=s(a("t3Un"));function n(){return o.apply(this,arguments)}function o(){return o=(0,i.default)(l.default.mark(function e(){var t,a=arguments;return l.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.abrupt("return",(0,r.default)("/console/enterprise/".concat(t.enterprise_id,"/backups"),{method:"get",noModels:t.noModels}));case 2:case"end":return e.stop()}},e)})),o.apply(this,arguments)}function d(){return u.apply(this,arguments)}function u(){return u=(0,i.default)(l.default.mark(function e(){var t,a=arguments;return l.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.abrupt("return",(0,r.default)("/console/enterprise/".concat(t.enterprise_id,"/backups"),{method:"post"}));case 2:case"end":return e.stop()}},e)})),u.apply(this,arguments)}function c(){return f.apply(this,arguments)}function f(){return f=(0,i.default)(l.default.mark(function e(){var t,a=arguments;return l.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.abrupt("return",(0,r.default)("/console/enterprise/".concat(t.enterprise_id,"/backups"),{method:"delete",data:{name:t.name}}));case 2:case"end":return e.stop()}},e)})),f.apply(this,arguments)}function p(){return m.apply(this,arguments)}function m(){return m=(0,i.default)(l.default.mark(function e(){var t,a=arguments;return l.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.abrupt("return",(0,r.default)("/console/enterprise/".concat(t.enterprise_id,"/recover"),{method:"post",data:{name:t.name,password:t.password}}));case 2:case"end":return e.stop()}},e)})),m.apply(this,arguments)}},"6ryS":function(e,t,a){"use strict";var s=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var i=s(a("kLXV"));a("y8nQ");var r,n,o,d,u=s(a("Vl3Y")),c=l(a("q1tI")),f=a("LLXN"),p=a("MuoO"),m=s(a("ZNrE")),h=s(a("mWxT")),g=s(a("e6Ls")),b=(r=(0,p.connect)(e=>{var t=e.global;return{enterprise:t.enterprise}}),n=u.default.create(),r(o=n((d=class extends c.PureComponent{constructor(){super(...arguments),this.handleSubmit=(()=>{var e=this.props,t=e.form,a=e.onOk,s=t.validateFields;s((e,t)=>{!e&&a&&a(t)})}),this.checkConfigFile=((e,t,a)=>{if(t){if(t.fileList.length>0){var s=t.fileList.splice(-1);return this.readFileContents(s,"auto_ssl_config"),void a()}}else a()}),this.readFileContents=((e,t)=>{var a=new FileReader;a.onload=(e=>{this.props.form.setFieldsValue({[t]:e.target.result})}),a.readAsText(e[0].originFileObj,"UTF-8")})}render(){var e=this.props,t=e.form,a=e.onCancel,s=e.enterprise,l=e.loading,r=e.AutomaticCertificate,n=h.default.CertificateIssuedByValue(s),o=t.getFieldDecorator,d=t.setFieldsValue,p={labelCol:{xs:{span:24}},wrapperCol:{xs:{span:24}}};return c.default.createElement(i.default,{visible:!0,confirmLoading:l,title:r?(0,f.formatMessage)({id:"enterpriseSetting.basicsSetting.certificate.title"}):(0,f.formatMessage)({id:"enterpriseSetting.basicsSetting.Modal.title"}),className:g.default.TelescopicModal,onOk:this.handleSubmit,width:800,onCancel:a},c.default.createElement(u.default,{labelAlign:"left",onSubmit:this.handleSubmit},c.default.createElement(m.default,{setFieldsValue:d,formItemLayout:p,Form:u.default,getFieldDecorator:o,name:"auto_ssl_config",label:(0,f.formatMessage)({id:"enterpriseSetting.basicsSetting.Modal.label"}),message:(0,f.formatMessage)({id:"enterpriseSetting.basicsSetting.Modal.label.msg"}),width:"752px",data:n||""})))}},o=d))||o)||o);t.default=b},AqsJ:function(e,t,a){"use strict";var s=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var i=s(a("wCAj"));a("14J3");var r=s(a("BMrR"));a("jCWc");var n=s(a("kPKH"));a("fOrg");var o=s(a("+KLJ"));a("+L6B");var d=s(a("2/Rp"));a("/xke");var u=s(a("TeRw"));a("5Dmo");var c=s(a("3S7+"));a("2qtc");var f,p,m,h=s(a("kLXV")),g=a("MuoO"),b=l(a("q1tI")),v=a("LLXN"),E=s(a("q76B")),S=s(a("e6Ls")),_=s(a("t9D+")),M=h.default.confirm,y=(f=(0,g.connect)(e=>{var t=e.loading,a=e.global,s=e.index;return{rainbondInfo:a.rainbondInfo,enterprise:a.enterprise,isRegist:a.isRegist,oauthLongin:t.effects["global/creatOauth"],overviewInfo:s.overviewInfo}}),f((m=class extends b.PureComponent{constructor(e){var t;super(e),t=this,this.handleSubmit=(()=>{var e=this.props.onOk;e&&e()}),this.handleDiv=(e=>{return b.default.createElement(c.default,{title:e},b.default.createElement("span",{style:{wordBreak:"break-all",wordWrap:"break-word"}},e))}),this.handleDel=(e=>{var t=this;M({title:"\u5220\u9664\u914d\u7f6e\u540e\u5df2\u7ed1\u5b9a\u7684\u7528\u6237\u6570\u636e\u5c06\u6e05\u9664",content:"\u786e\u5b9a\u8981\u5220\u9664\u6b64\u914d\u7f6e\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk(){t.handleDeleteOauth(e)}})}),this.handleDeleteOauth=(e=>{var t=this.props.dispatch;t({type:"global/deleteOauthInfo",payload:{service_id:e.service_id},callback:e=>{e&&200===e.status_code&&(u.default.success({message:(0,v.formatMessage)({id:"notification.success.delete"})}),this.handelOauthInfo())}})}),this.handleCreatOauth=(e=>{var t=e.name,a=e.client_id,s=e.client_secret,l=e.oauth_type,i=e.home_url,r=e.redirect_domain,n=e.is_auto_login;l=l.toLowerCase(),"github"===l&&(i="https://github.com"),"aliyun"===l&&(i="https://oauth.aliyun.com"),"dingtalk"===l&&(i="https://oapi.dingtalk.com");var o={name:t,client_id:a,client_secret:s,is_auto_login:n,oauth_type:l,redirect_uri:"".concat(r,"/console/oauth/redirect"),home_url:i,is_console:!0,system:!0};this.handelRequest(o)}),this.handelRequest=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,s=t.props,l=s.dispatch,i=s.eid,r=t.state,n=r.oauthInfo,o=r.oauthTable,d=r.isOpen,c=[...o];e.eid=i,e.service_id=n?n.service_id:null,e.enable=!a,o&&o.length>0&&o.map((t,a)=>{var s=t.service_id;c[a].is_console=!0,n&&s===e.service_id&&(c[a]=Object.assign(c[a],e))}),!n&&c.push(e),l({type:"global/creatOauth",payload:{enterprise_id:i,arr:c},callback:e=>{e&&200===e.status_code&&(u.default.success({message:d?(0,v.formatMessage)({id:"notification.success.open"}):a?(0,v.formatMessage)({id:"notification.success.close"}):n?(0,v.formatMessage)({id:"notification.success.edit"}):(0,v.formatMessage)({id:"notification.success.add"})}),t.handelOauthInfo())}})},this.handleOpen=((e,t)=>{this.setState({openOauth:!0,oauthInfo:e,isOpen:t})}),this.handleOpenDomain=(e=>{this.setState({oauthInfo:e,showDeleteDomain:!0})}),this.handelClone=(()=>{this.setState({isOpen:!1,openOauth:!1,oauthInfo:!1,showDeleteDomain:!1})}),this.handelOauthInfo=(()=>{var e=this.props,t=e.dispatch,a=e.eid;t({type:"global/getOauthInfo",payload:{enterprise_id:a,system:!0},callback:e=>{if(e&&200===e.status_code){var t=e.list&&e.list.length>0&&e.list;this.setState({loading:!1,oauthTable:t||[]}),this.handelClone()}}})}),this.state={loading:!0,oauthInfo:!1,oauthTable:[],openOauth:!1,isOpen:!1,showDeleteDomain:!1}}componentDidMount(){this.handelOauthInfo()}render(){var e=this.props,t=e.onCancel,a=e.oauthLongin,s=this.state,l=s.oauthTable,u=s.loading,c=s.openOauth,f=s.oauthInfo,p=s.showDeleteDomain,m=null;return l.map(e=>{return e.is_auto_login?(m=e,e):null}),b.default.createElement(h.default,{title:(0,v.formatMessage)({id:"enterpriseSetting.basicsSetting.serve.Modal.title"}),loading:u,className:S.default.TelescopicModal,width:1150,visible:!0,onOk:this.handleSubmit,onCancel:t,footer:[b.default.createElement(d.default,{style:{marginTop:"20px"},onClick:this.handleSubmit},(0,v.formatMessage)({id:"button.close"}))]},b.default.createElement("div",null,p&&b.default.createElement(E.default,{loading:a,title:(0,v.formatMessage)({id:"confirmModal.forbidden.delete.title"}),desc:(0,v.formatMessage)({id:"confirmModal.delete.forbidden.desc"}),onOk:()=>{this.handelRequest(f,"clone")},onCancel:this.handelClone}),c&&b.default.createElement(_.default,{loading:a,oauthInfo:f,onOk:this.handleCreatOauth,onCancel:this.handelClone}),b.default.createElement(r.default,{gutter:12},b.default.createElement(n.default,{span:12},m&&b.default.createElement(o.default,{message:"".concat(m.name," ").concat((0,v.formatMessage)({id:"enterpriseSetting.basicsSetting.serve.Modal.alert"})),type:"success"})),b.default.createElement(n.default,{span:12,style:{textAlign:"right",marginBottom:"10px"}},b.default.createElement(d.default,{onClick:()=>{this.handleOpen(!1)},type:"primary",icon:"plus"},(0,v.formatMessage)({id:"button.add"})))),b.default.createElement(i.default,{dataSource:l,rowKey:(e,t)=>t,style:{width:"100%",overflowX:"auto"},columns:[{title:(0,v.formatMessage)({id:"enterpriseSetting.basicsSetting.serve.Modal.table.oauth_type"}),dataIndex:"oauth_type",key:"1",width:"10%"},{title:(0,v.formatMessage)({id:"enterpriseSetting.basicsSetting.serve.Modal.table.name"}),dataIndex:"name",key:"2",width:"15%"},{title:(0,v.formatMessage)({id:"enterpriseSetting.basicsSetting.serve.Modal.table.client_id"}),dataIndex:"client_id",key:"3",width:"15%",render:e=>this.handleDiv(e)},{title:(0,v.formatMessage)({id:"enterpriseSetting.basicsSetting.serve.Modal.table.client_secret"}),dataIndex:"client_secret",key:"4",width:"15%",render:e=>this.handleDiv(e)},{title:(0,v.formatMessage)({id:"enterpriseSetting.basicsSetting.serve.Modal.table.home_url"}),dataIndex:"home_url",key:"5",width:"15%",render:e=>this.handleDiv(e)},{title:(0,v.formatMessage)({id:"enterpriseSetting.basicsSetting.serve.Modal.table.action"}),dataIndex:"action",width:"15%",key:"action",align:"center",render:(e,t)=>b.default.createElement("div",null,b.default.createElement("a",{style:{marginRight:"10px"},onClick:()=>{this.handleDel(t)}},(0,v.formatMessage)({id:"enterpriseSetting.basicsSetting.serve.Modal.table.del"})),b.default.createElement("a",{style:{marginRight:"10px"},onClick:()=>{this.handleOpen(t)}},(0,v.formatMessage)({id:"enterpriseSetting.basicsSetting.serve.Modal.table.edit"})),b.default.createElement("a",{onClick:()=>{t.enable?this.handleOpenDomain(t):this.handleOpen(t,!0)}},t.enable?(0,v.formatMessage)({id:"enterpriseSetting.basicsSetting.serve.Modal.table.disable"}):(0,v.formatMessage)({id:"enterpriseSetting.basicsSetting.serve.Modal.table.enabled"})))}]})))}},p=m))||p);t.default=y},Bq0W:function(e,t,a){"use strict";var s=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var i=s(a("kLXV")),r=s(a("jehZ"));a("5NDa");var n=s(a("5rEg"));a("y8nQ");var o,d,u,c=s(a("Vl3Y")),f=l(a("q1tI")),p=a("LLXN"),m=s(a("8+Sn")),h=s(a("e6Ls")),g=(c.default.Item,o=c.default.create(),o((u=class extends f.PureComponent{constructor(e){super(e),this.onOk=(e=>{e.preventDefault();var t=this.props,a=t.onOk,s=t.form;s.validateFields({force:!0},(e,t)=>{!e&&a&&a(t)})}),this.state={language:"zh-CN"===m.default.get("language")}}render(){var e=this.props,t=e.title,a=e.onCancel,s=e.data,l=void 0===s?{}:s,o=e.form,d=e.loading,u=void 0!==d&&d,m=o.getFieldDecorator,g=this.state.language,b={labelCol:{span:24},wrapperCol:{span:24}},v={labelCol:{span:24},wrapperCol:{span:24}},E=g?b:v;return f.default.createElement(i.default,{title:t,confirmLoading:u,visible:!0,className:h.default.TelescopicModal,bodyStyle:{overflowY:"auto",maxHeight:"calc(100vh - 200px)",scrollbarWidth:"none",msOverflowStyle:"none"},onCancel:a,onOk:this.onOk},f.default.createElement(c.default,{onSubmit:this.onOk,layout:"vertical",hideRequiredMark:!0},f.default.createElement(c.default.Item,(0,r.default)({},E,{label:(0,p.formatMessage)({id:"enterpriseSetting.basicsSetting.mirroring.form.label.hub_url"})}),f.default.createElement(n.default.Group,{compact:!0},m("hub_url",{initialValue:l.hub_url||"",rules:[{required:!0,message:(0,p.formatMessage)({id:"placeholder.git_url"})},{max:255,message:(0,p.formatMessage)({id:"placeholder.max255"})},{validator:(e,t,a)=>{t&&(t.startsWith("http://")||t.startsWith("https://"))?a((0,p.formatMessage)({id:"placeholder.warehouse_address.ban"})):a()}}]})(f.default.createElement(n.default,{placeholder:(0,p.formatMessage)({id:"placeholder.git_url_domain"})})))),f.default.createElement(c.default.Item,(0,r.default)({},E,{label:(0,p.formatMessage)({id:"enterpriseSetting.basicsSetting.mirroring.form.label.namespace"})}),m("namespace",{initialValue:l.namespace||"",rules:[{max:255,message:(0,p.formatMessage)({id:"placeholder.max255"})},{pattern:/^[a-zA-Z][\da-zA-Z]*$/,message:(0,p.formatMessage)({id:"placeholder.appShare.formatError"})}]})(f.default.createElement(n.default,{placeholder:(0,p.formatMessage)({id:"placeholder.oauth.namespace"})}))),f.default.createElement(c.default.Item,(0,r.default)({},E,{label:(0,p.formatMessage)({id:"enterpriseSetting.basicsSetting.mirroring.form.label.hub_user"})}),m("hub_user",{initialValue:l.hub_user||"",rules:[{max:64,message:(0,p.formatMessage)({id:"placeholder.appShare.max64"})}]})(f.default.createElement(n.default,{placeholder:(0,p.formatMessage)({id:"placeholder.userName"})}))),f.default.createElement(c.default.Item,(0,r.default)({},E,{label:(0,p.formatMessage)({id:"enterpriseSetting.basicsSetting.mirroring.form.label.hub_password"})}),m("hub_password",{initialValue:l.hub_password||"",rules:[{max:64,message:(0,p.formatMessage)({id:"placeholder.appShare.max64"})}]})(f.default.createElement(n.default,{type:"password",placeholder:(0,p.formatMessage)({id:"placeholder.oauth.password"})})))))}},d=u))||d);t.default=g},HzM2:function(e,t,a){"use strict";var s=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var i=s(a("kLXV"));a("5NDa");var r=s(a("5rEg")),n=s(a("jehZ"));a("OaEy");var o=s(a("2fM7"));a("y8nQ");var d,u,c,f=s(a("Vl3Y")),p=l(a("q1tI")),m=a("LLXN"),h=s(a("e6Ls")),g=f.default.Item,b=(d=f.default.create(),d((c=class extends p.PureComponent{constructor(){super(...arguments),this.onOk=(e=>{e.preventDefault();var t=this.props,a=t.onOk,s=t.form;s.validateFields({force:!0},(e,t)=>{!e&&a&&a(t)})})}render(){var e=this.props,t=e.title,a=e.onCancel,s=e.data,l=void 0===s?{}:s,d=e.form,u=e.providers,c=e.loading,b=void 0!==c&&c,v=d.getFieldDecorator,E={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}};return p.default.createElement(i.default,{title:t,confirmLoading:b,visible:!0,className:h.default.TelescopicModal,onCancel:a,onOk:this.onOk},p.default.createElement(f.default,{onSubmit:this.onOk},p.default.createElement(g,(0,n.default)({},E,{label:(0,m.formatMessage)({id:"enterpriseSetting.basicsSetting.storage.form.label.provider"})}),v("provider",{initialValue:l.provider||"",rules:[{required:!0,message:(0,m.formatMessage)({id:"placeholder.copy.not_null"})}]})(p.default.createElement(o.default,{getPopupContainer:e=>e.parentNode},u.map(e=>{return p.default.createElement(Option,{key:e.key,value:e.key},e.name)})))),p.default.createElement(f.default.Item,(0,n.default)({},E,{label:"endpoint"}),v("endpoint",{initialValue:l.endpoint||"",rules:[{required:!0,message:(0,m.formatMessage)({id:"placeholder.oauth.endpoint"})},{max:255,message:(0,m.formatMessage)({id:"placeholder.max255"})}]})(p.default.createElement(r.default,{placeholder:(0,m.formatMessage)({id:"placeholder.oauth.endpoint"})}))),p.default.createElement(f.default.Item,(0,n.default)({},E,{label:"bucket_name"}),v("bucket_name",{initialValue:l.bucket_name||"",rules:[{required:!0,message:(0,m.formatMessage)({id:"placeholder.oauth.bucket_name"})},{max:255,message:(0,m.formatMessage)({id:"placeholder.max255"})}]})(p.default.createElement(r.default,{placeholder:(0,m.formatMessage)({id:"placeholder.oauth.bucket_name"})}))),p.default.createElement(f.default.Item,(0,n.default)({},E,{name:"access_key",label:"Access Key"}),v("access_key",{initialValue:l.access_key||"",rules:[{required:!0,message:(0,m.formatMessage)({id:"placeholder.oauth.access_key"})},{max:1024,message:(0,m.formatMessage)({id:"placeholder.max1024"})}]})(p.default.createElement(r.default,{placeholder:"Access Key"}))),p.default.createElement(f.default.Item,(0,n.default)({},E,{name:"secret_key",label:"Secret Key"}),v("secret_key",{initialValue:l.secret_key||"",rules:[{required:!0,message:(0,m.formatMessage)({id:"placeholder.oauth.secret_key"})},{max:1024,message:(0,m.formatMessage)({id:"placeholder.max1024"})}]})(p.default.createElement(r.default,{type:"password",placeholder:"Secret Key"})))))}},u=c))||u);t.default=b},Knwb:function(e,t,a){"use strict";var s=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var i=s(a("kLXV"));a("5NDa");var r=s(a("5rEg")),n=s(a("jehZ"));a("OaEy");var o=s(a("2fM7"));a("y8nQ");var d,u,c,f=s(a("Vl3Y")),p=l(a("q1tI")),m=(a("LLXN"),s(a("8+Sn"))),h=s(a("e6Ls")),g=(f.default.Item,o.default.Option),b=(d=f.default.create(),d((c=class extends p.PureComponent{constructor(e){var t;super(e),this.onOk=(e=>{e.preventDefault();var t=this.props,a=t.onOk,s=t.form;s.validateFields({force:!0},(e,t)=>{!e&&a&&a(t)})}),this.handleProviderChange=(e=>{this.setState({selectedProvider:e})}),this.state={language:"zh-CN"===m.default.get("language"),selectedProvider:(null===e||void 0===e?void 0:null===(t=e.data)||void 0===t?void 0:t.provider)||"volcano"}}render(){var e=this.props,t=(e.title,e.onCancel),a=e.data,s=void 0===a?{}:a,l=e.form,d=e.loading,u=void 0!==d&&d,c=l.getFieldDecorator,m=this.state,b=m.language,v=m.selectedProvider,E={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:15}}},S={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},_=b?E:S;return p.default.createElement(i.default,{title:"\u767b\u5f55\u6ce8\u518c\u77ed\u4fe1\u914d\u7f6e",confirmLoading:u,visible:!0,className:h.default.TelescopicModal,onCancel:t,onOk:this.onOk},p.default.createElement(f.default,{onSubmit:this.onOk},p.default.createElement(f.default.Item,(0,n.default)({},_,{label:"AccessKey"}),c("provider",{initialValue:s.provider||""})(p.default.createElement(o.default,{onChange:this.handleProviderChange},p.default.createElement(g,{value:"volcano"},"\u706b\u5c71\u4e91"),p.default.createElement(g,{value:"aliyun"},"\u963f\u91cc\u4e91")))),"volcano"===v&&p.default.createElement(f.default.Item,(0,n.default)({},_,{label:"\u6d88\u606f\u7ec4ID"}),c("sms_account",{initialValue:s.sms_account||""})(p.default.createElement(r.default,{placeholder:"\u8bf7\u8f93\u5165\u6d88\u606f\u7ec4ID"}))),p.default.createElement(f.default.Item,(0,n.default)({},_,{label:"AccessKey"}),c("access_key",{initialValue:s.access_key||""})(p.default.createElement(r.default,{placeholder:"\u8bf7\u8f93\u5165AccessKey"}))),p.default.createElement(f.default.Item,(0,n.default)({},_,{label:"AccessSecret"}),c("access_secret",{initialValue:s.access_secret||""})(p.default.createElement(r.default,{placeholder:"\u8bf7\u8f93\u5165AccessSecret"}))),p.default.createElement(f.default.Item,(0,n.default)({},_,{label:"SignName"}),c("sign_name",{initialValue:s.sign_name||""})(p.default.createElement(r.default,{placeholder:"\u8bf7\u8f93\u5165SignName"}))),p.default.createElement(f.default.Item,(0,n.default)({},_,{label:"TemplateCode"}),c("template_code",{initialValue:s.template_code||""})(p.default.createElement(r.default,{placeholder:"\u8bf7\u8f93\u5165TemplateCode"})))))}},u=c))||u);t.default=b},PCLb:function(e,t,a){"use strict";var s=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("y8nQ");var i=s(a("Vl3Y")),r=s(a("jehZ"));a("DZo9");var n=s(a("8z0m"));a("T2oS");var o=s(a("W9HT"));a("Pwec");var d,u,c,f=s(a("CtXQ")),p=l(a("q1tI")),m=a("MuoO"),h=s(a("nyIC")),g=s(a("8+Sn")),b=s(a("e6Ls")),v=(d=(0,m.connect)(),d((c=class extends p.PureComponent{constructor(e){super(e),this.handleLogoChange=(e=>{"uploading"!==e.file.status?"done"===e.file.status&&e.file&&e.file.response&&e.file.response.data&&e.file.response.data.bean&&e.file.response.data.bean.file_url&&this.setState({imageUrl:e.file.response.data.bean.file_url,loading:!1}):this.setState({loading:!0})}),this.handleLogoRemove=(()=>{this.setState({imageUrl:""})}),this.handleSubmit=(()=>{var e=this.props,t=e.form,a=e.onOk;t.validateFields((e,t)=>{!e&&a&&a(t)})}),this.state={loading:!1,imageUrl:""}}componentDidMount(){var e=this.props.initialValue;this.setState({imageUrl:e||""})}render(){var e=this.props,t=e.label,a=e.extra,s=e.initialValue,l=e.form,d=e.imgstyle,u=e.uploadBtnStyle,c=e.formItemLayout,m=e.name,v=e.message,E=e.required,S=void 0===E||E,_=l.getFieldDecorator,M=this.state,y=M.loading,C=M.imageUrl,k=g.default.get("token"),I={};k&&(I.Authorization="GRJWT ".concat(k));var w=p.default.createElement("div",{style:u},p.default.createElement(f.default,{type:"plus"}),p.default.createElement("div",{className:"ant-upload-text"},formatMessage({id:"teamOverview.uploadIcon"})));return p.default.createElement(i.default.Item,(0,r.default)({},c,{label:t,extra:a}),_(m,{initialValue:s,rules:[{required:S,message:v||formatMessage({id:"teamOverview.uploadIcon"})}]})(p.default.createElement(n.default,{name:"file",accept:"image/jpg,image/jpeg,image/png",className:b.default.customUpload,action:h.default.imageUploadUrl,listType:"picture-card",headers:I,showUploadList:!1,onChange:this.handleLogoChange,onRemove:this.handleLogoRemove,loading:y},C?p.default.createElement(o.default,{spinning:y},p.default.createElement("img",{src:C,alt:"avatar",style:d})):w)))}},u=c))||u),E=v;t.default=E},PP4y:function(e,t,a){"use strict";var s=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("5NDa");var i=s(a("5rEg"));a("IzEo");var r=s(a("bx4M"));a("g9YV");var n=s(a("wCAj"));a("fOrg");var o=s(a("+KLJ"));a("DZo9");var d=s(a("8z0m"));a("+L6B");var u=s(a("2/Rp"));a("P2fV");var c=s(a("NJEC"));a("/xke");var f=s(a("TeRw"));a("2qtc");var p=s(a("kLXV"));a("y8nQ");var m,h,g,b,v=s(a("Vl3Y")),E=a("MuoO"),S=l(a("q1tI")),_=a("4pKa"),M=s(a("8+Sn")),y=s(a("mJtp")),C=s(a("ZgmS")),k=s(a("puxM")),I=a("LLXN"),w=(s(a("RsBk")),v.default.Item),O=p.default.confirm,x=(m=(0,E.connect)(e=>{var t=e.user,a=e.loading,s=e.global;return{user:t.currentUser,loading:a.models.list,rainbondInfo:s.rainbondInfo,enterprise:s.enterprise}}),h=v.default.create(),m(g=h((b=class extends S.PureComponent{constructor(e){super(e),this.onAddBackup=(()=>{var e=this.props.match.params.eid;this.setState({addLoading:!0}),O({title:(0,I.formatMessage)({id:"confirmModal.delete.data_backup.desc"}),content:(0,I.formatMessage)({id:"confirmModal.delete.data_backup.subDesc"}),okText:(0,I.formatMessage)({id:"button.confirm"}),cancelText:(0,I.formatMessage)({id:"button.cancel"}),onOk:()=>{(0,_.createBackup)({enterprise_id:e}).then(e=>{e&&200===e.status_code&&(f.default.success({message:(0,I.formatMessage)({id:"status.app.backups.success"})}),this.loadBackups()),this.setState({addLoading:!1})})},onCancel:()=>{this.setState({addLoading:!1})}})}),this.onRecover=(e=>{this.setState({recoverShow:!0,recoverBackupName:e})}),this.onRemove=(e=>{var t=this.props.match.params.eid;(0,_.removeBackup)({enterprise_id:t,name:e}).then(e=>{e&&200===e.status_code&&(f.default.success({message:(0,I.formatMessage)({id:"notification.success.delete"})}),this.loadBackups())})}),this.onDownload=(e=>{var t=this.props.match.params.eid;(0,y.default)("/console/enterprise/".concat(t,"/backups/").concat(e),e)}),this.onChangeUpload=(e=>{var t=e.file.status;"done"===t?(f.default.success({message:(0,I.formatMessage)({id:"notification.success.upload"})}),this.loadBackups(),this.setState({uploadLoading:!1})):this.setState({uploadLoading:!0})}),this.loadBackups=(()=>{this.setState({backupLoading:!0});var e=this.props.match.params.eid;(0,_.loadBackups)({enterprise_id:e,noModels:!0}).then(e=>{this.setState({backups:e.list,backupLoading:!1})}).catch(()=>{this.setState({backupLoading:!1})})}),this.submitOnRecover=(()=>{var e=this.props,t=e.match.params.eid,a=e.form;this.setState({recoverLoading:!0});var s=this.state.recoverBackupName;a.validateFields({force:!0},(e,a)=>{e||(0,_.recoverBackup)({enterprise_id:t,name:s,password:a.password}).then(e=>{e&&200===e.status_code?(f.default.success({message:(0,I.formatMessage)({id:"notification.success.restore_success"})}),this.loadBackups(),this.setState({recoverShow:!1,recoverLoading:!1})):this.setState({recoverLoading:!1})})})}),this.state={backups:[],recoverShow:!1,recoverBackupName:null,backupLoading:!0}}componentDidMount(){this.loadBackups()}render(){var e=this.props.match.params.eid,t=this.state,a=t.backups,s=t.backupLoading,l=t.recoverShow,f=t.recoverLoading,m=t.addLoading,h=t.uploadLoading,g=this.props.form,b=[{title:(0,I.formatMessage)({id:"enterpriseSetting.BackupManage.table.backupFile"}),dataIndex:"name"},{title:(0,I.formatMessage)({id:"enterpriseSetting.BackupManage.table.size"}),dataIndex:"size",render:e=>C.default.unit(e/1024)},{title:(0,I.formatMessage)({id:"enterpriseSetting.BackupManage.table.handle"}),dataIndex:"name",render:e=>[S.default.createElement(c.default,{title:(0,I.formatMessage)({id:"confirmModal.delete.take_hand.desc"}),okText:(0,I.formatMessage)({id:"button.confirm"}),onConfirm:()=>this.onRemove(e)},S.default.createElement("a",null,S.default.createElement(I.FormattedMessage,{id:"enterpriseSetting.BackupManage.table.handle.delete"}))),S.default.createElement("a",{onClick:()=>{this.onDownload(e)}},S.default.createElement(I.FormattedMessage,{id:"enterpriseSetting.BackupManage.table.handle.install"})),S.default.createElement("a",{onClick:()=>this.onRecover(e)},S.default.createElement(I.FormattedMessage,{id:"enterpriseSetting.BackupManage.table.handle.recover"}))]}],E=g.getFieldDecorator,_=M.default.get("token"),y="/console/enterprise/".concat(e,"/upload-backups");return S.default.createElement(k.default,{sm:840},S.default.createElement(r.default,{extra:S.default.createElement(S.default.Fragment,null,S.default.createElement(d.default,{showUploadList:!1,name:"file",accept:".gz",action:y,onChange:this.onChangeUpload,headers:{Authorization:"GRJWT ".concat(_)},disabled:h},S.default.createElement(u.default,{loading:h,style:{marginRight:"16px"},icon:"download"},S.default.createElement(I.FormattedMessage,{id:"enterpriseSetting.BackupManage.button.importBackups"}))),S.default.createElement(u.default,{type:"primary",onClick:this.onAddBackup,loading:m,icon:"plus"},S.default.createElement(I.FormattedMessage,{id:"enterpriseSetting.BackupManage.button.addBackups"})))},S.default.createElement(o.default,{type:"info",message:S.default.createElement(I.FormattedMessage,{id:"enterpriseSetting.BackupManage.alert.message"}),style:{width:"90%",marginBottom:"20px"}}),S.default.createElement(n.default,{loading:s,rowKey:(e,t)=>t,pagination:!1,dataSource:a,columns:b})),l&&S.default.createElement(p.default,{onCancel:()=>{this.setState({recoverBackupName:null,recoverShow:!1})},onOk:this.submitOnRecover,confirmLoading:f,visible:!0,width:400,title:(0,I.formatMessage)({id:"enterpriseSetting.BackupManage.importBackups.title"})},S.default.createElement(o.default,{type:"error",message:(0,I.formatMessage)({id:"enterpriseSetting.BackupManage.importBackups.alert"})}),S.default.createElement(v.default,null,S.default.createElement(w,{label:(0,I.formatMessage)({id:"enterpriseSetting.BackupManage.importBackups.form.label.password"})},E("password",{initialValue:"",rules:[{required:!0,message:(0,I.formatMessage)({id:"placeholder.oauth.importBackups"})}]})(S.default.createElement(i.default,{type:"password",placeholder:(0,I.formatMessage)({id:"placeholder.oauth.importBackups"})}))))))}},g=b))||g)||g);t.default=x},Qqzp:function(e,t,a){"use strict";var s=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var i=s(a("kLXV")),r=s(a("jehZ"));a("5NDa");var n=s(a("5rEg"));a("y8nQ");var o,d,u,c=s(a("Vl3Y")),f=l(a("q1tI")),p=a("LLXN"),m=s(a("8+Sn")),h=s(a("e6Ls")),g=c.default.Item,b=(o=c.default.create(),o((u=class extends f.PureComponent{constructor(e){super(e),this.onOk=(e=>{e.preventDefault();var t=this.props,a=t.onOk,s=t.form;s.validateFields({force:!0},(e,t)=>{!e&&a&&a(t)})}),this.state={language:"zh-CN"===m.default.get("language")}}render(){var e=this.props,t=e.title,a=e.onCancel,s=e.data,l=void 0===s?{}:s,o=e.form,d=e.loading,u=void 0!==d&&d,m=o.getFieldDecorator,b=this.state.language,v={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}},E={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},S=b?v:E;return f.default.createElement(i.default,{title:t,confirmLoading:u,visible:!0,className:h.default.TelescopicModal,onCancel:a,onOk:this.onOk},f.default.createElement(c.default,{onSubmit:this.onOk},f.default.createElement(g,(0,r.default)({},S,{label:"endpoint"}),m("oss_endpoint",{initialValue:(null===l||void 0===l?void 0:l.oss_endpoint)||"",rules:[{required:!0,message:(0,p.formatMessage)({id:"placeholder.oauth.endpoint"})},{max:255,message:(0,p.formatMessage)({id:"placeholder.max255"})}]})(f.default.createElement(n.default,{placeholder:(0,p.formatMessage)({id:"placeholder.oauth.endpoint"})}))),f.default.createElement(g,(0,r.default)({},S,{label:"bucket_name"}),m("oss_bucket",{initialValue:(null===l||void 0===l?void 0:l.oss_bucket)||"",rules:[{required:!0,message:(0,p.formatMessage)({id:"placeholder.oauth.bucket_name"})},{max:255,message:(0,p.formatMessage)({id:"placeholder.max255"})}]})(f.default.createElement(n.default,{placeholder:(0,p.formatMessage)({id:"placeholder.oauth.bucket_name"})}))),f.default.createElement(g,(0,r.default)({},S,{label:"Access Key"}),m("oss_access_key",{initialValue:(null===l||void 0===l?void 0:l.oss_access_key)||"",rules:[{required:!0,message:(0,p.formatMessage)({id:"placeholder.oauth.access_key"})},{max:1024,message:(0,p.formatMessage)({id:"placeholder.max1024"})}]})(f.default.createElement(n.default,{placeholder:"Access Key"}))),f.default.createElement(g,(0,r.default)({},S,{label:"Secret Key"}),m("oss_access_key_secret",{initialValue:(null===l||void 0===l?void 0:l.oss_access_key_secret)||"",rules:[{required:!0,message:(0,p.formatMessage)({id:"placeholder.oauth.secret_key"})},{max:1024,message:(0,p.formatMessage)({id:"placeholder.max1024"})}]})(f.default.createElement(n.default,{type:"password",placeholder:"Secret Key"})))))}},d=u))||d);t.default=b},RsBk:function(e,t,a){e.exports={btns:"btns___s2FpH",bor:"bor___1c09Y",infrastructureCard:"infrastructureCard___1SSI5",tabBarStyle:"tabBarStyle___2zyz3",plugin_container:"plugin_container___HmaBj",btnBox:"btnBox___y2Dlg",teamMinTit:"teamMinTit___3j62W",alert_style:"alert_style___11YFR",svg_style:"svg_style___2ukHs",markdown:"markdown___2ToVr",spin_style:"spin_style___iVu6e",update_p_style:"update_p_style___2Rt8C",p_style:"p_style___2i_0H",modal_footer:"modal_footer___2yxzn",panel_style:"panel_style___22Qet",modal_style:"modal_style___3iiRG",spin_box:"spin_box___Pzni-",spin_box_success:"spin_box_success___r2bop",noversion:"noversion___1X8kv",DescriptionsTitle:"DescriptionsTitle___3BoRZ"}},h5UF:function(e,t,a){e.exports={clusterBox:"clusterBox___2zFHd",podBox:"podBox___2RABU",PanelHeader:"PanelHeader___1mDXS"}},hEzB:function(e,t,a){"use strict";var s=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var i=s(a("kLXV")),r=s(a("jehZ"));a("OaEy");var n=s(a("2fM7"));a("y8nQ");var o,d,u,c,f=s(a("Vl3Y")),p=a("MuoO"),m=l(a("q1tI")),h=a("LLXN"),g=s(a("hMqj")),b=s(a("e6Ls")),v=f.default.Item,E=n.default.Option,S=(o=f.default.create(),d=(0,p.connect)(e=>{var t=e.user;return{currUser:t.currentUser}},null,null,{withRef:!0}),o(u=d((c=class extends m.PureComponent{constructor(e){super(e),this.onSearch=(e=>{this.loadTeams(e)}),this.loadTeams=(e=>{var t=this.props,a=t.dispatch,s=t.eid;a({type:"global/fetchEnterpriseUsers",payload:{enterprise_id:s,page:1,page_size:999,name:e},callback:e=>{e&&this.setState({adminList:e.list})}})}),this.handleSubmit=(()=>{var e=this.props,t=e.form,a=e.onOk;t.validateFields((e,t)=>{!e&&a&&a(t)})}),this.state={adminList:[],roles:["admin"]}}componentDidMount(){this.loadTeams()}render(){var e=this.state,t=e.adminList,a=e.roles,s=this.props,l=(s.onOk,s.onCancel),o=(s.actions,s.info),d=s.form,u=d.getFieldDecorator,c={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}};return m.default.createElement(i.default,{title:o?(0,h.formatMessage)({id:"enterpriseSetting.enterpriseAdmin.col.Menu.edit"}):(0,h.formatMessage)({id:"enterpriseSetting.enterpriseAdmin.col.time.add"}),visible:!0,className:b.default.TelescopicModal,onOk:this.handleSubmit,onCancel:l},m.default.createElement(f.default,{onSubmit:this.handleSubmit,layout:"horizontal"},m.default.createElement(v,(0,r.default)({},c,{label:(0,h.formatMessage)({id:"enterpriseSetting.enterpriseAdmin.form.select.user_id"})}),u("user_id",{initialValue:o&&o.user_id||"",rules:[{required:!0,message:(0,h.formatMessage)({id:"placeholder.userName"})}]})(m.default.createElement(n.default,{getPopupContainer:e=>e.parentNode,showSearch:!0,style:{width:300},placeholder:(0,h.formatMessage)({id:"placeholder.userName"}),optionFilterProp:"children",onSearch:this.onSearch,filterOption:(e,t)=>t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},t&&t.length>0&&t.map(e=>{var t=e.nick_name,a=e.user_id;return m.default.createElement(E,{key:a,value:a},t)})))),m.default.createElement(v,(0,r.default)({},c,{label:(0,h.formatMessage)({id:"enterpriseSetting.enterpriseAdmin.form.select.roles"})}),u("roles",{initialValue:o&&o.roles||a,rules:[{required:!0,message:(0,h.formatMessage)({id:"placeholder.role_ids"})}]})(m.default.createElement(n.default,{getPopupContainer:e=>e.parentNode,mode:"multiple",placeholder:(0,h.formatMessage)({id:"placeholder.role_ids"}),style:{width:300}},a.map((e,t)=>{return m.default.createElement(E,{key:t,value:e},g.default.roleMap(e))}))))))}},u=c))||u)||u);t.default=S},wXOD:function(e,t,a){"use strict";var s=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("T2oS");var i=s(a("W9HT"));a("MXD1");var r=s(a("CFYs"));a("Q9mQ");var n=s(a("diRs"));a("Awhp");var o=s(a("KrTs"));a("+L6B");var d=s(a("2/Rp"));a("fu2T");var u,c,f,p=s(a("gK9i")),m=a("MuoO"),h=(s(a("wd/R")),l(a("q1tI"))),g=a("LLXN"),b=s(a("ALo4")),v=s(a("QDog")),E=s(a("h5UF")),S=p.default.Panel,_=(u=(0,m.connect)(),u((f=class extends h.PureComponent{constructor(e){super(e),this.clearAllTimers=(()=>{this.timer&&clearInterval(this.timer)}),this.closeTimer=(e=>{this[e]&&clearInterval(this[e])}),this.handleTimers=((e,t,a)=>{this[e]=setTimeout(()=>{t()},a)}),this.showLog=(()=>{}),this.cyclicQueryUpdateInfo=(()=>{var e=this.state.clusters;e.forEach((e,t)=>{this.updatePlatform(e.region_name,t)}),this.handleTimers("timer",()=>this.cyclicQueryUpdateInfo(),2e3)}),this.loadClusters=(()=>{var e=this.props.dispatch;e({type:"region/fetchEnterpriseClusters",payload:{enterprise_id:v.default.getCurrEnterpriseId()},callback:e=>{if(e&&e.list&&e.list.length>0){var t=e.list.map(e=>({region_alias:e.region_alias,region_name:e.region_name,updateInfo:[]}));this.setState({clusters:t,clusterLoadings:!1},()=>{this.cyclicQueryUpdateInfo(),this.checkUpdataStatus()})}else this.setState({clusters:[],clusterLoadings:!1})}})}),this.updatePlatform=((e,t)=>{var a=this.props.dispatch;a({type:"global/updatePlatform",payload:{region_name:e},callback:a=>{a&&a.list&&this.setState(s=>{var l=[...s.clusters],i=l[t];return i&&i.region_name===e&&(i.updateInfo=a.list),this.checkUpdataStatus(l),{clusters:l}})}})}),this.computeSchedule=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=0;return e.forEach(e=>{"Completed"===e.status&&(a+=1)}),t?a===e.length:"(".concat(a,"/").concat(e.length,")")},this.checkUpdataStatus=(e=>{var t=!1;e&&e.length>0&&e.forEach(e=>{t=this.computeSchedule(e.updateInfo,!0)}),this.setState({isShowComplete:t})}),this.timer=null,this.state={clusters:[],clusterLoadings:!0}}componentDidMount(){setTimeout(()=>{this.loadClusters()},5e3)}componentWillUnmount(){this.clearAllTimers()}render(){var e=this.props.complete,t=this.state,a=t.clusterLoadings,s=t.clusters,l=t.isShowComplete;return h.default.createElement("div",null,h.default.createElement(b.default,{type:l?"success":"ing",title:l?(0,g.formatMessage)({id:"platformUpgrade.EscalationState.updatasuccess"}):(0,g.formatMessage)({id:"platformUpgrade.EscalationState.updataing"}),description:!l&&(0,g.formatMessage)({id:"platformUpgrade.EscalationState.img"}),style:{marginTop:48,marginBottom:16},actions:l?h.default.createElement(d.default,{type:"primary",onClick:()=>e&&e(),style:{marginRight:16}},(0,g.formatMessage)({id:"platformUpgrade.EscalationState.back"})):h.default.createElement(h.default.Fragment,null)}),!a&&h.default.createElement(p.default,{defaultActiveKey:["1"],expandIconPosition:"right"},s.map((e,t)=>{var a=e.region_alias,s=e.updateInfo,l=e.region_name;return h.default.createElement(S,{header:h.default.createElement("div",{className:E.default.PanelHeader},a," ",h.default.createElement("p",null,(0,g.formatMessage)({id:"platformUpgrade.EscalationState.loading"}),h.default.createElement("span",null,s&&s.length>0&&this.computeSchedule(s)))),key:l},h.default.createElement("div",{className:E.default.clusterBox},s&&s.length>0?s.map((e,t)=>{var a=e.name,s=e.status,l=e.progress,i=e.message;return h.default.createElement("div",{className:E.default.podBox},h.default.createElement("div",null,h.default.createElement(o.default,{status:"Completed"==s?"success":"processing"}),h.default.createElement("div",null,a),h.default.createElement("div",null,"Completed"!=s&&h.default.createElement(n.default,{content:i||(0,g.formatMessage)({id:"platformUpgrade.EscalationState.nolog"}),title:(0,g.formatMessage)({id:"platformUpgrade.EscalationState.loginfo"}),style:{width:200}},h.default.createElement("span",{onClick:this.showLog},(0,g.formatMessage)({id:"platformUpgrade.EscalationState.log"}))))),h.default.createElement("div",null,h.default.createElement(r.default,{percent:l,status:100==l?"":"active"})))}):h.default.createElement(i.default,null)))})))}},c=f))||c),M=_;t.default=M},zmPw:function(e,t,a){"use strict";var s=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("T2oS");var i=s(a("W9HT"));a("IzEo");var r=s(a("bx4M"));a("14J3");var n=s(a("BMrR"));a("BoS7");var o=s(a("Sdc0"));a("jCWc");var d=s(a("kPKH")),u=s(a("p0pE"));a("/xke");var c,f,p,m,h,g=s(a("TeRw")),b=a("MuoO"),v=l(a("q1tI")),E=s(a("W2Kv")),S=s(a("6ryS")),_=s(a("HzM2")),M=s(a("q76B")),y=s(a("Bq0W")),C=s(a("Knwb")),k=s(a("Qqzp")),I=s(a("+XgA")),w=s(a("puxM")),O=s(a("mWxT")),x=s(a("RsBk")),L=a("LLXN"),A=s(a("AqsJ")),B=(c=(0,b.connect)(e=>{var t=e.user,a=e.list,s=e.loading,l=e.global,i=e.index;return{user:t.currentUser,list:a,loading:s.models.list,rainbondInfo:l.rainbondInfo,enterprise:l.enterprise,isRegist:l.isRegist,oauthLongin:s.effects["global/creatOauth"],certificateLongin:s.effects["global/putCertificateType"],imageHubLongin:s.effects["global/editImageHub"],monitoringLongin:s.effects["global/editImageHub"],objectStorageLongin:s.effects["global/editCloudBackup"],overviewInfo:i.overviewInfo}}),c((p=class extends v.PureComponent{constructor(e){super(e),this.onRegistChange=(e=>{this.props.dispatch({type:"global/putIsRegist",payload:{isRegist:e}})}),this.handlChooseeOpen=(()=>{var e=this.state.israinbondTird;e?this.handleOpenDomain():this.handelIsOpen(!0)}),this.handleOpenDomain=(()=>{this.setState({showDeleteDomain:!0})}),this.handelIsOpen=(e=>{var t=this.props.dispatch;t({type:"global/editOauth",payload:{arr:{enable:e,value:null}},callback:t=>{t&&200===t.status_code&&(g.default.success({message:e?(0,L.formatMessage)({id:"notification.success.Oauth2"}):(0,L.formatMessage)({id:"notification.success.close"})}),this.fetchEnterpriseInfo())}})}),this.handelIsOpenImageHub=((e,t)=>{var a=this.props,s=a.dispatch,l=a.match.params.eid,i=this.state,r=i.AppstoreImageHubValue,n=i.isEnableAppstoreImageHub,o=t||r||{};s({type:"global/editImageHub",payload:{enterprise_id:l,enable:e,hub_url:o.hub_url,namespace:o.namespace,hub_user:o.hub_user,hub_password:o.hub_password},callback:a=>{a&&200===a.status_code&&(g.default.success({message:n?e&&t?(0,L.formatMessage)({id:"notification.success.change"}):(0,L.formatMessage)({id:"notification.success.close"}):(0,L.formatMessage)({id:"notification.success.opened_successfully"})}),this.fetchEnterpriseInfo(),this.handelCloseImageHub())}})}),this.fetchCloudStorage=(()=>{var e=this.props.dispatch;e({type:"global/fetchCloudStorage",payload:{},callback:e=>{var t,a;e&&200===e.status_code&&this.setState({storageValue:null===e||void 0===e?void 0:null===(t=e.bean)||void 0===t?void 0:t.value,isEnableStorage:null===e||void 0===e?void 0:null===(a=e.bean)||void 0===a?void 0:a.enable})}})}),this.handleEditCloudStorage=((e,t)=>{var a=this.props,s=a.dispatch,l=(a.match.params.eid,this.state),i=l.storageValue,r=l.isEnableStorage,n=t||i||{};s({type:"global/editCloudStorage",payload:(0,u.default)({enable:e},n),callback:a=>{a&&200===a.status_code&&(g.default.success({message:r?e&&t?(0,L.formatMessage)({id:"notification.success.change"}):(0,L.formatMessage)({id:"notification.success.close"}):(0,L.formatMessage)({id:"notification.success.opened_successfully"})}),this.fetchCloudStorage(),this.handelCloseStorage())}})}),this.handelIsOpenCloudBackup=((e,t)=>{var a=this.props,s=a.dispatch,l=a.match.params.eid,i=this.state,r=i.ObjectStorageValue,n=i.isEnableObjectStorage,o=t||r||{};s({type:"global/editCloudBackup",payload:{enterprise_id:l,enable:e,provider:o.provider,endpoint:o.endpoint,bucket_name:o.bucket_name,access_key:o.access_key,secret_key:o.secret_key},callback:a=>{a&&200===a.status_code&&(g.default.success({message:n?e&&t?(0,L.formatMessage)({id:"notification.success.change"}):(0,L.formatMessage)({id:"notification.success.close"}):(0,L.formatMessage)({id:"notification.success.opened_successfully"})}),this.fetchEnterpriseInfo(),this.handelCloseCloudBackup())}})}),this.fetchEnterpriseInfo=(()=>{var e=this.props,t=e.dispatch,a=e.match.params.eid,s=this.state,l=s.openCertificate,i=s.closeCertificate;if(t({type:"global/fetchEnterpriseInfo",payload:{enterprise_id:a},callback:e=>{!e||l||i||this.setState({israinbondTird:O.default.OauthEnterpriseEnable(e.bean),isEnableAppstoreImageHub:O.default.isEnableAppstoreImageHub(e.bean),isEnableObjectStorage:O.default.isEnableObjectStorage(e.bean),AppstoreImageHubValue:O.default.fetchAppstoreImageHub(e.bean),ObjectStorageValue:O.default.fetchObjectStorage(e.bean)})}}),l||i)return this.handelCloseCertificate(),null;t({type:"user/fetchCurrent"}),this.handelClone()}),this.handelClone=(()=>{this.setState({showDeleteDomain:!1})}),this.handelOpenCertificate=(()=>{this.setState({openCertificate:!0})}),this.handelOpenCloseCertificate=(()=>{this.setState({closeCertificate:!0})}),this.handelOpenCloseImageHub=(()=>{this.setState({closeImageHub:!0})}),this.handelOpenImageHub=(()=>{this.setState({openImageHub:!0})}),this.handelCloseCertificate=(()=>{this.setState({closeCertificate:!1,openCertificate:!1})}),this.handelCloseImageHub=(()=>{this.setState({closeImageHub:!1,openImageHub:!1})}),this.handelOpenCloudBackup=(()=>{this.setState({openCloudBackup:!0})}),this.handelOpenCloseCloudBackup=(()=>{this.setState({closeCloudBackup:!0})}),this.handelOpenCloseStorage=(()=>{this.setState({closeCloudStorage:!0})}),this.handelOpenisEnableStorage=(()=>{this.setState({openEnableStorage:!0})}),this.handelCloseStorage=(()=>{this.setState({closeCloudStorage:!1,openEnableStorage:!1})}),this.handelCloseCloudBackup=(()=>{this.setState({closeCloudBackup:!1,openCloudBackup:!1})}),this.handelOpenBasicInformation=(()=>{this.setState({openBasicInformation:!0})}),this.handelCloseBasicInformation=(()=>{this.setState({openBasicInformation:!1})}),this.handelOpenSmsConfig=(()=>{this.setState({openSmsConfig:!0})}),this.handelCloseSmsConfig=(()=>{this.setState({openSmsConfig:!1})}),this.handelIsOpenBasicInformation=(e=>{var t=this.props,a=t.dispatch,s=t.match.params.eid;a({type:"global/putBasicInformation",payload:(0,u.default)({},e,{enterprise_id:s}),callback:()=>{this.handelCloseBasicInformation(),this.fetchEnterpriseInfo(),this.handleRainbondInfo()}})}),this.handleRainbondInfo=(()=>{var e=this.props.dispatch;e({type:"global/fetchRainbondInfo",callback:e=>{if(e){var t=O.default.fetchFavicon(e),a=document.querySelector("link[rel*='icon']")||document.createElement("link");a.type="image/x-icon",a.rel="shortcut icon",a.href=t,document.getElementsByTagName("head")[0].appendChild(a)}}})}),this.createClusters=(e=>{var t=this.props,a=t.dispatch,s=t.enterprise,l=t.match.params.eid,i=O.default.CertificateIssuedByEnable(s);if(e&&e.auto_ssl_config&&!this.isJSON(e.auto_ssl_config))return null;a({type:"global/putCertificateType",payload:{enterprise_id:l,auto_ssl:{enable:!!e,value:!!e&&e.auto_ssl_config}},callback:t=>{t&&200===t._condition&&(g.default.success({message:e?i?(0,L.formatMessage)({id:"notification.success.edit"}):(0,L.formatMessage)({id:"notification.success.opened_successfully"}):(0,L.formatMessage)({id:"notification.success.close"})}),this.fetchEnterpriseInfo())}})}),this.isJSON=(e=>{var t=()=>{g.default.warning({message:(0,L.formatMessage)({id:"notification.error.json_format_failed"})})};if("string"===typeof e)try{var a=JSON.parse(e);return!("object"!==typeof a||!a)||(t(),!1)}catch(e){return t(),!1}return t(),!1}),this.isAlarmChange=(e=>{this.props.dispatch({type:"global/updateAlarmSwitch",payload:{is_alarm:e},callback:e=>{this.fetchAlarmSwitch(),this.handleRainbondInfo()}})}),this.fetchAlarmSwitch=(()=>{this.props.dispatch({type:"global/fetchAlarmSwitch",callback:e=>{this.setState({isSwitch:e.bean.is_alarm})}})}),this.fetchSmsConfig=(()=>{var e=this.props,t=e.dispatch,a=e.match.params.eid;t({type:"global/getSmsConfig",payload:{enterprise_id:a},callback:e=>{this.setState({smsConfig:e.bean})}})}),this.handelIsOpenSmsConfig=((e,t)=>{var a=this.props,s=a.dispatch,l=a.match.params.eid;s({type:"global/updateSmsConfig",payload:{enterprise_id:l,sms_config:{enable:e,value:t}},callback:e=>{e&&200===e.status_code&&(this.fetchSmsConfig(),this.handelCloseSmsConfig(),g.default.success({message:e.msg_show}))}})});var t=this.props,a=t.enterprise,s=t.rainbondInfo;this.state={enterpriseAdminLoading:!1,showDeleteDomain:!1,openCertificate:!1,closeCertificate:!1,closeImageHub:!1,closeCloudStorage:!1,openImageHub:!1,openEnableStorage:!1,openCloudBackup:!1,closeCloudBackup:!1,openBasicInformation:!1,israinbondTird:O.default.OauthEnterpriseEnable(a),isEnableAppstoreImageHub:O.default.isEnableAppstoreImageHub(a),AppstoreImageHubValue:O.default.fetchAppstoreImageHub(a),isEnableObjectStorage:O.default.isEnableObjectStorage(a),storageValue:{},isEnableStorage:!1,ObjectStorageValue:O.default.fetchObjectStorage(a),providers:[{key:"alioss",name:"\u963f\u91cc\u4e91\u5bf9\u8c61\u5b58\u50a8"},{key:"s3",name:"S3"}],isSwitch:s.is_alarm.enable||!1,openSmsConfig:!1,smsConfig:null}}componentDidMount(){var e=this.props.dispatch;e({type:"global/getIsRegist"}),this.fetchAlarmSwitch(),this.fetchCloudStorage(),this.fetchSmsConfig()}render(){var e=this.props,t=e.enterprise,a=e.oauthLongin,s=e.certificateLongin,l=e.imageHubLongin,u=e.monitoringLongin,c=e.objectStorageLongin,f=e.rainbondInfo,p=e.match.params.eid,m={};if(f){var h=O.default.fetchLogo(f,t)||E.default,g=O.default.fetchFavicon(t),b=f&&f.title&&f.title.value,w=t&&t.enterprise_alias||f&&f.enterprise_alias,B=O.default.documentPlatform_url(f),D=O.default.officialDemoEnable(t);m={logo:h,title:b,doc_url:B,officialDemo:D,enterprise_alias:w,favicon:g}}O.default.isEnterpriseEdition(f);var F=f&&f.is_saas||!1,T=this.state,V=T.enterpriseAdminLoading,P=T.showDeleteDomain,N=T.israinbondTird,R=T.isEnableAppstoreImageHub,U=T.AppstoreImageHubValue,j=T.storageValue,H=T.isEnableObjectStorage,q=T.isEnableStorage,X=T.ObjectStorageValue,K=T.openCertificate,z=T.closeCertificate,W=T.openOauthTable,Q=T.openImageHub,J=T.openEnableStorage,Y=T.closeImageHub,Z=T.closeCloudStorage,G=T.openCloudBackup,$=T.closeCloudBackup,ee=T.providers,te=T.openBasicInformation,ae=T.isSwitch,se=T.openSmsConfig,le=T.smsConfig,ie=v.default.createElement(r.default,{hoverable:!0,bordered:!1,style:{borderRadius:0},className:x.default.infrastructureCard},v.default.createElement(n.default,{type:"flex",align:"middle"},v.default.createElement(d.default,{span:3},v.default.createElement(L.FormattedMessage,{id:"enterpriseSetting.basicsSetting.login.title"})),v.default.createElement(d.default,{span:17},v.default.createElement("span",{style:{color:"rgba(0, 0, 0, 0.45)"}},v.default.createElement(L.FormattedMessage,{id:"enterpriseSetting.basicsSetting.login.content"}))),v.default.createElement(d.default,{span:4,style:{textAlign:"right"}},this.props.isRegist&&F&&v.default.createElement("a",{onClick:this.handelOpenSmsConfig,style:{marginRight:"10px"}},v.default.createElement(L.FormattedMessage,{id:"enterpriseSetting.basicsSetting.checkTheConfiguration"})),v.default.createElement(o.default,{onChange:this.onRegistChange,checked:this.props.isRegist})))),re=v.default.createElement("div",null,v.default.createElement(r.default,{style:{borderTop:"1px solid  #ccc",borderRadius:0},hoverable:!0,bordered:!1,className:x.default.infrastructureCard},v.default.createElement(n.default,{type:"flex",align:"middle"},v.default.createElement(d.default,{span:3},v.default.createElement(L.FormattedMessage,{id:"enterpriseSetting.basicsSetting.serve.title"})),v.default.createElement(d.default,{span:17},v.default.createElement("span",{style:{color:"rgba(0, 0, 0, 0.45)"}},v.default.createElement(L.FormattedMessage,{id:"enterpriseSetting.basicsSetting.serve.content"}))),v.default.createElement(d.default,{span:4,style:{textAlign:"right"}},N&&v.default.createElement("a",{onClick:()=>{this.setState({openOauthTable:!0})},style:{marginRight:"10px"}},v.default.createElement(L.FormattedMessage,{id:"enterpriseSetting.basicsSetting.checkTheConfiguration"})),v.default.createElement(o.default,{onChange:this.handlChooseeOpen,checked:N}))))),ne=O.default.CertificateIssuedByEnable(t),oe=(r.default,x.default.infrastructureCard,n.default,d.default,L.FormattedMessage,d.default,L.FormattedMessage,d.default,ne&&(this.handelOpenCertificate,L.FormattedMessage),o.default,v.default.createElement(r.default,{hoverable:!0,bordered:!1,style:{borderTop:"1px solid  #ccc",borderRadius:0},className:x.default.infrastructureCard},v.default.createElement(n.default,{type:"flex",align:"middle"},v.default.createElement(d.default,{span:3},v.default.createElement(L.FormattedMessage,{id:"enterpriseSetting.basicsSetting.mirroring.title"})),v.default.createElement(d.default,{span:17},v.default.createElement("span",{style:{color:"rgba(0, 0, 0, 0.45)"}},v.default.createElement(L.FormattedMessage,{id:"enterpriseSetting.basicsSetting.mirroring.content"}))),v.default.createElement(d.default,{span:4,style:{textAlign:"right"}},R&&v.default.createElement("a",{onClick:this.handelOpenImageHub,style:{marginRight:"10px"}},v.default.createElement(L.FormattedMessage,{id:"enterpriseSetting.basicsSetting.checkTheConfiguration"})),v.default.createElement(o.default,{onChange:()=>{R?this.handelOpenCloseImageHub():this.handelOpenImageHub()},checked:R}))))),de=(r.default,x.default.infrastructureCard,n.default,d.default,L.FormattedMessage,d.default,L.FormattedMessage,d.default,H&&(this.handelOpenCloudBackup,L.FormattedMessage),o.default,r.default,x.default.infrastructureCard,n.default,d.default,L.FormattedMessage,d.default,L.FormattedMessage,d.default,q&&(this.handelOpenisEnableStorage,L.FormattedMessage),o.default,r.default,x.default.infrastructureCard,n.default,d.default,L.FormattedMessage,d.default,L.FormattedMessage,d.default,this.handelOpenBasicInformation,L.FormattedMessage,v.default.createElement(r.default,{hoverable:!0,bordered:!1,style:{borderTop:"1px solid  #ccc",borderRadius:0},className:x.default.infrastructureCard},v.default.createElement(n.default,{type:"flex",align:"middle"},v.default.createElement(d.default,{span:3},v.default.createElement(L.FormattedMessage,{id:"enterpriseSetting.basicsSetting.alarm.title"})),v.default.createElement(d.default,{span:17},v.default.createElement("span",{style:{color:"rgba(0, 0, 0, 0.45)"}},v.default.createElement(L.FormattedMessage,{id:"enterpriseSetting.basicsSetting.alarm.content"}))),v.default.createElement(d.default,{span:4,style:{textAlign:"right"}},v.default.createElement(o.default,{onChange:this.isAlarmChange,checked:ae})))));return v.default.createElement(v.Fragment,null,K&&v.default.createElement(S.default,{eid:p,AutomaticCertificate:ne,loading:s,onCancel:this.handelCloseCertificate,onOk:e=>{this.createClusters(e)}}),se&&v.default.createElement(C.default,{eid:p,onCancel:this.handelCloseSmsConfig,data:null===le||void 0===le?void 0:le.sms_config.value,onOk:e=>{this.handelIsOpenSmsConfig(!0,e)}}),Q&&v.default.createElement(y.default,{eid:p,title:R?(0,L.formatMessage)({id:"enterpriseSetting.basicsSetting.mirroring.modal.comp_title"}):(0,L.formatMessage)({id:"enterpriseSetting.basicsSetting.mirroring.modal.title"}),loading:l,onCancel:this.handelCloseImageHub,data:U,onOk:e=>{this.handelIsOpenImageHub(!0,e)}}),J&&v.default.createElement(k.default,{title:q?(0,L.formatMessage)({id:"enterpriseSetting.basicsSetting.storage.title"}):(0,L.formatMessage)({id:"enterpriseSetting.basicsSetting.storage.modal.title"}),loading:u,onCancel:this.handelCloseStorage,data:j,onOk:e=>{this.handleEditCloudStorage(!0,e)}}),G&&v.default.createElement(_.default,{eid:p,title:H?(0,L.formatMessage)({id:"enterpriseSetting.basicsSetting.storage.title"}):(0,L.formatMessage)({id:"enterpriseSetting.basicsSetting.storage.modal.title"}),loading:c,onCancel:this.handelCloseCloudBackup,data:X,providers:ee,onOk:e=>{this.handelIsOpenCloudBackup(!0,e)}}),te&&v.default.createElement(I.default,{title:(0,L.formatMessage)({id:"enterpriseSetting.basicsSetting.basicInformation.title"}),eid:p,loading:c,data:m,onCancel:this.handelCloseBasicInformation,onOk:this.handelIsOpenBasicInformation}),(Z||Y||z||P||$)&&v.default.createElement(M.default,{loading:Z?u:Y?l:z?s:P?a:!!$&&c,title:(0,L.formatMessage)({id:"confirmModal.close.delete.title"}),desc:Z?(0,L.formatMessage)({id:"confirmModal.delete.object_storage.desc"}):Y?(0,L.formatMessage)({id:"confirmModal.delete.component_ibrary_mirror.desc"}):z?(0,L.formatMessage)({id:"confirmModal.delete.automatic_issued.desc"}):P?(0,L.formatMessage)({id:"confirmModal.delete.Oauth.desc"}):$?(0,L.formatMessage)({id:"confirmModal.delete.object_storage.desc"}):"",onOk:()=>{Z?this.handleEditCloudStorage(!1):Y?this.handelIsOpenImageHub(!1):z?this.createClusters(!1):P?this.handelIsOpen(!1):$&&this.handelIsOpenCloudBackup(!1)},onCancel:()=>{Z?this.handelCloseStorage():Y?this.handelCloseImageHub():z?this.handelCloseCertificate():P?this.handelClone():$&&this.handelCloseCloudBackup()}}),W&&v.default.createElement(A.default,{eid:p,onOk:()=>{this.setState({openOauthTable:!1})},onCancel:()=>{this.setState({openOauthTable:!1})}}),V?v.default.createElement("div",{className:x.default.example},v.default.createElement(i.default,null)):v.default.createElement("div",{style:{borderTop:"1px solid #ccc",borderBottom:"1px solid #ccc"}},ie,re,oe,de))}},f=p))||f),D=(m=(0,b.connect)(e=>{var t=e.global;return{enterprise:t.enterprise}}),m(h=class extends v.PureComponent{render(){var e=this.props.enterprise;return e?v.default.createElement(w.default,{sm:840},v.default.createElement(B,this.props)):null}})||h);t.default=D}}]);