(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{"6q2T":function(e,a,t){e.exports={antd_row:"antd_row___2ZxCH",antd_form:"antd_form___FnyMd",en_antd_row:"en_antd_row___2-5BI",antd_row_btn:"antd_row_btn___dxhPI",antd_btn:"antd_btn___2Vepk",antd_rows:"antd_rows___2e42f",titleBox:"titleBox___2mDBL",title:"title___3l-N2",titleSpan:"titleSpan___2sTOp",en_titleSpan:"en_titleSpan___23dIM",config:"config___dc7A1",enconfig:"enconfig___ftZK-",config_en:"config_en___3Jw1e",en_config:"en_config___1WB6B",desc:"desc___3k23Q"}},BLxL:function(e,a,t){"use strict";var s=t("g09b"),l=t("tAuX");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("IzEo");var r=s(t("bx4M"));t("+L6B");var n=s(t("2/Rp")),o=s(t("jehZ"));t("5NDa");var d=s(t("5rEg"));t("14J3");var i=s(t("BMrR"));t("FJo9");var u=s(t("L41K"));t("y8nQ");var m,c,p,f,g=s(t("Vl3Y")),_=t("MuoO"),b=t("7DNP"),h=s(t("Qyje")),w=l(t("q1tI")),y=t("LLXN"),E=s(t("3a4m")),C=s(t("XZXw")),v=s(t("2lxJ")),M=s(t("+iC2")),x=s(t("KrRZ")),N=s(t("6q2T")),S=s(t("8+Sn")),D=g.default.Item,F=u.default.Step,I={enableHA:!0,gatewayIngressIPs:"",imageHub:{enable:!1,domain:"",namespace:"",username:"",password:""},etcd:{enable:!1,endpoints:[],secretName:""},estorage:{enable:!1,RWX:{enable:!1,config:{server:"",storageClassName:""}},RWO:{enable:!1,storageClassName:""},NFS:{enable:!1,server:"",path:""}},type:"aliyun",database:{enable:!1,uiDatabase:{host:"",port:"",username:"",password:"",dbname:"",enable:!1},regionDatabase:{host:"",port:"",username:"",password:"",dbname:"",enable:!1}},nodesForChaos:{enable:!1,nodes:[]},nodesForGateway:{enable:!0,nodes:[]}},k=(m=g.default.create(),c=(0,_.connect)(e=>{var a=e.user,t=e.list,s=e.loading,l=e.global,r=e.index;e.region;return{user:a.currentUser,list:t,loading:s.models.list,rainbondInfo:l.rainbondInfo,enterprise:l.enterprise,isRegist:l.isRegist,oauthLongin:s.effects["global/creatOauth"],overviewInfo:r.overviewInfo}}),m(p=c((f=class extends w.PureComponent{constructor(e){super(e),this.loadSteps=(()=>{var e=[{title:(0,y.formatMessage)({id:"enterpriseColony.ACksterList.basic"})},{title:(0,y.formatMessage)({id:"enterpriseColony.ACksterList.senior"})},{title:(0,y.formatMessage)({id:"enterpriseColony.ACksterList.install"})},{title:(0,y.formatMessage)({id:"enterpriseColony.ACksterList.Docking"})}];return e}),this.handleSubmit=(e=>{}),this.toLinkNext=(e=>{this.props.dispatch;var a=this.props.match.params.eid;this.props.form.validateFields((t,s)=>{t||s&&(I.gatewayIngressIPs=s.gatewayIngressIPs||"",I.nodesForGateway.nodes=s.nodesForGateway||[],s.domain||s.namespace||s.username||s.password?I.imageHub.enable=!0:I.imageHub.enable=!1,I.imageHub.domain=s.domain||"",I.imageHub.namespace=s.namespace||"",I.imageHub.username=s.username||"",I.imageHub.password=s.password||"",I.etcd.endpoints=s.endpoints||[],I.etcd.secretName=s.secretName||"",s.server?(I.estorage.enable=!0,I.estorage.RWX.enable=!0,I.estorage.RWO.enable=!0):(I.estorage.enable=!1,I.estorage.RWX.enable=!1,I.estorage.RWO.enable=!1),I.estorage.RWX.config.server=s.server||"",s.regionDatabase_host||s.regionDatabase_port||s.regionDatabase_username||s.regionDatabase_password||s.regionDatabase_dbname?(I.database.enable=!0,I.database.regionDatabase.enable=!0):(I.database.enable=!1,I.database.regionDatabase.enable=!1),I.database.regionDatabase.host=s.regionDatabase_host||"",I.database.regionDatabase.port=s.regionDatabase_port||"",I.database.regionDatabase.username=s.regionDatabase_username||"",I.database.regionDatabase.password=s.regionDatabase_password||"",I.database.regionDatabase.dbname=s.regionDatabase_dbname||"",I.nodesForChaos.nodes=[],I.etcd.endpoints=s.endpoints||[],I.etcd.secretName=s.secretName||"","advanced"===e?E.default.push({pathname:"/enterprise/".concat(a,"/provider/ACksterList/advanced"),search:h.default.stringify({data:I,name:"ack",cloudserver:"aliyun"})}):E.default.push({pathname:"/enterprise/".concat(a,"/provider/ACksterList/install"),search:h.default.stringify({data:I,name:"ack",step:"base",cloudserver:"aliyun"})}))})}),this.handleValidatorsGateway=((e,a,t)=>{var s=!1;a&&a.length>0?(a.some(e=>{if(!(e.externalIP&&e.internalIP&&e.name))return s=!1,!0;var a=/^[^\s]*$/;e.externalIP.match(a)&&e.internalIP.match(a)&&e.name.match(a)?t():t(new Error((0,y.formatMessage)({id:"placeholder.no_spaces"}))),s=!0}),s?t():t(new Error("".concat((0,y.formatMessage)({id:"enterpriseColony.cloud.gateway_node"}))))):t()});var a=this.props.user,t=M.default.isCompanyAdmin(a);this.state={adminer:t,language:"zh-CN"===S.default.get("language")}}componentWillMount(){var e=this.state.adminer,a=this.props.dispatch;e||a(b.routerRedux.push("/"))}componentDidMount(){}render(){var e=this.props,a=e.match.params,t=a.eid,s=(a.provider,a.clusterID,e.form.getFieldDecorator),l=this.state.language,m={labelCol:{xs:{span:0},sm:{span:0}},wrapperCol:{xs:{span:5},sm:{span:5}}},c={labelCol:{xs:{span:3},sm:{span:3}},wrapperCol:{xs:{span:10},sm:{span:10}}},p={labelCol:{xs:{span:5},sm:{span:5}},wrapperCol:{xs:{span:10},sm:{span:10}}},f={labelCol:{xs:{span:3},sm:{span:3}},wrapperCol:{xs:{span:6},sm:{span:6}}},_={labelCol:{xs:{span:6},sm:{span:6}},wrapperCol:{xs:{span:6},sm:{span:6}}},h=l?f:_,E=l?c:p;return w.default.createElement(C.default,{title:w.default.createElement(y.FormattedMessage,{id:"enterpriseColony.button.text"}),content:w.default.createElement(y.FormattedMessage,{id:"enterpriseColony.PageHeaderLayout.content"}),titleSvg:v.default.getPageHeaderSvg("clusters",18)},w.default.createElement(i.default,{style:{marginBottom:"16px"}},w.default.createElement(u.default,{current:0},this.loadSteps().map(e=>w.default.createElement(F,{key:e.title,title:e.title})))),w.default.createElement(r.default,{style:{padding:"24px 12px"}},w.default.createElement(g.default,{onSubmit:this.handleSubmit},w.default.createElement("div",{className:N.default.base_configuration},w.default.createElement(i.default,{className:l?N.default.antd_row:N.default.en_antd_row},w.default.createElement("div",null,w.default.createElement("span",{style:{fontWeight:"bold",fontSize:"16px"}},w.default.createElement(y.FormattedMessage,{id:"enterpriseColony.cloud.slb"}))),w.default.createElement(D,(0,o.default)({},m,{extra:w.default.createElement("div",null,w.default.createElement(y.FormattedMessage,{id:"enterpriseColony.alcloud.slb"}),w.default.createElement("a",{target:"_blank",href:"https://help.aliyun.com/document_detail/29863.html?spm=5176.21213303.J_6704733920.9.6ff053c9SQg0bg&scm=20140722.S_help%40%40%E6%96%87%E6%A1%A3%40%4029863._.ID_help%40%40%E6%96%87%E6%A1%A3%40%4029863-RL_SLB-LOC_main-OR_ser-V_2-P0_1"},w.default.createElement(y.FormattedMessage,{id:"enterpriseColony.alcloud.doc"}))),className:N.default.antd_form}),s("gatewayIngressIPs",{rules:[{required:!0,message:(0,y.formatMessage)({id:"enterpriseColony.cloud.ip"})},{pattern:/((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})(\.((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})){3}/g,message:(0,y.formatMessage)({id:"enterpriseColony.cloud.input_ip"})},{pattern:/^[^\s]*$/,message:(0,y.formatMessage)({id:"placeholder.no_spaces"})}]})(w.default.createElement(d.default,{placeholder:(0,y.formatMessage)({id:"enterpriseColony.cloud.demo_ip"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}})))),w.default.createElement(i.default,{className:l?N.default.antd_row:N.default.en_antd_row},w.default.createElement("div",null,w.default.createElement("span",{style:{fontWeight:"bold",fontSize:"16px"}},w.default.createElement(y.FormattedMessage,{id:"enterpriseColony.cloud.gateway"}))),w.default.createElement(D,(0,o.default)({},m,{className:N.default.antd_form,extra:(0,y.formatMessage)({id:"enterpriseColony.alcloud.gateway"})}),s("nodesForGateway",{rules:[{required:!0,message:(0,y.formatMessage)({id:"enterpriseColony.cloud.input_gateway"})},{validator:this.handleValidatorsGateway}]})(w.default.createElement(x.default,null)))),w.default.createElement(i.default,{className:N.default.antd_rows},w.default.createElement("div",{className:N.default.titleBox},w.default.createElement("div",{className:N.default.title},w.default.createElement("span",{className:l?N.default.titleSpan:N.default.en_titleSpan},w.default.createElement(y.FormattedMessage,{id:"enterpriseColony.cloud.nas"}))),w.default.createElement("div",{className:N.default.desc},w.default.createElement(y.FormattedMessage,{id:"enterpriseColony.alcloud.nas"}),w.default.createElement("a",{target:"_blank",href:"https://help.aliyun.com/document_detail/312360.html"},w.default.createElement(y.FormattedMessage,{id:"enterpriseColony.alcloud.doc"})))),w.default.createElement("div",{className:l?N.default.config:N.default.enconfig},w.default.createElement(D,(0,o.default)({},E,{label:(0,y.formatMessage)({id:"enterpriseColony.cloud.mount"})}),s("server",{rules:[{required:!1,message:(0,y.formatMessage)({id:"enterpriseColony.cloud.mount_add"})},{pattern:/^[^\s]*$/,message:(0,y.formatMessage)({id:"placeholder.no_spaces"})}]})(w.default.createElement(d.default,{placeholder:(0,y.formatMessage)({id:"enterpriseColony.cloud.dome_mount"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}))))),w.default.createElement(i.default,{className:N.default.antd_rows},w.default.createElement("div",{className:N.default.titleBox},w.default.createElement("div",{className:N.default.title},w.default.createElement("span",{className:l?N.default.titleSpan:N.default.en_titleSpan},w.default.createElement(y.FormattedMessage,{id:"enterpriseColony.cloud.access"}))),w.default.createElement("div",{className:N.default.desc},w.default.createElement(y.FormattedMessage,{id:"enterpriseColony.alcloud.access"}),w.default.createElement("a",{target:"_blank",href:"https://help.aliyun.com/document_detail/309008.html"},w.default.createElement(y.FormattedMessage,{id:"enterpriseColony.alcloud.doc"})))),w.default.createElement("div",{className:l?N.default.config:N.default.config_en},w.default.createElement(D,(0,o.default)({},h,{label:(0,y.formatMessage)({id:"enterpriseColony.cloud.address"})}),s("regionDatabase_host",{rules:[{required:!1,message:(0,y.formatMessage)({id:"enterpriseColony.cloud.address"})},{pattern:/^[^\s]*$/,message:(0,y.formatMessage)({id:"placeholder.no_spaces"})}]})(w.default.createElement(d.default,{placeholder:(0,y.formatMessage)({id:"enterpriseColony.cloud.input_address"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}))),w.default.createElement(D,(0,o.default)({},h,{label:(0,y.formatMessage)({id:"enterpriseColony.cloud.port"})}),s("regionDatabase_port",{rules:[{required:!1,message:(0,y.formatMessage)({id:"enterpriseColony.cloud.inpiut_port"})},{pattern:/^[^\s]*$/,message:(0,y.formatMessage)({id:"placeholder.no_spaces"})}]})(w.default.createElement(d.default,{placeholder:(0,y.formatMessage)({id:"enterpriseColony.cloud.demo_port"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}))),w.default.createElement(D,(0,o.default)({},h,{label:(0,y.formatMessage)({id:"enterpriseColony.cloud.name"})}),s("regionDatabase_username",{rules:[{required:!1,message:(0,y.formatMessage)({id:"enterpriseColony.cloud.input_name"})},{pattern:/^[^\s]*$/,message:(0,y.formatMessage)({id:"placeholder.no_spaces"})}]})(w.default.createElement(d.default,{placeholder:(0,y.formatMessage)({id:"enterpriseColony.cloud.demo_name"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}))),w.default.createElement(D,(0,o.default)({},h,{label:(0,y.formatMessage)({id:"enterpriseColony.cloud.password"})}),s("regionDatabase_password",{rules:[{required:!1,message:(0,y.formatMessage)({id:"enterpriseColony.cloud.input_password"})},{pattern:/^[^\s]*$/,message:(0,y.formatMessage)({id:"placeholder.no_spaces"})}]})(w.default.createElement(d.default,{type:"password",placeholder:(0,y.formatMessage)({id:"enterpriseColony.cloud.input_password"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}))),w.default.createElement(D,(0,o.default)({},h,{label:(0,y.formatMessage)({id:"enterpriseColony.cloud.access_name"})}),s("regionDatabase_dbname",{rules:[{required:!1,message:(0,y.formatMessage)({id:"enterpriseColony.cloud.input_access_name"})},{pattern:/^[^\s]*$/,message:(0,y.formatMessage)({id:"placeholder.no_spaces"})}]})(w.default.createElement(d.default,{placeholder:(0,y.formatMessage)({id:"enterpriseColony.cloud.demo_access_name"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}))))),w.default.createElement(i.default,{className:N.default.antd_rows},w.default.createElement("div",{className:N.default.titleBox},w.default.createElement("div",{className:N.default.title},w.default.createElement("span",{className:l?N.default.titleSpan:N.default.en_titleSpan},w.default.createElement(y.FormattedMessage,{id:"enterpriseColony.cloud.image"}))),w.default.createElement("div",{className:N.default.desc},w.default.createElement(y.FormattedMessage,{id:"enterpriseColony.alcloud.acr"}))),w.default.createElement("div",{className:l?N.default.config:N.default.en_config},w.default.createElement(D,(0,o.default)({},h,{label:(0,y.formatMessage)({id:"enterpriseColony.cloud.image_address"}),className:N.default.antd_form}),s("domain",{rules:[{required:!1,message:(0,y.formatMessage)({id:"enterpriseColony.cloud.input_image_address"})},{pattern:/^[^\s]*$/,message:(0,y.formatMessage)({id:"placeholder.no_spaces"})}]})(w.default.createElement(d.default,{placeholder:(0,y.formatMessage)({id:"enterpriseColony.cloud.input_image_address"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}))),w.default.createElement(D,(0,o.default)({},h,{label:(0,y.formatMessage)({id:"enterpriseColony.cloud.namespace"}),className:N.default.antd_form}),s("namespace",{rules:[{required:!1,message:(0,y.formatMessage)({id:"enterpriseColony.cloud.input_namespace"})},{pattern:/^[^\s]*$/,message:(0,y.formatMessage)({id:"placeholder.no_spaces"})}]})(w.default.createElement(d.default,{placeholder:(0,y.formatMessage)({id:"enterpriseColony.cloud.input_namespace"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}))),w.default.createElement(D,(0,o.default)({},h,{label:(0,y.formatMessage)({id:"enterpriseColony.cloud.name"}),className:N.default.antd_form}),s("username",{rules:[{required:!1,message:(0,y.formatMessage)({id:"enterpriseColony.cloud.input_name"})},{pattern:/^[^\s]*$/,message:(0,y.formatMessage)({id:"placeholder.no_spaces"})}]})(w.default.createElement(d.default,{placeholder:(0,y.formatMessage)({id:"enterpriseColony.cloud.demo_name"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}))),w.default.createElement(D,(0,o.default)({},h,{label:(0,y.formatMessage)({id:"enterpriseColony.cloud.password"}),className:N.default.antd_form}),s("password",{rules:[{required:!1,message:(0,y.formatMessage)({id:"enterpriseColony.cloud.input_password"})},{pattern:/^[^\s]*$/,message:(0,y.formatMessage)({id:"placeholder.no_spaces"})}]})(w.default.createElement(d.default,{type:"password",placeholder:(0,y.formatMessage)({id:"enterpriseColony.cloud.input_password"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}})))))),w.default.createElement(i.default,null,w.default.createElement(D,{className:N.default.antd_row_btn},w.default.createElement(n.default,{className:N.default.antd_btn,onClick:()=>{this.props.dispatch(b.routerRedux.push("/enterprise/".concat(t,"/addCluster")))}},w.default.createElement(y.FormattedMessage,{id:"button.return"})),w.default.createElement(n.default,{className:N.default.antd_btn,onClick:()=>{this.toLinkNext("advanced")}},w.default.createElement(y.FormattedMessage,{id:"button.configuration"})),w.default.createElement(n.default,{className:N.default.antd_btn,type:"primary",onClick:()=>{this.toLinkNext("next")}},w.default.createElement(y.FormattedMessage,{id:"button.next"})))))))}},p=f))||p)||p);a.default=k}}]);