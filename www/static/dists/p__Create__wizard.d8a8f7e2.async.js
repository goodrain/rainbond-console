(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[43],{"3qLW":function(e,t,a){e.exports={overviewBox:"overviewBox___1LKQ4",topContent:"topContent___3EK2c",initIcon:"initIcon___1-ZHy",initTitle:"initTitle___1ITLx",initDesc:"initDesc___1cfI5",bottomContent:"bottomContent___2NaHD",bottomDocker:"bottomDocker___1rZsp"}},HQZr:function(e,t,a){"use strict";var i=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var o=i(a("2/Rp"));a("Pwec");var n,l,s,d=i(a("CtXQ")),c=i(a("jehZ")),u=a("MuoO"),m=a("7DNP"),p=(i(a("wd/R")),r(a("q1tI"))),f=a("LLXN"),g=i(a("XZXw")),v=i(a("2lxJ")),h=i(a("18gR")),k=i(a("QDog")),C=i(a("9Qkj")),E=i(a("8+Sn")),y=i(a("3qLW")),b=(n=(0,u.connect)(e=>{var t=e.enterprise,a=e.user,i=e.teamControl,r=e.global;return{currentEnterprise:t.currentEnterprise,enterprise:r.enterprise,user:a.currentUser,currentTeamPermissionsInfo:i.currentTeamPermissionsInfo,rainbondInfo:r.rainbondInfo,noviceGuide:r.noviceGuide}}),n((s=class extends p.PureComponent{constructor(e){super(e),this.getCloudRecommendApps=(e=>{var t=this.state.scope,a=this.props,i=a.dispatch,r=a.currentEnterprise,o=a.user;i({type:"market/fetchAppModels",payload:{enterprise_id:r.enterprise_id,user_id:o.user_id,app_name:"",scope:t,page_size:9,page:1},callback:e=>{this.setState({localist:e.list})}})}),this.getMarketsTab=(()=>{var e=this.props,t=e.dispatch,a=e.currentEnterprise;t({type:"market/fetchMarketsTab",payload:{enterprise_id:a.enterprise_id},callback:e=>{var t=e&&e.list||[],a="";t&&t.length>0&&t.map(e=>{if("rainbond"==e.domain)return a=e.name}),this.setState({rainStoreTab:a},()=>{this.getStoreList()})}})}),this.getStoreList=(()=>{this.setState({loading:!0});var e=this.props,t=e.dispatch,a=e.currentEnterprise;t({type:"enterprise/fetchEnterpriseStoreList",payload:{enterprise_id:null===a||void 0===a?void 0:a.enterprise_id},callback:e=>{}})}),this.onClickLinkCreate=((e,t)=>{var a,i,r=this.props,o=r.dispatch,n=(r.currentEnterprise,k.default.getCurrTeamName()),l=k.default.getCurrRegionName(),s=this.props.location.query.group_id||"",d=(null===(a=this.props.location)||void 0===a?void 0:null===(i=a.query)||void 0===i?void 0:i.type)||"";o("import"==e?m.routerRedux.push("/team/".concat(n,"/region/").concat(l,"/shared/").concat(t,"?group_id=").concat(s,"&type=").concat(d)):m.routerRedux.push("/team/".concat(n,"/region/").concat(l,"/create/").concat(e,"/").concat(t,"?group_id=").concat(s,"&type=").concat(d)))}),this.getUserNewbieGuideConfig=(()=>{var e=this.props.dispatch;e({type:"global/fetchUserNewbieGuideConfig"})}),this.handleGuideStep=(e=>{if(this.setState({guideStep:e}),"close"===e||!e&&"yaml"===this.state.guideStep){var t=this.props.dispatch;t({type:"global/putUserNewbieGuideConfig",payload:{arr:[{key:"wizard",value:!0}]},callback:()=>{this.getUserNewbieGuideConfig()}})}}),this.renderGuide=(()=>{var e=this.state.guideStep,t={market:{tit:"\u5e94\u7528\u5e02\u573a\u5b89\u88c5",desc:"\u5185\u7f6e\u5e94\u7528\u5e02\u573a\u63d0\u4f9b\u4e0a\u767e\u79cd\u5e94\u7528\u5373\u70b9\u5373\u7528\uff0c\u79cd\u7c7b\u4e30\u5bcc\u6db5\u76d6AI \u5e94\u7528\u3001\u535a\u5ba2\u7cfb\u7edf\u3001\u56fe\u5e8a\u3001\u9879\u76ee\u7ba1\u7406\u3001\u7535\u5546\u7cfb\u7edf\u3001\u5f00\u53d1\u5de5\u5177\u3001\u4e2d\u95f4\u4ef6\u7b49\u7b49\u3002",nextStep:"image",svgPosition:{top:"52%",left:"17%"},conPosition:{top:"35%",left:"22%"}},image:{tit:"\u5bb9\u5668\u955c\u50cf\u6784\u5efa",desc:"\u5e73\u53f0\u5185\u7f6e\u955c\u50cf\u52a0\u901f\uff0c\u8f93\u5165\u955c\u50cf\u540d\u79f0\u76f4\u63a5\u6784\u5efa\u8fd0\u884c\uff0c\u4e5f\u53ef\u4ee5\u7ed1\u5b9aDocker Registry \u3001Harbor\u955c\u50cf\u4ed3\u5e93\u3002",prevStep:"market",nextStep:"code",svgPosition:{top:"52%",left:"43%"},conPosition:{top:"35%",left:"48%"}},code:{tit:"\u6e90\u4ee3\u7801\u6784\u5efa",desc:"\u652f\u6301\u5173\u8054Git\u4ed3\u5e93\u81ea\u52a8\u6784\u5efa\uff0c\u63d0\u4ea4\u4ee3\u7801\u5c31\u80fd\u90e8\u7f72\uff0c\u652f\u6301GitHub/GitLab/\u7801\u4e91\uff0c\u8fd8\u80fd\u7ed1\u5b9a\u79c1\u6709\u4ed3\u5e93\uff0c\u81ea\u52a8\u8bc6\u522b\u591a\u79cd\u8bed\u8a00\uff0c\u4f8b\u5982\uff1aJava\u3001Python\u3001Golang\u3001JS\u3001Node\u3001PHP\u3001Dockerfile\u7b49\u3002",prevStep:"image",nextStep:"package",svgPosition:{top:"52%",right:"28%"},conPosition:{top:"35%",right:"8%"}},package:{tit:"\u4e0a\u4f20\u8f6f\u4ef6\u5305",desc:"\u652f\u6301\u76f4\u63a5\u4e0a\u4f20JAR\u3001WAR\u3001ZIP\u7b49\u4e8c\u8fdb\u5236\u8f6f\u4ef6\u5305\uff0c\u81ea\u52a8\u914d\u7f6e\u8fd0\u884c\u73af\u5883\u3002",prevStep:"code",nextStep:"yaml",svgPosition:{top:"58%",right:"28%"},conPosition:{top:"35%",right:"8%"}},yaml:{tit:" YAML \u521b\u5efa",desc:"\u652f\u6301\u4f7f\u7528 Kubernetes \u539f\u751f YAML \u6587\u4ef6\u521b\u5efa\u5e94\u7528\u3002",prevStep:"package",isSuccess:!0,svgPosition:{top:"52%",right:"5%"},conPosition:{top:"35%",right:"22%"}}},a=e&&t[e];return a?p.default.createElement(h.default,(0,c.default)({},t[e],{totals:5,handleClose:()=>this.handleGuideStep("close"),handlePrev:()=>this.handleGuideStep(t[e].prevStep),handleNext:()=>this.handleGuideStep(t[e].nextStep)})):null});var t=e.noviceGuide,a=e.rainbondInfo,i=t&&t.some(e=>"wizard"===e.key&&"True"==e.value),r=!0===(null===a||void 0===a?void 0:a.is_saas)&&!i;this.state={guideStep:r?"market":"",rainStoreTab:"",language:"zh-CN"===E.default.get("language"),scope:"enterprise",teamAppCreatePermission:C.default.queryPermissionsInfo(this.props.currentTeamPermissionsInfo&&this.props.currentTeamPermissionsInfo.team,"team_app_create")}}componentDidMount(){var e=this.state.teamAppCreatePermission.isAccess,t=this.props,a=t.noviceGuide,i=t.rainbondInfo;e&&(this.getMarketsTab(),this.getCloudRecommendApps());var r=a&&a.some(e=>"wizard"===e.key&&"True"==e.value),o=!0===(null===i||void 0===i?void 0:i.is_saas)&&!r;o&&setTimeout(()=>{var e=document.querySelector('[data-guide="market"]');e&&(e.style.position="relative",e.style.zIndex="1000",e.style.backgroundColor="#fff")},1e3)}componentDidUpdate(e,t){var a=this.state.guideStep,i=this.props,r=i.noviceGuide,o=i.rainbondInfo;if(e.noviceGuide!==r||e.rainbondInfo!==o){var n=r&&r.some(e=>"wizard"===e.key&&"True"==e.value),l=!0===(null===o||void 0===o?void 0:o.is_saas)&&!n;l&&!a?this.setState({guideStep:"market"}):!l&&a&&this.setState({guideStep:""})}if(t.guideStep!==a){var s=document.querySelector('[data-guide="'.concat(t.guideStep,'"]'));s&&(s.style.position="",s.style.zIndex="",s.style.backgroundColor=""),setTimeout(()=>{var e=document.querySelector('[data-guide="'.concat(a,'"]'));e&&(e.style.position="relative",e.style.zIndex="1000",e.style.backgroundColor="#fff")},100)}}render(){var e,t,a=k.default.fetchSvg("teamCode"),i=k.default.fetchSvg("teamMarket"),r=k.default.fetchSvg("teamImage"),n=k.default.fetchSvg("teamUpload"),l=this.props.rainbondInfo,s=this.state,c=s.rainStoreTab,u=(s.language,s.localist,s.teamAppCreatePermission.isAccess),h=null===l||void 0===l?void 0:null===(e=l.official_demo)||void 0===e?void 0:e.enable,E=this.props.location.query.type,b=this.props.location.query.group_id,_=!(null===l||void 0===l?void 0:null===(t=l.security_restrictions)||void 0===t?void 0:t.enable);return u?p.default.createElement(p.default.Fragment,null,this.renderGuide(),p.default.createElement(g.default,{title:(0,f.formatMessage)({id:"versionUpdata_6_1.create"}),content:(0,f.formatMessage)({id:"versionUpdata_6_1.create.content"}),titleSvg:v.default.getPageHeaderSvg("component",18),extraContent:"app"===E?p.default.createElement(o.default,{onClick:()=>{var e=this.props.dispatch;e(m.routerRedux.push({pathname:"/team/".concat(k.default.getCurrTeamName(),"/region/").concat(k.default.getCurrRegionName(),"/apps/").concat(b,"/overview")}))},type:"default"},p.default.createElement(d.default,{type:"rollback"}),(0,f.formatMessage)({id:"button.return"})):p.default.createElement(o.default,{onClick:()=>{var e=this.props.dispatch;e(m.routerRedux.push({pathname:"/team/".concat(k.default.getCurrTeamName(),"/region/").concat(k.default.getCurrRegionName(),"/index")}))},type:"default"},p.default.createElement(d.default,{type:"rollback"}),(0,f.formatMessage)({id:"button.return"}))},p.default.createElement("div",{className:y.default.overviewBox},p.default.createElement("div",null,p.default.createElement("div",{className:y.default.topContent,style:{height:220}},p.default.createElement("div",{className:y.default.initIcon},p.default.createElement("div",null,i)),p.default.createElement("div",{className:y.default.initTitle},(0,f.formatMessage)({id:"menu.team.create.market"})),p.default.createElement("div",{className:y.default.initDesc},p.default.createElement("p",null,(0,f.formatMessage)({id:"teamAdd.create.market.desc"})))),p.default.createElement("div",{className:y.default.bottomContent},p.default.createElement("p",{"data-guide":"market",onClick:()=>this.onClickLinkCreate("market",c)},(0,f.formatMessage)({id:"teamAdd.create.market.market"})),p.default.createElement("p",{onClick:()=>this.onClickLinkCreate("market","")},(0,f.formatMessage)({id:"popover.applicationMarket.local"})),p.default.createElement("p",{onClick:()=>this.onClickLinkCreate("import","import")},p.default.createElement(f.FormattedMessage,{id:"applicationMarket.localMarket.import"})))),p.default.createElement("div",null,p.default.createElement("div",{className:y.default.topContent,style:{height:220}},p.default.createElement("div",{className:y.default.initIcon},p.default.createElement("div",null,r)),p.default.createElement("div",{className:y.default.initTitle},(0,f.formatMessage)({id:"menu.team.create.image"})),p.default.createElement("div",{className:y.default.initDesc},p.default.createElement("p",null,_?(0,f.formatMessage)({id:"teamAdd.create.image.desc"}):"\u652f\u6301\u4ece\u5bb9\u5668\u955c\u50cf\u521b\u5efa\u5e94\u7528\u3002"))),p.default.createElement("div",{className:y.default.bottomContent},p.default.createElement("p",{"data-guide":"image",onClick:()=>this.onClickLinkCreate("image","custom")},(0,f.formatMessage)({id:"componentOverview.body.tab.log.container"})),h&&p.default.createElement("p",{onClick:()=>this.onClickLinkCreate("image","ImageNameDemo")},(0,f.formatMessage)({id:"teamAdd.create.code.demo"})))),p.default.createElement("div",null,p.default.createElement("div",{className:y.default.topContent,style:{height:220}},p.default.createElement("div",{className:y.default.initIcon},p.default.createElement("div",null,a)),p.default.createElement("div",{className:y.default.initTitle},(0,f.formatMessage)({id:"menu.team.create.code"})),p.default.createElement("div",{className:y.default.initDesc},p.default.createElement("p",null,(0,f.formatMessage)({id:"teamAdd.create.code.desc"})))),p.default.createElement("div",{className:y.default.bottomContent},p.default.createElement("p",{"data-guide":"code",onClick:()=>this.onClickLinkCreate("code","custom")},(0,f.formatMessage)({id:"teamAdd.create.code.customSource"})),p.default.createElement("p",{"data-guide":"package",onClick:()=>this.onClickLinkCreate("code","jwar")},(0,f.formatMessage)({id:"teamAdd.create.code.package"})),h&&p.default.createElement("p",{onClick:()=>this.onClickLinkCreate("code","demo")},(0,f.formatMessage)({id:"teamAdd.create.code.demo"})))),p.default.createElement("div",null,p.default.createElement("div",{className:y.default.topContent,style:{height:220}},p.default.createElement("div",{className:y.default.initIcon},p.default.createElement("div",null,n)),p.default.createElement("div",{className:y.default.initTitle},_?(0,f.formatMessage)({id:"menu.team.create.upload"}):"Yaml"),p.default.createElement("div",{className:y.default.initDesc},p.default.createElement("p",null,_?(0,f.formatMessage)({id:"teamAdd.create.upload.desc"}):"\u652f\u6301\u4ece Kubernetes YAML\u521b\u5efa\u7ec4\u4ef6"))),p.default.createElement("div",{className:y.default.bottomContent},p.default.createElement("p",{"data-guide":"yaml",onClick:()=>this.onClickLinkCreate("yaml","yaml")},(0,f.formatMessage)({id:"teamAdd.create.upload.TeamWizard.yaml"})),_&&p.default.createElement("p",{onClick:()=>this.onClickLinkCreate("yaml","helm")},(0,f.formatMessage)({id:"teamAdd.create.upload.TeamWizard.helm"})),_&&p.default.createElement("p",{onClick:()=>this.onClickLinkCreate("yaml","importCluster")},(0,f.formatMessage)({id:"teamAdd.create.upload.uploadFiles.k8s.text"})),p.default.createElement("p",{onClick:()=>this.onClickLinkCreate("yaml","outerCustom")},(0,f.formatMessage)({id:"appOverview.list.table.btn.third_party"}))))))):C.default.noPermission()}},l=s))||l);t.default=b}}]);