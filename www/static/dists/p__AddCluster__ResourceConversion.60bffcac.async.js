(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[21],{L0cA:function(e,t,a){e.exports={applist:"applist___1gXPE",typeBtnWrap:"typeBtnWrap___P5ye4",fixed:"fixed___kWfgt",typeBtn:"typeBtn___335tw",active:"active___1G0lY",alltable:"alltable___1H_fO",buttonbox:"buttonbox___1sXwO",ramstyle:"ramstyle___3k0nY",cpustyle:"cpustyle___2rivg",zujianbutton:"zujianbutton___2NRXC",checkoutbutton:"checkoutbutton___982rN",cardstyle:"cardstyle___3wbnR",deploydatanum:"deploydatanum___37eTb",loadingstyle:"loadingstyle___AbT9g"}},hMH2:function(e,t,a){"use strict";var r=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var n=r(a("2/Rp"));a("R9oj");var s=r(a("ECub"));a("T2oS");var i=r(a("W9HT"));a("1YHl");var o=r(a("VNzZ"));a("Pwec");var u=r(a("CtXQ"));a("5Dmo");var d=r(a("3S7+"));a("y8nQ");var c=r(a("Vl3Y"));a("Znn+");var m=r(a("ZTPi"));a("OaEy");var p=r(a("2fM7"));a("fu2T");var f,h,_,g=r(a("gK9i")),b=a("MuoO"),y=a("7DNP"),v=l(a("q1tI")),E=a("LLXN"),k=(r(a("3a4m")),r(a("L0cA"))),S=(r(a("QDog")),r(a("1ZQj"))),A=r(a("kYhC")),x=r(a("Y6FW")),w=r(a("cr+7")),C=r(a("7h8G")),M=r(a("Im2e")),N=r(a("xhfu")),T=r(a("YvgB")),K=r(a("ZShK")),L=(a("17x9"),a("7ntv"),a("KTCi"),g.default.Panel,p.default.Option,p.default.OptGroup,m.default.TabPane),R=(c.default.Item,f=(0,b.connect)(null,null,null,{withRef:!0}),f((_=class extends v.PureComponent{constructor(e){super(e),this.handleType=((e,t)=>{var a=this.state,r=a.module;a.minmoduleArr,a.moduleArr,a.kubernetes;this.setState({kubernetes:[],moduleArr:[]}),null!=r[e].convert_resource&&null!=r[e].kubernetes_resources?this.setState({moduleArr:r[e].convert_resource,kubernetes:r[e].kubernetes_resources,tabKey:"0"}):null!=r[e].convert_resource&&null==r[e].kubernetes_resources?this.setState({moduleArr:r[e].convert_resource,k8sArr:r[e].kubernetes_resources,tabKey:"0"}):null!=r[e].kubernetes_resources&&null==r[e].convert_resource?this.setState({kubernetes:r[e].kubernetes_resources,tabKey:"k8s"}):this.setState({moduleArr:[],minmoduleArr:{},tabKey:"k8s"}),this.setState({type:t})}),this.tabSwitch=(e=>{this.setState({tabKey:e})}),this.handleBuild=(()=>{var e=this.props,t=e.dispatch,a=e.match.params.eid;this.setState({importLoading:!0}),t({type:"region/backNameSpaceAdvancedResource",payload:{eid:a,region_id:this.props.location.query.region_id,namespace:this.props.location.query.namespace},callback:e=>{this.setState({importLoading:!1});var t=e.bean&&e.bean.Name,a=e.bean&&e.bean.region_name;this.props.dispatch(y.routerRedux.push("/team/".concat(t,"/region/").concat(a,"/index")))}})}),this.nextStep=(()=>{var e=this.props,t=(e.dispatch,e.match.params.eid),a=this.props.location.query.region_id;this.props.dispatch(y.routerRedux.push("/enterprise/".concat(t,"/importMessage?region_id=").concat(a)))}),this.state={module:{},appnameArr:[],moduleArr:[],minmoduleArr:{},type:0,tabKey:"0",loadingSwitch:!0,kubernetes:[],importLoading:!1}}componentDidMount(){this.first()}first(){var e=this.props,t=e.dispatch,a=e.match.params.eid;t({type:"region/fetchNameSpaceAdvancedResource",payload:{eid:a,region_id:this.props.location.query.region_id,namespace:this.props.location.query.namespace},callback:e=>{if(e&&e.response_data&&200===e.response_data.code){var t=Object.keys(e.bean);this.setState({appnameArr:t,module:e.bean,moduleArr:e.bean[t[0]].convert_resource,kubernetes:e.bean[t[0]].kubernetes_resources,loadingSwitch:!1});var a=this.state.moduleArr;null==a?this.setState({tabKey:"k8s"}):this.setState({tabKey:"0"})}}})}render(){var e=this.state,t=e.type,a=e.appnameArr,r=e.moduleArr,l=(e.minmoduleArr,e.tabKey,e.loadingSwitch),c=e.module,p=e.kubernetes,f=(e.importLoading,this.props.location.query.namespace);return v.default.createElement("div",null,v.default.createElement(i.default,{spinning:this.state.importLoading,size:"large",tip:"Loading..."},v.default.createElement("h2",null,(0,E.formatMessage)({id:"enterpriseColony.import.recognition.title"}),f&&f.length>0?f:(0,E.formatMessage)({id:"enterpriseColony.import.recognition.null"})),v.default.createElement("h3",{className:k.default.applist},(0,E.formatMessage)({id:"enterpriseColony.import.recognition.app.title"})),f&&f.length>0?v.default.createElement(v.default.Fragment,null,v.default.createElement("div",{className:k.default.typeBtnWrap},v.default.createElement(o.default,{offsetTop:0},v.default.createElement("div",{className:k.default.fixed},a.map((e,a)=>{return v.default.createElement(v.default.Fragment,null,null===c[e].convert_resource&&null===c[e].kubernetes_resources?v.default.createElement(v.default.Fragment,null):v.default.createElement("div",{key:a,className:"".concat(k.default.typeBtn,"  ").concat(t===a?k.default.active:""),onClick:()=>{this.handleType(e,a)}},v.default.createElement(d.default,{placement:"right",title:"unclassified"===e?(0,E.formatMessage)({id:"enterpriseColony.import.app.title"}):e},v.default.createElement("span",null,"unclassified"===e?(0,E.formatMessage)({id:"enterpriseColony.import.app.title"}):e)),v.default.createElement(u.default,{type:"right"})))})))),l?v.default.createElement("div",{className:k.default.loadingstyle},v.default.createElement(i.default,{size:"large"})):v.default.createElement("div",{id:"box"},v.default.createElement("div",{className:k.default.alltable},v.default.createElement(m.default,{onChange:this.tabSwitch,activeKey:this.state.tabKey,ref:e=>{this._Tabs=e}},r&&r.length>0&&r.map((e,t)=>{return v.default.createElement(L,{tab:e.components_name,key:"".concat(t)},v.default.createElement(C.default,{value:e.basic_management}),v.default.createElement(A.default,{value:e.port_management}),v.default.createElement(x.default,{value:e.env_management}),v.default.createElement(w.default,{value:e.config_management}),v.default.createElement(M.default,{value:e.telescopic_management}),v.default.createElement(S.default,{value:e.health_check_management}),v.default.createElement(N.default,{value:e.component_k8s_attributes_management}))}),p&&p.length>0&&v.default.createElement(L,{tab:(0,E.formatMessage)({id:"enterpriseColony.import.recognition.tabs"}),key:"k8s"},v.default.createElement(T.default,{value:p})))))):v.default.createElement(s.default,{image:s.default.PRESENTED_IMAGE_SIMPLE,style:{marginTop:"200px"}}),v.default.createElement("div",{style:{background:"#fff",padding:"20px",textAlign:"right",position:"fixed",bottom:0,left:0,right:0,zIndex:2,borderTop:"1px solid #e8e8e8"}},v.default.createElement(n.default,{style:{marginRight:8},onClick:this.nextStep,type:"default"},(0,E.formatMessage)({id:"button.last_step"})),v.default.createElement(n.default,{style:{marginRight:8},onClick:this.handleBuild,type:"primary"},(0,E.formatMessage)({id:"button.import"})))),v.default.createElement(K.default,null))}},h=_))||h);t.default=R}}]);