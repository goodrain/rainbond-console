(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[42],{"5H8C":function(e,t,a){"use strict";var r=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(a("jehZ"));a("+L6B");var i=r(a("2/Rp"));a("Pwec");var s,c,u,m=r(a("CtXQ")),l=n(a("q1tI")),p=a("MuoO"),d=a("LLXN"),f=a("7DNP"),h=r(a("XZXw")),g=r(a("NV9e")),v=r(a("9Qkj")),C=r(a("2lxJ")),b=r(a("QDog")),I=a("vSx2"),T=(s=(0,p.connect)(e=>{var t=e.teamControl,a=e.enterprise;return{currentTeam:t.currentTeam,currentRegionName:t.currentRegionName,currentEnterprise:a.currentEnterprise,currentTeamPermissionsInfo:t.currentTeamPermissionsInfo}},null,null,{pure:!1}),s((u=class extends l.PureComponent{constructor(e){super(e),this.handleArchCpuInfo=(()=>{var e=this.props.dispatch;e({type:"index/fetchArchOverview",payload:{region_name:b.default.getCurrRegionName(),team_name:b.default.getCurrTeamName()},callback:e=>{e&&e.bean&&this.setState({archInfo:e.list})}})}),this.handleTabChange=(e=>{var t=this.props.dispatch,a=b.default.getAppID();t(f.routerRedux.push("/team/".concat(b.default.getCurrTeamName(),"/region/").concat(b.default.getCurrRegionName(),"/create/image/").concat(e,"?group_id=").concat(a)))}),this.state={archInfo:[],teamAppCreatePermission:v.default.queryPermissionsInfo(this.props.currentTeamPermissionsInfo&&this.props.currentTeamPermissionsInfo.team,"team_app_create")}}componentWillMount(){this.handleArchCpuInfo()}render(){var e,t,a={VirtualMachine:g.default},r=[{key:"VirtualMachine",tab:(0,d.formatMessage)({id:"Vm.createVm.VmImg"})}],n=this.props,s=n.currentEnterprise,c=n.currentTeam,u=n.currentRegionName,p=n.match,T=this.state,A=T.archInfo,P=T.teamAppCreatePermission.isAccess;if(!P)return v.default.noPermission();var y=p.params.type;y=y.split("?")[0],y||(y="VirtualMachine");var M=a[y],N=[];N=(0,I.createTeam)((0,I.createEnterprise)(N,s),c,u),N.push({title:(0,d.formatMessage)({id:"teamAdd.create.createComponentTitle"})});var V=b.default.getAppID(),w=(null===(e=this.props.location)||void 0===e?void 0:null===(t=e.query)||void 0===t?void 0:t.type)||"";return l.default.createElement(h.default,{breadcrumbList:N,title:(0,d.formatMessage)({id:"Vm.createVm.creatCom"}),onTabChange:this.handleTabChange,content:(0,d.formatMessage)({id:"Vm.createVm.creatApp"}),tabActiveKey:y,tabList:r,titleSvg:C.default.getPageHeaderSvg("vm",18),extraContent:l.default.createElement(i.default,{onClick:()=>{var e=this.props.dispatch;e(f.routerRedux.push("/team/".concat(b.default.getCurrTeamName(),"/region/").concat(b.default.getCurrRegionName(),"/create/wizard?group_id=").concat(V,"&type=").concat(w)))},type:"default"},l.default.createElement(m.default,{type:"rollback"}),(0,d.formatMessage)({id:"button.return"}))},M?l.default.createElement(M,(0,o.default)({archInfo:A},this.props)):l.default.createElement(d.FormattedMessage,{id:"teamAdd.create.error"}))}},c=u))||c);t.default=T}}]);