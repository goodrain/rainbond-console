<<<<<<< HEAD:www/static/dists/p__User__Third.9610195d.async.js
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[78],{"2+YD":function(e,t,s){"use strict";var r=s("g09b"),a=s("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,s("miYZ");var o,i,n,d=r(s("tsqr")),l=s("MuoO"),u=s("7DNP"),c=a(s("q1tI")),h=r(s("ALo4")),p=r(s("8+Sn")),_=r(s("4W9V")),g=r(s("QDog")),f=r(s("mWxT")),v="/user/login?disable_auto_login=true",m=(o=(0,l.connect)(),o((n=class extends c.Component{constructor(e){super(e),this.handleLoginUrl=(()=>{var e=this.props.dispatch;e(u.routerRedux.push(v))}),this.handleError=(e=>{var t=e&&e.status||e.response&&e.response.status;t&&500===t?d.default.warning("\u7b2c\u4e09\u65b9\u8ba4\u8bc1\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u8ba4\u8bc1"):(0,_.default)(e),setTimeout(()=>{this.handleLoginUrl()},1e3)}),this.handleSuccess=(()=>{var e=this.props.dispatch,t=window.localStorage.getItem("redirect");t&&""!==t||(t="/"),window.localStorage.setItem("redirect",""),t.startsWith("/")?e(u.routerRedux.push(t)):window.location.href=t}),this.state={resultState:"ing",title:"\u7b2c\u4e09\u65b9\u8ba4\u8bc1\u4e2d...",desc:"\u6b64\u8fc7\u7a0b\u53ef\u80fd\u6bd4\u8f83\u8017\u65f6\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85"}}componentWillMount(){var e=f.default.OauthParameter("code"),t=f.default.OauthParameter("service_id"),s=this.props.dispatch;if(e&&t&&"None"!==e&&"None"!==t&&""!==e&&""!==t){var r=p.default.get("token");if(r)return s({type:"global/hideNeedLogin"}),s({type:"user/fetchThirdLoginBinding",payload:{code:e,service_id:t},callback:e=>{if(e){var t=e.response_data&&e.response_data.status;t&&400===t?this.setState({resultState:"error",title:"\u7b2c\u4e09\u65b9\u8ba4\u8bc1\u672a\u901a\u8fc7",desc:"\u8ba4\u8bc1\u5931\u8d25,\u8bf7\u91cd\u65b0\u8ba4\u8bc1"},()=>{setTimeout(()=>{this.handleLoginUrl()},1e3)}):e.status_code&&200===e.status_code?this.setState({resultState:"success",title:"\u7b2c\u4e09\u65b9\u8ba4\u8bc1\u901a\u8fc7",desc:""},()=>{e.bean&&e.bean.token&&p.default.set("token",e.bean.token),this.handleSuccess()}):this.handleLoginUrl()}else this.handleLoginUrl()},handleError:e=>{this.handleError(e)}}),null;g.default.removeCookie(),s({type:"user/fetchThirdCertification",payload:{code:e,service_id:t,domain:window.location.host},callback:e=>{if(e){var t=e.response_data&&e.response_data.status;if(!t||400!==t&&401!==t&&404!==t)if(200===e.status_code){var r=e.bean;if(r&&r.token)return p.default.set("token",r.token),this.handleSuccess(),null;r&&r.result&&(r.result.is_authenticated?s(u.routerRedux.push("/user/third/login?code=".concat(r.result.code,"&service_id=").concat(r.result.service_id,"&oauth_user_id=").concat(r.result.oauth_user_id,"&oauth_type=").concat(r.result.oauth_type))):s(u.routerRedux.push("/user/third/register?code=".concat(r.result.code,"&service_id=").concat(r.result.service_id,"&oauth_user_id=").concat(r.result.oauth_user_id,"&oauth_type=").concat(r.result.oauth_type))))}else this.handleLoginUrl();else this.setState({resultState:"error",title:"\u7b2c\u4e09\u65b9\u8ba4\u8bc1\u672a\u901a\u8fc7",desc:e.msg_show||"\u672a\u6210\u529f\u83b7\u53d6access_token,\u8bf7\u91cd\u65b0\u8ba4\u8bc1\u3002"},()=>{setTimeout(()=>{this.handleLoginUrl()},1e3)})}else this.handleLoginUrl()},handleError:e=>{this.handleError(e)}})}else g.default.removeCookie(),s(u.routerRedux.replace(v))}render(){var e=this.state,t=e.resultState,s=e.title,r=e.desc;return c.default.createElement(h.default,{type:t,title:s,description:r,style:{marginTop:"20%",marginBottom:16}})}},i=n))||i);t.default=m}}]);
=======
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[67],{"2+YD":function(e,t,s){"use strict";var r=s("g09b"),a=s("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,s("miYZ");var o,i,n,d=r(s("tsqr")),l=s("MuoO"),u=s("7DNP"),c=a(s("q1tI")),h=r(s("ALo4")),p=r(s("8+Sn")),_=r(s("4W9V")),g=r(s("QDog")),f=r(s("mWxT")),v="/user/login?disable_auto_login=true",m=(o=(0,l.connect)(),o((n=class extends c.Component{constructor(e){super(e),this.handleLoginUrl=(()=>{var e=this.props.dispatch;e(u.routerRedux.push(v))}),this.handleError=(e=>{var t=e&&e.status||e.response&&e.response.status;t&&500===t?d.default.warning("\u7b2c\u4e09\u65b9\u8ba4\u8bc1\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u8ba4\u8bc1"):(0,_.default)(e),setTimeout(()=>{this.handleLoginUrl()},1e3)}),this.handleSuccess=(()=>{var e=this.props.dispatch,t=window.localStorage.getItem("redirect");t&&""!==t||(t="/"),window.localStorage.setItem("redirect",""),t.startsWith("/")?e(u.routerRedux.push(t)):window.location.href=t}),this.state={resultState:"ing",title:"\u7b2c\u4e09\u65b9\u8ba4\u8bc1\u4e2d...",desc:"\u6b64\u8fc7\u7a0b\u53ef\u80fd\u6bd4\u8f83\u8017\u65f6\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85"}}componentWillMount(){var e=f.default.OauthParameter("code"),t=f.default.OauthParameter("service_id"),s=this.props.dispatch;if(e&&t&&"None"!==e&&"None"!==t&&""!==e&&""!==t){var r=p.default.get("token");if(r)return s({type:"global/hideNeedLogin"}),s({type:"user/fetchThirdLoginBinding",payload:{code:e,service_id:t},callback:e=>{if(e){var t=e.response_data&&e.response_data.status;t&&400===t?this.setState({resultState:"error",title:"\u7b2c\u4e09\u65b9\u8ba4\u8bc1\u672a\u901a\u8fc7",desc:"\u8ba4\u8bc1\u5931\u8d25,\u8bf7\u91cd\u65b0\u8ba4\u8bc1"},()=>{setTimeout(()=>{this.handleLoginUrl()},1e3)}):e.status_code&&200===e.status_code?this.setState({resultState:"success",title:"\u7b2c\u4e09\u65b9\u8ba4\u8bc1\u901a\u8fc7",desc:""},()=>{e.bean&&e.bean.token&&p.default.set("token",e.bean.token),this.handleSuccess()}):this.handleLoginUrl()}else this.handleLoginUrl()},handleError:e=>{this.handleError(e)}}),null;g.default.removeCookie(),s({type:"user/fetchThirdCertification",payload:{code:e,service_id:t,domain:window.location.host},callback:e=>{if(e){var t=e.response_data&&e.response_data.status;if(!t||400!==t&&401!==t&&404!==t)if(200===e.status_code){var r=e.bean;if(r&&r.token)return p.default.set("token",r.token),this.handleSuccess(),null;r&&r.result&&(r.result.is_authenticated?s(u.routerRedux.push("/user/third/login?code=".concat(r.result.code,"&service_id=").concat(r.result.service_id,"&oauth_user_id=").concat(r.result.oauth_user_id,"&oauth_type=").concat(r.result.oauth_type))):s(u.routerRedux.push("/user/third/register?code=".concat(r.result.code,"&service_id=").concat(r.result.service_id,"&oauth_user_id=").concat(r.result.oauth_user_id,"&oauth_type=").concat(r.result.oauth_type))))}else this.handleLoginUrl();else this.setState({resultState:"error",title:"\u7b2c\u4e09\u65b9\u8ba4\u8bc1\u672a\u901a\u8fc7",desc:e.msg_show||"\u672a\u6210\u529f\u83b7\u53d6access_token,\u8bf7\u91cd\u65b0\u8ba4\u8bc1\u3002"},()=>{setTimeout(()=>{this.handleLoginUrl()},1e3)})}else this.handleLoginUrl()},handleError:e=>{this.handleError(e)}})}else g.default.removeCookie(),s(u.routerRedux.replace(v))}render(){var e=this.state,t=e.resultState,s=e.title,r=e.desc;return c.default.createElement(h.default,{type:t,title:s,description:r,style:{marginTop:"20%",marginBottom:16}})}},i=n))||i);t.default=m}}]);
>>>>>>> 5a2d228cf1d7cb5d08c91e445d88c202fdea2011:www/static/dists/p__User__Third.d25dfbf4.async.js
