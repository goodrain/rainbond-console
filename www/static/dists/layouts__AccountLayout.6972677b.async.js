(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"qzb/":function(e,t,r){"use strict";var a=r("tAuX"),n=r("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("B9cy");var l,i=n(r("Ol7k")),s=n(r("TSYQ")),d=r("MuoO"),o=r("7DNP"),c=r("4zCG"),u=r("s4NR"),p=a(r("q1tI")),f=r("E6Dt"),h=n(r("ZFw/")),m=n(r("W2Kv")),E=n(r("NtFa")),v=n(r("h3zL")),g=n(r("xqX8")),b=n(r("IamK")),y=n(r("HZnN")),x=n(r("mWxT")),C=n(r("R1Dz")),w=i.default.Content;(0,c.enquireScreen)(e=>{l=e});class L extends p.PureComponent{constructor(e){super(e),this.getEnterpriseList=(()=>{var e=this.props.dispatch;e({type:"user/fetchCurrent"}),e({type:"global/fetchEnterpriseList",callback:e=>{e&&200===e.status_code&&this.setState({enterpriseList:e.list,ready:!0},()=>{this.fetchEnterpriseInfo()})}})}),this.handleMenuCollapse=(e=>{var t=this.props.dispatch;t({type:"global/changeLayoutCollapsed",payload:e})}),this.fetchEnterpriseInfo=(()=>{var e=this.props,t=e.dispatch,r=e.currentUser;r&&r.enterprise_id&&t({type:"global/fetchEnterpriseInfo",payload:{enterprise_id:r.enterprise_id}})}),this.fetchEnterpriseService=(e=>{var t=this.props.dispatch;t({type:"order/fetchEnterpriseService",payload:{enterprise_id:e}})}),this.state={ready:!1,isMobiles:l,enterpriseList:[]}}componentDidMount(){this.getEnterpriseList()}getContext(){var e=this.props.location;return{location:e}}render(){var e=this.props,t=e.children,r=e.currentUser,a=e.rainbondInfo,n=e.collapsed,l=e.enterprise,d=e.location,c=this.state,L=c.enterpriseList,M=c.isMobiles,_=c.ready,W=x.default.fetchLogo(a,l)||m.default;if(!_||!l)return p.default.createElement(g.default,null);var I=(0,u.stringify)({redirect:window.location.href});if(!r||!a||0===L.length)return p.default.createElement(o.Redirect,{to:"/user/login?".concat(I)});var k={"screen-xs":{maxWidth:575},"screen-sm":{minWidth:576,maxWidth:767},"screen-md":{minWidth:768,maxWidth:991},"screen-lg":{minWidth:992,maxWidth:1199},"screen-xl":{minWidth:1200}},N="calc(100% -48px)",S=()=>{return p.default.createElement("div",{className:v.default.enterprise},p.default.createElement(o.Link,{to:"/enterprise/".concat(r.enterprise_id,"/index")},l&&l.enterprise_alias))},U=()=>{return p.default.createElement(i.default,null,p.default.createElement(b.default,{currentEnterprise:r,enterpriseList:L,currentUser:r,logo:W,Authorized:y.default,collapsed:n,location:d,isMobile:M,onCollapse:this.handleMenuCollapse}),p.default.createElement(i.default,null,p.default.createElement(E.default,{logo:W,isPubCloud:a&&a.is_public&&a.is_public.enable,currentUser:r,collapsed:n,onCollapse:this.handleMenuCollapse,isMobile:M,customHeader:S}),p.default.createElement(w,{key:"sdfds",style:{height:"calc(100vh - 64px)",overflow:"auto",width:N}},p.default.createElement("div",{style:{margin:"24px 24px 0"}},p.default.createElement(y.default,{logined:!0,authority:["admin","user"],noMatch:p.default.createElement(o.Redirect,{to:"/user/login"})},t)))))},q=x.default.fetchSiteTitle(a);return p.default.createElement(p.Fragment,null,p.default.createElement(h.default,{title:q},p.default.createElement(f.ContainerQuery,{query:k},e=>p.default.createElement(C.default.Provider,{value:this.getContext()},p.default.createElement("div",{className:(0,s.default)(e)},U())))))}}var M=(0,d.connect)(e=>{var t=e.user,r=e.global;return{currentUser:t.currentUser,rainbondInfo:r.rainbondInfo,collapsed:r.collapsed,enterprise:r.enterprise}})(L);t.default=M}}]);