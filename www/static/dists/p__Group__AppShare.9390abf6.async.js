(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[49],{C5h0:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var r=l(a("wCAj"));a("+L6B");var i=l(a("2/Rp"));a("IzEo");var s=l(a("bx4M"));a("O3gP");var n=l(a("lrIw")),d=l(a("jehZ"));a("Pwec");var o=l(a("CtXQ")),p=l(a("p0pE"));a("miYZ");var c=l(a("tsqr"));a("/xke");var u=l(a("TeRw"));a("giR+");var h=l(a("fyUT"));a("14J3");var m=l(a("BMrR"));a("jCWc");var f=l(a("kPKH"));a("sRBo");var _=l(a("kaz8"));a("/zsF");var v=l(a("PArb"));a("2qtc");var g=l(a("kLXV"));a("OaEy");var b=l(a("2fM7"));a("5NDa");var E=l(a("5rEg"));a("y8nQ");var y=l(a("Vl3Y"));a("Znn+");var C,k,S,x=l(a("ZTPi")),w=a("MuoO"),M=a("7DNP"),A=q(a("q1tI")),I=l(a("qula")),D=l(a("WnAZ")),V=l(a("XZXw")),R=a("vSx2"),O=l(a("8+Sn")),N=l(a("QDog")),P=l(a("/EMh")),L=l(a("a06M")),T=l(a("pLWA"));function F(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(F=function(e){return e?a:t})(e)}function q(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=F(t);if(a&&a.has(e))return a.get(e);var l={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(l,i,s):l[i]=e[i]}return l.default=e,a&&a.set(e,l),l}var B=x.default.TabPane,j=y.default.Item,z=E.default.TextArea,U=b.default.Option,W=g.default.confirm,Z={labelCol:{span:8},wrapperCol:{span:16}},G=O.default.get("token"),X={};G&&(X.Authorization="GRJWT ".concat(G));class J extends A.PureComponent{constructor(){super(...arguments),this.state={checked:!0},this.getValue=(e=>{this.props.form.validateFields((t,a)=>{t||e(a)})}),this.handleCheckChange=((e,t,a)=>{var l={},r=t;l[e]="**None**",a.target.checked?this.props.form.setFieldsValue(l):(l[e]=r,this.props.form.setFieldsValue(l))}),this.handleIsChange=((e,t)=>{this.props.form.setFieldsValue({[e]:t.target.checked})}),this.renderConnectInfo=(()=>{var e=this.props,t=e.app,a=void 0===t?{}:t,l=e.form,r=e.ID,i=l.getFieldDecorator;return a.service_connect_info_map_list&&a.service_connect_info_map_list.length?A.default.createElement("div",{style:{marginBottom:24}},A.default.createElement("h4",{style:{marginBottom:8}},"\u8fde\u63a5\u4fe1\u606f"),A.default.createElement(v.default,null),A.default.createElement(m.default,null,a.service_connect_info_map_list.map((e,t)=>A.default.createElement(f.default,{key:"connection_".concat(t),span:8},A.default.createElement(j,{label:e.attr_name,style:{padding:16}},i("connect||".concat(e.attr_name,"||attr_value||").concat(r),{initialValue:e.attr_value,rules:[{required:!1}]})(A.default.createElement(E.default,{placeholder:e.attr_value})),i("connect||".concat(e.attr_name,"||random||").concat(r),{valuePropName:"checked",initialValue:"**None**"===e.attr_value})(A.default.createElement(_.default,{onChange:this.handleCheckChange.bind(this,"connect||".concat(e.attr_name,"||attr_value||").concat(r),e.attr_value)},"\u751f\u6210\u968f\u673a\u503c"))))))):null}),this.renderEvn=(()=>{var e=this.props,t=e.app,a=void 0===t?{}:t,l=e.form,r=e.ID,i=l.getFieldDecorator;return a.service_env_map_list&&a.service_env_map_list.length?A.default.createElement("div",{style:{marginBottom:24}},A.default.createElement("h4",{style:{marginBottom:8}},"\u73af\u5883\u53d8\u91cf"),A.default.createElement(v.default,null),A.default.createElement(m.default,null,a.service_env_map_list.map(e=>{var t=e.attr_name,a=e.attr_value;return A.default.createElement(f.default,{span:8},A.default.createElement(j,{label:t,style:{padding:16}},i("env||".concat(t,"||").concat(r),{initialValue:a,rules:[{required:!1,message:"\u4e0d\u80fd\u4e3a\u7a7a"}]})(A.default.createElement(E.default,null))))}))):null}),this.renderExtend=(()=>{var e=this.props,t=e.app,a=void 0===t?{}:t,l=e.ID,r=void 0===l?"extend":l,i=e.form,s=i.getFieldDecorator,n=i.getFieldValue,d={padding:16};if(a.extend_method_map){var o=n("".concat(r,"||step_node"));return A.default.createElement("div",{style:{marginBottom:24}},A.default.createElement("h4",{style:{marginBottom:8}},"\u4f38\u7f29\u89c4\u5219"),A.default.createElement(v.default,null),A.default.createElement(m.default,null,A.default.createElement(f.default,{span:8},A.default.createElement(j,{label:"\u6700\u5c0f\u8282\u70b9(\u4e2a)",style:d},s("".concat(r,"||min_node"),{initialValue:a.extend_method_map.min_node,rules:[{required:!0,message:"\u8f93\u5165\u683c\u5f0f\u4e0d\u6b63\u786e"}]})(A.default.createElement(h.default,{style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u6700\u5c0f\u8282\u70b9",min:1,step:o||a.extend_method_map.step_node})))),A.default.createElement(f.default,{span:8},A.default.createElement(j,{label:"\u6700\u5927\u8282\u70b9(\u4e2a)",style:d},s("".concat(r,"||max_node"),{initialValue:a.extend_method_map.max_node,rules:[{required:!0,message:"\u8f93\u5165\u683c\u5f0f\u4e0d\u6b63\u786e"}]})(A.default.createElement(h.default,{style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u6700\u5927\u8282\u70b9",min:1,step:o||a.extend_method_map.step_node})))),A.default.createElement(f.default,{span:8},A.default.createElement(j,{label:"\u8282\u70b9\u6b65\u957f(\u4e2a)",style:d},s("".concat(r,"||step_node"),{initialValue:a.extend_method_map.step_node,rules:[{required:!0,message:"\u8f93\u5165\u683c\u5f0f\u4e0d\u6b63\u786e"}]})(A.default.createElement(h.default,{style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u8282\u70b9\u6b65\u957f",min:a.extend_method_map.min_node,max:a.extend_method_map.max_node})))),A.default.createElement(f.default,{span:8},A.default.createElement(j,{label:"\u521d\u59cb\u5185\u5b58(M)",style:d},s("".concat(r,"||init_memory"),{initialValue:a.extend_method_map.init_memory||0,rules:[{required:!0,message:"\u8f93\u5165\u683c\u5f0f\u4e0d\u6b63\u786e"}]})(A.default.createElement(h.default,{style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u521d\u59cb\u5185\u5b58",min:0,max:a.extend_method_map.max_memory,step:a.extend_method_map.step_memory})),A.default.createElement("div",{style:{color:"#999999",fontSize:"12px"}},"\u5185\u5b58\u5206\u914d\u989d0\u4e3a\u4e0d\u9650\u5236\u3002"))),A.default.createElement(f.default,{span:8},A.default.createElement(j,{label:"\u521d\u59cbCPU(m)",style:d},s("".concat(r,"||container_cpu"),{initialValue:a.extend_method_map.container_cpu||0,rules:[{required:!0,message:"\u8bf7\u8f93\u5165CPU"},{pattern:new RegExp(/^[0-9]\d*$/,"g"),message:"\u53ea\u5141\u8bb8\u8f93\u5165\u6574\u6570"}]})(A.default.createElement(h.default,{style:{width:"100%"},min:0,placeholder:"\u8bf7\u8f93\u5165CPU"})),A.default.createElement("div",{style:{color:"#999999",fontSize:"12px"}},"CPU\u5206\u914d\u989d0\u4e3a\u4e0d\u9650\u5236\uff0c1000m=1core\u3002")))))}return null})}componentDidMount(){this.props.getref&&this.props.getref(this)}render(){return A.default.createElement(A.Fragment,null,this.renderConnectInfo(),this.renderEvn(),this.renderExtend())}}var Y=(C=(0,w.connect)(e=>{var t=e.user,a=e.application,l=e.loading,r=e.enterprise,i=e.teamControl;return{currUser:t.currentUser,apps:a.apps,currentTeam:i.currentTeam,currentRegionName:i.currentRegionName,currentEnterprise:r.currentEnterprise,groupDetail:a.groupDetail||{},loading:l}}),k=y.default.create(),C(S=k(S=class extends A.PureComponent{constructor(e){super(e),this.onCancels=(()=>{this.setState({shareModal:null,dep_service_name:[]})}),this.getBase64=(e=>{return new Promise((t,a)=>{var l=new FileReader;l.readAsDataURL(e),l.onload=(()=>t(l.result)),l.onerror=(e=>a(e))})}),this.fetchRecord=(()=>{this.setState({loading:!0});var e=this.props.match.params,t=e.teamName,a=e.appID,l=e.shareId,r=this.props.dispatch;r({type:"application/fetchShareRecord",payload:{team_name:t,app_id:a,record_id:l},callback:e=>{e&&e.bean&&200===e.status_code&&this.setState({record:e.bean,loading:!1},()=>{this.fetchModels()})}})}),this.fetchModels=((e,t)=>{var a=this.state.record,l=a&&a.scope,r=a&&a.scope_target,i=this.props.match.params,s=i.teamName,n=i.appID,d=this.props,o=d.dispatch,p=d.form,c=p.setFieldsValue,u={team_name:s,app_id:n};"goodrain"===l&&r?(u.scope="goodrain",u.market_id=r.store_id):u.scope="local",this.setState({loadingModels:!0}),o({type:"enterprise/fetchShareModels",payload:u,callback:a=>{a&&200===a.status_code&&this.setState({models:a.list,model:a.bean,loadingModels:!1},()=>{if(a.list.length>0){if(t){var l=a.list.filter(e=>{return e.app_id===t.app_id});return l&&l.length>0&&(c({describe:l[0].app_describe||""}),this.setState({model:l[0]})),null}e&&c({app_id:a.list[0].app_id}),"{}"===JSON.stringify(a.bean)?this.changeCurrentModel(a.list[0].app_id):this.changeCurrentModel(e?a.list[0].app_id:a.bean&&a.bean.app_id,e?"":a.bean&&a.bean.version,e)}})}})}),this.fetchAppDetail=(()=>{var e=this.props.dispatch,t=this.props.match.params,a=t.teamName,l=t.regionName,r=t.appID;this.setState({loadingDetail:!0}),e({type:"application/fetchGroupDetail",payload:{team_name:a,region_name:l,group_id:r},callback:e=>{e&&200===e.status_code&&this.setState({appDetail:e.bean,loadingDetail:!1})},handleError:e=>{e&&404===e.code&&this.props.dispatch(M.routerRedux.push("/team/".concat(N.default.getCurrTeamName(),"/region/").concat(N.default.getCurrRegionName(),"/apps")))}})}),this.handleSubmitConditions=(()=>{var e=this.state,t=e.record,a=e.versionInfo,l=this.props.form;l.validateFieldsAndScroll({scroll:{offsetTop:80}},(e,l)=>{e||("goodrain"!==t.scope&&a&&l.version===a.version&&a.dev_status?W({title:"\u5f53\u524d\u53d1\u5e03\u7248\u672c\u662fRelease\u72b6\u6001\uff0c\u53d1\u5e03\u6210\u529f\u540e\u8be5\u7248\u672c\u5c06\u53d6\u6d88Release\u72b6\u6001",content:"",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:()=>{this.handleSubmit()}}):this.handleSubmit())})}),this.handleSubmit=(()=>{var e=this.props,t=e.dispatch,a=e.form,l=this.state,r=l.record,i=l.sharearrs,s=l.share_service_list,n=(l.isAppPlugin,{});a.validateFields((e,a)=>{if(!e){this.setState({submitLoading:!0});var l={share_id:r.record_id,app_model_id:a.app_id,describe:a.describe,version:a.version,version_alias:a.version_alias,is_plugin:a.is_plugin};"goodrain"===r.scope&&(l.scope_target=r.scope_target,l.scope=r.scope,l.market_id=r.scope_target&&r.scope_target.store_id,l.template_type="RAM");var d=s;s.map((e,t)=>{var l=e.extend_method_map,r=e.service_id;return l&&Object.keys(l).forEach(function(e){a["".concat(r,"||").concat(e)]&&(d[t].extend_method_map[e]=a["".concat(r,"||").concat(e)])}),e});var o=[],p=[];i.map(e=>{return d.map(t=>{return e===t.service_share_uuid&&(o.push(t),t.dep_service_map_list&&t.dep_service_map_list.length>0&&t.dep_service_map_list.map(e=>{p.push(e.dep_service_key)})),e}),e});var c=this.com;c.map(e=>{var t=e.props.tab,a=null;e.props.form.validateFields((e,t)=>{e||(a=t)}),d.map(e=>{var l=e.service_id;if(e.service_alias==t){var r=function(t){var r=[];r=t.split("||");var i=r&&r.length>0&&r[0];if(i){var s="connect"===i,n="env"===i;s&&"random"!=r[2]&&e.service_connect_info_map_list.map(e=>{s&&"random"!=r[2]&&e.attr_name==r[1]&&l===r[3]&&(e[r[2]]=a[t],e.is_change=!0)}),n&&e.service_env_map_list.map(e=>{var i=e.attr_name;i===r[1]&&l===r[2]&&n&&(e.attr_value=a[t],e.is_change=!0)}),"extend"===i&&(e.extend_method_map[r[1]]=a[t])}};for(var i in a)r(i)}})}),n.app_version_info=l,n.share_service_list=o,n.share_plugin_list=this.state.plugin_list;var h=N.default.getCurrTeamName(),m=this.props.match.params,f=m.appID,_=m.shareId;t({type:"application/subShareInfo",payload:{team_name:h,share_id:_,use_force:!0,new_info:n},callback:e=>{this.setState({submitLoading:!1}),e&&t(M.routerRedux.push("/team/".concat(N.default.getCurrTeamName(),"/region/").concat(N.default.getCurrRegionName(),"/apps/").concat(f,"/share/").concat(_,"/two?isAppPlugin=").concat(l.is_plugin)))},handleError:e=>{this.setState({submitLoading:!1});var t=e&&e.data,a=t&&t.msg_show;if(t&&t.code&&10501===t.code)return u.default.warning({message:"\u63d0\u793a",description:a}),this.setState({isShare:"true"}),null;u.default.warning({message:"\u8bf7\u6c42\u9519\u8bef",description:a})}})}})}),this.handleGiveup=(()=>{var e=this.props.match.params.appID,t=this.props.dispatch;t({type:"application/giveupShare",payload:{team_name:N.default.getCurrTeamName(),share_id:this.props.match.params.shareId},callback:()=>{t(M.routerRedux.push("/team/".concat(N.default.getCurrTeamName(),"/region/").concat(N.default.getCurrRegionName(),"/apps/").concat(e)))}})}),this.handleLogoChange=(e=>{var t=e.fileList;this.setState({fileList:t})}),this.handleLogoRemove=(()=>{this.setState({fileList:[]})}),this.save=(e=>{this.com.push(e)}),this.tabClick=(e=>{this.setState({tabk:e})}),this.showCreateAppModel=(()=>{this.setState({showCreateAppModel:!0})}),this.hideCreateAppModel=(()=>{this.setState({showCreateAppModel:!1})}),this.handleCreateAppModel=(()=>{u.default.success({message:"\u521b\u5efa\u6210\u529f"}),this.fetchModels(!0),this.hideCreateAppModel()}),this.handleCancel=(()=>this.setState({previewVisible:!1})),this.changeCurrentVersion=(e=>{var t=this.state.model;t&&t.versions&&t.versions.length>0&&t.versions.map(t=>{e===t.version&&this.handleSetFieldsValue(t)})}),this.changeCurrentModel=((e,t,a)=>{var l=this.state.models;l&&l.length>0&&l.map(l=>{var r=l.app_id,i=l.versions;return e===r&&this.setState({model:l,versions:i},()=>{if(i&&i.length>0){var e=i[0];t&&i.map(a=>{var r=a.version;return r===t&&(e=a),l}),this.handleSetFieldsValue(e,a)}else this.handleSetFieldsValue(l,a)}),l})}),this.handleSetFieldsValue=((e,t)=>{var a=this.props.form.setFieldsValue;this.setState({versionInfo:e}),a({version:t?"0.1":e?e.version:""}),a({version_alias:e?e.version_alias:""}),a({describe:e?e.describe||e.app_describe:""})}),this.handleEditorAppModel=(e=>{u.default.success({message:"\u7f16\u8f91\u6210\u529f"}),this.fetchModels(!1,e),this.hideEditorAppModel()}),this.showEditorAppModel=(e=>{var t=this.state.models,a=t.filter(t=>{return t.app_id===e});a&&a.length>0&&this.setState({appModelInfo:a[0],editorAppModel:!0})}),this.hideEditorAppModel=(()=>{this.setState({editorAppModel:!1,appModelInfo:!1})}),this.checkVersion=((e,t,a)=>{""!==t&&t||a("\u7248\u672c\u4e0d\u80fd\u4e3a\u7a7a, \u8bf7\u9009\u62e9\u6216\u6dfb\u52a0\u7248\u672c"),!t||/^[0-9]+(\.[0-9]+){1,2}$/.test(t)?a():a("\u53ea\u5141\u8bb8\u8f93\u5165\u6570\u5b57\u3001\u7248\u672c\u683c\u5f0f:1.0\u62161.0.0")}),this.removeComponent=(e=>{var t=this.state.share_service_list,a=[];1!==t.length?(t.map(t=>{return t.dep_service_map_list.map(l=>{return l.dep_service_key===e&&a.push(t.service_cname),l}),t}),a.length>0?this.setState({del_component_share_key:e,dep_service_name:a,shareModal:!0}):this.removeComponentReal(e)):c.default.info("\u8bf7\u81f3\u5c11\u53d1\u5e03\u4e00\u4e2a\u7ec4\u4ef6")}),this.removeComponentReal=(e=>{var t=this.state,a=t.share_service_list,l=t.tabk,r=a.filter(t=>t.service_share_uuid!==e);l!==e?this.setState({share_service_list:r},()=>{this.update_publish_plugins()}):this.setState({share_service_list:r,tabk:r.length>0&&r[0].service_share_uuid},()=>{this.update_publish_plugins()})}),this.update_publish_plugins=(()=>{var e=this.state,t=e.share_service_list,a=e.info,l=[];if(t.map(e=>{return e.service_related_plugin_config&&e.service_related_plugin_config.map(e=>l.push(e.plugin_id)),e}),a.share_plugin_list){var r=a.share_plugin_list.filter(e=>l.indexOf(e.plugin_id)>-1);this.setState({plugin_list:r})}}),this.updateSelectComponents=(e=>{var t=this.state,a=t.info,l=t.tabk,r=a.share_service_list.filter(t=>e.indexOf(t.service_share_uuid)>-1);e.indexOf(l)>-1?this.setState({batchEditShow:!1,share_service_list:r},()=>{this.update_publish_plugins()}):this.setState({batchEditShow:!1,share_service_list:r,tabk:r.length>0&&r[0].service_share_uuid},()=>{this.update_publish_plugins()})}),this.state={previewVisible:!1,previewImage:"",toDelete:!1,recordShare:!1,checkShare:!0,ShareStep:0,ID:0,info:null,selectedApp:"",service:null,tabk:"",fileList:[],shareList:[],sharearrs:[],shareModal:null,isShare:"false",service_cname:"",dep_service_name:[],share_service_list:[],ShareTypeShow:!1,scopeValue:"goodrain:private",appDetail:{},record:{},model:{},submitLoading:!1,loadingModels:!0,models:[],versions:[],versionInfo:!1,editorAppModel:!1,appModelInfo:!1,batchEditShow:!1,selectComponentID:[],allSelect:!1,isAppPlugin:null},this.com=[],this.share_group_info=null}componentDidMount(){this.fetchAppDetail(),this.fetchRecord(),this.getShareInfo()}getParams(){return{groupId:this.props.match.params.appID,shareId:this.props.match.params.shareId}}getShareInfo(){var e=this.props.dispatch,t=this.getParams();e({type:"application/getShareInfo",payload:(0,p.default)({team_name:N.default.getCurrTeamName()},t),callback:e=>{var t="";if(e&&(e.bean.share_service_list[0]&&(t=e.bean.share_service_list[0].service_alias),this.setState({info:e.bean,plugin_list:e.bean.share_plugin_list,selectedApp:t,tabk:e.bean.share_service_list[0].service_share_uuid,share_service_list:e.bean.share_service_list}),e.bean.share_service_list&&e.bean.share_service_list.length>0)){var a=e.bean.share_service_list.map(e=>e.service_share_uuid);this.setState({shareList:a,sharearrs:a})}},handleError:e=>{e&&404===e.status&&this.props.dispatch(M.routerRedux.push("/team/".concat(N.default.getCurrTeamName(),"/region/").concat(N.default.getCurrRegionName(),"/exception/404")))}})}render(){var e=this.state,t=e.info,a=e.tabk,l=e.share_service_list,p=e.plugin_list;if(!t)return null;var c=l||[],u=p||[],h=this.props,C=h.loading,k=h.form,S=h.currentEnterprise,w=h.currentTeam,M=h.currentRegionName,O=k.getFieldDecorator,N=k.getFieldValue,F=this.state,q=F.shareModal,j=F.dep_service_name,W=F.models,G=F.appDetail,X=F.showCreateAppModel,Y=F.editorAppModel,Q=F.model,H=F.record,K=F.versionInfo,$=F.versions,ee=F.submitLoading,te=F.appModelInfo,ae=F.batchEditShow,le=N("app_id"),re=[];re=(0,R.createApp)((0,R.createTeam)((0,R.createEnterprise)(re,S),w,M),w,M,{appName:G.group_name,appID:G.group_id}),re.push({title:"\u53d1\u5e03\u8bb0\u5f55\u5217\u8868",href:"/team/".concat(w.team_name,"/region/").concat(M,"/apps/").concat(G.group_id,"/publish")}),H&&"goodrain"===H.scope?re.push({title:"\u53d1\u5e03\u5230\u4e91\u5e94\u7528\u5546\u5e97"}):re.push({title:"\u53d1\u5e03\u5230\u7ec4\u4ef6\u5e93"});var ie=H.scope_target&&H.scope_target.store_id,se=H.scope_target&&H.scope_target.store_version;return A.default.createElement(V.default,{breadcrumbList:re},A.default.createElement("div",null,A.default.createElement(s.default,{style:{marginBottom:24},title:"\u5e94\u7528\u6a21\u7248\u53ca\u53d1\u5e03\u7248\u672c\u8bbe\u7f6e",bordered:!1,bodyStyle:{padding:0}},A.default.createElement("div",{style:{padding:"24px"}},A.default.createElement(m.default,{gutter:24},A.default.createElement(f.default,{span:"12"},A.default.createElement(y.default.Item,(0,d.default)({},Z,{label:"\u5e94\u7528\u6a21\u7248"}),O("app_id",{initialValue:Q.app_id,rules:[{required:!0,message:"\u5e94\u7528\u6a21\u7248\u9009\u62e9\u662f\u5fc5\u987b\u7684"}]})(A.default.createElement(b.default,{getPopupContainer:e=>e.parentNode,style:{width:280},onChange:this.changeCurrentModel,placeholder:"\u9009\u62e9\u53d1\u5e03\u7684\u5e94\u7528\u6a21\u7248",dropdownRender:e=>A.default.createElement("div",null,e,A.default.createElement(v.default,{style:{margin:"4px 0"}}),A.default.createElement("div",{style:{padding:"4px 8px",cursor:"pointer",textAlign:"center"},onMouseDown:e=>e.preventDefault(),onClick:this.showCreateAppModel},A.default.createElement(o.default,{type:"plus"})," \u65b0\u5efa\u5e94\u7528\u6a21\u7248"))},W.map(e=>A.default.createElement(U,{key:e.app_id},e.app_name)))),le&&W&&W.length>0&&!ie&&A.default.createElement("a",{style:{marginLeft:"10px"},onClick:()=>{this.showEditorAppModel(le)}},"\u7f16\u8f91\u5e94\u7528\u6a21\u7248"))),A.default.createElement(f.default,{span:"12"},A.default.createElement(y.default.Item,(0,d.default)({},Z,{label:"\u7248\u672c\u53f7"}),O("version",{initialValue:K&&K.version||"",rules:[{required:!0,validator:this.checkVersion}]})(A.default.createElement(n.default,{style:{width:280},onChange:this.changeCurrentVersion,placeholder:"\u7248\u672c\u53f7\u9ed8\u8ba4\u4e3a\u9009\u62e9\u6a21\u7248\u7684\u4e0a\u6b21\u53d1\u5e03\u7248\u672c"},$&&$.length>0&&$.map((e,t)=>{var a=e.version;return A.default.createElement(n.default.Option,{key:"version".concat(t),value:a},a)}))))),A.default.createElement(f.default,{span:"12"},A.default.createElement(y.default.Item,(0,d.default)({},Z,{label:"\u7248\u672c\u522b\u540d"}),O("version_alias",{initialValue:K&&K.version_alias||"",rules:[{max:64,message:"\u6700\u5927\u957f\u5ea664\u4f4d"}]})(A.default.createElement(E.default,{style:{width:280},placeholder:"\u8bbe\u7f6e\u7248\u672c\u522b\u540d\uff0c\u6bd4\u5982\u9ad8\u7ea7\u7248"}))),A.default.createElement(y.default.Item,(0,d.default)({},Z,{label:"\u4f5c\u4e3a\u63d2\u4ef6"}),O("is_plugin",{initialValue:K&&K.is_plugin||!1})(u.length>0?A.default.createElement(_.default,null):A.default.createElement(_.default,{disabled:!0})))),A.default.createElement(f.default,{span:"12",style:{height:"104px"}},A.default.createElement(y.default.Item,(0,d.default)({},Z,{label:"\u7248\u672c\u8bf4\u660e"}),O("describe",{initialValue:K&&(K.describe||K.app_describe)||"",rules:[{max:255,message:"\u6700\u5927\u957f\u5ea6255\u4f4d"}]})(A.default.createElement(z,{placeholder:"\u8bf7\u8f93\u5165\u7248\u672c\u8bf4\u660e",style:{height:"70px"}}))))))),A.default.createElement(s.default,{style:{marginBottom:24},title:"\u53d1\u5e03\u7ec4\u4ef6\u6a21\u578b\u914d\u7f6e",bordered:!1,bodyStyle:{padding:0}},A.default.createElement("div",{style:{padding:"24px"}},A.default.createElement("div",{className:T.default.mytab},A.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"16px",lineHeight:"32px"}},A.default.createElement("h4",{className:T.default.required,style:{marginBottom:0}},"\u7f16\u8f91\u53d1\u5e03\u7ec4\u4ef6\u4fe1\u606f"),A.default.createElement(i.default,{style:{float:"right"},onClick:()=>{this.setState({batchEditShow:!0})}},"\u6279\u91cf\u7f16\u8f91")),A.default.createElement("div",{className:T.default.mytabtit,id:"mytabtit"},A.default.createElement(x.default,{type:"editable-card",hideAdd:!0,activeKey:a,onChange:this.tabClick,onEdit:(e,t)=>{"remove"===t&&this.removeComponent(e)}},c.map(e=>{var t=e.service_share_uuid;return A.default.createElement(B,{key:t,tab:A.default.createElement("span",{className:T.default.cont},A.default.createElement("a",{tab:e.service_cname,onClick:()=>{this.tabClick(t)}},e.service_cname))},A.default.createElement(J,{key:t,form:k,app:e,getref:this.save,tab:e.service_alias,ID:e.service_id}))})))))),A.default.createElement(s.default,{style:{marginBottom:128},title:"\u53d1\u5e03\u63d2\u4ef6\u6a21\u578b\u4fe1\u606f",bordered:!1},A.default.createElement(r.default,{size:"middle",dataSource:u,columns:[{title:"\u63d2\u4ef6\u540d",dataIndex:"plugin_alias"},{title:"\u5206\u7c7b",dataIndex:"category",render:e=>{return P.default.getCategoryCN(e)}},{title:"\u7248\u672c",dataIndex:"build_version"}]})),q&&A.default.createElement(g.default,{title:"\u4f9d\u8d56\u68c0\u6d4b",visible:q,onOk:()=>{this.removeComponentReal(this.state.del_component_share_key),this.onCancels()},onCancel:this.onCancels,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},A.default.createElement("div",null,"\u8be5\u7ec4\u4ef6\u88ab\u9700\u8981\u53d1\u5e03\u7684",j&&j.length>0&&j.map((e,t)=>{return A.default.createElement("span",{style:{marginLeft:"5px",color:"#4d73b1"},key:t},e)}),"\u7ec4\u4ef6\u4f9d\u8d56, \u786e\u8ba4\u8981\u53d6\u6d88\u8be5\u7ec4\u4ef6\u7684\u53d1\u5e03\u5417\uff1f")),ae&&A.default.createElement(L.default,{allcomponents:t.share_service_list,components:c,onCancel:()=>{this.setState({batchEditShow:!1})},onOk:this.updateSelectComponents}),X&&A.default.createElement(I.default,{title:"\u521b\u5efa\u5e94\u7528\u6a21\u7248",appName:G&&G.group_name,eid:S.enterprise_id,onOk:this.handleCreateAppModel,defaultScope:"team",marketId:ie,marketVersion:se,onCancel:this.hideCreateAppModel}),Y&&A.default.createElement(I.default,{title:"\u7f16\u8f91\u5e94\u7528\u6a21\u7248",team_name:w.team_name,appInfo:te,eid:S.enterprise_id,onOk:this.handleEditorAppModel,defaultScope:"team",onCancel:this.hideEditorAppModel}),A.default.createElement(D.default,null,A.default.createElement(i.default,{type:"primary",htmlType:"submit",loading:ee,onClick:this.handleSubmitConditions},"\u63d0\u4ea4"),A.default.createElement(i.default,{disabled:C.effects["application/giveupShare"],onClick:this.handleGiveup},"\u653e\u5f03\u53d1\u5e03"))))}})||S)||S);t.default=Y},a06M:function(e,t,a){"use strict";var l=a("tAuX"),r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=l(a("q1tI"));a("2qtc");var s=r(a("kLXV"));a("+L6B");var n=r(a("2/Rp"));a("/zsF");var d=r(a("PArb"));a("sRBo");var o=r(a("kaz8"));a("miYZ");var p=r(a("tsqr"));a("y8nQ");var c,u,h,m=r(a("Vl3Y")),f=(c=m.default.create(),c((h=class extends i.PureComponent{constructor(e){super(e),this.setOptions=(()=>{var e=this.props,t=e.components,a=e.allcomponents;if(t){var l=t.map(e=>e.service_share_uuid),r=a.map(e=>e.service_share_uuid);this.setState({allOptions:r,checkedList:l,checkAll:r.length===l.length,indeterminate:!!l.length&&l.length<r.length})}}),this.batchEdit=(()=>{var e=this.state.checkedList;if(e.length<1)p.default.info("\u8bf7\u81f3\u5c11\u53d1\u5e03\u4e00\u4e2a\u7ec4\u4ef6");else{var t=this.props.onOk;t&&t(e)}}),this.onChange=(e=>{if(e.length<1)p.default.info("\u8bf7\u81f3\u5c11\u4fdd\u7559\u4e00\u4e2a\u7ec4\u4ef6");else{var t=this.state.allOptions;this.setState({checkedList:e,indeterminate:!!e.length&&e.length<t.length,checkAll:e.length===t.length})}}),this.onCheckAllChange=(e=>{var t=this.state.allOptions;this.setState({checkedList:e.target.checked?t:[],indeterminate:!1,checkAll:e.target.checked})}),this.state={indeterminate:!0,checkAll:!1,checkedList:[],allOptions:[]}}componentDidMount(){this.setOptions()}render(){var e=this.state,t=e.indeterminate,a=e.checkAll,l=e.checkedList,r=this.props,p=r.allcomponents,c=r.onCancel;return i.default.createElement(s.default,{title:"\u6279\u91cf\u7f16\u8f91\u5f85\u53d1\u5e03\u7ec4\u4ef6",visible:!0,maskClosable:!1,onOk:this.batchEdit,onCancel:c,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},i.default.createElement(o.default,{indeterminate:t,onChange:this.onCheckAllChange,checked:a},"\u9009\u62e9\u5168\u90e8"),i.default.createElement(d.default,null),i.default.createElement(o.default.Group,{style:{width:"100%",display:"flex",flexFlow:"row wrap"},onChange:this.onChange,value:l},p.map(e=>{return i.default.createElement("div",{style:{padding:"8px",flex:"0 0 50%"}},i.default.createElement(n.default,{style:{width:"100%",textAlign:"left",overflow:"hidden",padding:0}},i.default.createElement(o.default,{checked:!0,value:e.service_share_uuid,style:{width:"100%",marginRight:"10px",padding:"5px 15px"}},e.service_cname)))})))}},u=h))||u),_=f;t.default=_},pLWA:function(e,t,a){e.exports={mytabtit:"mytabtit___3DE4w",cont:"cont___296Gw",required:"required___25zA8"}}}]);