(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[23],{EK8P:function(e,t,a){"use strict";var l=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var s,p,n,r=l(a("2/Rp")),o=a("MuoO"),d=a("7DNP"),h=i(a("q1tI")),c=l(a("vGHg")),m=l(a("q76B")),u=l(a("QDog")),f=l(a("n9hB")),g=l(a("hMqj")),D=(s=(0,o.connect)(e=>{var t=e.loading,a=e.teamControl;return{buildAppsLoading:t.effects["createApp/buildApps"],deleteAppLoading:t.effects["appControl/deleteApp"],currentTeamPermissionsInfo:a.currentTeamPermissionsInfo}},null,null,{withRef:!0}),s((n=class extends h.PureComponent{constructor(e){super(e),this.handlePermissions=(e=>{var t=this.props.currentTeamPermissionsInfo;return g.default.querySpecifiedPermissionsInfo(t,e)}),this.loadDetail=(()=>{var e=this.props.dispatch,t=this.fetchParameter(),a=t.team_name,l=t.app_alias;e({type:"appControl/fetchDetail",payload:{team_name:a,app_alias:l},callback:e=>{this.setState({appDetail:e})},handleError:e=>{var t=f.default.getCode(e);t&&404===t&&this.handleJump("exception/404")}})}),this.handleBuild=(()=>{var e=this.props.dispatch,t=this.fetchParameter(),a=t.team_name,l=t.app_alias;e({type:"createApp/buildApps",payload:{team_name:a,app_alias:l},callback:t=>{t&&(e({type:"global/fetchGroups",payload:{team_name:a}}),this.handleJump("components/".concat(l,"/overview")))}})}),this.handleDelete=(()=>{var e=this.props.dispatch,t=this.fetchParameter(),a=t.team_name,l=t.app_alias;e({type:"appControl/deleteApp",payload:{team_name:a,app_alias:l,is_force:!0},callback:()=>{e({type:"global/fetchGroups",payload:{team_name:a}}),this.handleJump("index")}})}),this.handleJump=(e=>{var t=this.props.dispatch,a=this.fetchParameter(),l=a.team_name,i=a.region_name;t(d.routerRedux.replace("/team/".concat(l,"/region/").concat(i,"/").concat(e)))}),this.showDelete=(()=>{this.setState({showDelete:!0})}),this.fetchParameter=(()=>{return{team_name:u.default.getCurrTeamName(),region_name:u.default.getCurrRegionName(),app_alias:this.getAppAlias()}}),this.state={appPermissions:this.handlePermissions("queryAppInfo"),appDetail:null}}componentDidMount(){this.loadDetail()}componentWillUnmount(){this.props.dispatch({type:"appControl/clearDetail"})}getAppAlias(){return this.props.match.params.appAlias}render(){var e=this.props,t=e.buildAppsLoading,a=e.deleteAppLoading,l=this.state,i=l.showDelete,s=l.appPermissions.isDelete,p=this.state.appDetail||{};return p.service?h.default.createElement("div",null,h.default.createElement("h2",{style:{textAlign:"center"}},"\u9ad8\u7ea7\u8bbe\u7f6e"),h.default.createElement("div",{style:{overflow:"hidden"}},h.default.createElement(c.default,{updateDetail:this.loadDetail,appDetail:p}),h.default.createElement("div",{style:{background:"#fff",padding:"20px",textAlign:"right",position:"fixed",bottom:0,left:0,right:0,zIndex:2,borderTop:"1px solid #e8e8e8"}},h.default.createElement(r.default,{loading:t,style:{marginRight:8},onClick:this.handleBuild,type:"primary"},"\u786e\u8ba4\u521b\u5efa"),s&&h.default.createElement(r.default,{onClick:this.showDelete,type:"default"},"\u653e\u5f03\u521b\u5efa")),i&&h.default.createElement(m.default,{loading:a,onOk:this.handleDelete,title:"\u653e\u5f03\u521b\u5efa",subDesc:"\u6b64\u64cd\u4f5c\u4e0d\u53ef\u6062\u590d",desc:"\u786e\u5b9a\u8981\u653e\u5f03\u521b\u5efa\u6b64\u5e94\u7528\u5417\uff1f",onCancel:()=>{this.setState({showDelete:!1})}}))):null}},p=n))||p);t.default=D}}]);