(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"/xIY":function(e,t,a){e.exports={conformDesc:"conformDesc___59w1s"}},"51Hh":function(e,t,a){"use strict";var s=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("lUTK");var l,i,n,o=s(a("BvKs")),d=r(a("q1tI")),c=a("MuoO"),u=s(a("3a4m")),m=a("LLXN"),h=s(a("XZXw")),p=s(a("2lxJ")),f=(s(a("mWxT")),s(a("vFwn"))),g=o.default.Item,v=(l=(0,c.connect)(e=>{var t=e.user,a=e.global;return{currentUser:t.currentUser,enterprise:a.enterprise}}),l((n=class extends d.Component{constructor(e){super(e),this.getmenu=(()=>{var e=this.state.menuMap;return Object.keys(e).map(t=>d.default.createElement(g,{key:t},e[t]))}),this.getRightTitle=(()=>{var e=this.state,t=e.selectKey,a=e.menuMap;return a[t]}),this.selectKey=(e=>{var t=e.key;u.default.push("/account/center/".concat(t)),this.setState({selectKey:t})});var t=e.match,a=e.location,s=(e.enterprise,e.currentUser,{});s.personal=d.default.createElement(m.FormattedMessage,{id:"app.settings.menuMap.personal",defaultMessage:"Personal"}),s.accesstoken=d.default.createElement(m.FormattedMessage,{id:"app.settings.menuMap.access-token",defaultMessage:"Access Token"}),s.img=d.default.createElement(m.FormattedMessage,{id:"app.settings.menuMap.img",defaultMessage:"Private Image Repository"}),s.binding=d.default.createElement(m.FormattedMessage,{id:"app.settings.menuMap.binding",defaultMessage:"Account Binding"});var r=a.pathname.replace("".concat(t.path,"/"),"");this.state={mode:"inline",menuMap:s,selectKey:s[r]?r:"personal"}}static getDerivedStateFromProps(e,t){var a=e.match,s=e.location,r=e.match.params.eid,l=a.path.replace(/:eid/g,r),i=s.pathname.replace("".concat(l,"/"),"");return i=t.menuMap[i]?i:"personal",i!==t.selectKey?{selectKey:i}:null}render(){var e=this.props.children,t=this.state,a=t.mode,s=t.selectKey;return d.default.createElement(d.default.Fragment,null,d.default.createElement(h.default,{title:(0,m.formatMessage)({id:"versionUpdata_6_1.center"}),content:(0,m.formatMessage)({id:"versionUpdata_6_1.center.content"}),titleSvg:p.default.getPageHeaderSvg("center",18)},d.default.createElement("div",{className:f.default.main},d.default.createElement("div",{className:f.default.leftmenu},d.default.createElement(o.default,{mode:a,selectedKeys:[s],onClick:this.selectKey},this.getmenu())),d.default.createElement("div",{className:f.default.right},e))))}},i=n))||i),b=v;t.default=b},FEcc:function(e,t,a){"use strict";var s=a("tAuX"),r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var l=r(a("wCAj")),i=s(a("q1tI")),n=a("LLXN");r(a("zcww")),r(a("hMqj")),r(a("QDog"));class o extends i.PureComponent{constructor(e){super(e),this.onPageChange=((e,t)=>{this.setState({page:e,pageSize:t})}),this.state={page:1,pageSize:10}}render(){var e=this.state,t=e.page,a=e.pageSize,s=this.props,r=s.list,o=(s.members,s.onDelete),d=s.onEditAction,c=(s.onMoveTeam,s.memberPermissions),u=c.isEdit,m=c.isDelete,h=c.isAccess,p=(s.team,{current:t,pageSize:a,total:r.length,onChange:this.onPageChange,showQuickJumper:!0,showSizeChanger:!0,showTotal:e=>"\u5171 ".concat(e," \u6761"),onShowSizeChange:this.onPageChange,hideOnSinglePage:r.length<=10}),f=[{title:(0,n.formatMessage)({id:"teamManage.tabs.image.table.imageAddress"}),dataIndex:"domain",key:"domain",align:"center"},{title:(0,n.formatMessage)({id:"teamManage.tabs.image.table.user"}),dataIndex:"username",key:"username",align:"center"},{title:(0,n.formatMessage)({id:"teamManage.tabs.image.table.password"}),dataIndex:"password",key:"password",align:"center",render:(e,t)=>{for(var a=e.length,s="",r=0;r<=a-1;r++)s+="*";return i.default.createElement("span",null,s)}},{title:h&&(u||m)?(0,n.formatMessage)({id:"teamManage.tabs.image.table.operate"}):"",dataIndex:"action",key:"action",align:"center",render:(e,t)=>{return i.default.createElement("div",null,u&&i.default.createElement("a",{style:{marginLeft:6},onClick:()=>{d(t)}},(0,n.formatMessage)({id:"teamManage.tabs.image.table.btn.edit"})),m&&i.default.createElement("a",{onClick:()=>{o(t)}},(0,n.formatMessage)({id:"teamManage.tabs.image.table.btn.delete"})))}}];return i.default.createElement(l.default,{rowKey:(e,t)=>t,pagination:p,dataSource:r,columns:f})}}var d=o;t.default=d},Nh26:function(e,t,a){"use strict";var s=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var l=s(a("bx4M"));a("g9YV");var i=s(a("wCAj"));a("+L6B");var n=s(a("2/Rp"));a("+BJd");var o=s(a("mr32"));a("/xke");var d=s(a("TeRw")),c=s(a("p0pE")),u=s(a("Y/ft"));a("2qtc");var m,h,p,f=s(a("kLXV")),g=a("MuoO"),v=r(a("q1tI")),b=a("LLXN"),_=s(a("tH/r")),M=s(a("t9D+")),E=s(a("mWxT")),k=f.default.confirm,y=(m=(0,g.connect)(e=>{var t=e.user,a=e.global,s=e.appControl;return{currUser:t.currentUser,rainbondInfo:a.rainbondInfo,enterprise:a.enterprise,appDetail:s.appDetail}}),m((p=class extends v.Component{constructor(e){var t;super(e),t=this,this.fetchOauthInfo=(()=>{var e=this.props,t=e.dispatch,a=e.currUser;this.setState({loading:!0}),t({type:"global/getOauthInfo",payload:{enterprise_id:a.enterprise_id,system:!1},callback:e=>{200===(null===e||void 0===e?void 0:e.status_code)&&this.setState({oauthTable:e.list||[],loading:!1})}})}),this.handleCreatOauth=(e=>{var t=e.oauth_type,a=e.redirect_domain,s=(0,u.default)(e,["oauth_type","redirect_domain"]),r={github:"https://github.com",aliyun:"https://oauth.aliyun.com",dingtalk:"https://oapi.dingtalk.com"},l=(0,c.default)({},s,{oauth_type:t.toLowerCase(),home_url:r[t.toLowerCase()]||e.home_url||"",redirect_uri:"".concat(a,"/console/oauth/redirect"),is_auto_login:!1,is_console:!0,system:!1});this.handelRequest(l)}),this.handelRequest=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,s=t.props,r=s.dispatch,l=s.currUser,i=t.state,n=i.oauthInfo,o=i.oauthTable,c=i.isOpen,u=[...o];e.eid=l.enterprise_id,e.service_id=n?n.service_id:null,e.enable=!a,o&&o.length>0&&o.map((t,a)=>{var s=t.service_id;u[a].is_console=!0,n&&s===e.service_id&&(u[a]=Object.assign(u[a],e))}),!n&&u.push(e),r({type:"global/creatOauth",payload:{enterprise_id:l.enterprise_id,arr:u},callback:e=>{e&&200===e.status_code&&(d.default.success({message:c?(0,b.formatMessage)({id:"notification.success.open"}):a?(0,b.formatMessage)({id:"notification.success.close"}):n?(0,b.formatMessage)({id:"notification.success.edit"}):(0,b.formatMessage)({id:"notification.success.add"})}),t.setState({oauthInfo:!1,oauthTable:[],visible:!1},()=>{t.fetchOauthInfo()}))}})},this.handleClose=(()=>{this.setState({visible:!1})}),this.handleDelete=(e=>{var t=this;k({title:"\u5220\u9664\u914d\u7f6e\u540e\u5df2\u7ed1\u5b9a\u7684\u7528\u6237\u6570\u636e\u5c06\u6e05\u9664",content:"\u786e\u5b9a\u8981\u5220\u9664\u6b64\u914d\u7f6e\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk(){t.handleDeleteOauth(e)}})}),this.handleDeleteOauth=(e=>{var t=this.props.dispatch;t({type:"global/deleteOauthInfo",payload:{service_id:e.service_id},callback:e=>{e&&200===e.status_code&&(d.default.success({message:(0,b.formatMessage)({id:"notification.success.delete"})}),this.fetchOauthInfo())}})}),this.state={visible:!1,oauthTable:[],loading:!1,oauthInfo:!1,isClone:!1,isOpen:!1}}componentDidMount(){this.fetchOauthInfo()}render(){var e=this.props,t=e.currUser,a=e.enterprise;if(!t)return null;E.default.OauthEnterpriseEnable(a),t.oauth_services&&t.oauth_services.length>0&&t.oauth_services;var s=this.state.oauthTable,r=[{title:(0,b.formatMessage)({id:"versionUpdata_6_1.oauth_type"}),dataIndex:"oauth_type",key:"oauth_type"},{title:(0,b.formatMessage)({id:"versionUpdata_6_1.oauth_user_name"}),dataIndex:"name",key:"name"},{title:(0,b.formatMessage)({id:"versionUpdata_6_1.oauth_scope"}),dataIndex:"system",key:"system",render:(e,t)=>{return v.default.createElement("span",null,e?(0,b.formatMessage)({id:"versionUpdata_6_1.oauth_scope.public"}):(0,b.formatMessage)({id:"versionUpdata_6_1.oauth_scope.private"}))}},{title:(0,b.formatMessage)({id:"versionUpdata_6_1.oauth_scope.is_authenticated"}),dataIndex:"is_authenticated",key:"is_authenticated",render:(e,t)=>{return v.default.createElement(o.default,{color:e?"green":"#4d73b1"},e?(0,b.formatMessage)({id:"versionUpdata_6_1.oauth_scope.is_authenticated.authenticated"}):(0,b.formatMessage)({id:"versionUpdata_6_1.oauth_scope.is_authenticated.unauthenticated"}))}},{title:(0,b.formatMessage)({id:"versionUpdata_6_1.oauth_scope.action"}),key:"action",render:(e,t)=>{var a=t.is_authenticated,s=t.is_expired,r=t.system,l=_.default.getAuthredictURL(t),i=()=>{return a?(0,b.formatMessage)({id:"otherEnterprise.BindingView.Certified"}):s?(0,b.formatMessage)({id:"otherEnterprise.BindingView.Expired"}):(0,b.formatMessage)({id:"otherEnterprise.BindingView.De_certification"})},n=()=>v.default.createElement(v.default.Fragment,null,!r&&v.default.createElement("a",{onClick:()=>this.handleDelete(t),style:{marginRight:10}},"\u5220\u9664"),v.default.createElement("a",{onClick:()=>window.open("".concat(l,"&type=certification"),"_blank"),href:"".concat(l,"&type=certification"),target:"_blank",rel:"noreferrer"},i()));return a?v.default.createElement(v.default.Fragment,null,!r&&v.default.createElement("a",{onClick:()=>this.handleDelete(t),style:{marginRight:10}},"\u5220\u9664")):l?v.default.createElement("span",{style:{color:"#4d73b1"}},v.default.createElement(n,null)):null}}];return v.default.createElement(l.default,{extra:v.default.createElement(n.default,{icon:"plus",type:"primary",onClick:()=>{this.setState({visible:!0})}},(0,b.formatMessage)({id:"versionUpdata_6_1.oauth_scope.add"}))},v.default.createElement(i.default,{dataSource:s,columns:r,pagination:!1}),this.state.visible&&v.default.createElement(M.default,{title:(0,b.formatMessage)({id:"versionUpdata_6_1.oauth_scope.add"}),type:"private",oauthInfo:!1,onOk:this.handleCreatOauth,onCancel:this.handleClose}))}},h=p))||h),I=y;t.default=I},UIIZ:function(e,t,a){"use strict";var s=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var l=s(a("kLXV"));a("cWXX");var i=s(a("/ezw")),n=s(a("jehZ"));a("5NDa");var o=s(a("5rEg"));a("y8nQ");var d=s(a("Vl3Y"));a("OaEy");var c,u,m,h,p=s(a("2fM7")),f=(s(a("J5jb")),a("MuoO")),g=r(a("q1tI")),v=a("LLXN"),b=s(a("QDog")),_=(s(a("hMqj")),s(a("DG7E")),p.default.Option,d.default.Item),M=(c=d.default.create(),u=(0,f.connect)(),c(m=u((h=class extends g.PureComponent{constructor(e){super(e),this.fetchTeamUserRoles=(()=>{var e=this.props,t=e.dispatch,a=e.userId,s=e.eid,r=e.teamName;t({type:"teamControl/fetchUserTeamsRoles",payload:{tenantName:r,team_name:r,enterprise_id:s,user_id:a,page:1,page_size:-1},callback:e=>{this.setState({currentRoles:e.bean&&e.bean.roles||[]},()=>{this.handleCloseCurrentRolesLoading()})}})}),this.loadRoles=(()=>{var e=this.props,t=e.dispatch,a=e.teamName;t({type:"teamControl/fetchTeamRoles",payload:{team_name:a||b.default.getCurrTeamName(),page_size:-1,page:1},callback:e=>{this.setState({roles:e.list||[]},()=>{this.handleCloseRoleLoading()})}})}),this.handleSubmit=(()=>{var e=this.props,t=e.form,a=e.onOk;t.validateFields((e,t)=>{!e&&a&&a(t)})}),this.handleCloseRoleLoading=(()=>{this.setState({roleLoading:!1})}),this.handleCloseCurrentRolesLoading=(()=>{this.setState({currentRolesLoading:!1})}),this.state={roles:[],currentRoles:[],roleLoading:!0,currentRolesLoading:!0}}componentDidMount(){this.loadRoles();var e=this.props,t=e.viewName,a=e.data;"enterprise"===t&&a&&a.roles&&a.roles.length>0?this.fetchTeamUserRoles():this.handleCloseCurrentRolesLoading()}render(){var e=this.props,t=e.onCancel,a=e.data,s=e.form,r=e.title,c=e.loading,u=s.getFieldDecorator,m=this.state,h=(m.roles,m.currentRoles),p=m.roleLoading,f=m.currentRolesLoading,b=[],M=h&&h.length>0&&h||a&&a.roles&&a.roles.length>0&&a.roles||[];M.map(e=>{e.role_id&&b.push(Number(e.role_id))});var E={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}};return g.default.createElement(l.default,{confirmLoading:c,title:r||(a?(0,v.formatMessage)({id:"confirmModal.edit.image.title"}):(0,v.formatMessage)({id:"confirmModal.add.image.title"})),visible:!0,onOk:this.handleSubmit,onCancel:t},g.default.createElement(i.default,{loading:p||f},g.default.createElement(d.default,{onSubmit:this.handleSubmit},g.default.createElement(_,(0,n.default)({},E,{label:(0,v.formatMessage)({id:"confirmModal.image.lable.username"})}),u("username",{initialValue:a.username||"",rules:[{required:!0,message:(0,v.formatMessage)({id:"placeholder.userName"})},{max:255,message:(0,v.formatMessage)({id:"placeholder.max255"})}]})(g.default.createElement(o.default,{placeholder:(0,v.formatMessage)({id:"placeholder.userName"})}))),g.default.createElement(_,(0,n.default)({},E,{label:(0,v.formatMessage)({id:"confirmModal.image.lable.password"})}),u("password",{initialValue:a.password||"",rules:[{required:!0,message:(0,v.formatMessage)({id:"placeholder.password_1"})},{max:255,message:(0,v.formatMessage)({id:"placeholder.max255"})}]})(g.default.createElement(o.default,{placeholder:(0,v.formatMessage)({id:"placeholder.password_1"}),type:"password"}))))))}},m=h))||m)||m),E=M;t.default=E},URBX:function(e,t,a){"use strict";var s=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var l=s(a("bx4M"));a("g9YV");var i=s(a("wCAj"));a("+L6B");var n=s(a("2/Rp"));a("/xke");var o,d,c,u=s(a("TeRw")),m=a("MuoO"),h=r(a("q1tI")),p=a("LLXN"),f=(s(a("QDog")),s(a("Zvdz"))),g=(s(a("UIIZ")),s(a("q76B"))),v=(s(a("puxM")),s(a("FEcc")),o=(0,m.connect)(e=>{var t=e.teamControl,a=e.loading,s=e.user;return{regions:t.regions,currentTeam:t.currentTeam,toMoveTeamLoading:a.effects["teamControl/moveTeam"],currentUser:s.currentUser}}),o((c=class extends h.PureComponent{constructor(e){super(e),this.getImageHub=(()=>{var e=this.props.dispatch;e({type:"global/fetchPlatformImageHub",callback:e=>{e&&this.setState({imageList:e.list})}})}),this.handleAddImageHub=(e=>{var t=this.props.dispatch;t({type:"global/addPlatformImageHub",payload:{secret_id:e.secret_id,domain:e.domain,username:e.username,password:e.password,hub_type:e.hub_type},callback:e=>{e&&e.response_data&&200==e.response_data.code&&(u.default.success({message:(0,p.formatMessage)({id:"notification.success.add"})}),this.getImageHub()),this.setState({showAddMember:!1,imageHubLoading:!1})}})}),this.handleEditImageHub=(e=>{var t=this.state.editData,a=this.props.dispatch;a({type:"global/updatePlatformImageHub",payload:{secret_id:t.secret_id,username:e.username,password:e.password,hub_type:e.hub_type},callback:e=>{e&&e.response_data&&200==e.response_data.code&&(u.default.success({message:(0,p.formatMessage)({id:"notification.success.change"})}),this.getImageHub()),this.setState({editData:null,showAddMember:!1,imageHubLoading:!1})}})}),this.handleDelImageHub=(()=>{var e=this.state.toDeleteImageHub,t=this.props.dispatch;t({type:"global/deletePlatformImageHub",payload:{secret_id:e.secret_id},callback:e=>{e&&e.response_data&&200==e.response_data.code&&(u.default.success({message:(0,p.formatMessage)({id:"notification.success.delete"})}),this.getImageHub()),this.setState({toDeleteImageHub:null})}})}),this.loadClusters=(()=>{var e=this.props,t=e.dispatch,a=e.currentUser;t({type:"region/fetchEnterpriseClusters",payload:{enterprise_id:null===a||void 0===a?void 0:a.enterprise_id},callback:e=>{if(e&&e.list){var t=[];e.list.map((e,a)=>{return e.key="cluster".concat(a),t.push(e),e}),this.setState({clusters:t})}else this.setState({clusters:[]})}})}),this.onSubmite=(e=>{var t=this.state.editData;this.setState({imageHubLoading:!0}),t?this.handleEditImageHub(e):this.handleAddImageHub(e)}),this.handleEditModel=(e=>{this.setState({showAddMember:!0,editData:e})}),this.handleOpenModel=(()=>{this.setState({showAddMember:!0})}),this.handleCancelModel=(()=>{this.setState({showAddMember:!1,editData:null})}),this.handleDelImageHubModel=(e=>{this.setState({toDeleteImageHub:e})}),this.handleCancelDelImageHubModel=(()=>{this.setState({toDeleteImageHub:null})}),this.state={showAddMember:!1,toDeleteImageHub:null,editData:null,page:1,pageSize:8,total:0,imageList:[],imageHubLoading:!1,clusters:[]}}componentDidMount(){this.loadClusters(),this.getImageHub()}render(){var e=this.props,t=(e.currentTeam,e.toMoveTeamLoading,this.state),a=(t.page,t.pageSize,t.total,t.showAddMember),s=(t.members,t.editData),r=t.toDeleteImageHub,o=(t.toMoveTeam,t.imageList),d=t.imageHubLoading,c=t.clusters,u=[{title:(0,p.formatMessage)({id:"confirmModal.common.image.lable.name"}),dataIndex:"secret_id",key:"secret_id",align:"center"},{title:(0,p.formatMessage)({id:"teamManage.tabs.image.table.imageAddress"}),dataIndex:"domain",key:"domain",align:"center"},{title:(0,p.formatMessage)({id:"teamManage.tabs.image.table.user"}),dataIndex:"username",key:"username",align:"center"},{title:(0,p.formatMessage)({id:"teamManage.tabs.image.table.password"}),dataIndex:"password",key:"password",align:"center",render:(e,t)=>{for(var a=e.length,s="",r=0;r<=a-1;r++)s+="*";return h.default.createElement("span",null,s)}},{title:(0,p.formatMessage)({id:"teamManage.tabs.image.table.operate"}),dataIndex:"action",key:"action",align:"center",render:(e,t)=>{return h.default.createElement("div",null,h.default.createElement("a",{style:{marginLeft:6},onClick:()=>{this.handleEditModel(t)}},(0,p.formatMessage)({id:"teamManage.tabs.image.table.btn.edit"})),h.default.createElement("a",{onClick:()=>this.handleDelImageHubModel(t)},(0,p.formatMessage)({id:"teamManage.tabs.image.table.btn.delete"})))}}];return h.default.createElement("div",null,h.default.createElement(l.default,{extra:h.default.createElement(n.default,{type:"primary",onClick:this.handleOpenModel,icon:"plus"},(0,p.formatMessage)({id:"confirmModal.add.common.image.title"}))},h.default.createElement(i.default,{rowKey:(e,t)=>t,pagination:o.length>8&&pagination,dataSource:o,columns:u})),a&&h.default.createElement(f.default,{loading:d,clusters:c,imageList:o,data:s,onOk:this.onSubmite,onCancel:this.handleCancelModel}),r&&h.default.createElement(g.default,{onOk:this.handleDelImageHub,title:(0,p.formatMessage)({id:"confirmModal.image_warehouse.delete.title"}),subDesc:(0,p.formatMessage)({id:"confirmModal.delete.strategy.subDesc"}),desc:(0,p.formatMessage)({id:"confirmModal.delete.image_warehouse.desc"}),onCancel:this.handleCancelDelImageHubModel}))}},d=c))||d);t.default=v},Uw6t:function(e,t,a){"use strict";var s=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(a("q1tI")),i=s(a("URBX"));class n extends l.Component{render(){return l.default.createElement("div",null,l.default.createElement(i.default,null))}}t.default=n},ZH0Y:function(e,t,a){"use strict";var s=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("cWXX");var l=s(a("/ezw"));a("5NDa");var i=s(a("5rEg"));a("14J3");var n=s(a("BMrR"));a("+L6B");var o=s(a("2/Rp"));a("jCWc");var d=s(a("kPKH"));a("Telt");var c=s(a("Tckk"));a("/xke");var u=s(a("TeRw")),m=s(a("p0pE"));a("y8nQ");var h,p,f,g,v=s(a("Vl3Y")),b=r(a("q1tI")),_=a("MuoO"),M=a("LLXN"),E=s(a("IoKh")),k=s(a("eL7/")),y=s(a("ZBM6")),I=s(a("vFwn")),w=(h=v.default.create(),p=(0,_.connect)(e=>{var t=e.global;return{isRegist:t.isRegist,rainbondInfo:t.rainbondInfo}}),h(f=p((g=class extends b.Component{constructor(e){super(e),this.getUserInfo=(()=>{this.setState({loading:!0});var e=this.props.dispatch;e({type:"user/getUserInfo",callback:e=>{this.setState({userInfo:e,imageUrl:e.logo,loading:!1})},handleError:()=>{}})}),this.handleUpdateInfo=(()=>{this.setState({showEditUserInfoFrom:!0})}),this.handleCancel=(()=>{this.setState({showEditUserInfoFrom:!1})}),this.handleOk=((e,t)=>{"info"==t&&this.updataUserInfo(e)}),this.updataUserInfo=(e=>{var t=this.props.dispatch;t({type:"user/updateUserInfo",payload:(0,m.default)({},e),callback:e=>{this.setState({showEditUserInfoFrom:!1},()=>{this.getUserInfo(),u.default.success({message:(0,M.formatMessage)({id:"notification.success.change"})})})},handleError:e=>{this.setState({showEditUserInfoFrom:!1},()=>{u.default.error({message:(0,M.formatMessage)({id:"notification.error.change"})})})}})}),this.handleChangePass=(e=>{this.props.dispatch({type:"user/changePass",payload:(0,m.default)({},e),callback:()=>{u.default.success({message:(0,M.formatMessage)({id:"GlobalHeader.success"})})}})}),this.cancelChangePass=(()=>{this.setState({showChangePassword:!1})}),this.handleUpdatePassword=(()=>{this.setState({showChangePassword:!0})}),this.state={imageUrl:"",loading:!1,userInfo:{},showChangePassword:!1}}componentDidMount(){this.getUserInfo()}render(){var e,t=this.state,a=t.imageUrl,s=t.userInfo,r=t.showEditUserInfoFrom,u=t.loading,m=t.showChangePassword,h=this.props.form.getFieldDecorator,p=(null===(e=this.props.rainbondInfo)||void 0===e?void 0:e.is_saas)||!1,f={labelCol:{span:4},wrapperCol:{span:20}};return b.default.createElement("div",null,b.default.createElement(l.default,{loading:u,paragraph:{rows:6},active:!0},b.default.createElement(n.default,{type:"flex",align:"bottom"},b.default.createElement(d.default,{span:3,style:{paddingLeft:"2%"}},b.default.createElement(c.default,{src:a||y.default,size:100})),b.default.createElement(d.default,{span:21},b.default.createElement(n.default,{style:{display:"flex",flexDirection:"column"}},b.default.createElement(d.default,{className:I.default.userName},s.user_name),b.default.createElement(d.default,null,b.default.createElement(o.default,{type:"link",onClick:this.handleUpdateInfo},(0,M.formatMessage)({id:"versionUpdata_6_1.editBaseUserInfo"})),!p&&b.default.createElement(o.default,{type:"link",onClick:this.handleUpdatePassword},(0,M.formatMessage)({id:"versionUpdata_6_1.editPassword"})))))),b.default.createElement(n.default,{style:{marginTop:24}},b.default.createElement(v.default,f,b.default.createElement(n.default,null,b.default.createElement(d.default,{span:12},b.default.createElement(v.default.Item,{label:(0,M.formatMessage)({id:"versionUpdata_6_1.name"})},h("real_name",{initialValue:s.real_name,rules:[{required:!0,message:(0,M.formatMessage)({id:"versionUpdata_6_1.name.placeholder"})}]})(b.default.createElement(i.default,{placeholder:(0,M.formatMessage)({id:"versionUpdata_6_1.name.placeholder"}),disabled:!0})))),b.default.createElement(d.default,{span:12},b.default.createElement(v.default.Item,{label:(0,M.formatMessage)({id:"versionUpdata_6_1.email"})},h("email",{initialValue:s.email,rules:[{required:!0,message:(0,M.formatMessage)({id:"versionUpdata_6_1.email.placeholder"})}]})(b.default.createElement(i.default,{placeholder:(0,M.formatMessage)({id:"versionUpdata_6_1.email.placeholder"}),disabled:!0}))))),b.default.createElement(n.default,null,b.default.createElement(d.default,{span:12},b.default.createElement(v.default.Item,{label:(0,M.formatMessage)({id:"versionUpdata_6_1.phone"})},h("phone",{initialValue:s.phone,rules:[{required:!0,message:(0,M.formatMessage)({id:"versionUpdata_6_1.phone.placeholder"})}]})(b.default.createElement(i.default,{placeholder:(0,M.formatMessage)({id:"versionUpdata_6_1.phone.placeholder"}),disabled:!0})))),b.default.createElement(d.default,{span:12},b.default.createElement(v.default.Item,{label:(0,M.formatMessage)({id:"versionUpdata_6_1.password"})},h("password",{initialValue:s.password||"********",rules:[{required:!0,message:(0,M.formatMessage)({id:"versionUpdata_6_1.password.placeholder"})}]})(b.default.createElement(i.default,{placeholder:(0,M.formatMessage)({id:"versionUpdata_6_1.password.placeholder"}),disabled:!0,type:"password"}))))))),b.default.createElement(k.default,{userInfo:s,visible:r,onCancel:this.handleCancel,onOk:this.handleOk}),m&&b.default.createElement(E.default,{onOk:this.handleChangePass,onCancel:this.cancelChangePass})))}},f=g))||f)||f);t.default=w},"eL7/":function(e,t,a){"use strict";var s=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var l=s(a("kLXV"));a("DZo9");var i=s(a("8z0m"));a("5NDa");var n=s(a("5rEg"));a("Pwec");var o=s(a("CtXQ"));a("/xke");var d=s(a("TeRw"));a("y8nQ");var c,u,m,h=s(a("Vl3Y")),p=r(a("q1tI")),f=a("LLXN"),g=s(a("nyIC")),v=s(a("8+Sn")),b=(s(a("/xIY")),c=h.default.create(),c((m=class extends p.Component{constructor(e){super(e),this.handleOk=(()=>{var e=this.state.imageUrl,t=this.props.userInfo;this.props.form.validateFields((a,s)=>{a||(s.email=t.email,s.logo=e,this.props.onOk(s,"info"))})}),this.handleCancel=(()=>{this.props.onCancel()}),this.handleLogoChange=(e=>{"uploading"!==e.file.status?"error"!==e.file.status?"done"===e.file.status&&(this.setState({imageUrl:e.file&&e.file.response&&e.file.response.data&&e.file.response.data.bean&&e.file.response.data.bean.file_url,loading:!1}),this.getLogoBase64(e.file.originFileObj,e=>this.setState({imageBase64:e}))):d.default.error({message:e.file.response.msg_show||"\u4e0a\u4f20\u5931\u8d25"}):this.setState({loading:!0})}),this.getLogoBase64=((e,t)=>{var a=new FileReader;a.addEventListener("load",()=>t(a.result)),a.readAsDataURL(e)}),this.handleLogoRemove=(()=>{this.setState({imageUrl:"",imageBase64:""})}),this.state={imageUrl:"",loading:!1,userInfo:this.props.userInfo||{},imageBase64:""}}componentDidMount(){var e=this.props.userInfo;(null===e||void 0===e?void 0:e.logo)&&this.setState({imageUrl:null===e||void 0===e?void 0:e.logo})}render(){var e=this.state,t=e.userInfo,a=e.imageBase64,s=e.imageUrl,r=e.loading,d=this.props.form.getFieldDecorator,c={labelCol:{span:4},wrapperCol:{span:20}},u=p.default.createElement("div",null,p.default.createElement(o.default,{type:this.state.loading?"loading":"plus"}),p.default.createElement("div",{className:"ant-upload-text"},(0,f.formatMessage)({id:"versionUpdata_6_1.uploadAvatar"}))),m=v.default.get("token"),b={};return m&&(b.Authorization="GRJWT ".concat(m)),p.default.createElement(l.default,{title:(0,f.formatMessage)({id:"versionUpdata_6_1.editUserInfo"}),visible:this.props.visible,onCancel:this.handleCancel,onOk:this.handleOk,confirmLoading:r},p.default.createElement(h.default,c,p.default.createElement(h.default.Item,{label:(0,f.formatMessage)({id:"versionUpdata_6_1.name"})},d("real_name",{initialValue:t.real_name||"",rules:[{required:!0,message:(0,f.formatMessage)({id:"versionUpdata_6_1.name.placeholder"})},{max:24,message:(0,f.formatMessage)({id:"versionUpdata_6_1.name.length"})}]})(p.default.createElement(n.default,{placeholder:(0,f.formatMessage)({id:"versionUpdata_6_1.name.placeholder"})}))),p.default.createElement(h.default.Item,{label:(0,f.formatMessage)({id:"versionUpdata_6_1.avatar"})},d("logo",{initialValue:t.logo||s})(p.default.createElement(i.default,{className:"logo-uploader",name:"file",accept:"image/jpg,image/jpeg,image/png",action:g.default.imageUploadUrl,listType:"picture-card",headers:b,showUploadList:!1,onChange:this.handleLogoChange,onRemove:this.handleLogoRemove},s?p.default.createElement("img",{src:a||s,alt:"avatar",style:{width:"100%"}}):u)))))}},u=m))||u);t.default=b},gEbF:function(e,t,a){"use strict";var s=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var l=s(a("bx4M"));a("g9YV");var i=s(a("wCAj"));a("fOrg");var n=s(a("+KLJ"));a("+L6B");var o=s(a("2/Rp"));a("P2fV");var d=s(a("NJEC"));a("/xke");var c,u,m,h=s(a("TeRw")),p=a("MuoO"),f=s(a("wd/R")),g=r(a("q1tI")),v=a("LLXN"),b=s(a("sv7o")),_=s(a("q76B")),M=(c=(0,p.connect)(e=>{var t=e.loading;return{deleteAccessLoading:t.effects["user/deleteAccessToke"]}}),c((m=class extends g.Component{constructor(e){super(e),this.onCanceAccessToken=(()=>{this.setState({openDeleteAccessToken:!1,ID:""})}),this.loadAccessTokenList=(()=>{var e=this.props.dispatch;e({type:"user/fetchAccessToken",callback:e=>{e&&200===e.status_code&&this.setState({dataSource:e.list})}})}),this.handleDeleteAccessToken=(()=>{var e=this.props.dispatch,t=this.state.ID;e({type:"user/deleteAccessToke",payload:{user_id:t},callback:e=>{e&&200===e.status_code&&(h.default.success({message:(0,v.formatMessage)({id:"notification.success.delete"})}),this.loadAccessTokenList(),this.onCanceAccessToken())}})}),this.addAccessToken=(()=>{this.setState({visible:!0})}),this.handleCancel=(()=>{this.setState({visible:!1,ID:""})}),this.openDeleteAccessToken=(e=>{this.setState({ID:e,openDeleteAccessToken:!0})}),this.handleRegenerateAccessToken=(e=>{this.setState({ID:e,visible:!0})}),this.disabledDate=(e=>{return e&&e<(0,f.default)().endOf("day")}),this.disabledDateTime=(()=>{return{disabledHours:()=>this.range(0,24).splice(4,20),disabledMinutes:()=>this.range(30,60),disabledSeconds:()=>[55,56]}}),this.range=((e,t)=>{for(var a=[],s=e;s<t;s++)a.push(s);return a}),this.handleSubmit=(()=>{this.loadAccessTokenList(),this.handleCancel()}),this.handleExpireTime=(e=>{var t="",a=e?"".concat(e):"";return e&&10===a.length?(t=new Date(1e3*parseInt(e)),t):e&&13===a.length?(t=new Date(parseInt(e)),t):null}),this.state={dataSource:[],openDeleteAccessToken:!1,ID:"",visible:!1}}componentDidMount(){this.loadAccessTokenList()}render(){var e=this.props.deleteAccessLoading,t=this.state,a=t.dataSource,s=t.openDeleteAccessToken,r=t.visible,c=t.ID,u=[{title:(0,v.formatMessage)({id:"otherEnterprise.AccesstokenView.note"}),dataIndex:"note",key:"note",width:"30%"},{title:(0,v.formatMessage)({id:"otherEnterprise.AccesstokenView.expire_time"}),dataIndex:"expire_time",key:"expire_time",width:"25%",render:e=>{var t=this.handleExpireTime(e);return t?(0,f.default)(t).locale("zh-cn").format("YYYY-MM-DD HH:mm:ss"):"".concat((0,v.formatMessage)({id:"otherEnterprise.AccesstokenView.Unlimited"}))}},{title:(0,v.formatMessage)({id:"otherEnterprise.AccesstokenView.user_id"}),dataIndex:"user_id",key:"user_id",width:"20%",render:(e,t)=>{var a=this.handleExpireTime(t.expire_time),s=(0,f.default)().valueOf(),r=!!a&&s>=a;return g.default.createElement(g.Fragment,null,g.default.createElement("div",{style:{color:r?"#f81d22":" #0b8235"}},r?g.default.createElement(v.FormattedMessage,{id:"otherEnterprise.AccesstokenView.overdue"}):g.default.createElement(v.FormattedMessage,{id:"otherEnterprise.AccesstokenView.normal"})))}},{title:(0,v.formatMessage)({id:"otherEnterprise.AccesstokenView.var"}),dataIndex:"var",width:"20%",render:(e,t)=>g.default.createElement(g.Fragment,null,g.default.createElement("a",{onClick:()=>this.openDeleteAccessToken(t.ID),style:{margintRight:10}},(0,v.formatMessage)({id:"otherEnterprise.AccesstokenView.delete"})),g.default.createElement(d.default,{title:(0,v.formatMessage)({id:"versionUpdata_6_1.regenerate"}),placement:"top",onConfirm:()=>this.handleRegenerateAccessToken(t.ID),okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},g.default.createElement("a",{style:{margintRight:10}},(0,v.formatMessage)({id:"otherEnterprise.AccesstokenView.Regenerate"}))))}];return g.default.createElement(l.default,{extra:g.default.createElement(o.default,{type:"primary",onClick:this.addAccessToken,icon:"plus"},(0,v.formatMessage)({id:"otherEnterprise.AccesstokenView.add"}))},g.default.createElement(n.default,{message:(0,v.formatMessage)({id:"otherEnterprise.AccesstokenView.api"}),type:"info",showIcon:!0,style:{marginBottom:24}}),g.default.createElement(i.default,{rowKey:(e,t)=>t,dataSource:a,columns:u,pagination:!1}),r&&g.default.createElement(b.default,{onOk:this.handleSubmit,onCancel:this.handleCancel,ID:c}),s&&g.default.createElement(_.default,{title:(0,v.formatMessage)({id:"confirmModal.token.delete.title"}),desc:(0,v.formatMessage)({id:"confirmModal.delete.token.desc"}),loading:e,onCancel:this.onCanceAccessToken,onOk:this.handleDeleteAccessToken}))}},u=m))||u),E=M;t.default=E},sv7o:function(e,t,a){"use strict";var s=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var l=s(a("kLXV"));a("iQDF");var i=s(a("+eQT")),n=s(a("jehZ"));a("5NDa");var o=s(a("5rEg"));a("fOrg");var d=s(a("+KLJ"));a("/xke");var c=s(a("TeRw"));a("tU7J");var u=s(a("wFql"));a("y8nQ");var m,h,p,f,g=s(a("Vl3Y")),v=a("MuoO"),b=s(a("wd/R")),_=r(a("q1tI")),M=a("LLXN"),E=s(a("e6Ls")),k=g.default.Item,y=u.default.Paragraph,I=(m=g.default.create(),h=(0,v.connect)(),m(p=h((f=class extends _.PureComponent{constructor(e){super(e),this.handleSubmit=(()=>{var e=this.props,t=e.form,a=e.onOk,s=this.state.accessKey;if(s)return a(),this.handleCloneAccessKey(),null;t.validateFields((e,t)=>{if(!e){if(t.age){var a=(0,b.default)(t.age).valueOf(),s=(0,b.default)().valueOf();t.age=(0,b.default)(a).diff((0,b.default)(s),"seconds")}this.addAccesstoken(t)}})}),this.handleAccesstokenCallback=(e=>{e&&200===e.status_code&&this.setState({accessKey:e.bean.access_key}),this.setState({loading:!1})}),this.addAccesstoken=(e=>{var t=this.props.dispatch;this.setState({loading:!0}),t({type:"user/addAccessToken",payload:e,callback:e=>{this.handleAccesstokenCallback(e)},handleError:e=>{e&&e.data&&e.data.msg_show&&c.default.warning({message:e.data.msg_show}),this.setState({loading:!1})}})}),this.putAccesstoken=(e=>{var t=this.props.dispatch;this.setState({loading:!0}),t({type:"user/putAccessToken",payload:{user_id:e},callback:e=>{this.handleAccesstokenCallback(e)}})}),this.disabledDate=(e=>{return e&&e<(0,b.default)().endOf("day")}),this.disabledDateTime=(()=>{return{disabledHours:()=>this.range(0,24).splice(4,20),disabledMinutes:()=>this.range(30,60),disabledSeconds:()=>[55,56]}}),this.range=((e,t)=>{for(var a=[],s=e;s<t;s++)a.push(s);return a}),this.handleCloneAccessKey=(()=>{this.setState({accessKey:!1});var e=this.props,t=e.onOk,a=e.onCancel,s=this.state.accessKey;s?t():a()}),this.state={accessKey:!1,loading:!1}}componentDidMount(){var e=this.props.ID;e&&this.putAccesstoken(e)}render(){var e=this.props,t=e.form,a=e.ID,s=t.getFieldDecorator,r=this.state,c=r.loading,u=r.accessKey,m={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}};return _.default.createElement(l.default,{visible:!0,confirmLoading:c,maskClosable:!1,className:E.default.TelescopicModal,title:a||u?(0,M.formatMessage)({id:"otherEnterprise.AccesstokenForm.save"}):(0,M.formatMessage)({id:"otherEnterprise.AccesstokenForm.add"}),onOk:this.handleSubmit,onCancel:this.handleCloneAccessKey},a||u?_.default.createElement(_.Fragment,null,_.default.createElement(d.default,{message:(0,M.formatMessage)({id:"otherEnterprise.AccesstokenForm.be_careful"}),type:"info",showIcon:!0,style:{marginBottom:"20px"}}),_.default.createElement(d.default,{message:_.default.createElement(y,{style:{marginBottom:"0"},copyable:!0},u),style:{marginBottom:"20px"},type:"success"})):_.default.createElement(_.Fragment,null,_.default.createElement(k,(0,n.default)({},m,{label:(0,M.formatMessage)({id:"otherEnterprise.AccesstokenForm.purpose"})}),s("note",{rules:[{required:!0,message:(0,M.formatMessage)({id:"otherEnterprise.AccesstokenForm.input_purpose"})},{max:32,message:(0,M.formatMessage)({id:"otherEnterprise.AccesstokenForm.max"})}],initialValue:""})(_.default.createElement(o.default,{placeholder:(0,M.formatMessage)({id:"otherEnterprise.AccesstokenForm.input_purpose"})}))),_.default.createElement(k,(0,n.default)({},m,{label:(0,M.formatMessage)({id:"otherEnterprise.AccesstokenForm.time"}),extra:(0,M.formatMessage)({id:"versionUpdata_6_1.AccesstokenForm.placeholder"})}),s("age",{rules:[{required:!1,message:(0,M.formatMessage)({id:"otherEnterprise.AccesstokenForm.import_time"})}],initialValue:""})(_.default.createElement(i.default,{style:{width:"100%"},format:"YYYY-MM-DD HH:mm:ss",disabledDate:this.disabledDate,disabledTime:this.disabledDateTime,showTime:{defaultValue:(0,b.default)("00:00:00","HH:mm:ss")}})))))}},p=f))||p)||p),w=I;t.default=w},vFwn:function(e,t,a){e.exports={main:"main___12-o4",leftmenu:"leftmenu___1g3zt",right:"right___L1Wpz",title:"title___3oSLP",userName:"userName___w4yyy"}}}]);