(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[23],{RRtQ:function(e,t,a){"use strict";var r=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var i=r(a("bx4M"));a("g9YV");var s=r(a("wCAj"));a("5Dmo");var l=r(a("3S7+"));a("14J3");var o=r(a("BMrR"));a("+L6B");var d=r(a("2/Rp"));a("5NDa");var u=r(a("5rEg"));a("/xke");var c=r(a("TeRw"));a("y8nQ");var p,m,h,g=r(a("Vl3Y")),f=a("MuoO"),E=a("7DNP"),v=r(a("wd/R")),_=n(a("q1tI")),w=r(a("qCJ4")),y=r(a("puxM")),S=r(a("XZXw")),A=a("vSx2"),b=r(a("QDog")),k=r(a("hMqj")),x=r(a("51sS")),I=g.default.Item,P=(p=(0,f.connect)(e=>{var t=e.list,a=e.loading,r=e.teamControl,n=e.enterprise;return{list:t,loading:a.models.list,currentTeam:r.currentTeam,currentRegionName:r.currentRegionName,currentEnterprise:n.currentEnterprise,currentTeamPermissionsInfo:r.currentTeamPermissionsInfo}}),p((h=class extends _.PureComponent{constructor(e){super(e),this.onPageChange=(e=>{this.setState({page:e,loading:!0},()=>{this.getTeamAppList()})}),this.onAddGroup=(()=>{this.setState({addGroup:!0})}),this.getTeamAppList=(()=>{var e=this.props.match.params,t=e.teamName,a=e.regionName,r=this.state,n=r.page,i=r.pageSize,s=r.query;this.props.dispatch({type:"global/getTeamAppList",payload:{team_name:t,region:a,query:s,page:n,page_size:i},callback:e=>{e&&200===e.status_code&&this.setState({loading:!1,apps:e.list,total:e.bean&&e.bean.total})}})}),this.handlePermissions=(e=>{var t=this.props.currentTeamPermissionsInfo;return k.default.querySpecifiedPermissionsInfo(t,e)}),this.cancelAddGroup=(()=>{this.setState({addGroup:!1})}),this.handleSearch=(()=>{this.getTeamAppList()}),this.handelChange=(e=>{this.setState({query:e.target.value})}),this.handleEnter=(()=>{this.handleSearch()}),this.handleAddGroup=(()=>{c.default.success({message:"\u65b0\u5efa\u6210\u529f"}),this.getTeamAppList(),this.cancelAddGroup()}),this.jumpToAllbackup=(()=>{var e=this.props.match.params,t=e.teamName,a=e.regionName;this.props.dispatch(E.routerRedux.push("/team/".concat(t,"/region/").concat(a,"/allbackup")))}),this.state={apps:[],loading:!0,page:1,query:"",pageSize:10,operationPermissions:this.handlePermissions("queryAppInfo")}}componentWillMount(){var e=this.props.dispatch,t=this.state.operationPermissions.isAccess;t||b.default.withoutPermission(e)}componentDidMount(){this.getTeamAppList()}render(){var e=this.props,t=e.currentEnterprise,a=e.currentTeam,r=e.currentRegionName,n=e.match,c=n.params,p=c.teamName,m=c.regionName,h=this.state,f=h.apps,k=h.loading,P=h.page,C=h.pageSize,N=h.total,T=h.addGroup,M=h.operationPermissions.isCreate,G=[];return G=(0,A.createTeam)((0,A.createEnterprise)(G,t),a,r),G.push({title:"\u5e94\u7528\u5217\u8868"}),_.default.createElement(S.default,{breadcrumbList:G,title:"\u5e94\u7528\u7ba1\u7406",content:"\u5e94\u7528\u53ef\u4ee5\u662f\u4e00\u4e2a\u5de5\u7a0b\uff0c\u4e00\u4e2a\u67b6\u6784\uff0c\u4e00\u4e2a\u4e1a\u52a1\u7cfb\u7edf\u7684\u7ba1\u7406\u5355\u5143\uff0c\u5176\u7531\u591a\u4e2a\u7ec4\u4ef6\u548c\u5e94\u7528\u914d\u7f6e\u6784\u6210"},_.default.createElement(o.default,null,_.default.createElement(g.default,{layout:"inline",style:{display:"inline-block"}},_.default.createElement(I,null,_.default.createElement(u.default,{placeholder:"\u641c\u7d22\u5e94\u7528",onChange:this.handelChange,onPressEnter:this.handleEnter,style:{width:250}})),_.default.createElement(I,null,_.default.createElement(d.default,{type:"primary",onClick:this.handleSearch,icon:"search"},"\u641c\u7d22"))),M&&_.default.createElement(d.default,{type:"primary",icon:"plus",style:{float:"right",marginBottom:"20px"},onClick:this.onAddGroup},"\u65b0\u5efa\u5e94\u7528")),_.default.createElement(i.default,null,T&&_.default.createElement(w.default,{teamName:p,regionName:m,isGetGroups:!1,onCancel:this.cancelAddGroup,onOk:this.handleAddGroup}),_.default.createElement(y.default,{sm:800},_.default.createElement(s.default,{loading:k,size:"default",scroll:{x:!(window.innerWidth>1500)&&1500},pagination:{size:"default",current:P,pageSize:C,total:N,onChange:this.onPageChange},dataSource:f||[],columns:[{title:"\u5e94\u7528\u540d\u79f0",dataIndex:"group_name",width:300,render:(e,t)=>{return _.default.createElement(E.Link,{className:x.default.verticalCen,to:"/team/".concat(p,"/region/").concat(m,"/apps/").concat(t.group_id)},b.default.fetchSvg("helm"===t.app_type?"HelmSvg":"localMarket"),e)}},{title:"\u66f4\u65b0\u65f6\u95f4",dataIndex:"update_time",width:200,render:e=>{return e?(0,v.default)(e).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_time",width:200,render:e=>{return e?(0,v.default)(e).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:"\u7ec4\u4ef6(\u8fd0\u884c/\u603b\u6570)",dataIndex:"services_num",align:"center",width:150,render:(e,t)=>{return _.default.createElement("p",{style:{marginBottom:0}},t.run_service_num,"/",t.services_num)}},{title:"\u5360\u7528\u5185\u5b58/\u5206\u914d\u5185\u5b58(MB)",dataIndex:"used_mem",align:"center",width:200,render:(e,t)=>{return _.default.createElement("p",{style:{marginBottom:0}},t.used_mem,"/",t.allocate_mem)}},{title:"\u5907\u4efd\u8bb0\u5f55",width:150,dataIndex:"backup_record_num",align:"center",render:(e,t)=>{return _.default.createElement(E.Link,{to:"/team/".concat(p,"/region/").concat(m,"/apps/").concat(t.group_id,"/backup")},e)}},{title:"\u53d1\u5e03\u8bb0\u5f55",width:150,dataIndex:"share_record_num",align:"center",render:(e,t)=>{return _.default.createElement(E.Link,{to:"/team/".concat(p,"/region/").concat(m,"/apps/").concat(t.group_id,"/publish")},e)}},{title:"\u5907\u6ce8",dataIndex:"group_note",width:100,render:e=>{return _.default.createElement(l.default,{placement:"top",title:e},_.default.createElement("p",{className:x.default.groupnote},e))}}]}))))}},m=h))||m);t.default=P}}]);