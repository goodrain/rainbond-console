(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{EA0v:function(e,a,t){e.exports={antd_row:"antd_row___12H6f",antd_form:"antd_form___2ZfFI",en_antd_row:"en_antd_row___DCCT7",antd_row_btn:"antd_row_btn___2sOWx",antd_btn:"antd_btn___Go0PK",antd_rows:"antd_rows___3j4Tk",titleBox:"titleBox___3-k09",title:"title___3J40B",titleSpan:"titleSpan___35bpK",en_titleSpan:"en_titleSpan___3S6n-",config:"config___aW2rt",enconfig:"enconfig___1qWV5",config_en:"config_en___19u3L",en_config:"en_config___1dagz",desc:"desc___1rHJT"}},plR3:function(e,a,t){"use strict";var s=t("g09b"),l=t("tAuX");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("IzEo");var r=s(t("bx4M"));t("+L6B");var n=s(t("2/Rp")),o=s(t("jehZ"));t("5NDa");var d=s(t("5rEg"));t("14J3");var i=s(t("BMrR"));t("FJo9");var u=s(t("L41K"));t("y8nQ");var p,m,c,f,g=s(t("Vl3Y")),_=t("MuoO"),h=t("7DNP"),b=s(t("Qyje")),w=l(t("q1tI")),y=t("LLXN"),C=s(t("3a4m")),v=s(t("XZXw")),M=s(t("+iC2")),E=s(t("2lxJ")),N=s(t("KrRZ")),x=s(t("8+Sn")),S=s(t("EA0v")),D=g.default.Item,k=u.default.Step,I={enableHA:!0,gatewayIngressIPs:"",imageHub:{enable:!1,domain:"",namespace:"",username:"",password:""},etcd:{enable:!1,endpoints:[],secretName:""},estorage:{enable:!1,RWX:{enable:!1,config:{server:"",storageClassName:""}},RWO:{enable:!1,storageClassName:""},NFS:{enable:!1,server:"",path:""}},type:"nfs",database:{enable:!1,uiDatabase:{host:"",port:"",username:"",password:"",dbname:"",enable:!1},regionDatabase:{host:"",port:"",username:"",password:"",dbname:"",enable:!1}},nodesForChaos:{enable:!1,nodes:[]},nodesForGateway:{enable:!0,nodes:[]}},F=(p=g.default.create(),m=(0,_.connect)(e=>{var a=e.user,t=e.list,s=e.loading,l=e.global,r=e.index;e.region;return{user:a.currentUser,list:t,loading:s.models.list,rainbondInfo:l.rainbondInfo,enterprise:l.enterprise,isRegist:l.isRegist,oauthLongin:s.effects["global/creatOauth"],overviewInfo:r.overviewInfo}}),p(c=m((f=class extends w.PureComponent{constructor(e){super(e),this.loadSteps=(()=>{var e=[{title:(0,y.formatMessage)({id:"enterpriseColony.ACksterList.basic"})},{title:(0,y.formatMessage)({id:"enterpriseColony.ACksterList.senior"})},{title:(0,y.formatMessage)({id:"enterpriseColony.ACksterList.install"})},{title:(0,y.formatMessage)({id:"enterpriseColony.ACksterList.Docking"})}];return e}),this.handleSubmit=(e=>{}),this.toLinkNext=(e=>{var a=this.props.dispatch,t=this.props.match.params.eid;this.props.form.validateFields((s,l)=>{s||(l&&(I.gatewayIngressIPs=l.gatewayIngressIPs||"",I.nodesForGateway.nodes=l.nodesForGateway||[],l.domain||l.namespace||l.username||l.password?I.imageHub.enable=!0:I.imageHub.enable=!1,I.imageHub.domain=l.domain||"",I.imageHub.namespace=l.namespace||"",I.imageHub.username=l.username||"",I.imageHub.password=l.password||"",I.etcd.endpoints=l.endpoints||[],I.etcd.secretName=l.secretName||"",l.server||l.path?(I.estorage.enable=!0,I.estorage.NFS.enable=!0):(I.estorage.enable=!1,I.estorage.NFS.enable=!1),I.estorage.NFS.server=l.server||"",I.estorage.NFS.path=l.path||"",l.regionDatabase_host||l.regionDatabase_port||l.regionDatabase_username||l.regionDatabase_password||l.regionDatabase_dbname?(I.database.enable=!0,I.database.regionDatabase.enable=!0):(I.database.enable=!1,I.database.regionDatabase.enable=!1),I.database.regionDatabase.host=l.regionDatabase_host||"",I.database.regionDatabase.port=l.regionDatabase_port||"",I.database.regionDatabase.username=l.regionDatabase_username||"",I.database.regionDatabase.password=l.regionDatabase_password||"",I.database.regionDatabase.dbname=l.regionDatabase_dbname||"",I.nodesForChaos.nodes=[],I.etcd.endpoints=l.endpoints||[],I.etcd.secretName=l.secretName||"","advanced"===e?C.default.push({pathname:"/enterprise/".concat(t,"/provider/ACksterList/advanced"),search:b.default.stringify({data:I,name:"huawei",cloudserver:"huawei"})}):C.default.push({pathname:"/enterprise/".concat(t,"/provider/ACksterList/install"),search:b.default.stringify({data:I,name:"huawei",step:"base",cloudserver:"huawei"})})),a({type:"region/saveBaseConfiguration",payload:l}))})}),this.handleValidatorsGateway=((e,a,t)=>{var s=!1;a&&a.length>0?(a.some(e=>{if(!(e.externalIP&&e.internalIP&&e.name))return s=!1,!0;var a=/^[^\s]*$/;e.externalIP.match(a)&&e.internalIP.match(a)&&e.name.match(a)?t():t(new Error((0,y.formatMessage)({id:"placeholder.no_spaces"}))),s=!0}),s?t():t(new Error("".concat((0,y.formatMessage)({id:"enterpriseColony.cloud.gateway_node"}))))):t()});var a=this.props.user,t=M.default.isCompanyAdmin(a);this.state={adminer:t,language:"zh-CN"===x.default.get("language")}}componentWillMount(){var e=this.state.adminer,a=this.props.dispatch;e||a(h.routerRedux.push("/"))}componentDidMount(){}render(){var e=this.props,a=e.match.params,t=a.eid,s=(a.provider,a.clusterID,e.form.getFieldDecorator),l=this.state.language,p={labelCol:{xs:{span:0},sm:{span:0}},wrapperCol:{xs:{span:5},sm:{span:5}}},m={labelCol:{xs:{span:3},sm:{span:3}},wrapperCol:{xs:{span:7},sm:{span:7}}},c={labelCol:{xs:{span:5},sm:{span:5}},wrapperCol:{xs:{span:10},sm:{span:10}}},f={labelCol:{xs:{span:3},sm:{span:3}},wrapperCol:{xs:{span:6},sm:{span:6}}},_={labelCol:{xs:{span:6},sm:{span:6}},wrapperCol:{xs:{span:6},sm:{span:6}}},b=l?f:_,C=l?m:c;return w.default.createElement(v.default,{title:w.default.createElement(y.FormattedMessage,{id:"enterpriseColony.button.text"}),content:w.default.createElement(y.FormattedMessage,{id:"enterpriseColony.PageHeaderLayout.content"}),titleSvg:E.default.getPageHeaderSvg("clusters",18)},w.default.createElement(i.default,{style:{marginBottom:"16px"}},w.default.createElement(u.default,{current:0},this.loadSteps().map(e=>w.default.createElement(k,{key:e.title,title:e.title})))),w.default.createElement(r.default,{style:{padding:"24px 12px"}},w.default.createElement(g.default,{onSubmit:this.handleSubmit},w.default.createElement("div",{className:S.default.base_configuration},w.default.createElement(i.default,{className:l?S.default.antd_row:S.default.en_antd_row},w.default.createElement("div",null,w.default.createElement("span",{style:{fontWeight:"bold",fontSize:"16px"}},(0,y.formatMessage)({id:"enterpriseColony.cloud.elb"}))),w.default.createElement(D,(0,o.default)({},p,{className:S.default.antd_form,extra:w.default.createElement("div",null,(0,y.formatMessage)({id:"enterpriseColony.huaweicloud.slb"}),w.default.createElement("a",{target:"_blank",href:"https://support.huaweicloud.com/qs-elb/zh-cn_topic_0052569751.html"},(0,y.formatMessage)({id:"enterpriseColony.cloud.doc"})))}),s("gatewayIngressIPs",{rules:[{required:!0,message:(0,y.formatMessage)({id:"enterpriseColony.cloud.ip"})},{pattern:/((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})(\.((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})){3}/g,message:(0,y.formatMessage)({id:"enterpriseColony.cloud.input_ip"})},{pattern:/^[^\s]*$/,message:(0,y.formatMessage)({id:"placeholder.no_spaces"})}]})(w.default.createElement(d.default,{placeholder:(0,y.formatMessage)({id:"enterpriseColony.cloud.demo_ip"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}})))),w.default.createElement(i.default,{className:l?S.default.antd_row:S.default.en_antd_row},w.default.createElement("div",null,w.default.createElement("span",{style:{fontWeight:"bold",fontSize:"16px"}},(0,y.formatMessage)({id:"enterpriseColony.cloud.gateway"}))),w.default.createElement(D,(0,o.default)({},p,{className:S.default.antd_form,extra:(0,y.formatMessage)({id:"enterpriseColony.huaweicloud.access"})}),s("nodesForGateway",{rules:[{required:!0,message:(0,y.formatMessage)({id:"enterpriseColony.cloud.input_gateway"})},{validator:this.handleValidatorsGateway}]})(w.default.createElement(N.default,null)))),w.default.createElement(i.default,{className:S.default.antd_rows},w.default.createElement("div",{className:S.default.titleBox},w.default.createElement("div",{className:S.default.title},w.default.createElement("span",{className:l?S.default.titleSpan:S.default.en_titleSpan},(0,y.formatMessage)({id:"enterpriseColony.cloud.sfs"}))),w.default.createElement("div",{className:S.default.desc},(0,y.formatMessage)({id:"enterpriseColony.huaweicloud.doc"}),w.default.createElement("a",{target:"_blank",href:"https://support.huaweicloud.com/qs-sfs/zh-cn_topic_0034428727.html"},(0,y.formatMessage)({id:"enterpriseColony.cloud.doc"})))),w.default.createElement("div",{className:l?S.default.config:S.default.enconfig},w.default.createElement(D,(0,o.default)({},C,{label:(0,y.formatMessage)({id:"enterpriseColony.cloud.mount"})}),s("server",{rules:[{required:!1,message:(0,y.formatMessage)({id:"enterpriseColony.cloud.mount_add"})},{pattern:/^[^\s]*$/,message:(0,y.formatMessage)({id:"placeholder.no_spaces"})}]})(w.default.createElement(d.default,{placeholder:(0,y.formatMessage)({id:"enterpriseColony.cloud.mounting_dome"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}))),w.default.createElement(D,(0,o.default)({},C,{label:(0,y.formatMessage)({id:"enterpriseColony.cloud.path"})}),s("path",{rules:[{required:!1,message:(0,y.formatMessage)({id:"enterpriseColony.cloud.input_path"})},{pattern:/^[^\s]*$/,message:(0,y.formatMessage)({id:"placeholder.no_spaces"})}]})(w.default.createElement(d.default,{placeholder:(0,y.formatMessage)({id:"enterpriseColony.cloud.dome_path"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}))))),w.default.createElement(i.default,{className:S.default.antd_rows},w.default.createElement("div",{className:S.default.titleBox},w.default.createElement("div",{className:S.default.title},w.default.createElement("span",{className:l?S.default.titleSpan:S.default.en_titleSpan},(0,y.formatMessage)({id:"enterpriseColony.cloud.rds"}))),w.default.createElement("div",{className:S.default.desc},(0,y.formatMessage)({id:"enterpriseColony.huaweicloud.gateway"}),w.default.createElement("a",{target:"_blank",href:"https://support.huaweicloud.com/qs-rds/zh-cn_topic_0046585334.html"},(0,y.formatMessage)({id:"enterpriseColony.cloud.doc"})))),w.default.createElement("div",{className:l?S.default.config:S.default.config_en},w.default.createElement(D,(0,o.default)({},b,{label:(0,y.formatMessage)({id:"enterpriseColony.cloud.address"})}),s("regionDatabase_host",{rules:[{required:!1,message:(0,y.formatMessage)({id:"enterpriseColony.cloud.inputAddress"})},{pattern:/^[^\s]*$/,message:(0,y.formatMessage)({id:"placeholder.no_spaces"})}]})(w.default.createElement(d.default,{placeholder:(0,y.formatMessage)({id:"enterpriseColony.cloud.input_address"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}))),w.default.createElement(D,(0,o.default)({},b,{label:(0,y.formatMessage)({id:"enterpriseColony.cloud.port"})}),s("regionDatabase_port",{rules:[{required:!1,message:(0,y.formatMessage)({id:"enterpriseColony.cloud.input_port"})},{pattern:/^[^\s]*$/,message:(0,y.formatMessage)({id:"placeholder.no_spaces"})}]})(w.default.createElement(d.default,{placeholder:(0,y.formatMessage)({id:"enterpriseColony.cloud.demo_port"})}))),w.default.createElement(D,(0,o.default)({},b,{label:(0,y.formatMessage)({id:"enterpriseColony.cloud.name"})}),s("regionDatabase_username",{rules:[{required:!1,message:(0,y.formatMessage)({id:"enterpriseColony.cloud.input_name"})},{pattern:/^[^\s]*$/,message:(0,y.formatMessage)({id:"placeholder.no_spaces"})}]})(w.default.createElement(d.default,{placeholder:(0,y.formatMessage)({id:"enterpriseColony.cloud.demo_name"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}))),w.default.createElement(D,(0,o.default)({},b,{label:(0,y.formatMessage)({id:"enterpriseColony.cloud.password"})}),s("regionDatabase_password",{rules:[{required:!1,message:(0,y.formatMessage)({id:"enterpriseColony.cloud.input_password"})},{pattern:/^[^\s]*$/,message:(0,y.formatMessage)({id:"placeholder.no_spaces"})}]})(w.default.createElement(d.default,{type:"password",placeholder:(0,y.formatMessage)({id:"enterpriseColony.cloud.input_password"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}))),w.default.createElement(D,(0,o.default)({},b,{label:(0,y.formatMessage)({id:"enterpriseColony.cloud.access_name"})}),s("regionDatabase_dbname",{rules:[{required:!1,message:(0,y.formatMessage)({id:"enterpriseColony.cloud.input_access_name"})},{pattern:/^[^\s]*$/,message:(0,y.formatMessage)({id:"placeholder.no_spaces"})}]})(w.default.createElement(d.default,{placeholder:(0,y.formatMessage)({id:"enterpriseColony.cloud.demo_access_name"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}))))),w.default.createElement(i.default,{className:S.default.antd_rows},w.default.createElement("div",{className:S.default.titleBox},w.default.createElement("div",{className:S.default.title},w.default.createElement("span",{className:l?S.default.titleSpan:S.default.en_titleSpan},(0,y.formatMessage)({id:"enterpriseColony.cloud.image"}))),w.default.createElement("div",{className:S.default.desc},(0,y.formatMessage)({id:"enterpriseColony.huaweicloud.nas"}))),w.default.createElement("div",{className:l?S.default.config:S.default.en_config},w.default.createElement(D,(0,o.default)({},b,{label:(0,y.formatMessage)({id:"enterpriseColony.cloud.image_address"}),className:S.default.antd_form}),s("domain",{rules:[{required:!1,message:(0,y.formatMessage)({id:"enterpriseColony.cloud.input_image_address"})},{pattern:/^[^\s]*$/,message:(0,y.formatMessage)({id:"placeholder.no_spaces"})}]})(w.default.createElement(d.default,{placeholder:(0,y.formatMessage)({id:"enterpriseColony.cloud.input_image_address"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}))),w.default.createElement(D,(0,o.default)({},b,{label:(0,y.formatMessage)({id:"enterpriseColony.cloud.namespace"}),className:S.default.antd_form}),s("namespace",{rules:[{required:!1,message:(0,y.formatMessage)({id:"enterpriseColony.cloud.input_namespace"})},{pattern:/^[^\s]*$/,message:(0,y.formatMessage)({id:"placeholder.no_spaces"})}]})(w.default.createElement(d.default,{placeholder:(0,y.formatMessage)({id:"enterpriseColony.cloud.input_namespace"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}))),w.default.createElement(D,(0,o.default)({},b,{label:(0,y.formatMessage)({id:"enterpriseColony.cloud.name"}),className:S.default.antd_form}),s("username",{rules:[{required:!1,message:(0,y.formatMessage)({id:"enterpriseColony.cloud.input_name"})},{pattern:/^[^\s]*$/,message:(0,y.formatMessage)({id:"placeholder.no_spaces"})}]})(w.default.createElement(d.default,{placeholder:(0,y.formatMessage)({id:"enterpriseColony.cloud.input_name"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}))),w.default.createElement(D,(0,o.default)({},b,{label:(0,y.formatMessage)({id:"enterpriseColony.cloud.password"}),className:S.default.antd_form}),s("password",{rules:[{required:!1,message:(0,y.formatMessage)({id:"enterpriseColony.cloud.input_password"})},{pattern:/^[^\s]*$/,message:(0,y.formatMessage)({id:"placeholder.no_spaces"})}]})(w.default.createElement(d.default,{type:"password",placeholder:(0,y.formatMessage)({id:"enterpriseColony.cloud.input_password"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}})))))),w.default.createElement(i.default,null,w.default.createElement(D,{className:S.default.antd_row_btn},w.default.createElement(n.default,{className:S.default.antd_btn,onClick:()=>{this.props.dispatch(h.routerRedux.push("/enterprise/".concat(t,"/addCluster")))}},w.default.createElement(y.FormattedMessage,{id:"button.return"})),w.default.createElement(n.default,{className:S.default.antd_btn,onClick:()=>{this.toLinkNext("advanced")}},w.default.createElement(y.FormattedMessage,{id:"button.configuration"})),w.default.createElement(n.default,{className:S.default.antd_btn,type:"primary",onClick:()=>{this.toLinkNext("next")}},w.default.createElement(y.FormattedMessage,{id:"button.next"})))))))}},c=f))||c)||c);a.default=F}}]);