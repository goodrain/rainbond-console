(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"qzb/":function(e,t,r){"use strict";var n=r("tAuX"),a=r("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("B9cy");var i,l=a(r("Ol7k")),s=a(r("TSYQ")),o=r("MuoO"),d=r("7DNP"),c=r("4zCG"),u=a(r("ZShK")),p=r("s4NR"),h=n(r("q1tI")),f=(r("LLXN"),r("E6Dt")),m=a(r("ZFw/")),g=a(r("W2Kv")),v=a(r("NtFa")),E=a(r("h3zL")),b=a(r("xqX8")),y=a(r("IamK")),x=a(r("HZnN")),_=a(r("mWxT")),C=a(r("R1Dz")),L=(a(r("u95X")),l.default.Content);(0,c.enquireScreen)(e=>{i=e});class w extends h.PureComponent{constructor(e){super(e),this.getEnterpriseList=(()=>{var e=this.props.dispatch;e({type:"user/fetchCurrent"}),e({type:"global/fetchEnterpriseList",callback:e=>{e&&200===e.status_code&&this.setState({enterpriseList:e.list,ready:!0},()=>{this.fetchEnterpriseInfo()})}})}),this.handleMenuCollapse=(e=>{var t=this.props.dispatch;t({type:"global/changeLayoutCollapsed",payload:e})}),this.fetchEnterpriseInfo=(()=>{var e=this.props,t=e.dispatch,r=e.currentUser;r&&r.enterprise_id&&t({type:"global/fetchEnterpriseInfo",payload:{enterprise_id:r.enterprise_id}})}),this.fetchEnterpriseService=(e=>{var t=this.props.dispatch;t({type:"order/fetchEnterpriseService",payload:{enterprise_id:e}})}),this.getLoginRole=(e=>{this.props.dispatch;var t=e.teams;if(!(t&&t.length>0))return(null===e||void 0===e?void 0:e.is_enterprise_admin)?"/enterprise/".concat(null===e||void 0===e?void 0:e.enterprise_id,"/index"):"/account/center/personal";var r=t[0],n=r.team_name,a=r.region,i=a[0].team_region_name;return n&&i?"/team/".concat(n,"/region/").concat(i,"/index"):void 0}),this.onJumpPersonal=(()=>{var e=this.props,t=e.enterprise,r=e.dispatch,n=e.currentUser,a=(t&&t.enterprise_id,this.getLoginRole(n));r(d.routerRedux.replace(a))}),this.state={ready:!1,isMobiles:i,enterpriseList:[]}}componentDidMount(){this.getEnterpriseList()}getContext(){var e=this.props.location;return{location:e}}render(){var e=this.props,t=e.children,r=e.currentUser,n=e.rainbondInfo,a=e.collapsed,i=e.enterprise,o=e.location,c=this.state,w=c.enterpriseList,M=c.isMobiles,W=c.ready,I=i&&i.enterprise_id,N=_.default.fetchLogo(n,i)||g.default;if(!W||!i)return h.default.createElement(b.default,null);var P=(0,p.stringify)({redirect:window.location.href});if(!r||!n||0===w.length)return h.default.createElement(d.Redirect,{to:"/user/login?".concat(P)});var R={"screen-xs":{maxWidth:575},"screen-sm":{minWidth:576,maxWidth:767},"screen-md":{minWidth:768,maxWidth:991},"screen-lg":{minWidth:992,maxWidth:1199},"screen-xl":{minWidth:1200}},S="calc(100% -48px)",U=()=>{return h.default.createElement("div",{className:E.default.enterprise,onClick:this.onJumpPersonal},h.default.createElement("img",{src:N,alt:""}))},k=()=>{return h.default.createElement(l.default,null,h.default.createElement(y.default,{currentEnterprise:r,enterpriseList:w,currentUser:r,logo:N,Authorized:x.default,collapsed:a,location:o,isMobile:M,onCollapse:this.handleMenuCollapse}),h.default.createElement(l.default,null,h.default.createElement(v.default,{logo:N,isPubCloud:n&&n.is_public&&n.is_public.enable,eid:I,currentUser:r,collapsed:a,onCollapse:this.handleMenuCollapse,isMobile:M,customHeaderImg:U}),h.default.createElement(L,{key:"sdfds",style:{height:"calc(100vh - 64px)",overflow:"auto",width:S}},h.default.createElement("div",{style:{margin:"24px 24px 0"}},h.default.createElement(x.default,{logined:!0,authority:["admin","user"],noMatch:h.default.createElement(d.Redirect,{to:"/user/login"})},t,h.default.createElement(u.default,null))))))},q=_.default.fetchSiteTitle(n);return h.default.createElement(h.Fragment,null,h.default.createElement(m.default,{title:q},h.default.createElement(f.ContainerQuery,{query:R},e=>h.default.createElement(C.default.Provider,{value:this.getContext()},h.default.createElement("div",{className:(0,s.default)(e)},k())))))}}var M=(0,o.connect)(e=>{var t=e.user,r=e.global;return{currentUser:t.currentUser,rainbondInfo:r.rainbondInfo,collapsed:r.collapsed,enterprise:r.enterprise}})(w);t.default=M}}]);