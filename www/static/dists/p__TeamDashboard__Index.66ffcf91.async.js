(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[83],{"+TLC":function(e,t,a){e.exports={container:"container___1KMHL",header:"header___3Kdlv",left:"left___1j5H8",teamName:"teamName___1LjZL",downIcon:"downIcon___31Hh6",right:"right___xIyIw",info:"info___A9qtd",appList:"appList___QPO6e"}},Ex6E:function(e,t,a){"use strict";var i=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("T2oS");var n=i(a("W9HT"));a("qVdP");var s=i(a("jsC+"));a("+L6B");var l=i(a("2/Rp"));a("Pwec");var d=i(a("CtXQ"));a("lUTK");var o=i(a("BvKs"));a("OaEy");var u=i(a("2fM7"));a("y8nQ");var p,c,m,f,v=i(a("Vl3Y")),g=a("MuoO"),h=a("7DNP"),_=(i(a("wd/R")),r(a("q1tI"))),w=a("LLXN"),E=(i(a("puxM")),i(a("dhbq"))),C=i(a("QDog")),N=(i(a("mWxT")),i(a("ZgmS")),i(a("v10I"))),y=i(a("+iC2")),b=i(a("+TLC")),T=(v.default.Item,u.default.Option,p=(0,g.connect)(e=>{var t=e.user,a=e.index,i=e.loading,r=e.global,n=e.teamControl,s=e.enterprise;return{currentUser:t.currentUser,index:a,enterprise:r.enterprise,events:a.events,pagination:a.pagination,rainbondInfo:r.rainbondInfo,currentTeam:n.currentTeam,currentRegionName:n.currentRegionName,currentEnterprise:s.currentEnterprise,loading:i,pluginsList:n.pluginsList,noviceGuide:r.noviceGuide}}),c=v.default.create(),p(m=c((f=class extends _.PureComponent{constructor(e){super(e),this.loadUserTeams=(()=>{this.setState({loading:!0});var e=this.props,t=e.dispatch,a=e.currentEnterprise,i=e.enterprise,r=e.currentUser,n=this.state,s=n.page,l=n.page_size,d=a&&a.enterprise_id||i&&i.enterprise_id||r&&r.enterprise_id||C.default.getCurrEnterpriseId();d?t({type:"global/fetchMyTeams",payload:{enterprise_id:d,name:"",page:s,page_size:l},callback:e=>{e&&200===e.status_code&&this.setState({userTeamList:e.list,loading:!1},()=>{this.fetchPipePipeline(d)})}}):this.setState({loading:!1})}),this.setTeamMenu=((e,t)=>{if(e){var a=e.some(e=>{return e.name==t});return a}}),this.fetchPipePipeline=(e=>{var t=this.props,a=t.dispatch,i=t.currentEnterprise,r=t.enterprise,n=t.currentUser,s=e||i&&i.enterprise_id||r&&r.enterprise_id||n&&n.enterprise_id||C.default.getCurrEnterpriseId();s&&a({type:"teamControl/fetchPluginUrl",payload:{enterprise_id:s,region_name:C.default.getCurrRegionName()},callback:e=>{var t=N.default.segregatePluginsByHierarchy(e.list,"Team"),a=[];t.forEach(e=>{a.push({name:e.display_name,path:"/team/".concat(C.default.getCurrTeamName(),"/region/").concat(C.default.getCurrRegionName(),"/plugins/").concat(e.name)})}),this.setState({showPipeline:a})}})}),this.fetchGroup=(()=>{var e=this.props.dispatch;e({type:"user/fetchCurrent",payload:{team_name:C.default.getCurrTeamName()},callback:t=>{if(t&&t.bean){var a=y.default.getTeamByTeamName(t.bean,C.default.getCurrTeamName());this.setState({currentTeam:a,indexLoading:!1}),e({type:"teamControl/fetchCurrentTeamPermissions",payload:a&&a.tenant_actions}),e({type:"teamControl/fetchCurrentTeam",payload:a})}}})}),this.getPluginsMenu=(()=>{var e=this.state.showPipeline,t=_.default.createElement(o.default,null,e.map(e=>{return _.default.createElement(o.default.Item,{key:e.path},_.default.createElement(h.Link,{to:e.path},e.name))}));return e.length>0?_.default.createElement(s.default,{overlay:t,placement:"bottomLeft",style:{marginRight:10}},_.default.createElement(l.default,{style:{marginRight:10}},_.default.createElement(d.default,{type:"control"}),"\u529f\u80fd\u62d3\u5c55",_.default.createElement(d.default,{type:"down",className:b.default.downIcon}))):null}),this.generateMenu=(()=>{var e=this.props.currentUser,t=this.state.userTeamList,a=[];t.map(t=>{var i=y.default.getTeamByTeamName(e,t.team_name);i&&i.region.map(e=>{var i="/team/".concat(t.team_name,"/region/").concat(e.team_region_name,"/index"),r={name:"".concat(t.team_alias," | ").concat(e.team_region_alias),link:i,key:t.team_name};a.push(r)})});var i=_.default.createElement(o.default,null,a.map(e=>{return _.default.createElement(o.default.Item,{key:e.key},_.default.createElement(h.Link,{to:e.link,title:e.name,onClick:()=>{this.setState({indexLoading:!0},()=>{this.fetchGroup()})}},_.default.createElement("span",null,e.name)))}));return i}),this.state={loading:!1,userTeamList:[],page:1,page_size:100,showPipeline:[],isNeedAuthz:!1,currentTeam:this.props.currentTeam||{},indexLoading:!0}}componentDidMount(){this.loadUserTeams(),this.fetchGroup()}render(){this.state.currentTeam;var e,t=this.props,a=t.pluginsList,i=t.noviceGuide;return _.default.createElement("div",{className:b.default.container,key:this.state.loading},_.default.createElement(n.default,{spinning:this.state.loading},_.default.createElement("div",{className:b.default.header},_.default.createElement("div",{className:b.default.left},_.default.createElement(s.default,{overlay:this.generateMenu(),placement:"bottomLeft"},_.default.createElement("div",{className:b.default.teamName},null===(e=this.state.currentTeam)||void 0===e?void 0:e.team_alias,_.default.createElement(d.default,{type:"down",className:b.default.downIcon})))),_.default.createElement("div",{className:b.default.right},this.getPluginsMenu(),this.setTeamMenu(a,"pipeline")&&_.default.createElement(l.default,{style:{marginRight:10},onClick:()=>{var e=this.props.dispatch;e(h.routerRedux.push({pathname:"/team/".concat(C.default.getCurrTeamName(),"/region/").concat(C.default.getCurrRegionName(),"/Pipeline")}))}},C.default.fetchSvg("pipeLine",!1,"14px"),(0,w.formatMessage)({id:"menu.team.pipeline"})),_.default.createElement(l.default,{style:{marginRight:10},onClick:()=>{var e=this.props.dispatch;e(h.routerRedux.push({pathname:"/team/".concat(C.default.getCurrTeamName(),"/region/").concat(C.default.getCurrRegionName(),"/myplugns")}))}},_.default.createElement(d.default,{type:"setting"}),(0,w.formatMessage)({id:"global.fetchAccessText.plugin"})),_.default.createElement(l.default,{"data-guide":"team-setting",onClick:()=>{var e=this.props.dispatch;e(h.routerRedux.push({pathname:"/team/".concat(C.default.getCurrTeamName(),"/region/").concat(C.default.getCurrRegionName(),"/team")}))}},_.default.createElement(d.default,{type:"setting"}),(0,w.formatMessage)({id:"versionUpdata_6_1.setting"})))),_.default.createElement("div",{className:b.default.content},_.default.createElement(E.default,{noviceGuide:i,pluginsList:a}))))}},m=f))||m)||m);t.default=T},OVAO:function(e,t,a){e.exports={basicInfoRow:"basicInfoRow___2igrr",basicInfo:"basicInfo___GSc31",basicInfoTitle:"basicInfoTitle___189-K",basicInfoContent:"basicInfoContent___3FCAw",appListCard:"appListCard___1nH0m",appName:"appName___1F7PH",customCard:"customCard___1TiS-",runningRow:"runningRow___12k_Q",stoppedRow:"stoppedRow___X7ONL",errorRow:"errorRow___WL77Q",defaultRow:"defaultRow____RFJ-",cardHeader:"cardHeader___1ae_C",cardContent:"cardContent___o99K0",infoItem:"infoItem___Y_AED",label:"label___-jq2j",value:"value___3GoHi",cardRow:"cardRow___3ztGy",cardFooter:"cardFooter___27Ujp",teamHotAppList:"teamHotAppList___W0OET",teamHotAppItem:"teamHotAppItem___2JHzG",appStatus:"appStatus___1tz0c",appItemDetail:"appItemDetail___1VNeJ",appTitle:"appTitle___1Tn9x",statusText:"statusText___31Cps",bottomBox:"bottomBox___3qKya",btn:"btn___3e4uj",icon:"icon___1xQhr",visterBtn:"visterBtn___OR3DX",paginationContainer:"paginationContainer___12BZh",appListEmpty:"appListEmpty___2LZzr",tableCreateBtnWrapper:"tableCreateBtnWrapper___3kp5O",addNewAppCard:"addNewAppCard___yM14F",addNewAppContent:"addNewAppContent___19upM",addNewAppText:"addNewAppText___36SSo"}},dhbq:function(e,t,a){"use strict";var i=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var n=i(a("bx4M"));a("DjyN");var s=i(a("NUBc"));a("R9oj");var l=i(a("ECub"));a("g9YV");var d=i(a("wCAj"));a("+L6B");var o=i(a("2/Rp"));a("7Kak");var u=i(a("9yH6"));a("Pwec");var p=i(a("CtXQ"));a("14J3");var c=i(a("BMrR"));a("jCWc");var m=i(a("kPKH"));a("+BJd");var f=i(a("mr32"));a("T2oS");var v=i(a("W9HT"));a("5Dmo");var g=i(a("3S7+"));a("/xke");var h=i(a("TeRw")),_=i(a("jehZ"));a("OaEy");var w=i(a("2fM7"));a("5NDa");var E,C,N,y=i(a("5rEg")),b=r(a("q1tI")),T=a("MuoO"),I=a("LLXN"),S=i(a("ALo4")),L=i(a("qCJ4")),x=i(a("18gR")),R=i(a("YCtL")),A=i(a("HtlY")),M=i(a("9Qkj")),P=i(a("QDog")),k=i(a("v10I")),U=a("7DNP"),O=i(a("8+Sn")),G=i(a("wd/R")),H=i(a("OVAO")),z=y.default.Search,B=w.default.Option,V=(E=(0,T.connect)(e=>{var t=e.user,a=e.index,i=e.loading,r=e.global,n=e.teamControl,s=e.enterprise;return{currentUser:t.currentUser,index:a,enterprise:r.enterprise,events:a.events,pagination:a.pagination,rainbondInfo:r.rainbondInfo,currentTeam:n.currentTeam,currentRegionName:n.currentRegionName,currentEnterprise:s.currentEnterprise,loading:i,currentTeamPermissionsInfo:n.currentTeamPermissionsInfo}}),E((N=class extends b.Component{constructor(e){var t,a;super(e),this.handleGuideStep=(e=>{if(this.setState({guideStep:e}),"close"===e||!e&&"create-app"===this.state.guideStep){var t=this.props.dispatch;t({type:"global/putUserNewbieGuideConfig",payload:{arr:[{key:"teamOverview",value:!0}]},callback:()=>{this.getUserNewbieGuideConfig()}})}window.dispatchEvent(new CustomEvent("guideStepChange",{detail:e}))}),this.getUserNewbieGuideConfig=(()=>{var e=this.props.dispatch;e({type:"global/fetchUserNewbieGuideConfig"})}),this.renderGuide=(()=>{var e=this.state.guideStep,t={"team-overview":{tit:"\u56e2\u961f\u57fa\u672c\u4fe1\u606f",desc:"\u8fd9\u91cc\u5c55\u793a\u4e86\u56e2\u961f\u7684\u57fa\u672c\u4fe1\u606f\u548c\u8d44\u6e90\u4f7f\u7528\u60c5\u51b5\uff0c\u5305\u62ec\u5e94\u7528\u6570\u91cf\u3001\u7ec4\u4ef6\u6570\u91cf\u3001CPU\u4f7f\u7528\u91cf\u3001\u5185\u5b58\u4f7f\u7528\u91cf\u548c\u5b58\u50a8\u4f7f\u7528\u91cf\u7b49\u91cd\u8981\u6307\u6807\u3002",nextStep:"team-setting",svgPosition:{top:"250px",left:"300px"},conPosition:{top:"260px",left:"320px"}},"team-setting":{tit:"\u56e2\u961f\u8bbe\u7f6e",desc:"\u56e2\u961f\u540d\u79f0\u662f\u7cfb\u7edf\u6839\u636e\u7528\u6237\u540d\u81ea\u52a8\u751f\u6210\u7684\uff0c\u60a8\u53ef\u4ee5\u5728\u56e2\u961f\u8bbe\u7f6e\u4e2d\u4fee\u6539\u56e2\u961f\u540d\u79f0\u3001\u9080\u8bf7\u65b0\u6210\u5458\u52a0\u5165\u56e2\u961f\u3001\u8bbe\u7f6e\u89d2\u8272\u6743\u9650\u7b49\u3002",prevStep:"team-overview",nextStep:"create-app",svgPosition:{top:"80px",right:"30px"},conPosition:{top:"60px",right:"80px"}},"create-app":{tit:"\u521b\u5efa\u65b0\u5e94\u7528",desc:"\u70b9\u51fb\u6b64\u5904\u5f00\u542f\u90e8\u7f72\u5411\u5bfc\uff0c\u60a8\u53ef\u4e00\u952e\u5b89\u88c5\u5e94\u7528\u5e02\u573a\u7cbe\u9009\u5e94\u7528\uff0c\u5feb\u901f\u4f53\u9a8c\u5f00\u7bb1\u5373\u7528\u7684\u4fbf\u6377\uff1b\u4e5f\u53ef\u7075\u6d3b\u9009\u62e9\u6e90\u7801\u6784\u5efa\uff08\u652f\u6301\u7ed1\u5b9a\u79c1\u6709Git\u4ed3\u5e93\uff09\u3001\u955c\u50cf\u90e8\u7f72\uff08\u5bf9\u63a5\u81ea\u6709\u955c\u50cf\u5e93\uff09\u6216YAML\u7f16\u6392\u3002",prevStep:"team-setting",isSuccess:!0,svgPosition:{top:"330px",right:"30px"},conPosition:{top:"340px",right:"40px"}}};return e&&t[e]?b.default.createElement(x.default,(0,_.default)({},t[e],{totals:5,handleClose:()=>this.handleGuideStep("close"),handlePrev:()=>this.handleGuideStep(t[e].prevStep),handleNext:()=>this.handleGuideStep(t[e].nextStep)})):null}),this.loadOverview=(()=>{var e=this.props.dispatch;e({type:"index/fetchOverview",payload:{team_name:P.default.getCurrTeamName(),region_name:P.default.getCurrRegionName()},callback:e=>{e&&e.bean&&e.bean.region_health?this.setState({loadingOverview:!1,loadedOverview:!0},()=>{this.loadHotApp(),this.getStorageUsed(e.bean.team_id)}):this.handleCloseLoading()},handleError:()=>{this.handleCloseLoading()}})}),this.getStorageUsed=(e=>{var t=this.props.dispatch;t({type:"global/fetchStorageUsed",payload:{tenant_id:e},callback:e=>{e&&this.setState({storageUsed:e.bean.used_storage})}})}),this.handleCloseLoading=(()=>{this.setState({loadingOverview:!1,loadedOverview:!0})}),this.loadHotApp=(()=>{var e=this.state,t=e.page,a=e.page_size,i=e.query,r=e.sortValue;this.props.dispatch({type:"global/getTeamAppList",payload:{team_name:P.default.getCurrTeamName(),region:P.default.getCurrRegionName(),query:i,page:t,page_size:a,sort:r},callback:e=>{e&&200===e.status_code&&this.setState({teamHotAppList:e.list,appListTotal:e.bean&&e.bean.total,appListLoading:!1})},handleError:e=>{e&&e.data&&10401===e.data.code&&this.setState({page:1},()=>{this.loadHotApp()})}})}),this.handleChangePage=((e,t)=>{this.setState({page:e,page_size:t,appListLoading:!0},()=>{this.loadHotApp()})}),this.onSearch=(e=>{this.setState({query:e,appListLoading:!0,page:1,page_size:10},()=>{this.loadHotApp(!0)})}),this.handleSortChange=(e=>{this.setState({appListLoading:!0,sortValue:e,page:1,page_size:10},()=>{this.loadHotApp()})}),this.handlUnit=((e,t,a)=>{if("memory"===e){if(t||a){var i=t,r=a;return i>=1024&&(i=t/1024,r="GB"),a?r:i.toFixed(1)}return t}if("cpu"===e){if(t||a){var n=t,s=a;return n>=1e3&&(n=t/1e3,s="Core"),a?s:n.toFixed(1)}return t}}),this.handleAddGroup=((e,t)=>{var a=this.props.dispatch;this.setState({addGroup:!1},()=>{M.default.refreshPermissionsInfo(),h.default.success({message:(0,I.formatMessage)({id:"versionUpdata_6_1.createSuccess"})}),a(U.routerRedux.push("/team/".concat(P.default.getCurrTeamName(),"/region/").concat(P.default.getCurrRegionName(),"/create/wizard?group_id=").concat(e)))})}),this.onJumpToWizard=(()=>{this.setState({createComponentVisible:!0})}),this.handleCloseCreateComponent=(()=>{this.setState({createComponentVisible:!1})}),this.cancelAddApp=(()=>{this.setState({addGroup:!1})}),this.getRowClassName=(e=>{switch(e.status){case"RUNNING":return H.default.runningRow;case"STARTING":return H.default.runningRow;case"CLOSED":return H.default.stoppedRow;case"STOPPING":return H.default.stoppedRow;case"ABNORMAL":return H.default.errorRow;case"PARTIAL_ABNORMAL":return H.default.errorRow;case"unknown":return H.default.errorRow;case"deployed":return H.default.runningRow;case"superseded":return H.default.runningRow;case"failed":return H.default.errorRow;case"pending-install":return H.default.runningRow;case"pending-upgrade":return H.default.runningRow;case"pending-rollback":return H.default.runningRow;default:return H.default.defaultRow}}),this.handleViewChange=(e=>{window.localStorage.setItem("isTableView",e),this.setState({isTableView:e})}),this.renderCardView=(()=>{var e=this.state,t=e.teamHotAppList,a=e.appListLoading,i=(e.language,e.teamAppCreatePermission),r=this.props.dispatch,n=null===i||void 0===i?void 0:i.isAccess,s=b.default.createElement("svg",{t:"1735296596548",style:{marginRight:"2px"},class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"10566",width:"12",height:"12"},b.default.createElement("path",{d:"M864.107583 960.119537H63.880463V159.892417h447.928278V96.011954H0v927.988046h927.988046V527.874486h-63.880463v432.245051z","p-id":"10567",fill:"#195AC3"}),b.default.createElement("path",{d:"M592.137467 0v63.880463h322.462458L457.491222 521.371685l45.137093 45.137093L960.119537 109.400075v322.462458h63.880463V0H592.137467z","p-id":"10568",fill:"#195AC3"})),l=b.default.createElement("svg",{t:"1735296415486",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4279",width:"48",height:"48"},b.default.createElement("path",{d:"M801.171 483.589H544V226.418c0-17.673-14.327-32-32-32s-32 14.327-32 32v257.171H222.83c-17.673 0-32 14.327-32 32s14.327 32 32 32H480v257.17c0 17.673 14.327 32 32 32s32-14.327 32-32v-257.17h257.171c17.673 0 32-14.327 32-32s-14.327-32-32-32z","p-id":"4280",fill:"#195AC3"}));return b.default.createElement(v.default,{spinning:a},b.default.createElement("div",{className:H.default.teamHotAppList,style:{height:t.length<8?"300px":""}},n&&b.default.createElement("div",{style:{marginLeft:"0px"}},b.default.createElement("div",{className:"".concat(H.default.teamHotAppItem," ").concat(H.default.hoverPointer," ").concat(H.default.addNewAppCard),onClick:()=>{this.onJumpToWizard()}},b.default.createElement("div",{className:H.default.addNewAppContent},l,b.default.createElement("div",{className:H.default.addNewAppText},(0,I.formatMessage)({id:"versionUpdata_6_1.createApp"}))))),t.map((e,t)=>{var a,i,n=M.default.queryPermissionsInfo(null===(a=this.props.currentTeamPermissionsInfo)||void 0===a?void 0:a.team,"app_overview","app_".concat(e.group_id)),l=(null===n||void 0===n||n.isCreate,(null===(i=this.state.teamAppCreatePermission)||void 0===i?void 0:i.isAccess)?t+1:t);return b.default.createElement("div",{key:e.group_id,style:{marginLeft:l%4?"1.2%":"0px"}},b.default.createElement("div",{className:"".concat(H.default.teamHotAppItem," ").concat(H.default.hoverPointer),onClick:()=>{r(U.routerRedux.push("/team/".concat(P.default.getCurrTeamName(),"/region/").concat(P.default.getCurrRegionName(),"/apps/").concat(e.group_id,"/overview")))}},b.default.createElement("div",{className:H.default.appStatus,style:{background:P.default.appStatusColor(e.status)}}),b.default.createElement("div",{className:H.default.appItemDetail},b.default.createElement(g.default,{placement:"topLeft",title:e.group_name},b.default.createElement("div",{className:H.default.appTitle},e.group_name)),b.default.createElement("div",{className:H.default.statusText,style:{background:P.default.appStatusColor(e.status)}},P.default.appStatusText(e.status)),b.default.createElement("div",{className:H.default.bottomBox},b.default.createElement("div",{className:H.default.component},b.default.createElement(I.FormattedMessage,{id:"teamOverview.component.name"}),": ",e.services_num,b.default.createElement(I.FormattedMessage,{id:"unit.entries"})),b.default.createElement("div",{className:H.default.updateTime},e.update_time&&(0,G.default)(e.update_time).fromNow(),"\xa0",b.default.createElement(I.FormattedMessage,{id:"teamOverview.update"}))),b.default.createElement("div",{className:H.default.btn},"RUNNING"===e.status&&b.default.createElement("div",{className:H.default.visterBtn},s,e.accesses.length>0&&b.default.createElement(R.default,{linkList:e.accesses,type:"link"}))))))})))});var i=window.localStorage.getItem("isTableView"),r=e.noviceGuide,n=e.rainbondInfo,s=r&&r.some(e=>"teamOverview"===e.key&&"True"==e.value),l=!0===(null===n||void 0===n?void 0:n.is_saas)&&!s;this.state={page:1,page_size:12,query:"",sortValue:1,loadingOverview:!0,loadedOverview:!1,appListLoading:!0,teamHotAppList:[],appListTotal:0,addGroup:!1,teamOverviewPermission:M.default.queryPermissionsInfo(null===(t=this.props.currentTeamPermissionsInfo)||void 0===t?void 0:t.team,"team_overview"),teamAppCreatePermission:M.default.queryPermissionsInfo(null===(a=this.props.currentTeamPermissionsInfo)||void 0===a?void 0:a.team,"team_app_create"),isTableView:"true"===i,language:"zh-CN"===O.default.get("language"),storageUsed:0,guideStep:l?"team-overview":"",createComponentVisible:!1}}componentDidMount(){var e=this.state;e.teamOverviewPermission,e.teamAppCreatePermission,this.props.noviceGuide;this.loadOverview(),setTimeout(()=>{var e=document.querySelector('[data-guide="'.concat(this.state.guideStep,'"]'));e&&(e.style.position="relative",e.style.zIndex="1000",e.style.backgroundColor="#fff")},1e3)}componentDidUpdate(e,t){var a=this.state.guideStep,i=this.props.noviceGuide;if(e.noviceGuide!==i){var r=i&&i.some(e=>"teamOverview"===e.key&&!0===e.value);r&&a&&this.setState({guideStep:""})}if(t.guideStep!==a){var n=document.getElementById("guide-overlay");n&&n.remove();var s=document.querySelector('[data-guide="'.concat(t.guideStep,'"]'));s&&(s.style.position="",s.style.zIndex=""),setTimeout(()=>{var e=document.querySelector('[data-guide="'.concat(a,'"]'));e&&(e.style.position="relative",e.style.zIndex="1000")},100)}}render(){var e,t,a,i,r,v,h,_,E,C=this.state,N=C.loadingOverview,y=C.loadedOverview,T=C.teamHotAppList,x=(C.total,C.pageSizeOptions,C.createAppVisible,C.page),R=C.page_size,O=C.query,V=C.appListLoading,q=C.appListTotal,F=C.addGroup,D=C.teamOverviewPermission,j=D.isAppList,J=D.isAccess,W=C.teamAppCreatePermission.isAccess,Q=C.isTableView,K=C.storageUsed,X=this.props,Y=X.index,Z=(X.currentTeamPermissionsInfo,X.pluginsList),$=k.default.isInstallPlugin(Z,"rainbond-bill"),ee=[{title:(0,I.formatMessage)({id:"versionUpdata_6_1.appName"}),dataIndex:"group_name",key:"group_name",render:(e,t)=>{return b.default.createElement("a",{className:H.default.appName,onClick:()=>{var e=this.props.dispatch;e(U.routerRedux.push("/team/".concat(P.default.getCurrTeamName(),"/region/").concat(P.default.getCurrRegionName(),"/apps/").concat(t.group_id,"/overview")))}},e)}},{title:(0,I.formatMessage)({id:"versionUpdata_6_1.status"}),dataIndex:"status",key:"status",render:(e,t)=>{return b.default.createElement(f.default,{color:P.default.appStatusColor(e)},P.default.appStatusText(e))}},{title:(0,I.formatMessage)({id:"versionUpdata_6_1.servicesNum"}),dataIndex:"services_num",key:"services_num"},{title:(0,I.formatMessage)({id:"versionUpdata_6_1.memory"}),dataIndex:"used_mem",key:"used_mem",render:(e,t)=>{return b.default.createElement("span",null,e||0)}},{title:"CPU(m)",dataIndex:"used_cpu",key:"used_cpu",render:(e,t)=>{return b.default.createElement("span",null,e||0)}},{title:(0,I.formatMessage)({id:"versionUpdata_6_1.disk"}),dataIndex:"used_disk",key:"used_disk",render:(e,t)=>{return b.default.createElement("span",null,e||0)}},{title:(0,I.formatMessage)({id:"versionUpdata_6_1.updated.time"}),dataIndex:"update_time",key:"update_time",render:(e,t)=>{return(0,G.default)(t.update_time).fromNow()}},{title:(0,I.formatMessage)({id:"versionUpdata_6_1.action"}),key:"action",render:(e,t)=>{var a,i=M.default.queryPermissionsInfo(null===(a=this.props.currentTeamPermissionsInfo)||void 0===a?void 0:a.team,"app_overview","app_".concat(t.group_id));null===i||void 0===i||i.isCreate;return b.default.createElement(b.default.Fragment,null,b.default.createElement("a",{onClick:()=>{var e=this.props.dispatch;e(U.routerRedux.push("/team/".concat(P.default.getCurrTeamName(),"/region/").concat(P.default.getCurrRegionName(),"/apps/").concat(t.group_id,"/overview")))}},(0,I.formatMessage)({id:"versionUpdata_6_1.manage"})))}}];return b.default.createElement(b.default.Fragment,null,this.renderGuide(),((null===Y||void 0===Y?void 0:null===(e=Y.overviewInfo)||void 0===e?void 0:e.region_health)||N)&&b.default.createElement(b.default.Fragment,null,b.default.createElement("div",{"data-guide":"team-overview"},b.default.createElement(c.default,{type:"flex",justify:"space-between",className:H.default.basicInfoRow},b.default.createElement(m.default,{span:4},b.default.createElement("div",{className:H.default.basicInfo},b.default.createElement("div",{className:H.default.basicInfoTitle},(0,I.formatMessage)({id:"versionUpdata_6_1.appNum"})),b.default.createElement("div",{className:H.default.basicInfoContent},J?(null===Y||void 0===Y?void 0:null===(t=Y.overviewInfo)||void 0===t?void 0:t.team_app_num)||0:"**"))),b.default.createElement(m.default,{span:4},b.default.createElement("div",{className:H.default.basicInfo},b.default.createElement("div",{className:H.default.basicInfoTitle},(0,I.formatMessage)({id:"versionUpdata_6_1.serviceNum"})),b.default.createElement("div",{className:H.default.basicInfoContent},J?(null===Y||void 0===Y?void 0:null===(a=Y.overviewInfo)||void 0===a?void 0:a.team_service_num)||0:"**"))),b.default.createElement(m.default,{span:4},b.default.createElement("div",{className:H.default.basicInfo},b.default.createElement("div",{className:H.default.basicInfoTitle},(0,I.formatMessage)({id:"versionUpdata_6_1.cpuUsage"})," (",this.handlUnit("cpu",null===Y||void 0===Y?void 0:null===(i=Y.overviewInfo)||void 0===i?void 0:i.cpu_usage,"m"),")"),b.default.createElement("div",{className:H.default.basicInfoContent},J?this.handlUnit("cpu",null===Y||void 0===Y?void 0:null===(r=Y.overviewInfo)||void 0===r?void 0:r.cpu_usage)||0:"**"))),b.default.createElement(m.default,{span:4},b.default.createElement("div",{className:H.default.basicInfo},b.default.createElement("div",{className:H.default.basicInfoTitle},(0,I.formatMessage)({id:"versionUpdata_6_1.memoryUsage"})," (",this.handlUnit("memory",null===Y||void 0===Y?void 0:null===(v=Y.overviewInfo)||void 0===v?void 0:v.memory_usage,"MB"),")"),b.default.createElement("div",{className:H.default.basicInfoContent},J?this.handlUnit("memory",null===Y||void 0===Y?void 0:null===(h=Y.overviewInfo)||void 0===h?void 0:h.memory_usage)||0:"**"))),b.default.createElement(m.default,{span:4},b.default.createElement("div",{className:H.default.basicInfo},b.default.createElement("div",{className:H.default.basicInfoTitle},$?"".concat((0,I.formatMessage)({id:"versionUpdata_6_1.storageUsage"}),"(").concat(null===K||void 0===K?void 0:K.unit,")"):"".concat((0,I.formatMessage)({id:"versionUpdata_6_1.diskUsage"}),"(GB)")),b.default.createElement("div",{className:H.default.basicInfoContent},J?$?null===K||void 0===K?void 0:K.value:null===Y||void 0===Y?void 0:null===(_=Y.overviewInfo)||void 0===_?void 0:_.disk_usage:"**"))))),b.default.createElement(n.default,{title:b.default.createElement("div",null,(0,I.formatMessage)({id:"versionUpdata_6_1.appList"}),b.default.createElement(u.default.Group,{style:{marginLeft:"14px"},value:Q?"table":"card",onChange:e=>this.handleViewChange("table"===e.target.value)},b.default.createElement(u.default.Button,{value:"card"},b.default.createElement(g.default,{title:(0,I.formatMessage)({id:"versionUpdata_6_1.appList.card"})},b.default.createElement(p.default,{type:"appstore"}))),b.default.createElement(u.default.Button,{value:"table"},b.default.createElement(g.default,{title:(0,I.formatMessage)({id:"versionUpdata_6_1.appList.table"})},b.default.createElement(p.default,{type:"table"}))))),bordered:!1,className:H.default.appListCard,loading:V,extra:b.default.createElement(b.default.Fragment,null,b.default.createElement(z,{placeholder:(0,I.formatMessage)({id:"teamOverview.searchTips"}),onSearch:this.onSearch,value:O,allowClear:!0,onChange:e=>{this.setState({query:e.target.value})},style:{width:300,marginRight:10}}),b.default.createElement(w.default,{style:{width:this.state.language?"140px":"170px"},placeholder:(0,I.formatMessage)({id:"teamOverview.sortTips"}),defaultValue:1,onChange:this.handleSortChange},b.default.createElement(B,{title:(0,I.formatMessage)({id:"teamOverview.runStatusSort"}),value:1},b.default.createElement(I.FormattedMessage,{id:"teamOverview.runStatusSort"})),b.default.createElement(B,{title:(0,I.formatMessage)({id:"teamOverview.updateTimeSort"}),value:2},b.default.createElement(I.FormattedMessage,{id:"teamOverview.updateTimeSort"}))))},!V&&j&&b.default.createElement(b.default.Fragment,null,Q?b.default.createElement(b.default.Fragment,null,W&&b.default.createElement("div",{className:H.default.tableCreateBtnWrapper},b.default.createElement(o.default,{type:"primary",onClick:()=>{this.onJumpToWizard()},"data-guide":"create-app"},(0,I.formatMessage)({id:"versionUpdata_6_1.createApp"}))),T.length>0?b.default.createElement(d.default,{dataSource:T,columns:ee,pagination:!1,rowClassName:this.getRowClassName,rowKey:e=>e.group_id,loading:V,pagination:!1}):b.default.createElement("div",{className:H.default.appListEmpty},b.default.createElement(l.default,{description:(0,I.formatMessage)({id:"teamOverview.startDeploy"})}))):b.default.createElement(b.default.Fragment,null,this.renderCardView(),0===T.length&&!W&&b.default.createElement("div",{className:H.default.appListEmpty},b.default.createElement(l.default,{description:(0,I.formatMessage)({id:"teamOverview.startDeploy"})}))),T.length>0&&b.default.createElement("div",{className:H.default.paginationContainer},b.default.createElement(s.default,{showSizeChanger:!0,onShowSizeChange:this.handleChangePage,current:x,pageSize:R,total:q,onChange:this.handleChangePage,showQuickJumper:!0,showTotal:e=>"\u5171 ".concat(e," \u6761"),hideOnSinglePage:q<=12,pageSizeOptions:["12","24","36","48","60"]}))))),y&&(null===Y||void 0===Y?void 0:Y.overviewInfo)&&!(null===Y||void 0===Y?void 0:null===(E=Y.overviewInfo)||void 0===E?void 0:E.region_health)&&b.default.createElement("div",null,b.default.createElement(S.default,{type:"warning",title:(0,I.formatMessage)({id:"teamOverview.result.title"}),description:(0,I.formatMessage)({id:"teamOverview.result.description"}),actions:[b.default.createElement(o.default,{loading:N,onClick:this.loadOverview,type:"primary",key:"console"},b.default.createElement(I.FormattedMessage,{id:"teamOverview.loadOverview"}))]})),F&&b.default.createElement(L.default,{onCancel:this.cancelAddApp,onOk:this.handleAddGroup}),b.default.createElement(A.default,{visible:this.state.createComponentVisible,onCancel:this.handleCloseCreateComponent,dispatch:this.props.dispatch,currentEnterprise:this.props.currentEnterprise,rainbondInfo:this.props.rainbondInfo,currentUser:this.props.currentUser}))}},C=N))||C);t.default=V}}]);