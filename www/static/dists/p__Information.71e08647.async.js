(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[50],{"7/fe":function(e,t,a){"use strict";var s=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("T2oS");var i=s(a("W9HT"));a("+BJd");var n=s(a("mr32"));a("BoS7");var d,r,o,u=s(a("Sdc0")),c=l(a("q1tI")),m=a("MuoO"),p=s(a("Zcdj")),h=(d=(0,m.connect)(e=>{var t=e.global,a=e.user;return{enterprise:t.enterprise,currentUser:a.currentUser}}),d((o=class extends c.PureComponent{constructor(e){super(e),this.onChange=(e=>{this.setState({loading:!0},()=>{this.putSetRemind(e)})}),this.loadSetRemind=(()=>{var e=this.props,t=e.dispatch,a=e.currentUser;t({type:"global/fetchSetRemind",payload:{enterprise_id:a.enterprise_id,user_id:a.user_id},callback:e=>{e&&200===e._code&&this.setState({list:e.list,loading:!1})}})}),this.putSetRemind=(e=>{var t=this.props,a=t.dispatch,s=t.currentUser;a({type:"global/putSetRemind",payload:{enterprise_id:s.enterprise_id,user_id:s.user_id,rule_id:e.ID,enable:!e.enable},callback:e=>{e&&200===e._code&&this.loadSetRemind()}})}),this.state={loading:!0,list:[]}}componentDidMount(){this.loadSetRemind()}render(){var e=this.state.list,t={system:"\u901a\u77e5\u4fe1\u606f",alert:"\u62a5\u8b66\u4fe1\u606f"};return c.default.createElement("div",null,c.default.createElement("div",{className:p.default.boxs},c.default.createElement("div",{className:p.default.title},"\u63d0\u9192\u8bbe\u7f6e")),c.default.createElement("div",{className:p.default.customTitle},c.default.createElement("ul",{className:p.default.customContent},c.default.createElement("li",null,"\u6d88\u606f\u7c7b\u578b"),c.default.createElement("li",null,"\u90ae\u4ef6\u63d0\u9192"))),c.default.createElement(i.default,{spinning:this.state.loading},e&&e.length>0&&e.map(e=>{var a=e.ID,s=e.category,l=e.enable,i=e.email;return c.default.createElement("div",{className:p.default.customTitle,key:a},c.default.createElement("ul",{className:p.default.customContent},c.default.createElement("li",null,t[s]||s),c.default.createElement("li",null,c.default.createElement(u.default,{style:{marginRight:"5px"},checked:l,onChange:()=>{this.onChange(e)}}),i&&c.default.createElement(n.default,{color:l?"blue":"#cccccc"},i))))})))}},r=o))||r);t.default=h},"9CEz":function(e,t,a){"use strict";var s=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var i=s(a("2/Rp"));a("g9YV");var n=s(a("wCAj"));a("Awhp");var d=s(a("KrTs"));a("Znn+");var r,o,u,c=s(a("ZTPi")),m=l(a("q1tI")),p=a("MuoO"),h=a("7DNP"),g=s(a("wd/R")),f=s(a("CTv9")),_=s(a("+iC2")),y=s(a("Zcdj")),v=c.default.TabPane,b=(r=(0,p.connect)(e=>{var t=e.user;return{user:t.currentUser}}),r((u=class extends m.PureComponent{constructor(e){super(e),this.onChange=(e=>{this.setState({loading:!0,activeKey:e,isRead:"unread"===e?"False":null},()=>{this.loadAlertMessages()})}),this.onPageChange=(e=>{this.setState({page:e},()=>{this.loadAlertMessages()})}),this.loadAlertMessages=(()=>{var e=this.props.dispatch,t=this.state,a=t.page,s=t.pageSize,l=t.isRead;e({type:"global/fetchAlertMessages",payload:{page:a,page_size:s,create_time:"",is_read:l,category:"alert"},callback:e=>{e&&200===e._code&&this.setState({loading:!1,dataList:e.list,total:e.total})}})}),this.handleRead=(()=>{this.setState({modifyLoading:!0},()=>{this.putReadAllMessages()})}),this.putInternalMessages=((e,t,a)=>{var s=this.props.dispatch,l=this.state.isRead;s({type:"global/putInternalMessages",payload:{message_ids:e},callback:e=>{this.setState({modifyLoading:!1}),e&&200===e._code&&("False"!==l&&this.updataAlertMessages(),this.loadAlertMessages(),t&&this.handleJump(t,a))}})}),this.putReadAllMessages=(()=>{var e=this.props,t=e.dispatch,a=e.user;t({type:"global/putReadAllMessages",payload:{enterprise_id:a&&a.enterprise_id,category:"alert"},callback:()=>{this.setState({modifyLoading:!1}),this.loadAlertMessages()}})}),this.handleJump=((e,t)=>{var a=this.props.dispatch,s=t.teamNameInfo,l=t.appObj,i=t.componentObj,n=t.pluginInfo;this.state.adminer&&s?this.fetchDetail("teamControl/joinTeam",{team_name:s.team_name},e):l?this.fetchDetail("application/fetchGroupDetail",{team_name:l.team_name,region_name:l.region,group_id:l.app_id},e):i?this.fetchDetail("appControl/fetchDetail",{team_name:i.team_name,app_alias:i.service_alias},e):n?this.fetchDetail("plugin/getPluginVersions",{team_name:n.team_name,plugin_id:n.plugin_id},e):a(h.routerRedux.push(e))}),this.fetchDetail=((e,t,a)=>{var s=this.props.dispatch;s({type:e,payload:t,callback:()=>{s(h.routerRedux.push(a))}})}),this.updataAlertMessages=(()=>{var e=this.props.dispatch;e({type:"global/fetchAlertMessages",payload:{page:1,page_size:5,is_read:"False",create_time:"",category:"alert"}})}),this.start=(()=>{this.setState({loading:!0}),setTimeout(()=>{this.setState({loading:!1})},1e3)}),this.handleTable=(()=>{var e=this.state,t=e.total,a=e.loading,s=e.page,l=e.pageSize,i=e.dataList;return m.default.createElement(n.default,{onRow:e=>{return{onClick:()=>{e.is_read||this.putInternalMessages([e.message_id])}}},showHeader:!1,loading:a,pagination:{total:t,page_num:s,pageSize:l,onChange:this.onPageChange,current:s},dataSource:i,columns:[{title:"",dataIndex:"content",render:(e,t)=>{return m.default.createElement("div",{style:{cursor:t.is_read?"auto":"pointer",display:"flex",alignItems:"center",justifyContent:"space-between"}},m.default.createElement("div",{style:{display:"flex",alignItems:"center"}},m.default.createElement(d.default,{status:t.is_read?"default":"error"}),f.default.fetchLogsContent(e,(e,a)=>{t.is_read?this.handleJump(e,a):this.putInternalMessages([t.message_id],e,a)})),t.create_time&&m.default.createElement("span",{style:{display:"flex",alignItems:"center"}},m.default.createElement("svg",{style:{margin:"0 5px 0 20px"},fill:"currentColor",preserveAspectRatio:"xMidYMid meet",height:"1em",width:"1em",viewBox:"0 0 16 16"},m.default.createElement("g",null,m.default.createElement("path",{d:"M8 0a8 8 0 110 16A8 8 0 018 0zm0 2a6 6 0 100 12A6 6 0 008 2zm0 2a1 1 0 01.993.883L9 5v3.02l2.125 1.7a1 1 0 01.228 1.302l-.072.103a1 1 0 01-1.303.228l-.103-.072L7 8.98V5a1 1 0 011-1z"}))),(0,g.default)(t.create_time).locale("zh-cn").format("YYYY-MM-DD HH:mm:ss")))}}]})});var t=this.props,a=t.match.params.activeType,s=t.user,l=_.default.isCompanyAdmin(s);this.state={adminer:l,dataList:[],total:0,page:1,pageSize:10,modifyLoading:!1,loading:!1,isRead:null,activeKey:a||"all"}}componentDidMount(){this.loadAlertMessages()}render(){var e=this.state,t=e.activeKey,a=e.dataList,s=e.modifyLoading,l=e.loading;return m.default.createElement("div",null,m.default.createElement("div",{className:y.default.boxs},m.default.createElement("div",{className:y.default.title},"\u62a5\u8b66\u4fe1\u606f"),"unread"===t&&!l&&0!==a.length&&m.default.createElement(i.default,{type:"primary",loading:s,onClick:this.handleRead},"\u6807\u8bb0\u6240\u6709\u4e3a\u5df2\u8bfb")),m.default.createElement(c.default,{onChange:this.onChange,animated:!1,activeKey:t},m.default.createElement(v,{tab:"\u6240\u6709\u901a\u77e5",key:"all"},this.handleTable()),m.default.createElement(v,{tab:"\u672a\u8bfb\u901a\u77e5",key:"unread"},this.handleTable())))}},o=u))||o);t.default=b},Zcdj:function(e,t,a){e.exports={main:"main___1Cxql",leftmenu:"leftmenu___74ib5",layoutMenuTitle:"layoutMenuTitle___5WFrQ",titles:"titles___1mFg4",right:"right___1bBaY",boxs:"boxs___3eM-G",title:"title___nzJn4",customTitle:"customTitle___2KFEu",customSubTitle:"customSubTitle___1s-En",customContent:"customContent___2T6TS",noAllowed:"noAllowed___Cu1e9",mb10:"mb10___2u5s2",pb20:"pb20___3ERH8"}},ulQK:function(e,t,a){"use strict";var s=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("lUTK");var i,n,d,r=s(a("BvKs")),o=l(a("q1tI")),u=a("MuoO"),c=s(a("3a4m")),m=a("LLXN"),p=s(a("Zcdj")),h=r.default.Item,g=(i=(0,u.connect)(),i((d=class extends o.PureComponent{constructor(e){super(e),this.getmenu=(()=>{var e={notice:o.default.createElement(m.FormattedMessage,{id:"header.information.notice",defaultMessage:"notice"}),alarm:o.default.createElement(m.FormattedMessage,{id:"header.information.alarm",defaultMessage:"alarm"}),remind:o.default.createElement(m.FormattedMessage,{id:"header.information.remindSetting",defaultMessage:"remindSetting"})};return e?Object.keys(e).map(t=>o.default.createElement(h,{key:t},e[t])):""}),this.handleKey=(()=>{return window.location.href.indexOf("notice")>-1?"notice":window.location.href.indexOf("alarm")>-1?"alarm":"remind"}),this.selectKey=(e=>{var t=e.key;c.default.push("/information/management/".concat(t,"/").concat("remind"===t?"setting":"all")),this.setState({selectKey:t})}),this.state={selectKey:this.handleKey()}}componentWillReceiveProps(){var e=this.handleKey();e!==this.state.selectKey&&(this.state={selectKey:this.handleKey()})}render(){var e=this.props.children,t=this.state.selectKey;return o.default.createElement("div",{className:p.default.main},o.default.createElement("div",{className:p.default.leftmenu},o.default.createElement("div",{className:p.default.layoutMenuTitle},o.default.createElement("div",{className:p.default.titles},"\u901a\u77e5\u4e2d\u5fc3")),o.default.createElement(r.default,{mode:"inline",selectedKeys:[t],onClick:this.selectKey},this.getmenu())),o.default.createElement("div",{className:p.default.right},e))}},n=d))||n);t.default=g},yFyH:function(e,t,a){"use strict";var s=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var i=s(a("2/Rp"));a("g9YV");var n=s(a("wCAj"));a("Awhp");var d=s(a("KrTs"));a("Znn+");var r,o,u,c=s(a("ZTPi")),m=s(a("CTv9")),p=s(a("+iC2")),h=a("MuoO"),g=a("7DNP"),f=s(a("wd/R")),_=l(a("q1tI")),y=s(a("Zcdj")),v=c.default.TabPane,b=(r=(0,h.connect)(e=>{var t=e.user;return{user:t.currentUser}}),r((u=class extends _.PureComponent{constructor(e){super(e),this.onChange=(e=>{this.setState({loading:!0,activeKey:e,isRead:"unread"===e?"False":null},()=>{this.loadSystemMessages()})}),this.onPageChange=(e=>{this.setState({page:e},()=>{this.loadSystemMessages()})}),this.loadSystemMessages=(()=>{var e=this.props.dispatch,t=this.state,a=t.page,s=t.pageSize,l=t.isRead;e({type:"global/fetchSystemMessages",payload:{page:a,page_size:s,create_time:"",is_read:l,category:"system"},callback:e=>{e&&200===e._code&&this.setState({loading:!1,dataList:e.list,total:e.total})}})}),this.handleRead=(()=>{this.setState({modifyLoading:!0},()=>{this.putReadAllMessages()})}),this.putInternalMessages=((e,t,a)=>{var s=this.props.dispatch,l=this.state.isRead;s({type:"global/putInternalMessages",payload:{message_ids:e},callback:e=>{this.setState({modifyLoading:!1}),e&&200===e._code&&("False"!==l&&this.updataSystemMessages(),this.loadSystemMessages(),t&&this.handleJump(t,a))}})}),this.putReadAllMessages=(()=>{var e=this.props,t=e.dispatch,a=e.user;t({type:"global/putReadAllMessages",payload:{enterprise_id:a&&a.enterprise_id,category:"system"},callback:e=>{this.setState({modifyLoading:!1}),this.loadSystemMessages()}})}),this.handleJump=((e,t)=>{var a=this.props.dispatch,s=t.teamNameInfo,l=t.appObj,i=t.componentObj,n=t.pluginInfo;this.state.adminer&&s?this.fetchDetail("teamControl/joinTeam",{team_name:s.team_name},e):l?this.fetchDetail("application/fetchGroupDetail",{team_name:l.team_name,region_name:l.region,group_id:l.app_id},e):i?this.fetchDetail("appControl/fetchDetail",{team_name:i.team_name,app_alias:i.service_alias},e):n?this.fetchDetail("plugin/getPluginVersions",{team_name:n.team_name,plugin_id:n.plugin_id},e):a(g.routerRedux.push(e))}),this.fetchDetail=((e,t,a)=>{var s=this.props.dispatch;s({type:e,payload:t,callback:()=>{s(g.routerRedux.push(a))}})}),this.updataSystemMessages=(()=>{var e=this.props.dispatch;e({type:"global/fetchSystemMessages",payload:{page:1,page_size:5,is_read:"False",create_time:"",category:"system"}})}),this.start=(()=>{this.setState({loading:!0}),setTimeout(()=>{this.setState({loading:!1})},1e3)}),this.handleTable=(()=>{var e=this.state,t=e.total,a=e.loading,s=e.page,l=e.pageSize,i=e.dataList;return _.default.createElement(n.default,{onRow:e=>{return{onClick:()=>{e.is_read||this.putInternalMessages([e.message_id])}}},showHeader:!1,loading:a,pagination:{total:t,page_num:s,pageSize:l,onChange:this.onPageChange,current:s},dataSource:i,columns:[{title:"",dataIndex:"content",render:(e,t)=>{return _.default.createElement("div",{style:{cursor:t.is_read?"auto":"pointer",display:"flex",alignItems:"center",justifyContent:"space-between"}},_.default.createElement("div",{style:{display:"flex",alignItems:"center"}},_.default.createElement(d.default,{status:t.is_read?"default":"error"}),m.default.fetchLogsContent(e,(e,a)=>{t.is_read?this.handleJump(e,a):this.putInternalMessages([t.message_id],e,a)})),t.create_time&&_.default.createElement("span",{style:{display:"flex",alignItems:"center"}},_.default.createElement("svg",{style:{margin:"0 5px 0 20px"},fill:"currentColor",preserveAspectRatio:"xMidYMid meet",height:"1em",width:"1em",viewBox:"0 0 16 16"},_.default.createElement("g",null,_.default.createElement("path",{d:"M8 0a8 8 0 110 16A8 8 0 018 0zm0 2a6 6 0 100 12A6 6 0 008 2zm0 2a1 1 0 01.993.883L9 5v3.02l2.125 1.7a1 1 0 01.228 1.302l-.072.103a1 1 0 01-1.303.228l-.103-.072L7 8.98V5a1 1 0 011-1z"}))),(0,f.default)(t.create_time).locale("zh-cn").format("YYYY-MM-DD HH:mm:ss")))}}]})});var t=this.props,a=t.match.params.activeType,s=t.user,l=p.default.isCompanyAdmin(s);this.state={adminer:l,dataList:[],total:0,page:1,pageSize:10,modifyLoading:!1,loading:!1,isRead:null,activeKey:a||"all"}}componentDidMount(){this.loadSystemMessages()}render(){var e=this.state,t=e.activeKey,a=e.dataList,s=e.modifyLoading,l=e.loading;return _.default.createElement("div",null,_.default.createElement("div",{className:y.default.boxs},_.default.createElement("div",{className:y.default.title},"\u901a\u77e5\u4fe1\u606f"),"unread"===t&&!l&&0!==a.length&&_.default.createElement(i.default,{type:"primary",disabled:l||0===a.length,loading:s,onClick:this.handleRead},"\u6807\u8bb0\u6240\u6709\u4e3a\u5df2\u8bfb")),_.default.createElement(c.default,{onChange:this.onChange,animated:!1,activeKey:t},_.default.createElement(v,{tab:"\u6240\u6709\u901a\u77e5",key:"all"},this.handleTable()),_.default.createElement(v,{tab:"\u672a\u8bfb\u901a\u77e5",key:"unread"},this.handleTable())))}},o=u))||o);t.default=b}}]);