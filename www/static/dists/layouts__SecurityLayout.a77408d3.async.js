(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{aej6:function(e,t,r){"use strict";var o=r("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r("q1tI")),s=r("MuoO"),a=r("ArA+"),i=o(r("xqX8")),c=r("s4NR"),u=o(r("8+Sn")),d=o(r("QDog")),l=o(r("o1c1"));class h extends n.default.PureComponent{constructor(){super(...arguments),this.state={isReady:!1},this.fetchUserInfo=(()=>{var e=this.props.dispatch;e&&e({type:"user/fetchCurrent",callback:()=>{this.setState({isReady:!0})},handleError:()=>{this.setState({isReady:!0})}})})}componentDidMount(){var e=this.props.dispatch;e&&e({type:"global/fetchRainbondInfo",callback:e=>{e&&this.fetchUserInfo()}})}render(){var e=this.props,t=e.children,r=e.currentUser,o=e.needLogin,s=this.state.isReady,h=u.default.get("token"),p=h&&r,f=(0,c.stringify)({redirect:window.location.href});return o?(d.default.removeCookie(),n.default.createElement(a.Redirect,{to:"/user/login?".concat(f)})):s?s&&!p&&"/user/login"!==window.location.pathname?(d.default.removeCookie(),n.default.createElement(a.Redirect,{to:"/user/login?".concat(f)})):n.default.createElement(l.default,{children:t}):n.default.createElement(i.default,null)}}var p=(0,s.connect)(e=>{var t=e.user,r=e.loading,o=e.global;return{currentUser:t.currentUser,loading:r.models.user,needLogin:o.needLogin}})(h);t.default=p},o1c1:function(e,t,r){"use strict";(function(e){var o=r("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,s,a,i=o(r("q1tI")),c=r("MuoO"),u=(n=(0,c.connect)(e=>{var t=e.user;return{currentUser:t.currentUser}}),n((a=class extends i.PureComponent{constructor(e){super(e),this.saveLog=(e=>{var t=this.props,r=t.dispatch,o=t.currentUser;r({type:"global/saveLog",payload:{username:o&&o.user_name,enterprise_id:o&&o.enterprise_id,address:window.location.href,msg:"\u9519\u8bef\uff1a".concat(e.toString())}})}),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(t,r){return console.log("err",t.toString()),console.log("errorInfo",r),e&&Object({NODE_ENV:"production"}),this.saveLog(t)}render(){var e=this.state.hasError,t=this.props.children;return e&&(i.Result,i.Button),t}},s=a))||s);t.default=u}).call(this,r("Q2Ig"))}}]);