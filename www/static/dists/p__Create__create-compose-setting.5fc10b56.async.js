(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[31],{ZDtg:function(e,t,a){"use strict";var r=a("g09b"),s=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var l=r(a("2/Rp")),o=r(a("p0pE"));a("Znn+");var p,i,d,n=r(a("ZTPi")),c=s(a("q1tI")),u=a("MuoO"),m=a("LLXN"),h=a("7DNP"),f=r(a("QDog")),g=r(a("n9hB")),y=r(a("q76B")),C=(r(a("lpA0")),a("4/zt"),r(a("vGHg"))),b=n.default.TabPane,v=(p=(0,u.connect)(e=>{e.user,e.appControl,e.teamControl,e.createApp;return{}},null,null,{withRef:!0}),p((d=class extends c.PureComponent{constructor(e){super(e),this.loadDetail=(()=>{var e=this.getParams();this.props.dispatch({type:"createApp/getAppsByComposeId",payload:{team_name:f.default.getCurrTeamName(),compose_id:e.compose_id},callback:e=>{this.setState({apps:(e&&e.list||[]).map(e=>{return{service:e}})})},handleError:e=>{var t=g.default.getCode(e);t&&404===t&&this.props.dispatch(h.routerRedux.push("/team/".concat(f.default.getCurrTeamName(),"/region/").concat(f.default.getCurrRegionName(),"/exception/404")))}})}),this.handleBuild=(()=>{var e=f.default.getCurrTeamName(),t=this.getParams();this.props.dispatch({type:"application/buildCompose",payload:(0,o.default)({team_name:f.default.getCurrTeamName()},t),callback:()=>{this.props.dispatch({type:"global/fetchGroups",payload:{team_name:e}}),this.props.dispatch(h.routerRedux.replace("/team/".concat(f.default.getCurrTeamName(),"/region/").concat(f.default.getCurrRegionName(),"/apps/").concat(t.group_id)))}})}),this.handleDelete=(()=>{var e=this.getParams();this.props.dispatch({type:"application/deleteCompose",payload:(0,o.default)({team_name:f.default.getCurrTeamName()},e),callback:()=>{this.props.dispatch({type:"global/fetchGroups",payload:{team_name:f.default.getCurrTeamName()}}),this.props.dispatch(h.routerRedux.replace("/team/".concat(f.default.getCurrTeamName(),"/region/").concat(f.default.getCurrRegionName(),"/index")))}})}),this.showDelete=(()=>{this.setState({showDelete:!0})}),this.state={type:"property",apps:[]}}componentDidMount(){this.loadDetail()}componentWillUnmount(){}getParams(){return{group_id:this.props.match.params.appID,compose_id:this.props.match.params.composeId}}getAppAlias(){return this.props.match.params.appAlias}render(){var e=this.state.apps;this.state.type;return e.length?c.default.createElement("div",null,c.default.createElement("h2",{style:{textAlign:"center"}},(0,m.formatMessage)({id:"componentCheck.advanced.setup"})),c.default.createElement("div",{style:{overflow:"hidden"}},c.default.createElement(n.default,{defaultActiveKey:"0"},e.map((e,t)=>{return c.default.createElement(b,{tab:e.service.service_cname,key:t},c.default.createElement(C.default,{updateDetail:this.loadDetail,appDetail:e}))})),c.default.createElement("div",{style:{background:"#fff",padding:"20px",textAlign:"right",position:"fixed",bottom:0,left:0,right:0,zIndex:2,borderTop:"1px solid #e8e8e8"}},c.default.createElement(l.default,{style:{marginRight:8},onClick:this.handleBuild,type:"primary"},(0,m.formatMessage)({id:"button.confirm_create"})),c.default.createElement(l.default,{onClick:this.showDelete,type:"default"},(0,m.formatMessage)({id:"button.abandon_create"}))),this.state.showDelete&&c.default.createElement(y.default,{onOk:this.handleDelete,title:(0,m.formatMessage)({id:"confirmModal.abandon_create.create_check.title"}),subDesc:(0,m.formatMessage)({id:"confirmModal.delete.strategy.subDesc"}),desc:(0,m.formatMessage)({id:"confirmModal.delete.create_check.desc"}),onCancel:()=>{this.setState({showDelete:!1})}}))):null}},i=d))||i);t.default=v}}]);