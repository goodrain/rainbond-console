(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[21],{"1cUz":function(t,e,a){t.exports={antd_row:"antd_row___22Eih",antd_form:"antd_form___3vT_u",antd_row_btn:"antd_row_btn___M_ybW",antd_btn:"antd_btn___HnUHl",lists:"lists___PLy7p"}},tYjc:function(t,e,a){"use strict";var s=a("g09b"),r=a("tAuX");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("T2oS");var n=s(a("W9HT"));a("IzEo");var i=s(a("bx4M"));a("14J3");var l=s(a("BMrR"));a("+L6B");var o=s(a("2/Rp"));a("FJo9");var d=s(a("L41K"));a("y8nQ");var u,c,p,f,h=s(a("Vl3Y")),m=a("MuoO"),_=a("7DNP"),g=s(a("Qyje")),y=r(a("q1tI")),b=s(a("3a4m")),v=s(a("ALo4")),k=s(a("XZXw")),E=s(a("+iC2")),x=s(a("1cUz")),w=(h.default.Item,d.default.Step),L=(u=h.default.create(),c=(0,m.connect)(t=>{var e=t.user,a=t.list,s=t.loading,r=t.global,n=t.index;return{user:e.currentUser,list:a,loading:s.models.list,rainbondInfo:r.rainbondInfo,enterprise:r.enterprise,isRegist:r.isRegist,oauthLongin:s.effects["global/creatOauth"],overviewInfo:n.overviewInfo}}),u(p=c((f=class extends y.PureComponent{constructor(t){super(t),this.getRegionLength=(()=>{var t=this.props,e=t.dispatch,a=t.match.params.eid,s=this.state.token;e({type:"region/fetchHelmJoinStatus",payload:{eid:a,token:s},callback:t=>{200===t.status_code&&this.setState({flagStatus:!0,status:t.response_data.msg})}})}),this.loadSteps=(()=>{var t=[{title:"\u57fa\u672c\u914d\u7f6e"},{title:"\u9ad8\u7ea7\u914d\u7f6e"},{title:"\u6267\u884c\u5b89\u88c5"},{title:"\u5bf9\u63a5\u96c6\u7fa4"}];return t}),this.toLinkNext=(t=>{var e=this.props,a=e.dispatch,s=e.match.params.eid,r=this.state,n=r.data,i=r.copy,l=r.token,o=r.name,d=r.step;"install"===t?b.default.push({pathname:"/enterprise/".concat(s,"/provider/ACksterList/install"),search:g.default.stringify({data:n,copy:i,token:l,name:o,step:d,isResult:!0})}):"finish"===t?a(_.routerRedux.push("/enterprise/".concat(s,"/clusters"))):"next"===t&&a(_.routerRedux.push("/enterprise/".concat(s,"/importMessage?region_id=")))}),this.refreshStatus=(()=>{this.setState({flagStatus:!1}),this.getRegionLength()}),this.renderBody=(()=>{var t=this.state.status,e="",a="",s="",r=[];return"success"===t&&(e="success",a="\u96c6\u7fa4\u5bf9\u63a5\u6210\u529f",s="\u70b9\u51fb\u8fd4\u56de\u96c6\u7fa4\u7ba1\u7406\u6309\u94ae\u67e5\u770b\u5f53\u524d\u5bf9\u63a5\u7684\u96c6\u7fa4",r=[y.default.createElement(o.default,{className:x.default.antd_btn,onClick:()=>{this.toLinkNext("finish")},type:"primary"},"\u8fd4\u56de\u96c6\u7fa4\u7ba1\u7406"),y.default.createElement(o.default,{className:x.default.antd_btn,onClick:()=>{this.toLinkNext("next")},type:"primary"},"\u5bfc\u5165\u5df2\u6709\u5e94\u7528")]),"failed"===t&&(e="error",a="\u5f53\u524d\u96c6\u7fa4\u5bf9\u63a5\u5931\u8d25",s="\u53ef\u80fd\u670d\u52a1\u5668\u547d\u4ee4\u8fd8\u6ca1\u6709\u6267\u884c\u5b8c\u6bd5\uff0c\u53ef\u4ee5\u201c\u5237\u65b0\u8fdb\u5ea6\u201d\u6216\u53bb\u670d\u52a1\u5668\u6267\u884c\u201c watch kubectl get po -n rbd-system \u201d\u547d\u4ee4\uff0c\u67e5\u770bPod\u72b6\u6001\u3002",r=[y.default.createElement(o.default,{className:x.default.antd_btn,onClick:()=>{this.toLinkNext("install")},type:"primary"},"\u4e0a\u4e00\u6b65"),y.default.createElement(o.default,{onClick:()=>{this.refreshStatus()},className:x.default.antd_btn,type:"primary"},"\u5237\u65b0\u8fdb\u5ea6")]),y.default.createElement(v.default,{className:x.default.lists,type:e,title:a,actions:r,description:y.default.createElement("div",null,s)})});var e=this.props,a=e.user,s=e.location.search,r=g.default.parse(s.substr(1))||{},n=r.data,i=r.token,l=r.copy,d=r.name,u=r.step,c=E.default.isCompanyAdmin(a);this.state={adminer:c,status:"failed",flagStatus:!1,data:n,token:i,copy:l,name:d,step:u}}componentWillMount(){var t=this.state.adminer,e=this.props.dispatch;t||e(_.routerRedux.push("/"))}componentDidMount(){this.getRegionLength()}render(){var t=this.props.match.params,e=(t.eid,t.provider,t.clusterID,this.state.flagStatus);this.props.form.getFieldDecorator;return y.default.createElement(k.default,{title:"\u6dfb\u52a0\u96c6\u7fa4",content:"\u96c6\u7fa4\u662f\u8d44\u6e90\u7684\u96c6\u5408\uff0c\u4ee5Kubernetes\u96c6\u7fa4\u4e3a\u57fa\u7840\uff0c\u90e8\u7f72\u5e73\u53f0Region\u670d\u52a1\u5373\u53ef\u6210\u4e3a\u5e73\u53f0\u96c6\u7fa4\u8d44\u6e90\u3002"},y.default.createElement(l.default,{style:{marginBottom:"16px"}},y.default.createElement(d.default,{current:3},this.loadSteps().map(t=>y.default.createElement(w,{key:t.title,title:t.title})))),y.default.createElement(i.default,{style:{padding:"24px"}},!e&&y.default.createElement(n.default,{tip:"Loading..."},y.default.createElement(i.default,{bordered:!1},this.renderBody())),e&&y.default.createElement(i.default,{bordered:!1},this.renderBody())))}},p=f))||p)||p);e.default=L}}]);