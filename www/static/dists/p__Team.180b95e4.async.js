(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[82],{"1TN1":function(e,t,a){"use strict";var s=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var r=s(a("kLXV"));a("OaEy");var n=s(a("2fM7"));a("IzEo");var l=s(a("bx4M"));a("+L6B");var o=s(a("2/Rp"));a("miYZ");var d=s(a("tsqr"));a("/xke");var m,c,u,h=s(a("TeRw")),p=a("MuoO"),f=i(a("q1tI")),g=a("LLXN"),_=s(a("QDog")),v=s(a("GFvx")),b=s(a("q76B")),M=s(a("puxM")),C=s(a("nqg8")),E=s(a("hMqj")),y=s(a("+QRC")),T=(m=(0,p.connect)(e=>{var t=e.teamControl,a=e.loading,s=e.user,i=e.index;return{currUser:s.currentUser,regions:t.regions,currentTeam:t.currentTeam,toMoveTeamLoading:a.effects["teamControl/moveTeam"],overviewInfo:i.overviewInfo}}),m((u=class extends f.PureComponent{constructor(e){super(e),this.onMoveTeam=(e=>{this.setState({toMoveTeam:e})}),this.onDelMember=(e=>{this.setState({toDeleteMember:e})}),this.onEditAction=(e=>{this.setState({toEditAction:e})}),this.hideMoveTeam=(()=>{this.setState({toMoveTeam:null})}),this.handleMoveTeam=(()=>{this.props.dispatch({type:"teamControl/moveTeam",payload:{team_name:_.default.getCurrTeamName(),user_id:this.state.toMoveTeam.user_id},callback:e=>{e&&200===e.status_code&&h.default.success({message:e.msg_show}),this.updateCurrentUser(),this.loadMembers(),this.hideMoveTeam()}})}),this.updateCurrentUser=(()=>{this.props.dispatch({type:"user/fetchCurrent",payload:{team_name:_.default.getCurrTeamName()}})}),this.hideEditAction=(()=>{this.setState({toEditAction:null})}),this.handleEditAction=(e=>{var t=this.state.toEditAction;this.props.dispatch({type:"teamControl/editMember",payload:{team_name:_.default.getCurrTeamName(),user_id:t.user_id,role_ids:e.role_ids},callback:()=>{this.loadMembers(),this.hideEditAction()}})}),this.showAddMember=(()=>{this.setState({showAddMember:!0})}),this.hideAddMember=(()=>{this.setState({showAddMember:!1})}),this.handleAddMember=(e=>{this.props.dispatch({type:"teamControl/addMember",payload:{team_name:_.default.getCurrTeamName(),user_ids:e.user_ids.map(e=>e.key).join(","),role_ids:e.role_ids.join(",")},callback:()=>{this.loadMembers(),this.hideAddMember()}})}),this.hideDelMember=(()=>{this.setState({toDeleteMember:null})}),this.handleDelMember=(()=>{this.props.dispatch({type:"teamControl/delMember",payload:{team_name:_.default.getCurrTeamName(),user_ids:this.state.toDeleteMember.user_id},callback:()=>{this.loadMembers(),this.hideDelMember()}})}),this.loadMembers=(()=>{var e=this.props.dispatch,t=_.default.getCurrTeamName(),a=_.default.getCurrRegionName();e({type:"teamControl/fetchTeamMember",payload:{team_name:t,region_name:a,page_size:this.state.pageSize,page:this.state.page},callback:e=>{e&&this.setState({members:e.list||[],total:e.total})}})}),this.hanldePageChange=(e=>{this.setState({page:e},()=>{this.loadMembers()})}),this.showInviteModal=(()=>{this.setState({showInviteModal:!0,selectedRole:void 0,inviteLink:"",isLinkGenerated:!1})}),this.handleRoleChange=(e=>{this.setState({selectedRole:e})}),this.handleCreateInviteLink=(()=>{var e=this.props,t=e.dispatch,a=e.overviewInfo,s=this.state.selectedRole;t({type:"user/createInviteLink",payload:{team_id:a.team_id,role_id:s},callback:e=>{if(e&&200===e.status_code){var t=e.bean.invite_id;this.setState({inviteLink:"".concat(window.location.origin,"/#/invite/").concat(t),isLinkGenerated:!0})}}})}),this.handleCopyLink=(()=>{var e=this.state.inviteLink;(0,y.default)(e),d.default.success((0,g.formatMessage)({id:"versionUpdata_6_1.invite.copy.success"})),this.handleCloseModal()}),this.handleCloseModal=(()=>{this.setState({showInviteModal:!1})}),this.loadRoles=(()=>{var e=this.props.dispatch;e({type:"teamControl/fetchTeamRoles",payload:{team_name:_.default.getCurrTeamName(),page_size:-1,page:1},callback:e=>{this.setState({roles:e.list||[]})}})}),this.state={showAddMember:!1,toDeleteMember:null,toMoveTeam:null,page:1,pageSize:8,total:0,members:[],showInviteModal:!1,selectedRole:void 0,inviteLink:"",isLinkGenerated:!1,roles:[]}}componentDidMount(){this.loadMembers(),this.loadRoles()}render(){var e=this.props,t=e.currentTeam,a=e.memberPermissions,s=e.toMoveTeamLoading,i=(e.memberPermissions.isCreate,e.currUser),d=this.state,m=(d.page,d.pageSize,d.total,d.showAddMember),c=d.members,u=d.roles,h=d.toEditAction,p=d.toDeleteMember,_=d.toMoveTeam,y=d.showInviteModal,T=d.selectedRole,w=d.inviteLink,k=d.isLinkGenerated;return f.default.createElement("div",null,f.default.createElement(l.default,{style:{marginBottom:24},bodyStyle:{paddingTop:12},title:(0,g.formatMessage)({id:"teamManage.tabs.member.title"}),extra:f.default.createElement(o.default,{onClick:this.showInviteModal,type:"primary",icon:"plus"},(0,g.formatMessage)({id:"versionUpdata_6_1.teamManage.invite.modal.submit"}))},f.default.createElement(M.default,{sm:600},f.default.createElement(C.default,{users:i,memberPermissions:a,team:t,onMoveTeam:this.onMoveTeam,onDelete:this.onDelMember,onEditAction:this.onEditAction,list:c}))),m&&f.default.createElement(v.default,{roles:u,onOk:this.handleAddMember,onCancel:this.hideAddMember}),h&&f.default.createElement(v.default,{roles:u,data:h,onOk:this.handleEditAction,onCancel:this.hideEditAction}),p&&f.default.createElement(b.default,{onOk:this.handleDelMember,title:(0,g.formatMessage)({id:"confirmModal.delete.member"}),subDesc:(0,g.formatMessage)({id:"confirmModal.delete.strategy.subDesc"}),desc:(0,g.formatMessage)({id:"confirmModal.delete.member.desc"}),onCancel:this.hideDelMember}),_&&f.default.createElement(b.default,{onOk:this.handleMoveTeam,loading:s,title:(0,g.formatMessage)({id:"confirmModal.MoveTeam.title"}),subDesc:(0,g.formatMessage)({id:"confirmModal.MoveTeam.subDesc"}),desc:(0,g.formatMessage)({id:"confirmModal.MoveTeam.desc"},{nick_name:_.nick_name}),onCancel:this.hideMoveTeam}),f.default.createElement(r.default,{title:(0,g.formatMessage)({id:"versionUpdata_6_1.teamManage.invite.modal.title"}),visible:y,onCancel:this.handleCloseModal,footer:[f.default.createElement(o.default,{key:"cancel",onClick:this.handleCloseModal},"\u53d6\u6d88"),f.default.createElement(o.default,{key:"submit",type:"primary",disabled:!T&&!k,onClick:k?this.handleCopyLink:this.handleCreateInviteLink},k?(0,g.formatMessage)({id:"versionUpdata_6_1.teamManage.invite.modal.copy"}):(0,g.formatMessage)({id:"versionUpdata_6_1.teamManage.invite.modal.submit"}))]},f.default.createElement("div",{style:{marginBottom:16}},f.default.createElement(n.default,{style:{width:"100%"},placeholder:(0,g.formatMessage)({id:"versionUpdata_6_1.teamManage.invite.modal.subDesc"}),onChange:this.handleRoleChange,disabled:k,value:T},u.map(e=>{var t=e.ID,a=e.name;return f.default.createElement(Option,{key:t,value:t},E.default.actionMap(a,!0))}))),k&&f.default.createElement("div",{style:{background:"#f5f5f5",padding:"8px 12px",borderRadius:"4px",wordBreak:"break-all"}},w)))}},c=u))||c);t.default=T},"4OG1":function(e,t,a){"use strict";var s=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var r=s(a("kLXV"));a("DZo9");var n=s(a("8z0m")),l=s(a("jehZ"));a("5NDa");var o=s(a("5rEg"));a("Pwec");var d=s(a("CtXQ"));a("y8nQ");var m,c,u,h=s(a("Vl3Y")),p=i(a("q1tI")),f=s(a("nyIC")),g=s(a("8+Sn")),_=s(a("mzlC")),v=a("LLXN"),b=h.default.Item,M=(m=h.default.create(),m((u=class extends p.PureComponent{constructor(e){super(e),this.handleSubmit=(e=>{e.preventDefault();var t=this.props.form,a=this.state.imageUrl;t.validateFields((e,t)=>{t.new_logo=a,e||this.props.onSubmit(t)})}),this.onCancel=(()=>{this.props.onCancel()}),this.handleLogoRemove=(()=>{this.setState({imageUrl:"",imageBase64:""})}),this.handleLogoChange=(e=>{"uploading"!==e.file.status?"done"===e.file.status&&(this.setState({imageUrl:e.file&&e.file.response&&e.file.response.data&&e.file.response.data.bean&&e.file.response.data.bean.file_url,loading:!1}),this.getLogoBase64(e.file.originFileObj,e=>this.setState({imageBase64:e}))):this.setState({loading:!0})}),this.getLogoBase64=((e,t)=>{var a=new FileReader;a.addEventListener("load",()=>t(a.result)),a.readAsDataURL(e)}),this.state={imageUrl:"",imageBase64:""}}render(){var e=this.props.form.getFieldDecorator,t=this.props.teamAlias,a=this.state,s=a.imageBase64,i=a.imageUrl,m=this.props.imageUrlTeam,c=void 0!==m&&m,u=g.default.get("token"),M={};u&&(M.Authorization="GRJWT ".concat(u));var C={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}},E=p.default.createElement("div",null,p.default.createElement(d.default,{type:"plus"}),p.default.createElement("div",{className:"ant-upload-text"},(0,v.formatMessage)({id:"popover.newApp.upload_pictures"})));return p.default.createElement(r.default,{title:(0,v.formatMessage)({id:"teamOther.move_team.logo_label"}),visible:!0,onOk:this.handleSubmit,onCancel:this.onCancel},p.default.createElement(h.default,{onSubmit:this.handleSubmit},p.default.createElement(b,(0,l.default)({},C,{label:(0,v.formatMessage)({id:"teamOther.move_team.name_label"})}),e("new_team_alias",{initialValue:t||"",rules:[{required:!0,message:(0,v.formatMessage)({id:"teamOther.move_team.null"})},{max:24,message:(0,v.formatMessage)({id:"teamOther.move_team.max"})}]})(p.default.createElement(o.default,{placeholder:(0,v.formatMessage)({id:"teamOther.move_team.input_name"})}))),p.default.createElement(b,(0,l.default)({},C,{label:"LOGO",extra:p.default.createElement("div",{className:_.default.conformDesc},p.default.createElement(v.FormattedMessage,{id:"popover.enterpriseOverview.setUpTeam.label.logo"})),style:{display:"none"}}),e("logo",{rules:[{required:!1,message:(0,v.formatMessage)({id:"popover.enterpriseOverview.setUpTeam.input_logo"})}]})(p.default.createElement(n.default,{className:"logo-uploader",name:"file",accept:"image/jpg,image/jpeg,image/png",action:f.default.imageUploadUrl,listType:"picture-card",headers:M,showUploadList:!1,onChange:this.handleLogoChange,onRemove:this.handleLogoRemove},i||c?p.default.createElement("img",{src:s||c,alt:"LOGO",style:{width:"100%"}}):E)))))}},c=u))||c);t.default=M},"69fC":function(e,t,a){"use strict";var s=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var r=s(a("kLXV")),n=s(a("jehZ"));a("14J3");var l=s(a("BMrR"));a("jCWc");var o=s(a("kPKH"));a("IzEo");var d=s(a("bx4M"));a("Mwp2");var m=s(a("VXEj"));a("y8nQ");var c=s(a("Vl3Y"));a("OaEy");var u,h,p,f,g=s(a("2fM7")),_=a("MuoO"),v=a("7DNP"),b=i(a("q1tI")),M=a("LLXN"),C=s(a("QDog")),E=s(a("hMqj")),y=s(a("ck6v")),T=g.default.Option,w=c.default.Item,k=(u=c.default.create(),h=(0,_.connect)(e=>{var t=e.teamControl,a=e.loading,s=e.user;return{regions:t.regions,currUser:s.currentUser,activitiesLoading:a.effects["activities/fetchList"]}}),u(p=h((f=class extends b.PureComponent{constructor(e){super(e),this.loadEvents=(()=>{var e=C.default.getCurrTeamName();this.props.dispatch({type:"index/fetchEvents",payload:{team_name:e,page_size:this.state.pageSize,page:this.state.page},callback:e=>{e&&this.setState({events:e.list||[],total:e.total||e.list.length})}})}),this.loadRoles=(()=>{var e=this.props.dispatch;e({type:"teamControl/fetchTeamRoles",payload:{team_name:C.default.getCurrTeamName(),page_size:1e4,page:1},callback:e=>{e&&this.setState({roles:e.list||[]})}})}),this.loadJoinUsers=(()=>{var e=C.default.getCurrTeamName();this.props.dispatch({type:"teamControl/getJoinTeamUsers",payload:{team_name:e},callback:e=>{e&&this.setState({joinUsers:e.list||[]})}})}),this.hanldePageChange=(e=>{this.setState({page:e},()=>{this.loadEvents()})}),this.handleRefused=(e=>{this.props.dispatch({type:"teamControl/setJoinTeamUsers",payload:{team_name:C.default.getCurrTeamName(),user_id:e.user_id,action:!1},callback:()=>{this.loadJoinUsers()}})}),this.handleJoinShow=(e=>{this.setState({joinSettingShow:!0,joinUser:e})}),this.hideJoinShow=(()=>{this.setState({joinSettingShow:!1,joinUser:null})}),this.handleJoin=(()=>{var e=this.state.joinUser,t=this.props.form;t.validateFields((t,a)=>{t||this.props.dispatch({type:"teamControl/setJoinTeamUsers",payload:{team_name:C.default.getCurrTeamName(),user_id:e.user_id,role_ids:a.role_ids,action:!0},callback:()=>{this.hideJoinShow(),this.loadJoinUsers()}})})}),this.state={page:1,pageSize:8,total:0,events:[],roles:[],joinUsers:[],joinSettingShow:!1,joinUser:null}}componentDidMount(){this.loadEvents(),this.loadRoles()}renderActivities(){var e=this.state.events||[];return e.length?e.map(e=>{var t=e.user_name,a=e.opt_type,s=e.final_status,i=e.status,r=e.create_time,n=e.target,l="/team/".concat(C.default.getCurrTeamName(),"/region/").concat(C.default.getCurrRegionName(),"/apps/").concat(C.default.getAppID(),"/overview?type=components&componentID=").concat(e.service_alias,"&tab=overview");return b.default.createElement(m.default.Item,{key:e.ID},b.default.createElement(m.default.Item.Meta,{title:b.default.createElement("span",null,b.default.createElement("a",{className:y.default.username},t),b.default.createElement("span",{className:y.default.event}," ",C.default.fetchStateOptTypeText(a)),"\xa0",n&&"service"===n&&b.default.createElement(v.Link,{to:l,className:y.default.event},e.service_name),b.default.createElement("span",null,(0,M.formatMessage)({id:"teamManage.tabs.dynamic.meta.app"})),b.default.createElement("span",{style:{color:C.default.fetchAbnormalcolor(a)}},C.default.fetchOperation(s,i))),description:b.default.createElement("span",{className:y.default.datatime_float,title:e.updatedAt},C.default.fetchdayTime(r))}))}):b.default.createElement("p",{style:{textAlign:"center",color:"ccc",paddingTop:20}},(0,M.formatMessage)({id:"teamManage.tabs.dynamic.notDynamic"}))}render(){var e=this.props,t=e.activitiesLoading,a=e.form,s=this.state,i=s.joinSettingShow,u=s.roles,h=s.total,p=a.getFieldDecorator,f={current:this.state.page,pageSize:this.state.pageSize,total:this.state.total,onChange:e=>{this.hanldePageChange(e)}},_={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}};return b.default.createElement("div",null,b.default.createElement(l.default,{gutter:24},b.default.createElement(o.default,{md:24,sm:24},b.default.createElement(d.default,{bodyStyle:{paddingTop:12},title:(0,M.formatMessage)({id:"teamManage.tabs.dynamic"}),loading:t},b.default.createElement(m.default,{pagination:h>8&&f,loading:t,size:"large"},b.default.createElement("div",{className:y.default.activitiesList},this.renderActivities()))))),i&&b.default.createElement(r.default,{title:(0,M.formatMessage)({id:"teamManage.tabs.dynamic.modal.title"}),visible:!0,onOk:this.handleJoin,onCancel:this.hideJoinShow},b.default.createElement(c.default,null,b.default.createElement(w,(0,n.default)({},_,{label:(0,M.formatMessage)({id:"teamManage.tabs.dynamic.form.lable"})}),p("role_ids",{rules:[{required:!0,message:(0,M.formatMessage)({id:"teamManage.tabs.dynamic.form.placeholder"})}]})(b.default.createElement(g.default,{getPopupContainer:e=>e.parentNode,mode:"multiple",placeholder:(0,M.formatMessage)({id:"teamManage.tabs.dynamic.form.placeholder"}),style:{width:"100%"}},u.map(e=>{var t=e.ID,a=e.name;return b.default.createElement(T,{key:t,value:t},E.default.actionMap(a))})))))))}},p=f))||p)||p);t.default=k},T1ah:function(e,t,a){"use strict";var s=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var r=s(a("2/Rp"));a("Pwec");var n=s(a("CtXQ"));a("Telt");var l,o,d,m=s(a("Tckk")),c=s(a("p0pE")),u=a("MuoO"),h=a("7DNP"),p=s(a("wd/R")),f=i(a("q1tI")),g=a("LLXN"),_=s(a("ZBM6")),v=s(a("q76B")),b=s(a("69fC")),M=s(a("1TN1")),C=s(a("XZXw")),E=s(a("K6oN")),y=a("vSx2"),T=s(a("QDog")),w=s(a("v10I")),k=s(a("9Qkj")),L=s(a("zcww")),S=s(a("mzlC")),N=s(a("4OG1")),D=(l=(0,u.connect)(e=>{var t=e.user,a=e.teamControl,s=e.loading,i=e.enterprise;return{currUser:t.currentUser,teamControl:a,projectLoading:s.effects["project/fetchNotice"],activitiesLoading:s.effects["activities/fetchList"],currentTeam:a.currentTeam,currentRegionName:a.currentRegionName,currentEnterprise:i.currentEnterprise,currentTeamPermissionsInfo:a.currentTeamPermissionsInfo,pluginsList:a.pluginsList}}),l((d=class extends f.PureComponent{constructor(e){super(e),this.getLoginRole=(e=>{this.props.dispatch;var t=e.teams;if(t&&t.length>0){var a=t[0],s=a.team_name,i=a.region,r=i[0].team_region_name;if(s&&r)return"/team/".concat(s,"/region/").concat(r,"/index")}else if(null===e||void 0===e?void 0:e.is_enterprise_admin)return"/enterprise/".concat(null===e||void 0===e?void 0:e.enterprise_id,"/index")}),this.loadOverview=(()=>{var e=this.props.dispatch;e({type:"index/fetchOverview",payload:{team_name:T.default.getCurrTeamName(),region_name:T.default.getCurrRegionName()},callback:e=>{e&&this.setState({logoInfo:e.bean.logo||_.default})},handleError:()=>{}})}),this.handlePermissions=(e=>{var t=this.props.currentTeamPermissionsInfo;return k.default.queryPermissionsInfo(t&&t.team,e)}),this.showEditName=(()=>{this.setState({showEditName:!0})}),this.hideEditName=(()=>{this.setState({showEditName:!1})}),this.showExitTeam=(()=>{this.setState({showExitTeam:!0})}),this.hideExitTeam=(()=>{this.setState({showExitTeam:!1})}),this.handleExitTeam=(()=>{var e=this.props.dispatch,t=this.state.teamsUrl;e({type:"teamControl/exitTeam",payload:{team_name:T.default.getCurrTeamName()},callback:a=>{a&&200===a.status_code&&e(h.routerRedux.push(t))}})}),this.showDelTeam=(()=>{this.setState({showDelTeam:!0})}),this.hideDelTeam=(()=>{this.setState({showDelTeam:!1})}),this.handleEditName=(e=>{this.props.dispatch({type:"teamControl/editTeamAlias",payload:(0,c.default)({team_name:T.default.getCurrTeamName()},e),callback:()=>{this.props.dispatch({type:"user/fetchCurrent",payload:{team_name:T.default.getCurrTeamName()}}),this.loadOverview(),this.hideEditName(),this.handleUpDataHeader()}})}),this.handleUpDataHeader=(()=>{var e=this.props.dispatch;e({type:"global/IsUpDataHeader",payload:{isUpData:!0}})}),this.handleDelTeam=(()=>{var e=this.state.teamsUrl,t=this.props.dispatch;t({type:"teamControl/delTeam",payload:{team_name:T.default.getCurrTeamName()},callback:a=>{a&&200===a.status_code&&t(h.routerRedux.push(e))}})}),this.handleTabChange=(e=>{this.setState({scope:e})}),this.state={showEditName:!1,showDelTeam:!1,showExitTeam:!1,scope:"",teamsUrl:this.props.currentEnterprise?this.getLoginRole(this.props.currUser):"/",eventPermissions:this.handlePermissions("team_dynamic"),memberPermissions:this.handlePermissions("team_member"),datecenterPermissions:this.handlePermissions("team_region"),rolePermissions:this.handlePermissions("team_role"),registryPermissions:this.handlePermissions("team_registry_auth")}}componentWillMount(){var e=this.props.dispatch,t=this.state,a=t.eventPermissions.isAccess,s=t.memberPermissions.isAccess,i=t.datecenterPermissions.isAccess,r=t.rolePermissions.isAccess;t.registryPermissions.isAccess;a||s||i||r||T.default.withoutPermission(e);var n="";n=a?"event":s?"member":"role",this.setState({scope:n});var l=this.props.location.state;l&&l.config&&this.setState({scope:l.config})}componentDidMount(){this.props.dispatch({type:"teamControl/fetchAllPerm"}),this.loadOverview()}getParam(){return this.props.match.params}render(){var e=this.props,t=e.currUser,a=e.currentEnterprise,s=e.currentTeam,i=e.currentRegionName,l=e.pluginsList,o=this.state,d=o.scope,c=o.showEditName,u=o.showDelTeam,_=o.showExitTeam,k=(o.eventPermissions,o.memberPermissions),D=(o.datecenterPermissions,o.rolePermissions),P=(o.registryPermissions,o.eventPermissions.isAccess),x=o.memberPermissions.isAccess,A=(o.datecenterPermissions.isAccess,o.rolePermissions.isAccess),U=(o.registryPermissions.isAccess,o.tabActiveKey,o.logoInfo),I=void 0!==U&&U,j=w.default.isInstallEnterprisePlugin(l),O=f.default.createElement("div",{className:S.default.pageHeaderContent},f.default.createElement("div",{className:S.default.avatar},f.default.createElement(m.default,{size:"large",src:I})),f.default.createElement("div",{className:S.default.content},f.default.createElement("div",{className:S.default.contentTitle},s.team_alias," ",L.default.canEditTeamName(s)&&f.default.createElement(n.default,{onClick:this.showEditName,type:"edit"})),f.default.createElement("div",null,(0,g.formatMessage)({id:"teamManage.create.time"}),(0,p.default)(s.create_time).locale("zh-cn").format("YYYY-MM-DD")))),R=L.default.canDeleteTeam(t),z=f.default.createElement("div",{className:S.default.extraContent},f.default.createElement("div",{className:S.default.extraBtns},!R&&f.default.createElement(r.default,{onClick:this.showExitTeam,type:"dashed"},f.default.createElement(n.default,{type:"rollback"})," ",(0,g.formatMessage)({id:"teamManage.tabs.deleteTeam"})),f.default.createElement(r.default,{onClick:()=>{var e=this.props.dispatch;e(h.routerRedux.push({pathname:"/team/".concat(T.default.getCurrTeamName(),"/region/").concat(T.default.getCurrRegionName(),"/index")}))},type:"default"},f.default.createElement(n.default,{type:"home"}),(0,g.formatMessage)({id:"versionUpdata_6_1.home"})))),q=[];P&&q.push({key:"event",tab:(0,g.formatMessage)({id:"teamManage.tabs.dynamic"})}),x&&q.push({key:"member",tab:(0,g.formatMessage)({id:"teamManage.tabs.member"})}),A&&j&&q.push({key:"role",tab:(0,g.formatMessage)({id:"teamManage.tabs.role"})});var B=[];return B=(0,y.createTeam)((0,y.createEnterprise)(B,a),s,i),B.push({title:(0,g.formatMessage)({id:"teamManage.tabs.setting"})}),f.default.createElement(C.default,{breadcrumbList:B,tabList:q,tabActiveKey:d||"event",onTabChange:this.handleTabChange,content:O,extraContent:z},"member"===d&&f.default.createElement(M.default,{memberPermissions:k}),"role"===d&&f.default.createElement(E.default,{type:"Permission",componentData:{rolePermissions:D},key:"Permission"}),"event"===d&&P&&f.default.createElement(b.default,{memberPermissions:k}),c&&f.default.createElement(N.default,{teamAlias:s.team_alias,imageUrlTeam:I,onSubmit:this.handleEditName,onCancel:this.hideEditName}),u&&f.default.createElement(v.default,{onOk:this.handleDelTeam,title:(0,g.formatMessage)({id:"confirmModal.quit.team.title"}),subDesc:(0,g.formatMessage)({id:"confirmModal.delete.strategy.subDesc"}),desc:(0,g.formatMessage)({id:"confirmModal.return.team.desc"}),onCancel:this.hideDelTeam}),_&&f.default.createElement(v.default,{onOk:this.handleExitTeam,title:(0,g.formatMessage)({id:"confirmModal.project_team_quit.delete.title"}),subDesc:(0,g.formatMessage)({id:"confirmModal.delete.strategy.subDesc"}),desc:(0,g.formatMessage)({id:"confirmModal.delete.project_team_quit.desc"}),onCancel:this.hideExitTeam}))}},o=d))||o);t.default=D},ck6v:function(e,t,a){e.exports={nameID:"nameID___1vhpm",icon:"icon___3m2j5",iconm:"iconm___3XT2O",activitiesList:"activitiesList___1UL9h",username:"username___2IePj",event:"event___1khhW",pageHeaderContent:"pageHeaderContent___3x0yD",avatar:"avatar___3sxRb",content:"content___1yF-R",contentTitle:"contentTitle___tqx2z",extraContent:"extraContent___2ASE1",statItem:"statItem___2-aLt",extraBtns:"extraBtns___z9NVU",members:"members___3MVUR",member:"member___3EwYc",projectList:"projectList___NGWfL",cardTitle:"cardTitle___1ElDp",projectGrid:"projectGrid___14c51",projectItemContent:"projectItemContent___3zMY4",datetime:"datetime___3zIEP",eventStatus:"eventStatus___3tQNy",datatime_float:"datatime_float___3jO9v",activeCard:"activeCard___2eWRL",tableList:"tableList___2kiaw",tableListOperator:"tableListOperator___3o_rz",tableListForm:"tableListForm___SUb2s",submitButtons:"submitButtons___3X9YA"}},mzlC:function(e,t,a){e.exports={nameID:"nameID___3LtGN",icon:"icon___1Pqh3",iconm:"iconm___3CAY7",activitiesList:"activitiesList___2EDh5",username:"username___1HTAc",event:"event___3HDPV",pageHeaderContent:"pageHeaderContent___2cxSM",avatar:"avatar___mCYpg",content:"content___3TccU",contentTitle:"contentTitle___2wrqz",extraContent:"extraContent___1KGdJ",statItem:"statItem___1H4NU",extraBtns:"extraBtns___1ZX24",members:"members___3zFaQ",member:"member___2YSMN",projectList:"projectList___3f2yo",cardTitle:"cardTitle___2hili",projectGrid:"projectGrid___3TTk_",projectItemContent:"projectItemContent___9scnQ",datetime:"datetime___3LV_M",eventStatus:"eventStatus___2NYEF",activeCard:"activeCard___3tuU1",tableList:"tableList___2B8_s",tableListOperator:"tableListOperator___vZlmN",tableListForm:"tableListForm___26-Xb",submitButtons:"submitButtons___2a5jy",conformDesc:"conformDesc___2QAdi"}},nqg8:function(e,t,a){"use strict";var s=a("tAuX"),i=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var r=i(a("wCAj"));a("+L6B");var n=i(a("2/Rp")),l=s(a("q1tI")),o=a("LLXN"),d=i(a("zcww")),m=i(a("8+Sn")),c=i(a("hMqj"));class u extends l.PureComponent{constructor(e){super(e),this.onPageChange=((e,t)=>{this.setState({page:e,pageSize:t})}),this.state={page:1,pageSize:10}}render(){var e=this.state,t=e.page,a=e.pageSize,s=this.props,i=s.list,u=s.onDelete,h=s.onEditAction,p=s.onMoveTeam,f=s.memberPermissions,g=f.isEdit,_=f.isDelete,v=s.team,b=s.users,M={current:t,pageSize:a,total:i.length,onChange:this.onPageChange,showQuickJumper:!0,showSizeChanger:!0,showTotal:e=>"\u5171 ".concat(e," \u6761"),onShowSizeChange:this.onPageChange,hideOnSinglePage:i.length<=10},C=[{title:(0,o.formatMessage)({id:"teamManage.tabs.member.table.userName"}),dataIndex:"nick_name"},{title:(0,o.formatMessage)({id:"teamManage.tabs.member.table.email"}),dataIndex:"email"},{title:(0,o.formatMessage)({id:"teamManage.tabs.member.table.role"}),dataIndex:"roles",render(e){return l.default.createElement("span",null,(e||[]).map(e=>{return l.default.createElement("span",{style:{marginRight:"8px"},key:"role".concat(e.role_id)},c.default.actionMap(e.role_name,"zh-CN"===m.default.get("language")))}))}},{title:(0,o.formatMessage)({id:"teamManage.tabs.member.table.operate"}),dataIndex:"action",render(e,t){var a=t.roles.some(e=>0==e.role_id),s=b.user_id===t.user_id;return l.default.createElement("div",null,g&&l.default.createElement(n.default,{type:"link",size:"small",disabled:a,style:{marginLeft:6},onClick:()=>{h(t)}},(0,o.formatMessage)({id:"teamManage.tabs.member.table.editRole"})),d.default.canChangeOwner(v)&&l.default.createElement(n.default,{type:"link",size:"small",disabled:a,style:{marginLeft:6},onClick:()=>{p(t)}},(0,o.formatMessage)({id:"teamManage.tabs.member.table.turnOver"})),_&&l.default.createElement(n.default,{type:"link",size:"small",disabled:a||s,onClick:()=>{u(t)}},(0,o.formatMessage)({id:"teamManage.tabs.member.table.delete"})))}}];return l.default.createElement(r.default,{rowKey:(e,t)=>t,pagination:M,dataSource:i,columns:C})}}var h=u;t.default=h}}]);