(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"/ybH":function(e,t,a){"use strict";var s=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var r=s(a("2/Rp"));a("IzEo");var n=s(a("bx4M"));a("14J3");var i=s(a("BMrR")),o=s(a("jehZ"));a("5Dmo");var d=s(a("3S7+"));a("jCWc");var u=s(a("kPKH"));a("lUTK");var m=s(a("BvKs"));a("y8nQ");var f=s(a("Vl3Y"));a("5NDa");var c=s(a("5rEg"));a("fu2T");var h,p,g,C,b=s(a("gK9i")),v=a("MuoO"),y=a("7DNP"),O=l(a("q1tI")),_=a("LLXN"),E=(s(a("+QRC")),s(a("XZXw"))),w=s(a("2lxJ")),j=(s(a("AklW")),s(a("QDog"))),k=(s(a("ZNrE")),s(a("UUmB"))),M=s(a("4sH1")),A=s(a("KrRZ")),D=s(a("D0aq")),N=(s(a("4XIh")),s(a("XZhr"))),x=(b.default.Panel,c.default.TextArea),L=(h=(0,v.connect)(e=>{var t=e.global;return{rainbondInfo:t.rainbondInfo,enterprise:t.enterprise}}),p=f.default.create(),h(g=p((C=class extends O.PureComponent{constructor(e){super(e),this.handleHelmEvents=(()=>{var e=this.props,t=e.dispatch,a=e.match.params.eid;t({type:"region/fetchHelmEvents",payload:{eid:a},callback:e=>{e.create_status?t(y.routerRedux.push("/enterprise/".concat(a||j.default.getCurrEnterpriseId(),"/provider/ACksterList/result?token=").concat(e.token,"&host=").concat(e.api_host))):this.helmToken()}})}),this.helmToken=(()=>{var e=this.props,t=e.dispatch,a=e.match.params.eid;t({type:"region/fetchHelmToken",payload:{eid:a},callback:e=>{e.bean&&this.setState({token:e.bean})}})}),this.handleValidatorsNodes=((e,t,a)=>{if(t&&t.length>0){var s=!1;t.some(e=>{if(!e.ip&&!e.name)return s=!1,!0;s=!0}),s?(this.setState({isCheck:!0}),a()):(this.setState({isCheck:!1}),a((0,_.formatMessage)({id:"enterpriseColony.ACksterList.node_name"})))}else this.setState({isCheck:!0}),a()}),this.handleValidatorsEndpoints=((e,t,a)=>{if(t&&t.length>0){var s=!1;t.some(e=>{if(e.ip)s=!0;else{if(1!=t.length||e.ip)return s=!1,!0;s=!0}}),s?a():a((0,_.formatMessage)({id:"enterpriseColony.ACksterList.node_name"}))}else a()}),this.handleClick=(e=>{this.setState({menuKey:e.key})}),this.onChangeRunTime=(e=>{this.formObj.operator.env[0].value=e.target.value}),this.handleOnChangeIp=(e=>{var t=e.target.value;t?this.formObj.Cluster.gatewayIngressIPs=t:delete this.formObj.Cluster.gatewayIngressIPs}),this.handleOnChangeGateway=(e=>{e?this.formObj.Cluster.nodesForGateway=e:delete this.formObj.Cluster.nodesForGateway}),this.handleOnChangeForChaos=(e=>{e?this.formObj.Cluster.nodesForChaos=e:delete this.formObj.Cluster.nodesForChaos}),this.handleOnChangeContainerdRuntimePath=(e=>{var t=e.target.value;t?this.formObj.Cluster.containerdRuntimePath=t:delete this.formObj.Cluster.containerdRuntimePath}),this.handleOnChangeServer=(e=>{var t=e.target.value;t?this.formObj.Cluster.RWX={enable:!0,type:"aliyun",config:{server:t}}:delete this.formObj.Cluster.RWX}),this.handleOnChangeRwx=(e=>{var t=e.target.value;t?this.formObj.Cluster.RWX={enable:!0,config:{storageClassName:t}}:delete this.formObj.Cluster.RWX}),this.handleOnChangeSecretName=(e=>{var t=e.target.value;t?(this.formObj.Cluster.etcd||(this.formObj.Cluster.etcd={}),this.formObj.Cluster.etcd.enable=!0,this.formObj.Cluster.etcd.secretName=t):this.formObj.Cluster.etcd&&(delete this.formObj.Cluster.etcd.secretName,(1===Object.keys(this.formObj.Cluster.etcd).length||2===Object.keys(this.formObj.Cluster.etcd).length&&1==this.formObj.Cluster.etcd.endpoints.length&&""==this.formObj.Cluster.etcd.endpoints[0])&&delete this.formObj.Cluster.etcd)}),this.handleOnChangeEndpoints=(e=>{e?(this.formObj.Cluster.etcd||(this.formObj.Cluster.etcd={}),this.formObj.Cluster.etcd.enable=!0,this.formObj.Cluster.etcd.endpoints=e.map(e=>e.ip),(1===Object.keys(this.formObj.Cluster.etcd).length||2===Object.keys(this.formObj.Cluster.etcd).length&&1==this.formObj.Cluster.etcd.endpoints.length&&""==this.formObj.Cluster.etcd.endpoints[0])&&delete this.formObj.Cluster.etcd):this.formObj.Cluster.etcd&&(delete this.formObj.Cluster.etcd.endpoints,1===Object.keys(this.formObj.Cluster.etcd).length&&delete this.formObj.Cluster.etcd)}),this.handleOnChangeDomain=(e=>{var t=e.target.value;t?(this.formObj.Cluster.imageHub||(this.formObj.Cluster.imageHub={}),this.formObj.Cluster.imageHub.enable=!0,this.formObj.Cluster.imageHub.domain=t):this.formObj.Cluster.imageHub&&(delete this.formObj.Cluster.imageHub.domain,1===Object.keys(this.formObj.Cluster.imageHub).length&&delete this.formObj.Cluster.imageHub)}),this.handleOnChangeNamespace=(e=>{var t=e.target.value;t?(this.formObj.Cluster.imageHub||(this.formObj.Cluster.imageHub={}),this.formObj.Cluster.imageHub.enable=!0,this.formObj.Cluster.imageHub.namespace=t):this.formObj.Cluster.imageHub&&(delete this.formObj.Cluster.imageHub.namespace,1===Object.keys(this.formObj.Cluster.imageHub).length&&delete this.formObj.Cluster.imageHub)}),this.handleOnChangeUsername=(e=>{var t=e.target.value;t?(this.formObj.Cluster.imageHub||(this.formObj.Cluster.imageHub={}),this.formObj.Cluster.imageHub.enable=!0,this.formObj.Cluster.imageHub.username=t):this.formObj.Cluster.imageHub&&(delete this.formObj.Cluster.imageHub.username,1===Object.keys(this.formObj.Cluster.imageHub).length&&delete this.formObj.Cluster.imageHub)}),this.handleOnChangePassword=(e=>{var t=e.target.value;t?(this.formObj.Cluster.imageHub||(this.formObj.Cluster.imageHub={}),this.formObj.Cluster.imageHub.enable=!0,this.formObj.Cluster.imageHub.password=t):this.formObj.Cluster.imageHub&&(delete this.formObj.Cluster.imageHub.password,1===Object.keys(this.formObj.Cluster.imageHub).length&&delete this.formObj.Cluster.imageHub)}),this.handleOnChangeDbHost=(e=>{var t=e.target.value;t?(this.formObj.Cluster.regionDatabase||(this.formObj.Cluster.regionDatabase={}),this.formObj.Cluster.regionDatabase.enable=!0,this.formObj.Cluster.regionDatabase.host=t):this.formObj.Cluster.regionDatabase&&(delete this.formObj.Cluster.regionDatabase.host,1===Object.keys(this.formObj.Cluster.regionDatabase).length&&delete this.formObj.Cluster.regionDatabase)}),this.handleOnChangeDbPort=(e=>{var t=e.target.value;t?(this.formObj.Cluster.regionDatabase||(this.formObj.Cluster.regionDatabase={}),this.formObj.Cluster.regionDatabase.enable=!0,this.formObj.Cluster.regionDatabase.port=Number(t)):this.formObj.Cluster.regionDatabase&&(delete this.formObj.Cluster.regionDatabase.port,1===Object.keys(this.formObj.Cluster.regionDatabase).length&&delete this.formObj.Cluster.regionDatabase)}),this.handleOnChangeDbUsername=(e=>{var t=e.target.value;t?(this.formObj.Cluster.regionDatabase||(this.formObj.Cluster.regionDatabase={}),this.formObj.Cluster.regionDatabase.enable=!0,this.formObj.Cluster.regionDatabase.username=t):this.formObj.Cluster.regionDatabase&&(delete this.formObj.Cluster.regionDatabase.username,1===Object.keys(this.formObj.Cluster.regionDatabase).length&&delete this.formObj.Cluster.regionDatabase)}),this.handleOnChangeDbPassword=(e=>{var t=e.target.value;t?(this.formObj.Cluster.regionDatabase||(this.formObj.Cluster.regionDatabase={}),this.formObj.Cluster.regionDatabase.enable=!0,this.formObj.Cluster.regionDatabase.password=t):this.formObj.Cluster.regionDatabase&&(delete this.formObj.Cluster.regionDatabase.password,1===Object.keys(this.formObj.Cluster.regionDatabase).length&&delete this.formObj.Cluster.regionDatabase)}),this.handleOnChangeDbName=(e=>{var t=e.target.value;t?(this.formObj.Cluster.regionDatabase||(this.formObj.Cluster.regionDatabase={}),this.formObj.Cluster.regionDatabase.enable=!0,this.formObj.Cluster.regionDatabase.name=t):this.formObj.Cluster.regionDatabase&&(delete this.formObj.Cluster.regionDatabase.name,1===Object.keys(this.formObj.Cluster.regionDatabase).length&&delete this.formObj.Cluster.regionDatabase)}),this.handleOnChangeMirrorAddress=(e=>{var t=e.target.value;t?this.formObj.Cluster.rainbondImageRepository=t:delete this.formObj.Cluster.rainbondImageRepository}),this.handleOpenModal=(()=>{this.setState({isModal:!0})}),this.handleCancleModal=(()=>{this.setState({isModal:!1})}),this.handleGoback=(()=>{var e=this.props,t=e.dispatch,a=e.match.params.eid;t(y.routerRedux.push("/enterprise/".concat(a||j.default.getCurrEnterpriseId(),"/addCluster")))}),this.state={checked:!1,loading:!1,showInitDetail:!1,task:null,isComponents:!1,guideStep:10,ipArray:[],menuKey:"basics",isModal:!1,token:"",isCheck:!1},this.formObj={operator:{env:[{name:"HELM_TOKEN",value:""}]},Cluster:{containerdRuntimePath:"/run/containerd"},Component:{rbd_app_ui:{enable:!1}}}}componentDidMount(){this.handleHelmEvents()}render(){var e=this.props.form,t=this.state,a=(t.ipArray,t.menuKey),s=t.isModal,l=t.token,h=t.isCheck,p={labelCol:{xs:{span:4},sm:{span:4}},wrapperCol:{xs:{span:16},sm:{span:16}}},g=this.props.location.query.mode||"helm";this.formObj.operator.env[0].value=l;var C=e.getFieldDecorator,b=(e.setFieldsValue,M.default.dump(this.formObj)),v=this.formObj.Cluster||{},y=v.gatewayIngressIPs&&v.nodesForGateway&&v.nodesForChaos&&h;return O.default.createElement(O.Fragment,null,O.default.createElement(E.default,{title:O.default.createElement(_.FormattedMessage,{id:"enterpriseColony.button.text"}),content:O.default.createElement(_.FormattedMessage,{id:"enterpriseColony.PageHeaderLayout.content"}),titleSvg:w.default.getPageHeaderSvg("clusters",18)},O.default.createElement(i.default,{style:{padding:"0px"}},O.default.createElement(f.default,{style:{display:"flex",justifyContent:"space-between"}},O.default.createElement(u.default,{span:16},O.default.createElement(n.default,{className:N.default.cardBox},O.default.createElement("div",{className:N.default.titleHeader},O.default.createElement("div",{className:N.default.titleSvg},"ack"==g?j.default.fetchSvg("aliIcon"):"huawei"==g?j.default.fetchSvg("huaweiIcon"):"tencent"==g?j.default.fetchSvg("tencentIcon"):j.default.fetchSvg("kubernetesIcon")),O.default.createElement("div",{className:N.default.titleName},"ack"==g?(0,_.formatMessage)({id:"enterpriseColony.ACksterList.ack.title"}):"huawei"==g?(0,_.formatMessage)({id:"enterpriseColony.ACksterList.huawei.title"}):"tencent"==g?(0,_.formatMessage)({id:"enterpriseColony.ACksterList.tencent.title"}):(0,_.formatMessage)({id:"enterpriseColony.ACksterList.helm.title"}))),O.default.createElement(u.default,{span:4},O.default.createElement("div",{className:N.default.menuBox},O.default.createElement(m.default,{defaultSelectedKeys:["basics"],mode:"inline",theme:"dark",onClick:this.handleClick},O.default.createElement(m.default.Item,{key:"basics"},O.default.createElement("span",null,(0,_.formatMessage)({id:"enterpriseColony.ACksterList.basic"}))),O.default.createElement(m.default.Item,{key:"advanced"},O.default.createElement("span",null,(0,_.formatMessage)({id:"enterpriseColony.ACksterList.senior"})))))),O.default.createElement(u.default,{span:20},O.default.createElement("div",{className:N.default.basics},"basics"==a&&O.default.createElement(O.default.Fragment,null,O.default.createElement(i.default,{className:N.default.row},O.default.createElement("div",{className:N.default.title_name},"ack"==g?(0,_.formatMessage)({id:"enterpriseColony.cloud.slb"}):"huawei"==g?(0,_.formatMessage)({id:"enterpriseColony.cloud.elb"}):"tencent"==g?(0,_.formatMessage)({id:"enterpriseColony.cloud.clb"}):(0,_.formatMessage)({id:"enterpriseColony.cloud.load"}),O.default.createElement("span",null," *"),O.default.createElement(d.default,{placement:"right",title:O.default.createElement("div",null,"ack"==g?(0,_.formatMessage)({id:"enterpriseColony.ACksterList.ack.tip.gatewayIngressIPs"}):"huawei"==g?(0,_.formatMessage)({id:"enterpriseColony.ACksterList.huawei.tip.gatewayIngressIPs"}):"tencent"==g?(0,_.formatMessage)({id:"enterpriseColony.ACksterList.tencent.tip.gatewayIngressIPs"}):(0,_.formatMessage)({id:"enterpriseColony.ACksterList.helm.tip.gatewayIngressIPs"}))},O.default.createElement("div",null,j.default.fetchSvg("tip")))),O.default.createElement(f.default.Item,(0,o.default)({},p,{label:(0,_.formatMessage)({id:"enterpriseColony.ACksterList.ip_address"})}),C("gatewayIngressIPs",{initialValue:v.gatewayIngressIPs||"",rules:[{pattern:/((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})(\.((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})){3}/g,message:(0,_.formatMessage)({id:"enterpriseColony.ACksterList.input_correct_ip"})},{pattern:/^[^\s]*$/,message:(0,_.formatMessage)({id:"placeholder.no_spaces"})}]})(O.default.createElement(c.default,{placeholder:(0,_.formatMessage)({id:"enterpriseColony.ACksterList.ip_demo"}),onChange:this.handleOnChangeIp})))),O.default.createElement(i.default,{className:N.default.row},O.default.createElement("div",{className:N.default.title_name},(0,_.formatMessage)({id:"enterpriseColony.ACksterList.gateway"}),O.default.createElement("span",null," *"),O.default.createElement(d.default,{placement:"right",title:O.default.createElement("div",null,"ack"==g?(0,_.formatMessage)({id:"enterpriseColony.ACksterList.ack.tip.nodesForGateway"}):"huawei"==g?(0,_.formatMessage)({id:"enterpriseColony.ACksterList.huawei.tip.nodesForGateway"}):"tencent"==g?(0,_.formatMessage)({id:"enterpriseColony.ACksterList.tencent.tip.nodesForGateway"}):(0,_.formatMessage)({id:"enterpriseColony.ACksterList.helm.tip.nodesForGateway"}))},O.default.createElement("div",null,j.default.fetchSvg("tip")))),O.default.createElement(f.default.Item,(0,o.default)({},p,{label:(0,_.formatMessage)({id:"enterpriseColony.ACksterList.nodeIP"})}),C("nodesForGateway",{initialValue:v.nodesForGateway||"",rules:[{validator:this.handleValidatorsNodes}]})(O.default.createElement(A.default,{valueArr:v.nodesForGateway,onChange:this.handleOnChangeGateway,keys:"gateway"})))),O.default.createElement(i.default,{className:N.default.row},O.default.createElement("div",{className:N.default.title_name},(0,_.formatMessage)({id:"enterpriseColony.Advanced.creat_node"}),O.default.createElement("span",null," *"),O.default.createElement(d.default,{placement:"right",title:O.default.createElement("div",null,"ack"==g?(0,_.formatMessage)({id:"enterpriseColony.ACksterList.ack.tip.nodesForChaos"}):"huawei"==g?(0,_.formatMessage)({id:"enterpriseColony.ACksterList.huawei.tip.nodesForChaos"}):"tencent"==g?(0,_.formatMessage)({id:"enterpriseColony.ACksterList.tencent.tip.nodesForChaos"}):(0,_.formatMessage)({id:"enterpriseColony.ACksterList.helm.tip.nodesForChaos"}))},O.default.createElement("div",null,j.default.fetchSvg("tip")))),O.default.createElement(f.default.Item,(0,o.default)({},p,{label:(0,_.formatMessage)({id:"enterpriseColony.Advanced.node_name"})}),C("nodesForChaos",{initialValue:v.nodesForChaos||"",rules:[{validator:this.handleValidatorsNodes}]})(O.default.createElement(D.default,{valueArr:v.nodesForChaos,onChange:this.handleOnChangeForChaos,keys:"chaos"})))),O.default.createElement(i.default,{className:N.default.row},O.default.createElement("div",{className:N.default.title_name},(0,_.formatMessage)({id:"enterpriseColony.cloud.containerdRuntimePath.title"}),O.default.createElement("span",null," *"),O.default.createElement(d.default,{placement:"right",title:O.default.createElement("div",null,(0,_.formatMessage)({id:"enterpriseColony.cloud.containerdRuntimePath.tip"}))},O.default.createElement("div",null,j.default.fetchSvg("tip")))),O.default.createElement(f.default.Item,(0,o.default)({},p,{label:(0,_.formatMessage)({id:"enterpriseColony.cloud.containerdRuntimePath.input"})}),C("containerdRuntimePath",{initialValue:v.containerdRuntimePath||""})(O.default.createElement(c.default,{placeholder:(0,_.formatMessage)({id:"enterpriseColony.cloud.containerdRuntimePath.input.desc"}),onChange:this.handleOnChangeContainerdRuntimePath}))))),"advanced"==a&&O.default.createElement(O.default.Fragment,null,O.default.createElement(i.default,{className:N.default.row},O.default.createElement("div",{className:N.default.title_name},"helm"==g?(0,_.formatMessage)({id:"enterpriseColony.Advanced.mirror"}):(0,_.formatMessage)({id:"enterpriseColony.cloud.image"}),O.default.createElement(d.default,{placement:"right",title:O.default.createElement("div",null,"ack"==g?(0,_.formatMessage)({id:"enterpriseColony.ACksterList.ack.tip.image"}):"huawei"==g?(0,_.formatMessage)({id:"enterpriseColony.ACksterList.huawei.tip.image"}):"tencent"==g?(0,_.formatMessage)({id:"enterpriseColony.ACksterList.tencent.tip.image"}):(0,_.formatMessage)({id:"enterpriseColony.ACksterList.helm.tip.image"}))},O.default.createElement("div",null,j.default.fetchSvg("tip")))),O.default.createElement(f.default.Item,(0,o.default)({},p,{label:(0,_.formatMessage)({id:"enterpriseColony.cloud.image_address"})}),C("domain",{initialValue:v.imageHub?v.imageHub.domain:"",rules:[{pattern:/^[^\s]*$/,message:(0,_.formatMessage)({id:"placeholder.no_spaces"})}]})(O.default.createElement(c.default,{onChange:this.handleOnChangeDomain,placeholder:(0,_.formatMessage)({id:"enterpriseColony.Advanced.input_mirror"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}))),O.default.createElement(f.default.Item,(0,o.default)({},p,{label:O.default.createElement(_.FormattedMessage,{id:"enterpriseColony.Advanced.namespace"})}),C("namespace",{initialValue:v.imageHub?v.imageHub.namespace:"",rules:[{pattern:/^[^\s]*$/,message:(0,_.formatMessage)({id:"placeholder.no_spaces"})}]})(O.default.createElement(c.default,{onChange:this.handleOnChangeNamespace,placeholder:(0,_.formatMessage)({id:"enterpriseColony.Advanced.input_namespace"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}))),O.default.createElement(f.default.Item,(0,o.default)({},p,{label:O.default.createElement(_.FormattedMessage,{id:"enterpriseColony.Advanced.user_name"})}),C("hub_username",{initialValue:v.imageHub?v.imageHub.username:"",rules:[{pattern:/^[^\s]*$/,message:(0,_.formatMessage)({id:"placeholder.no_spaces"})}]})(O.default.createElement(c.default,{onChange:this.handleOnChangeUsername,placeholder:(0,_.formatMessage)({id:"enterpriseColony.Advanced.input_user_name"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}))),O.default.createElement(f.default.Item,(0,o.default)({},p,{label:O.default.createElement(_.FormattedMessage,{id:"enterpriseColony.Advanced.password"})}),C("hub_password",{initialValue:v.imageHub?v.imageHub.password:"",rules:[{pattern:/^[^\s]*$/,message:(0,_.formatMessage)({id:"placeholder.no_spaces"})}]})(O.default.createElement(c.default.Password,{type:"password",autoComplete:"new-password",onChange:this.handleOnChangePassword,placeholder:(0,_.formatMessage)({id:"enterpriseColony.Advanced.input_password"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}})))),O.default.createElement(i.default,{className:N.default.row},O.default.createElement("div",{className:N.default.title_name},"helm"==g?(0,_.formatMessage)({id:"enterpriseColony.Advanced.access"}):(0,_.formatMessage)({id:"enterpriseColony.cloud.access"}),O.default.createElement(d.default,{placement:"right",title:O.default.createElement("div",null,"ack"==g?(0,_.formatMessage)({id:"enterpriseColony.ACksterList.ack.tip.database"}):"huawei"==g?(0,_.formatMessage)({id:"enterpriseColony.ACksterList.huawei.tip.database"}):"tencent"==g?(0,_.formatMessage)({id:"enterpriseColony.ACksterList.tencent.tip.database"}):(0,_.formatMessage)({id:"enterpriseColony.ACksterList.helm.tip.database"}))},O.default.createElement("div",null,j.default.fetchSvg("tip")))),O.default.createElement(f.default.Item,(0,o.default)({},p,{label:O.default.createElement(_.FormattedMessage,{id:"enterpriseColony.Advanced.address"})}),C("regionDatabase_host",{initialValue:v.regionDatabase?v.regionDatabase.host:"",rules:[{pattern:/^[^\s]*$/,message:(0,_.formatMessage)({id:"placeholder.no_spaces"})}]})(O.default.createElement(c.default,{onChange:this.handleOnChangeDbHost,placeholder:(0,_.formatMessage)({id:"enterpriseColony.Advanced.input_address"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}))),O.default.createElement(f.default.Item,(0,o.default)({},p,{label:O.default.createElement(_.FormattedMessage,{id:"enterpriseColony.Advanced.port"})}),C("regionDatabase_port",{initialValue:v.regionDatabase?v.regionDatabase.port:"",rules:[{pattern:/^[^\s]*$/,message:(0,_.formatMessage)({id:"placeholder.no_spaces"})}]})(O.default.createElement(c.default,{onChange:this.handleOnChangeDbPort,placeholder:(0,_.formatMessage)({id:"enterpriseColony.Advanced.input_Port"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}))),O.default.createElement(f.default.Item,(0,o.default)({},p,{label:O.default.createElement(_.FormattedMessage,{id:"enterpriseColony.Advanced.user_name"})}),C("regionDatabase_username",{initialValue:v.regionDatabase?v.regionDatabase.username:"",rules:[{pattern:/^[^\s]*$/,message:(0,_.formatMessage)({id:"placeholder.no_spaces"})}]})(O.default.createElement(c.default,{onChange:this.handleOnChangeDbUsername,placeholder:(0,_.formatMessage)({id:"enterpriseColony.Advanced.input_user_Name"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}))),O.default.createElement(f.default.Item,(0,o.default)({},p,{label:O.default.createElement(_.FormattedMessage,{id:"enterpriseColony.Advanced.password"})}),C("regionDatabase_password",{initialValue:v.regionDatabase?v.regionDatabase.password:"",rules:[{pattern:/^[^\s]*$/,message:(0,_.formatMessage)({id:"placeholder.no_spaces"})}]})(O.default.createElement(c.default.Password,{type:"password",autoComplete:"new-password",onChange:this.handleOnChangeDbPassword,placeholder:(0,_.formatMessage)({id:"enterpriseColony.Advanced.input_password"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}))),O.default.createElement(f.default.Item,(0,o.default)({},p,{label:O.default.createElement(_.FormattedMessage,{id:"enterpriseColony.Advanced.access_name"})}),C("regionDatabase_dbname",{initialValue:v.regionDatabase?v.regionDatabase.name:"",rules:[{pattern:/^[^\s]*$/,message:(0,_.formatMessage)({id:"placeholder.no_spaces"})}]})(O.default.createElement(c.default,{onChange:this.handleOnChangeDbName,placeholder:(0,_.formatMessage)({id:"enterpriseColony.Advanced.input_access_Name"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}})))),O.default.createElement(i.default,{className:N.default.row},O.default.createElement("div",{className:N.default.title_name},(0,_.formatMessage)({id:"enterpriseColony.ACksterList.component_image"}),O.default.createElement(d.default,{placement:"right",title:O.default.createElement("div",null,"ack"==g?(0,_.formatMessage)({id:"enterpriseColony.ACksterList.ack.tip.component_image"}):"huawei"==g?(0,_.formatMessage)({id:"enterpriseColony.ACksterList.huawei.tip.component_image"}):"tencent"==g?(0,_.formatMessage)({id:"enterpriseColony.ACksterList.tencent.tip.component_image"}):(0,_.formatMessage)({id:"enterpriseColony.ACksterList.helm.tip.component_image"}))},O.default.createElement("div",null,j.default.fetchSvg("tip")))),O.default.createElement(f.default.Item,(0,o.default)({},p,{label:(0,_.formatMessage)({id:"enterpriseColony.ACksterList.warehouse_address"})}),C("mirror_address",{initialValue:v.rainbondImageRepository||"",rules:[{pattern:/^[^\s]*$/,message:(0,_.formatMessage)({id:"placeholder.no_spaces"})}]})(O.default.createElement(c.default,{style:{marginBottom:"60px"},placeholder:(0,_.formatMessage)({id:"enterpriseColony.ACksterList.component_image.address"}),onChange:this.handleOnChangeMirrorAddress}))))))))),O.default.createElement(u.default,{span:8,style:{paddingLeft:"12px"}},O.default.createElement("div",{className:N.default.yamlBox},O.default.createElement("div",{className:N.default.titleYaml},O.default.createElement("span",null,(0,_.formatMessage)({id:"enterpriseColony.ACksterList.yaml_file_title"}))),O.default.createElement(f.default.Item,null,O.default.createElement(x,{value:b,style:{height:"calc(74vh - 58px)",overflow:"auto",border:"none",color:"#fff"},disabled:!0,rows:46})))))),O.default.createElement(i.default,{style:{padding:"0px 24px"}},O.default.createElement("div",{className:N.default.nextBtn},O.default.createElement(r.default,{onClick:()=>{this.handleGoback()},style:{marginRight:"12px",width:"100px"}},(0,_.formatMessage)({id:"button.return"})),O.default.createElement(d.default,{placement:"bottom",title:y?"":(0,_.formatMessage)({id:"enterpriseColony.ACksterList.not_required"})},O.default.createElement(r.default,{onClick:()=>{this.handleOpenModal()},disabled:!y,style:{width:"100px"},type:"primary"},(0,_.formatMessage)({id:"button.app"})))))),s&&O.default.createElement(k.default,(0,o.default)({dataObj:this.formObj,copyData:b},this.props,{onCancle:this.handleCancleModal,onOk:this.handleCancleModal})))}},g=C))||g)||g);t.default=L},"7YgB":function(e,t,a){e.exports={mdoalBox:"mdoalBox___obMCW",list:"list___1GjqL",item:"item___3Q1po",desc:"desc___3SdXd",number:"number___1xaTS",content:"content___1hsu7",code:"code___LHkW9"}},D0aq:function(e,t,a){"use strict";var s=a("tAuX"),l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("14J3");var r=l(a("BMrR"));a("Pwec");var n=l(a("CtXQ"));a("jCWc");var i=l(a("kPKH"));a("5NDa");var o=l(a("5rEg")),d=s(a("q1tI")),u=a("LLXN");class m extends d.Component{constructor(e){super(e),this.handleNodes=((e,t)=>{var a=this.state.values;a[t].name=e,this.triggerChange(a),this.setValues(a)}),this.add=(()=>{var e=this.state.values;if(e.length>99)return null;this.setState({values:e.concat({name:""})})}),this.remove=(e=>{var t=this.state.values;t.splice(e,1),this.setValues(t),this.triggerChange(t)}),this.state={values:e.valueArr?e.valueArr:[{name:""}]}}setValues(e){var t=e||[];t.length||t.push({name:""}),this.setState({values:t})}initFromProps(e){var t=e;t&&this.setValues(t)}triggerChange(e){for(var t=[],a=0;a<e.length;a++)t.push({name:e[a].name});var s=this.props.onChange;s&&s(t)}render(){var e="".concat((0,u.formatMessage)({id:"enterpriseColony.Advanced.master"})),t=this.state.values,a=this.props.keys;return d.default.createElement("div",{key:a},t.map((t,a)=>{var s=0===a;return d.default.createElement(r.default,{key:a,style:{width:"100%",display:"flex"}},d.default.createElement(i.default,{span:24,style:{marginRight:"10px"}},d.default.createElement(o.default,{name:"name",onChange:e=>{this.handleNodes(e.target.value,a)},value:t.name,placeholder:e,style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}})),d.default.createElement(i.default,{span:4,style:{textAlign:"center"}},d.default.createElement(n.default,{type:s?"plus-circle":"minus-circle",style:{fontSize:"20px"},onClick:()=>{s?this.add():this.remove(a)}})))}))}}var f=m;t.default=f},UUmB:function(e,t,a){"use strict";var s=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var r=s(a("kLXV"));a("+L6B");var n=s(a("2/Rp"));a("miYZ");var i,o,d,u=s(a("tsqr")),m=a("MuoO"),f=a("7DNP"),c=(s(a("wd/R")),s(a("+QRC"))),h=l(a("q1tI")),p=a("LLXN"),g=s(a("7YgB")),C=(i=(0,m.connect)(),i((d=class extends h.PureComponent{constructor(e){super(e),this.handleSubmit=(()=>{var e=this.props,t=e.dispatch,a=e.match.params.eid,s=e.dataObj,l=e.onOk,r=s.operator.env[0].value,n=s.Cluster.gatewayIngressIPs;t({type:"region/createHelmEvents",payload:{eid:a,token:r,api_host:n},callback:e=>{l(),t(f.routerRedux.push("/enterprise/".concat(a,"/provider/ACksterList/result?token=").concat(r,"&host=").concat(n)))}})}),this.handleCopy=(e=>{(0,c.default)(e),u.default.success((0,p.formatMessage)({id:"notification.success.copy"}))}),this.state={loading:!1,step2:"helm repo add rainbond https://chart.rainbond.com\nhelm repo update",step3:"helm install rainbond rainbond/rainbond --create-namespace -n rbd-system -f values.yaml"}}render(){var e=this.props,t=(e.form,e.onOk),a=e.copyData,s=this.state,l=s.step3,i=s.step2,o=h.default.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},h.default.createElement("g",{fill:"#0080FF","fill-rule":"evenodd"},h.default.createElement("rect",{opacity:"0.4",x:"7.5",y:"4.5",width:"8",height:"8",rx:"1"}),h.default.createElement("rect",{x:"4.5",y:"7.5",width:"8",height:"8",rx:"1"})));return h.default.createElement(r.default,{visible:!0,width:700,maskClosable:!1,title:(0,p.formatMessage)({id:"enterpriseColony.ACksterList.commandModal.title"}),onOk:this.handleSubmit,onCancel:t,footer:h.default.createElement("div",null,h.default.createElement(n.default,{onClick:t}," ",(0,p.formatMessage)({id:"button.cancel"})," "),h.default.createElement(n.default,{type:"primary",onClick:this.handleSubmit},(0,p.formatMessage)({id:"button.next_step"})))},h.default.createElement("div",{className:g.default.mdoalBox},h.default.createElement("ul",{className:g.default.list},h.default.createElement("li",{className:g.default.item},h.default.createElement("div",{className:g.default.desc},h.default.createElement("span",{className:g.default.number},"1"),h.default.createElement("div",{className:g.default.content},h.default.createElement("span",null,(0,p.formatMessage)({id:"enterpriseColony.ACksterList.commandModal.step1"})),h.default.createElement(n.default,{onClick:()=>this.handleCopy(a)},o,(0,p.formatMessage)({id:"button.copy"}))))),h.default.createElement("li",{className:g.default.item},h.default.createElement("div",{className:g.default.desc},h.default.createElement("span",{className:g.default.number},"2"),h.default.createElement("div",{className:g.default.content},h.default.createElement("span",null,(0,p.formatMessage)({id:"enterpriseColony.ACksterList.commandModal.step2"}),h.default.createElement("a",{href:"https://helm.sh/docs/intro/install/",target:"_blank"}," Helm "),(0,p.formatMessage)({id:"enterpriseColony.ACksterList.commandModal.step5"})),h.default.createElement(n.default,{onClick:()=>this.handleCopy(i)},o,(0,p.formatMessage)({id:"button.copy"})))),h.default.createElement("div",{className:g.default.code},h.default.createElement("p",null,"helm repo add rainbond https://chart.rainbond.com"),h.default.createElement("p",null,"helm repo update"))),h.default.createElement("li",{className:g.default.item},h.default.createElement("div",{className:g.default.desc},h.default.createElement("span",{className:g.default.number},"3"),h.default.createElement("div",{className:g.default.content},h.default.createElement("span",null,(0,p.formatMessage)({id:"enterpriseColony.ACksterList.commandModal.step3"})),h.default.createElement(n.default,{onClick:()=>this.handleCopy(l)},o,(0,p.formatMessage)({id:"button.copy"})))),h.default.createElement("div",{className:g.default.code},h.default.createElement("p",null,"helm install rainbond rainbond/rainbond --create-namespace -n rbd-system -f values.yaml"))),h.default.createElement("li",{className:g.default.item},h.default.createElement("div",{className:g.default.desc},h.default.createElement("span",{className:g.default.number},"4"),h.default.createElement("div",{className:g.default.content},h.default.createElement("span",null,(0,p.formatMessage)({id:"enterpriseColony.ACksterList.commandModal.step4"}))))))))}},o=d))||o),b=C;t.default=b},XZhr:function(e,t,a){e.exports={titleHeader:"titleHeader___EB5tS",titleSvg:"titleSvg___hbz-T",titleName:"titleName___22fzr",cardBox:"cardBox___12hre",menuBox:"menuBox___3G0hJ",formBox:"formBox___2x9A8",yamlBox:"yamlBox___2JOfO",titleYaml:"titleYaml___2dVVv",typeBtnWrap:"typeBtnWrap___2Hpov",typeBtn:"typeBtn___1pxyv",active:"active___2xLGD",en_typeBtnWrap:"en_typeBtnWrap___21TM0",en_typeBtn:"en_typeBtn___3Y1Hj",content:"content___UzDad",ant_radio_disabled:"ant_radio_disabled___2-Vb-",selectRow:"selectRow___3Wc6U",panelTitle:"panelTitle___1GQU1",panelSpan:"panelSpan___3f7j3",spanList:"spanList___11eWG",nextBtn:"nextBtn___2gMq-",basics:"basics___3e-Py",row:"row___3jtOb",title_name:"title_name___K31E3"}}}]);