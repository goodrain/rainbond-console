(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[38],{Dxe2:function(e,t,a){"use strict";var l=a("g09b"),s=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var n=l(a("bx4M"));a("Mwp2");var r=l(a("VXEj"));a("5Dmo");var i=l(a("3S7+"));a("Telt");var p=l(a("Tckk"));a("Pwec");var d=l(a("CtXQ"));a("+BJd");var o=l(a("mr32"));a("5NDa");var c,u,h,m=l(a("5rEg")),f=a("MuoO"),g=s(a("q1tI")),_=l(a("XZXw")),v=l(a("mWxT")),E=l(a("WN3O")),k=l(a("HAsk")),y=l(a("tLKB")),b=m.default.Search,x=(c=(0,f.connect)(e=>{var t=e.user,a=e.global;return{user:t.currentUser,enterprise:a.enterprise}}),c((h=class extends g.PureComponent{constructor(e){super(e),this.getApps=(()=>{var e=this.props,t=e.dispatch,a=e.user,l=e.match.params.eid,s=this.state,n=s.page,r=s.pageSize,i=s.appName,p=s.scope;t({type:"market/fetchAppModels",payload:{enterprise_id:l,user_id:a.user_id,app_name:i,scope:p,page:n,page_size:r},callback:e=>{e&&200===e.status_code&&this.setState({componentList:e.list,loading:!1,total:e.total})}})}),this.getAction=(e=>{var t=e.versions_info,a=void 0===t?[]:t;return a&&a.length>0?g.default.createElement(g.Fragment,null,g.default.createElement(o.default,{style:{height:"17px",lineHeight:"16px",color:"#999999",border:"none",background:"none"},size:"small"},a[0].version)):"-"}),this.handlePageChange=(e=>{this.setState({page:e},()=>{this.getApps()})}),this.handleSearch=(e=>{this.setState({appName:e,page:1},()=>{this.getApps()})}),this.state={loading:!0,pageSize:10,total:0,appName:"",page:1,scope:"enterprise",showCloudApp:!0,componentList:[]}}componentDidMount(){var e=this.props.user;e&&this.getApps()}render(){var e=this.props,t=e.enterprise,l=e.match.params.eid,s=this.state,o=s.componentList,c=s.pageSize,u=s.total,h=s.page,m=s.showCloudApp,f=s.loading,x={page_size:c,total:u,current:h,onChange:e=>{this.handlePageChange(e)}};return g.default.createElement(_.default,{title:"\u4e91\u7aef\u5e94\u7528\u5546\u5e97\u5e94\u7528\u540c\u6b65",content:"\u4ece\u6307\u5b9a\u7684\u4e91\u7aef\u5e94\u7528\u5546\u5e97\u540c\u6b65\u5e94\u7528\u6a21\u7248\u5230\u672c\u5730\uff0c\u53ef\u540c\u6b65\u5e94\u7528\u4e00\u822c\u662f\u516c\u5f00\u514d\u8d39\u5e94\u7528\u548c\u5df2\u8d2d\u4e70\u5e94\u7528"},g.default.createElement("div",{className:y.default.descText},g.default.createElement(d.default,{type:"exclamation-circle"}),"\u5f53\u524d\u5e94\u7528\u5e02\u573a".concat(v.default.appstoreImageHubEnable(t),"\u8de8\u96c6\u7fa4\u4e92\u8054\u529f\u80fd")),g.default.createElement("div",{className:E.default.standardList,style:{display:m?"flex":"block",position:"relative",overflow:"hidden"}},g.default.createElement(n.default,{className:E.default.listCard,bordered:!1,title:g.default.createElement("div",null,g.default.createElement("span",null,"\u5185\u90e8\u5e02\u573a"),g.default.createElement(b,{className:E.default.extraContentSearch,placeholder:formatMessage({id:"applicationMarket.localMarket.placeholder"}),onSearch:this.handleSearch})),style:{transition:"all .8s",width:"50%",display:"inline-block"},bodyStyle:{padding:"0 32px 40px 32px"}},g.default.createElement(r.default,{size:"large",rowKey:"ID",locale:{emptyText:g.default.createElement("p",{style:{paddingTop:80,lineHeight:1.3}},formatMessage({id:"notification.market.hint.null_app1"}),g.default.createElement("br",null),g.default.createElement("br",null),formatMessage({id:"notification.market.hint.null_app2"}),v.default.cloudMarketEnable(t)&&g.default.createElement("span",null,formatMessage({id:"notification.market.hint.null_app3"}),g.default.createElement("span",{style:{color:"#1890ff"}},formatMessage({id:"notification.market.hint.null_app4"}))))},loading:f,pagination:x,dataSource:o,renderItem:e=>{var t=g.default.createElement(r.default.Item,{actions:[this.getAction(e)]},g.default.createElement(r.default.Item.Meta,{avatar:g.default.createElement(p.default,{src:e.pic||a("Vkwn"),shape:"square",size:"large"}),title:g.default.createElement("a",{style:{color:"#384551"}},e.app_name),description:g.default.createElement(i.default,{title:e.describe},g.default.createElement("span",{className:y.default.desc},e.describe))}));return t}})),g.default.createElement("div",{style:{transition:"all .8s",transform:m?"translate3d(0, 0, 0)":"translate3d(100%, 0, 0)",marginLeft:8,width:"49%"}},g.default.createElement(k.default,{eid:l,onSyncSuccess:()=>{this.handlePageChange(1)}}))))}},u=h))||u);t.default=x},HAsk:function(e,t,a){"use strict";var l=a("g09b"),s=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var n=l(a("bx4M"));a("Mwp2");var r=l(a("VXEj"));a("Telt");var i=l(a("Tckk"));a("fOrg");var p=l(a("+KLJ"));a("/xke");var d=l(a("TeRw"));a("OaEy");var o=l(a("2fM7"));a("5NDa");var c=l(a("5rEg"));a("7Kak");var u,h,m,f=l(a("9yH6")),g=a("MuoO"),_=a("7DNP"),v=s(a("q1tI")),E=a("LLXN"),k=l(a("iPMB")),y=l(a("QDog")),b=l(a("WN3O")),x=l(a("tLKB")),A=f.default.Button,w=f.default.Group,M=c.default.Search,S=o.default.Option,C=(u=(0,g.connect)(e=>{var t=e.user,a=e.global;return{user:t.currentUser,rainbondInfo:a.rainbondInfo}}),u((m=class extends v.PureComponent{constructor(e){super(e),this.componentDidMount=(()=>{this.loadApps()}),this.getAction=(e=>{return e.is_complete?0===e.is_upgrade?v.default.createElement(v.Fragment,null,v.default.createElement("span",null,"\u5df2\u4e0b\u8f7d,\u65e0\u66f4\u65b0")):v.default.createElement(v.Fragment,null,v.default.createElement("a",{href:"javascript:;",onClick:()=>{this.handleLoadAppDetail(e)}},"\u66f4\u65b0\u65b0\u7248\u672c")):v.default.createElement("a",{href:"javascript:;",onClick:()=>{this.handleLoadAppDetail(e)}},"\u4e0b\u8f7d")}),this.handleLoadAppDetail=(e=>{var t=this.props,a=t.dispatch,l=t.eid,s=t.onSyncSuccess;a({type:"global/syncMarketAppDetail",payload:{enterprise_id:l,body:{app_id:e.app_id,app_versions:e.version}},callback:()=>{d.default.success({message:(0,E.formatMessage)({id:"notification.success.succeeded"})}),this.loadApps(),s&&s()}})}),this.handleChange=((e,t,a)=>{var l=this.props.dispatch;l({type:"global/getVersion",payload:{team_name:y.default.getCurrTeamName(),app_name:t.app_name,group_key:t.group_key,version:e},callback:e=>{if(e&&200===e.status_code&&e.list&&e.list.length>0){var t=this.state.apps;t[a].is_complete=e.list[0].is_complete,t[a].is_upgrade=e.list[0].is_upgrade,this.setState({apps:t})}}})}),this.handlePageChange=(e=>{this.setState({page:e},()=>{this.loadApps()})}),this.showMarketAppDetail=(e=>{e&&e.app_detail_url?window.open(e.app_detail_url,"_blank"):this.setState({showApp:e,showMarketAppDetail:!0})}),this.hideMarketAppDetail=(()=>{this.setState({showApp:{},showMarketAppDetail:!1})}),this.loadApps=(()=>{var e=this.props,t=e.dispatch,a=e.eid,l=this.state,s=l.appName,n=l.page,r=l.pageSize;this.setState({loading:!0},()=>{t({type:"market/getMarketApp",payload:{enterprise_id:a,app_name:s,page:n,page_size:r},callback:e=>{e&&this.setState({apps:e.list||[],loading:!(!e._code||210!==e.status_code||!e._condition||10503!==e._condition)&&-1,total:e.total,networkText:e.msg_show})}})})}),this.handleSearch=(e=>{this.setState({appName:e,page:1},()=>{this.loadApps()})}),this.handleClose=(()=>{var e=this.props,t=e.dispatch,a=e.eid;t(_.routerRedux.push("/enterprise/".concat(a,"/shared/local")))}),this.state={pageSize:10,total:0,page:1,loading:!1,showMarketAppDetail:!1,showApp:{},networkText:"",appName:""}}render(){var e=this.state,t=e.pageSize,l=e.total,s=e.page,d=e.loading,c=e.networkText,u=e.apps,h=e.showMarketAppDetail,m=e.showApp,f={page_size:t,total:l,current:s,onChange:e=>{this.handlePageChange(e)}};return v.default.createElement(n.default,{className:b.default.listCard,bordered:!1,title:v.default.createElement("div",null,"\u4e91\u7aef",v.default.createElement(M,{className:b.default.extraContentSearch,placeholder:"\u8bf7\u8f93\u5165\u540d\u79f0\u8fdb\u884c\u641c\u7d22",onSearch:this.handleSearch})),style:{},bodyStyle:{padding:"0 32px 40px 32px"},extra:v.default.createElement("div",{className:b.default.extraContent},v.default.createElement(w,null,v.default.createElement(A,{style:{background:"#4D73B1",color:"#fff"},onClick:this.handleClose},"\u5173\u95ed")))},-1===d?v.default.createElement("div",{style:{height:"300px"}},v.default.createElement(p.default,{style:{marginTop:"130px",textAlign:"center"},message:c,type:"warning"})):v.default.createElement(r.default,{size:"large",rowKey:"id",loading:-1!==d&&d,pagination:f,dataSource:u,renderItem:(e,t)=>v.default.createElement(r.default.Item,{actions:[this.getAction(e)]},v.default.createElement(r.default.Item.Meta,{avatar:v.default.createElement(i.default,{src:e.pic||a("Vkwn"),onClick:()=>{this.showMarketAppDetail(e)},shape:"square",size:"large"}),title:v.default.createElement("a",{style:{color:"#384551"},onClick:()=>{this.showMarketAppDetail(e)}},e.app_name,!d&&v.default.createElement(o.default,{getPopupContainer:e=>e.parentNode,style:{marginLeft:"18px"},defaultValue:e.version[0],onChange:a=>{this.handleChange(a,e,t)},size:"small"},e.version&&e.version.map((e,t)=>{return v.default.createElement(S,{value:e,key:t},e)}))),description:v.default.createElement("div",{className:x.default.conts},v.default.createElement("div",null,e.describe||"-"))}))}),h&&v.default.createElement(k.default,{onOk:this.hideMarketAppDetail,onCancel:this.hideMarketAppDetail,app:m}))}},h=m))||h);t.default=C},tLKB:function(e,t,a){e.exports={teamsTit:"teamsTit___3HuPr",descText:"descText___2Esot",noShared:"noShared___1DuOI",desc:"desc___WYnvL",lt:"lt___1tr_L",h70:"h70___10tZZ",imgs:"imgs___3eo-r",tits:"tits___CZQv2",serBox:"serBox___uH5hr",status:"status___3hUSp",tags:"tags___1iIf-",teamMinTit:"teamMinTit___1xFu3",teamContent:"teamContent___OdCbc",bor:"bor___DgaxJ",example:"example___3NgWZ",btns:"btns___10FfE"}}}]);