(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[21],{"oyw+":function(e,t,a){e.exports={commandBox:"commandBox___3uWqu",commandIcon:"commandIcon___39a8a",command:"command___3Hs9F",commandSpan:"commandSpan___36cG1",antd_row:"antd_row___94gX0",antd_form:"antd_form___3adtc",antd_row_btn:"antd_row_btn___3FX59",antd_btn:"antd_btn___3Qagw"}},wN07:function(e,t,a){"use strict";var n=a("g09b"),o=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var r=n(a("bx4M"));a("+L6B");var s=n(a("2/Rp"));a("jCWc");var l=n(a("kPKH"));a("fOrg");var d=n(a("+KLJ"));a("T2oS");var i=n(a("W9HT"));a("14J3");var c=n(a("BMrR"));a("/xke");var m=n(a("TeRw"));a("FJo9");var u=n(a("L41K"));a("y8nQ");var p,f,h,g,v=n(a("Vl3Y")),_=a("RBnf"),y=n(a("+QRC")),k=a("MuoO"),C=a("7DNP"),b=a("LvDl"),w=n(a("Qyje")),E=o(a("q1tI")),x=a("LLXN"),L=n(a("2lxJ")),M=n(a("QDog")),N=n(a("3a4m")),F=n(a("XZXw")),S=n(a("+iC2")),I=n(a("oyw+")),A=(v.default.Item,u.default.Step),B=(p=v.default.create(),f=(0,k.connect)(e=>{var t=e.user,a=e.list,n=e.loading,o=e.global,r=e.index;return{user:t.currentUser,list:a,loading:n.models.list,rainbondInfo:o.rainbondInfo,enterprise:o.enterprise,isRegist:o.isRegist,oauthLongin:n.effects["global/creatOauth"],overviewInfo:r.overviewInfo}}),p(h=f((g=class extends E.PureComponent{constructor(e){super(e),this.handleOptionData=(e=>{if(e){for(var t in e)"object"!==typeof e[t]?"true"===e[t]?e[t]=!0:"false"===e[t]&&(e[t]=!1):this.handleOptionData(e[t]);return e}}),this.loadSteps=(()=>{var e=[{title:(0,x.formatMessage)({id:"enterpriseColony.ACksterList.basic"})},{title:(0,x.formatMessage)({id:"enterpriseColony.ACksterList.senior"})},{title:(0,x.formatMessage)({id:"enterpriseColony.ACksterList.install"})},{title:(0,x.formatMessage)({id:"enterpriseColony.ACksterList.Docking"})}];return e}),this.toLinkNext=(e=>{var t=this.props,a=t.match.params.eid,n=t.location.search,o=a||M.default.getCurrEnterpriseId(),r=this.state,s=r.helmToken,l=r.resCommand,d=r.copyCommand,i=w.default.parse(n.substr(1))||{},c=(i.data,i.name),m=i.step;if("goback"===e)switch(c){case"helm":N.default.push("/enterprise/".concat(o,"/provider/ACksterList"));break;case"ack":N.default.push("/enterprise/".concat(o,"/provider/Aliack"));break;case"huawei":N.default.push("/enterprise/".concat(o,"/provider/HuaweiList"));break;case"tencent":N.default.push("/enterprise/".concat(o,"/provider/tencentList"));break;default:break}else N.default.push({pathname:"/enterprise/".concat(o,"/provider/ACksterList/result"),search:w.default.stringify({token:s,data:l,copy:d,name:c,step:m})})}),this.helmToken=(e=>{var t=this.props,a=t.dispatch,n=t.match.params.eid,o=t.location.search,r=w.default.parse(o.substr(1))||{},s=(r.data,r.name,r.step,r.cloudserver),l=window.location.href,d=l.match(/(\S*)\/#\//)[1];a({type:"region/fetchHelmToken",payload:{eid:n},callback:t=>{200===t.status_code&&t.bean&&a({type:"region/fetchHelmCommand",payload:{eid:n,domain:d,token:t.bean,data:e,cloudserver:s},callback:e=>{var a=e.response_data.command.split(" & "),n=(0,b.cloneDeep)(a),o=n.join("\n ");this.setState({helmToken:t.bean,resCommand:a,copyCommand:o,commandFlag:!0})}})}})}),this.onCopy=(()=>{var e=this.state.copyCommand;(0,y.default)(e),m.default.success({message:(0,x.formatMessage)({id:"notification.success.copy"})})});var t=this.props.user,a=S.default.isCompanyAdmin(t);this.state={adminer:a,commandFlag:!1,resCommand:[],copyCommand:"",helmToken:""}}componentWillMount(){var e=this.state.adminer,t=this.props.dispatch;e||t(C.routerRedux.push("/"))}componentDidMount(){}render(){var e=this.state,t=e.commandFlag,a=e.resCommand,n=(this.props.form.getFieldDecorator,window.location.href),o=n.match(/(\S*)\/#\//)[1];return E.default.createElement(F.default,{title:E.default.createElement(x.FormattedMessage,{id:"enterpriseColony.button.text"}),content:E.default.createElement(x.FormattedMessage,{id:"enterpriseColony.PageHeaderLayout.content"}),titleSvg:L.default.getPageHeaderSvg("clusters",18)},E.default.createElement(c.default,{style:{marginBottom:"16px"}},E.default.createElement(u.default,{current:2},this.loadSteps().map(e=>E.default.createElement(A,{key:e.title,title:e.title})))),E.default.createElement(r.default,{style:{padding:"24px"}},!t&&E.default.createElement(i.default,{tip:"Loading..."},E.default.createElement("div",{className:I.default.commandBox}," ")),t&&E.default.createElement("div",{className:I.default.commandBox},E.default.createElement("div",{className:I.default.commandIcon},E.default.createElement(_.CopyOutlined,{onClick:this.onCopy})),E.default.createElement("div",{className:I.default.command},a.length>0&&a.map((e,t)=>E.default.createElement("span",{key:t,className:I.default.commandSpan},e)))),E.default.createElement(c.default,{style:{marginBottom:"10px"}},E.default.createElement(l.default,{span:24},E.default.createElement(d.default,{type:"info",message:E.default.createElement(E.default.Fragment,null,(0,x.formatMessage)({id:"enterpriseColony.cloud.msg1"}),(0,x.formatMessage)({id:"enterpriseColony.cloud.msg2"}),o,(0,x.formatMessage)({id:"enterpriseColony.cloud.msg3"}))}))),E.default.createElement(c.default,null,E.default.createElement("div",{className:I.default.antd_row_btn},E.default.createElement(s.default,{className:I.default.antd_btn,onClick:()=>this.toLinkNext("goback")},E.default.createElement(x.FormattedMessage,{id:"button.previous"})),E.default.createElement(s.default,{className:I.default.antd_btn,type:"primary",onClick:()=>this.toLinkNext("next")},E.default.createElement(x.FormattedMessage,{id:"button.next"}))))))}},h=g))||h)||h);t.default=B}}]);