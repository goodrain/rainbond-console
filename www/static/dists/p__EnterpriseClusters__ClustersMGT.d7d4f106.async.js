(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[49],{"44vR":function(e,t,a){e.exports={breadStyle:"breadStyle___1qExY",titleStyle:"titleStyle___q7Ei-"}},BnX1:function(e,t,a){"use strict";var l=a("g09b"),s=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var r=l(a("kLXV"));a("IzEo");var n=l(a("bx4M"));a("+BJd");var d=l(a("mr32"));a("bP8k");var o=l(a("gFTJ"));a("14J3");var i=l(a("BMrR"));a("+L6B");var u=l(a("2/Rp"));a("jCWc");var c=l(a("kPKH"));a("cWXX");var m=l(a("/ezw"));a("/xke");var f=l(a("TeRw"));a("Awhp");var h=l(a("KrTs"));a("5Dmo");var p=l(a("3S7+"));a("y8nQ");var g,C,y,E,v=l(a("Vl3Y")),M=s(a("q1tI")),w=a("LLXN"),b=a("MuoO"),S=a("7DNP"),_=l(a("+QRC")),L=l(a("9tdr")),k=l(a("AklW")),I=a("mLYH"),N=l(a("q76B")),x=l(a("ESNr")),T=l(a("Z4Z6")),j=l(a("QDog")),D=l(a("gLJQ")),P=(g=(0,b.connect)(),C=v.default.create(),g(y=C((E=class extends M.Component{constructor(e){var t;super(e),t=this,this.clusterInstallType=(e=>{if(!e)return!1;switch(e){case"ack":return M.default.createElement("span",{style:{marginRight:"8px"},key:e},"ACK");case"custom":return M.default.createElement("span",{style:{marginRight:"8px"},key:e},M.default.createElement(w.FormattedMessage,{id:"enterpriseColony.table.custom"}));case"rke":return M.default.createElement(p.default,{title:M.default.createElement(w.FormattedMessage,{id:"enterpriseColony.table.rke.tooltip"})},M.default.createElement("span",{style:{marginRight:"8px"},key:e},M.default.createElement(w.FormattedMessage,{id:"enterpriseColony.table.rke"})));case"tke":return M.default.createElement("span",{style:{marginRight:"8px"},key:e},"TKE");case"helm":return M.default.createElement("span",{style:{marginRight:"8px"},key:e},M.default.createElement(w.FormattedMessage,{id:"enterpriseColony.table.helm"}));default:return M.default.createElement("span",{style:{marginRight:"8px"},key:e},M.default.createElement(w.FormattedMessage,{id:"enterpriseColony.table.other"}))}}),this.clusterStatus=((e,t)=>{if("failure"===t)return M.default.createElement("span",{style:{color:"red"}},M.default.createElement(w.FormattedMessage,{id:"enterpriseColony.table.state.err"}));switch(e){case"0":return M.default.createElement("div",{style:{color:j.default.getPublicColor("rbd-processing-status")}},M.default.createElement(h.default,{color:j.default.getPublicColor("rbd-processing-status")}),M.default.createElement(w.FormattedMessage,{id:"enterpriseColony.table.state.edit"}));case"1":return M.default.createElement("div",{style:{color:j.default.getPublicColor("rbd-success-status")}},M.default.createElement(h.default,{color:j.default.getPublicColor("rbd-success-status")}),M.default.createElement(w.FormattedMessage,{id:"enterpriseColony.table.state.run"}));case"2":return M.default.createElement("div",{style:{color:j.default.getPublicColor("rbd-down-status")}},M.default.createElement(h.default,{color:j.default.getPublicColor("rbd-down-status")}),M.default.createElement(w.FormattedMessage,{id:"enterpriseColony.table.state.down"}));case"3":return M.default.createElement("div",{style:{color:j.default.getPublicColor("rbd-processing-status")}},M.default.createElement(h.default,{color:j.default.getPublicColor("rbd-processing-status")}),M.default.createElement(w.FormattedMessage,{id:"enterpriseColony.table.state.maintain"}));case"5":return M.default.createElement("div",{style:{color:j.default.getPublicColor("rbd-error-status")}},M.default.createElement(h.default,{color:j.default.getPublicColor("rbd-error-status")}),M.default.createElement(w.FormattedMessage,{id:"enterpriseColony.table.state.abnormal"}));default:return M.default.createElement("div",{style:{color:j.default.getPublicColor("rbd-unKnown-status")}},M.default.createElement(h.default,{color:j.default.getPublicColor("rbd-unKnown-status")}),M.default.createElement(w.FormattedMessage,{id:"enterpriseColony.table.state.unknown"}))}}),this.clusterIcon=((e,t)=>{var a={marginRight:"8px",display:"inline-block"},l="custom"==t?a:"";switch(e){case"ack":return M.default.createElement("span",{style:{marginRight:"8px"},key:e},M.default.createElement("div",{className:D.default.icons},j.default.fetchSvg("Ack")));case"rke":return M.default.createElement("span",{style:{marginRight:"8px"},key:e},M.default.createElement("div",{className:D.default.icons},M.default.createElement("img",{src:T.default,alt:""})));case"tke":return M.default.createElement("span",{style:{marginRight:"8px"},key:e},M.default.createElement("div",{className:D.default.icons},j.default.fetchSvg("Tke")));case"K3s":return M.default.createElement("span",{style:{marginRight:"8px"},key:e},M.default.createElement("div",{className:D.default.icons},M.default.createElement("img",{style:{height:"120px"},src:K3s,alt:""})));case"helm":return M.default.createElement("span",{style:l,key:e},M.default.createElement("div",{className:D.default.icons},j.default.fetchSvg("aliyun"==t?j.default.fetchSvg("Ack"):"huawei"==t?j.default.fetchSvg("Tke"):"tencent"==t?j.default.fetchSvg("Cce"):j.default.fetchSvg("K8s"))),M.default.createElement("p",null,j.default.fetchSvg("aliyun"==t?"Aliyun   ACK":"huawei"==t?"Huawei   CCE":"tencent"==t?"Tencent   TKE":"")));default:return M.default.createElement("span",{style:{marginRight:"8px",display:"inline-block",marginTop:"20px"},key:e},j.default.fetchSvg("K8s"))}}),this.buttonShow=(()=>{this.setState({buttonSwitch:!0})}),this.handleDelete=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=t.props,l=a.dispatch,s=a.rowClusterInfo,r=t.state.handleType,n=j.default.getCurrEnterpriseId();l("delete"===r?{type:"region/deleteEnterpriseCluster",payload:{region_id:s.region_id,enterprise_id:n,force:e},callback:e=>{e&&200===e._condition&&(f.default.success({message:(0,w.formatMessage)({id:"notification.success.delete"})}),l(S.routerRedux.replace("/enterprise/".concat(n,"/clusters"))))},handleError:e=>{e&&e.data&&10050===e.data.code&&(t.setState({delVisible:!1}),t.handleMandatoryDelete())}}:{type:"cloud/deleteKubernetesCluster",payload:{enterprise_id:n,clusterID:s.provider_cluster_id},callback:e=>{e&&e.response_data&&e.response_data.code&&200===e.response_data.code&&(f.default.success({message:e.response_data.msg}),l(S.routerRedux.replace("/enterprise/".concat(n,"/clusters"))))},handleError:e=>{k.default.handleCloudAPIError(e),t.cancelClusters()}})},this.cancelClusters=(()=>{this.setState({delVisible:!1})}),this.handleMandatoryDelete=(()=>{var e=this;confirm({title:(0,w.formatMessage)({id:"enterpriseColony.mgt.cluster.delect"}),content:(0,w.formatMessage)({id:"enterpriseColony.mgt.cluster.restore"}),okText:(0,w.formatMessage)({id:"button.determine"}),cancelText:(0,w.formatMessage)({id:"button.cancel"}),onOk(){return e.handleDelete(!0),new Promise((e,t)=>{setTimeout(Math.random()>.5?e:t,1e3)}).catch(e=>console.log(e))}})}),this.delEven=(e=>{this.setState({delVisible:!0,handleType:e})}),this.importEven=(()=>{var e=this.props,t=e.dispatch,a=e.rowClusterInfo,l=j.default.getCurrEnterpriseId();t(S.routerRedux.push("/enterprise/".concat(l,"/importMessage?region_id=").concat(a.region_id)))}),this.handleEdit=(e=>{var t=this.props.rowClusterInfo;this.loadPutCluster(t.region_id)}),this.getKubeConfig=(()=>{var e=this.props.rowClusterInfo,t=j.default.getCurrEnterpriseId();(0,I.getKubeConfig)({clusterID:e.provider_cluster_id,enterprise_id:t,providerName:e.provider}).then(e=>{e&&e.status_code&&200===e.status_code&&this.setState({kubeConfig:e.config})})}),this.loadPutCluster=(e=>{var t=this.props,a=t.dispatch,l=t.rowClusterInfo,s=j.default.getCurrEnterpriseId();a({type:"region/fetchEnterpriseCluster",payload:{enterprise_id:s,region_id:l.region_id},callback:e=>{e&&200===e.status_code&&this.setState({editClusterInfo:e.bean,editClusterShow:!0,text:(0,w.formatMessage)({id:"enterpriseColony.button.edit"})})}})}),this.cancelEditClusters=(()=>{this.props.loadClusters(),this.setState({editClusterShow:!1,text:"",editClusterInfo:!1})}),this.showRegions=(()=>{var e=this.props.rowClusterInfo;this.setState({showTenantList:!0,regionAlias:e.region_alias,regionName:e.region_name,showTenantListRegion:e.region_id,loadTenants:!0},this.loadRegionTenants)}),this.loadRegionTenants=(()=>{var e=this.state,t=e.tenantPage,a=e.tenantPageSize,l=e.showTenantListRegion,s=j.default.getCurrEnterpriseId(),r=this.props.dispatch;r({type:"region/fetchEnterpriseClusterTenants",payload:{enterprise_id:s,page:t,pageSize:a,region_id:l},callback:e=>{e&&e.bean?this.setState({tenants:e.bean.tenants,tenantTotal:e.bean.total,loadTenants:!1}):this.setState({loadTenants:!1})},handleError:()=>{this.setState({loadTenants:!1})}})}),this.submitLimit=(e=>{e.preventDefault();var t=this.props.form,a=j.default.getCurrEnterpriseId(),l=this.state,s=l.limitTenantName,r=l.showTenantListRegion;t.validateFields({force:!0},(e,t)=>{e||(this.setState({limitSummitLoading:!0}),this.props.dispatch({type:"region/setEnterpriseTenantLimit",payload:{enterprise_id:a,region_id:r,tenant_name:s,limit_memory:t.limit_memory},callback:()=>{f.default.success({message:(0,w.formatMessage)({id:"notification.success.setting_successfully"})}),this.setState({limitSummitLoading:!1,setTenantLimitShow:!1}),this.loadRegionTenants()},handleError:()=>{f.default.warning({message:(0,w.formatMessage)({id:"notification.error.setting_failed"})}),this.setState({limitSummitLoading:!1})}}))})}),this.hideTenantListShow=(()=>{this.setState({showTenantList:!1,showTenantListRegion:"",tenants:[]})}),this.setTenantLimit=(e=>{this.setState({setTenantLimitShow:!0,limitTenantName:e.tenant_name,limitTeamName:e.team_name,initLimitValue:e.set_limit_memory})}),this.handleTenantPageChange=(e=>{this.setState({tenantPage:e},this.loadRegionTenants)}),this.handleJoinTeams=(e=>{var t=this.state.regionName,a=this.props.dispatch;a({type:"teamControl/joinTeam",payload:{team_name:e},callback:a=>{a&&200===a.status_code&&this.onJumpTeam(e,t)}})}),this.onJumpTeam=((e,t)=>{var a=this.props.dispatch;a(S.routerRedux.push("/team/".concat(e,"/region/").concat(t,"/index")))}),this.state={buttonSwitch:!1,delVisible:!1,editClusterShow:!1,editClusterInfo:{},text:"",showTenantList:!1,showTenantListRegion:"",loadTenants:!0,tenants:[],tenantPage:1,tenantPageSize:5,tenantTotal:0,loadTenants:!1,handleType:"",kubeConfig:""}}render(){var e=this.state,t=(e.buttonSwitch,e.delVisible),a=e.editClusterShow,l=e.editClusterInfo,s=e.text,h=(e.tenants,e.loadTenants,e.showTenantList,e.limitSummitLoading,e.initLimitValue,e.setTenantLimitShow,e.tenantTotal),p=e.tenantPageSize,g=e.tenantPage,C=(e.limitTeamName,e.regionAlias,e.handleType),y=e.kubeConfig,E=this.props,v=E.rowClusterInfo,b=E.form,k=E.showInfo,I=void 0!==k&&k,T=E.nodeType,P=v.region_alias,A=v.status,F=v.rbd_version,R=v.provider,K=v.k8s_version,O=v.create_time,z=(v.all_nodes,v.health_status),Q=v.region_type,U=(v.region_id,v.provider_cluster_id,v.arch),V=(v.region_name,j.default.getCurrEnterpriseId());this.handleTenantPageChange,b.getFieldDecorator,(0,w.formatMessage)({id:"enterpriseColony.table.handle.quota.table.label.team_name"}),(0,w.formatMessage)({id:"enterpriseColony.table.handle.quota.table.label.memory_request"}),(0,w.formatMessage)({id:"enterpriseColony.table.handle.quota.table.label.cpu_request"}),(0,w.formatMessage)({id:"enterpriseColony.table.handle.quota.table.label.set_limit_memory"}),(0,w.formatMessage)({id:"enterpriseColony.table.handle.quota.table.label.running_app_num"}),(0,w.formatMessage)({id:"enterpriseColony.table.handle.quota.table.label.method"});return M.default.createElement(M.default.Fragment,null,M.default.createElement(n.default,null,!I&&M.default.createElement(m.default,{active:!0}),I&&M.default.createElement(M.default.Fragment,null,M.default.createElement(i.default,{className:D.default.InfoStyle},M.default.createElement(c.default,{span:3},this.clusterIcon(R,Q&&Q.length>0&&Q[0])),M.default.createElement(c.default,{span:3},M.default.createElement("p",null,P),M.default.createElement("p",null,(0,w.formatMessage)({id:"enterpriseColony.mgt.cluster.clusterName"}))),M.default.createElement(c.default,{span:3},M.default.createElement("p",null,this.clusterStatus(A,z)),M.default.createElement("p",null,(0,w.formatMessage)({id:"enterpriseColony.mgt.cluster.clusterStatus"}))),M.default.createElement(c.default,{span:15},M.default.createElement(u.default,{onClick:this.handleEdit,icon:"edit"},M.default.createElement(w.FormattedMessage,{id:"enterpriseColony.table.handle.edit"})),M.default.createElement(u.default,{onClick:this.importEven,icon:"download"},M.default.createElement(w.FormattedMessage,{id:"enterpriseColony.table.handle.import"})),M.default.createElement(S.Link,{to:"/enterprise/".concat(V,"/shell?region_name=").concat(v.region_name),target:"_blank"},M.default.createElement(u.default,{icon:"code"},(0,w.formatMessage)({id:"otherEnterprise.shell.line"}))),"default"!=v.scope&&M.default.createElement(u.default,{onClick:()=>this.delEven("delete"),icon:"delete"},M.default.createElement(w.FormattedMessage,{id:"enterpriseColony.table.handle.delete"})))),"failure"!==z&&M.default.createElement(i.default,{className:D.default.ClusterInfo},M.default.createElement(o.default,null,M.default.createElement(o.default.Item,{label:(0,w.formatMessage)({id:"enterpriseColony.mgt.cluster.clusterVs"}),span:2},F||"-"),M.default.createElement(o.default.Item,{label:(0,w.formatMessage)({id:"enterpriseColony.mgt.cluster.clusterNum"})},M.default.createElement("span",{className:D.default.nodeType},T&&Object.keys(T).length>0?Object.keys(T).map(e=>{return M.default.createElement("span",null,T[e]," ",e," ")}):"-")),M.default.createElement(o.default.Item,{label:(0,w.formatMessage)({id:"enterpriseColony.mgt.cluster.installType"})},this.clusterInstallType(R)||"-"),M.default.createElement(o.default.Item,{label:(0,w.formatMessage)({id:"enterpriseColony.mgt.cluster.kubernetesVs"}),span:2},K=={}?"-":K||"-"),M.default.createElement(o.default.Item,{label:(0,w.formatMessage)({id:"enterpriseColony.mgt.node.framework"})},U.length>0&&U.map(e=>{return M.default.createElement(d.default,{color:j.default.getPublicColor()},e)})),M.default.createElement(o.default.Item,{label:(0,w.formatMessage)({id:"enterpriseColony.mgt.cluster.time"})},O&&O.substr(0,10)||"-"))))),t&&M.default.createElement(N.default,{title:"delete"===C?(0,w.formatMessage)({id:"confirmModal.cluster.delete.title"}):(0,w.formatMessage)({id:"confirmModal.cluster.unload.title"}),subDesc:(0,w.formatMessage)({id:"confirmModal.delete.strategy.subDesc"}),desc:"delete"===C?(0,w.formatMessage)({id:"confirmModal.delete.cluster.desc"}):(0,w.formatMessage)({id:"confirmModal.unload.cluster.desc"}),onOk:()=>this.handleDelete(!1),onCancel:this.cancelClusters}),a&&M.default.createElement(x.default,{regionInfo:l,title:s,eid:V,onOk:this.cancelEditClusters,onCancel:this.cancelEditClusters}),y&&M.default.createElement(r.default,{visible:!0,width:1e3,maskClosable:!1,onCancel:()=>{this.setState({kubeConfig:""})},title:"KubeConfig",bodyStyle:{background:"#000"},onOk:()=>{(0,_.default)(y),f.default.success({message:(0,w.formatMessage)({id:"notification.success.copy"})})},okText:M.default.createElement(w.FormattedMessage,{id:"button.copy"})},M.default.createElement("div",{className:D.default.cmd},M.default.createElement(L.default,{value:y,options:{mode:{name:"javascript",json:!0},lineNumbers:!0,theme:"seti",lineWrapping:!0,smartIndent:!0,matchBrackets:!0,scrollbarStyle:null,showCursorWhenSelecting:!0,height:500}}))))}},y=E))||y)||y),A=P;t.default=A},E9cK:function(e,t,a){e.exports={titleStyle:"titleStyle___2k1aS",chartsStyle:"chartsStyle___3m3wq"}},LpW7:function(e,t,a){"use strict";var l=a("g09b"),s=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var r=l(a("kLXV"));a("+L6B");var n=l(a("2/Rp"));a("IzEo");var d=l(a("bx4M"));a("cWXX");var o=l(a("/ezw"));a("g9YV");var i=l(a("wCAj"));a("14J3");var u=l(a("BMrR"));a("jCWc");var c=l(a("kPKH"));a("Awhp");var m=l(a("KrTs"));a("fu2T");var f,h,p,g=l(a("gK9i")),C=s(a("q1tI")),y=a("ArA+"),E=a("MuoO"),v=a("LLXN"),M=l(a("2lxJ")),w=l(a("QDog")),b=l(a("ipdq")),S=(l(a("XDRB")),a("mLYH"),g.default.Panel,f=(0,E.connect)(e=>{var t=e.user;return{user:t.currentUser}}),f((p=class extends C.Component{constructor(e){super(e),this.getStatus=(e=>{switch(e){case"Pending":return C.default.createElement("div",{style:{color:"#1890ff"}},C.default.createElement(m.default,{color:"#1890ff"}),"Pending");case"Running":return C.default.createElement("div",{style:{color:"#52c41a"}},C.default.createElement(m.default,{color:"#52c41a"}),"Running");case"Succeeded":return C.default.createElement("div",{style:{color:"#52c41a"}},C.default.createElement(m.default,{color:"#52c41a"}),"Succeeded");case"Failed":return C.default.createElement("div",{style:{color:"red"}},C.default.createElement(m.default,{color:"red"}),"Failed");case"Unkonwn":return C.default.createElement("div",{style:{color:"#b7b7b7"}},C.default.createElement(m.default,{color:"#b7b7b7"}),"Unkonwn")}}),this.getComStatus=(e=>{switch(e){case"Running":return C.default.createElement("div",{style:{color:"#52c41a"}},C.default.createElement(m.default,{color:"#52c41a"}),(0,v.formatMessage)({id:"status.component.health"}));case"Completed":return C.default.createElement("div",{style:{color:"#52c41a"}},C.default.createElement(m.default,{color:"#52c41a"}),(0,v.formatMessage)({id:"componentOverview.body.tab.overview.instance.completed"}));default:return C.default.createElement("div",{style:{color:"red"}},C.default.createElement(m.default,{color:"red"}),(0,v.formatMessage)({id:"status.component.not_health"}))}}),this.showActivePod=(e=>{var t=e.pods,a=e.name;this.setState({showPodSwitch:!0,activePod:t,modalTitle:a})}),this.handleCancel=(()=>{this.setState({showPodSwitch:!1})}),this.renderPodlog=(e=>{var t=w.default.getCurrEnterpriseId(),a=this.props.region;switch(e){case"rbd-app-ui":return C.default.createElement("div",null,C.default.createElement(y.Link,{to:"/enterprise/".concat(t,"/logs?type=consoleLog")},(0,v.formatMessage)({id:"LogEnterprise.title"})));case"rbd-api":case"rbd-gateway":case"rbd-worker":case"rbd-chaos":return C.default.createElement("div",null,C.default.createElement(y.Link,{to:"/enterprise/".concat(t,"/logs?type=clusterLog&region=").concat(a,"&action=").concat(e)},(0,v.formatMessage)({id:"LogEnterprise.title"})));default:return null}}),this.state={activeKey:null,activePod:[]}}render(){var e=this.props,t=e.dashboardList,a=e.dashboardShow,l=this.state,s=(l.activeKey,l.activePod),m=l.showPodSwitch,f=l.modalTitle,h=[{dataIndex:"pod_name",key:"pod_name",width:"17%"},{dataIndex:"pod_ip",key:"pod_ip",width:"17%"},{dataIndex:"status",key:"status",width:"17%",render:e=>{return this.getStatus(e)}},{dataIndex:"number",key:"number",width:"17%",render:(e,t)=>{var a=t.all_container,l=t.run_container;return C.default.createElement("span",{className:b.default.dsahboard},l,C.default.createElement("span",null,"/",a))}},{dataIndex:"restart_count",key:"restart_count",width:"17%",render:e=>{return C.default.createElement("span",null,e,C.default.createElement("span",null,"\u6b21"))}},{dataIndex:"create_time",key:"create_time",width:"17%",render:e=>{return w.default.fetchdayTime(e)}}],p=[{dataIndex:"name",key:"name",className:b.default.columnMoney,width:"25%",render:e=>{return C.default.createElement("span",{className:b.default.svgStyle},M.default.getSvg("chipSvg",40),C.default.createElement("span",null,e))}},{dataIndex:"status",key:"status",className:b.default.columnMoney,width:"25%",render:e=>{return this.getComStatus(e)}},{dataIndex:"number",key:"number",className:b.default.columnMoney,width:"25%",render:(e,t)=>{var a=t.all_pods,l=t.run_pods;return C.default.createElement("span",{className:b.default.dsahboard},l,C.default.createElement("span",null,"/",a))}},{dataIndex:"edit",key:"edit",className:b.default.columnMoney,width:"25%",render:(e,t)=>{var a=t.name;return C.default.createElement("div",{style:{display:"flex",justifyContent:"center",gap:"10px"}},this.renderPodlog(a),C.default.createElement("div",{style:{color:w.default.getPublicColor(),cursor:"pointer"},onClick:()=>this.showActivePod(t)},(0,v.formatMessage)({id:"enterpriseColony.mgt.cluster.pod"})))}}];return C.default.createElement(C.default.Fragment,null,C.default.createElement(d.default,{className:b.default.collapseStyle},a?C.default.createElement("div",null,C.default.createElement(u.default,null,C.default.createElement(c.default,{span:6},(0,v.formatMessage)({id:"enterpriseColony.mgt.cluster.comName"})),C.default.createElement(c.default,{span:6},(0,v.formatMessage)({id:"enterpriseColony.mgt.cluster.statues"})),C.default.createElement(c.default,{span:6},(0,v.formatMessage)({id:"enterpriseColony.mgt.cluster.num"})),C.default.createElement(c.default,{span:6},(0,v.formatMessage)({id:"enterpriseColony.mgt.cluster.edit"}))),C.default.createElement(i.default,{rowKey:(e,t)=>t,columns:p,dataSource:t,pagination:!1})):C.default.createElement(o.default,{active:!0})),C.default.createElement(r.default,{title:f,visible:m,width:900,onCancel:this.handleCancel,footer:[C.default.createElement(n.default,{key:"back",onClick:this.handleCancel},(0,v.formatMessage)({id:"popover.cancel"}))],className:b.default.modalStyle},C.default.createElement(u.default,null,C.default.createElement(c.default,{span:4},(0,v.formatMessage)({id:"enterpriseColony.mgt.cluster.server"})),C.default.createElement(c.default,{span:4},(0,v.formatMessage)({id:"enterpriseColony.mgt.node.ip"})),C.default.createElement(c.default,{span:4},(0,v.formatMessage)({id:"enterpriseColony.mgt.cluster.statues"})),C.default.createElement(c.default,{span:4},"READY"),C.default.createElement(c.default,{span:4},(0,v.formatMessage)({id:"enterpriseColony.mgt.cluster.restart"})),C.default.createElement(c.default,{span:4},(0,v.formatMessage)({id:"enterpriseColony.mgt.cluster.runTime"}))),C.default.createElement(i.default,{rowKey:(e,t)=>t,columns:h,dataSource:s,pagination:!1})))}},h=p))||h),_=S;t.default=_},QaUd:function(e,t,a){e.exports={linkStyle:"linkStyle___3e-3b",nameStyle:"nameStyle___1y1T-",rowStyle:"rowStyle___kQNxE",tdStyle:"tdStyle___38iSV",describe:"describe___3YMh1","editable-cell":"editable-cell___2slAx","editable-cell-value-wrap":"editable-cell-value-wrap___RgsBb","editable-row":"editable-row___Mgd7t",cmd:"cmd___6JdXP",copy:"copy___3b2Wi"}},WQ0r:function(e,t,a){"use strict";var l=a("g09b"),s=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var r=l(a("bx4M"));a("cWXX");var n,d,o,i=l(a("/ezw")),u=s(a("q1tI")),c=a("LLXN"),m=a("MuoO"),f=l(a("UlLs")),h=l(a("E9cK")),p=(n=(0,m.connect)(),n((o=class extends u.Component{constructor(e){super(e),this.handlUnit=((e,t)=>{if(e){var a=e,l=t;return a>=1024&&(a=e/1024,l="GB"),t?l:a.toFixed(2)/1}return null}),this.state={}}render(){var e=this.props,t=e.rowClusterInfo,a=e.showInfo,l=t.all_nodes,s=t.node_ready,n=t.total_cpu,d=t.total_disk,o=t.total_memory,m=t.used_cpu,p=t.used_disk,g=t.used_memory,C=(t.services_status,t.run_pod_number),y=0==n?0:(m/n*100).toFixed(2),E=0==o?0:(g/o*100).toFixed(2),v=(0==d||(p/d*100).toFixed(2),n&&parseInt(n)||0),M=o&&this.handlUnit(o)||0;d&&parseInt(d);return u.default.createElement(u.default.Fragment,null,u.default.createElement(r.default,null,t&&Object.keys(t).length>0&&a?u.default.createElement(u.default.Fragment,null,u.default.createElement("div",{className:h.default.titleStyle},u.default.createElement("div",null,u.default.createElement("p",null,(0,c.formatMessage)({id:"enterpriseColony.mgt.cluster.totalCpu"}),u.default.createElement("span",null,v),"Core")),u.default.createElement("div",null,u.default.createElement("p",null,(0,c.formatMessage)({id:"enterpriseColony.mgt.cluster.totalMemory"}),u.default.createElement("span",null,M),"GB")),u.default.createElement("div",null,u.default.createElement("p",null,(0,c.formatMessage)({id:"enterpriseColony.mgt.cluster.node"}))),u.default.createElement("div",null,u.default.createElement("p",null,(0,c.formatMessage)({id:"enterpriseColony.mgt.cluster.pods"})))),u.default.createElement("div",{className:h.default.chartsStyle},u.default.createElement("div",null,u.default.createElement(f.default,{keys:"upcpu"+"".concat(1),unit:"Core",svalue:y,usedValue:m,cname:"CPU",swidth:"200px",sheight:"120px"})),u.default.createElement("div",null,u.default.createElement(f.default,{keys:"upcpu"+"".concat(2),unit:"GB",svalue:0==Number(E)?0:Number(E),usedValue:(g/1024).toFixed(2),cname:(0,c.formatMessage)({id:"enterpriseColony.mgt.cluster.memory"}),swidth:"200px",sheight:"120px"})),u.default.createElement("div",null,u.default.createElement("p",null,s=={}?0:s||0,u.default.createElement("span",null,"/",l||0))),u.default.createElement("div",null,u.default.createElement("p",null,C||0)))):u.default.createElement(i.default,{active:!0})))}},d=o))||d),g=p;t.default=g},Z4Z6:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjIuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAyNDIuMiAxMDcuNCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMjQyLjIgMTA3LjQ7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDojMjQ1M0ZGO30KPC9zdHlsZT4KPGc+Cgk8Zz4KCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjI5LDIzLjZsLTIuNS0xNC45Yy0wLjgtNC44LTIuNy04LjctNC4xLTguN2MtMS41LDAtMi43LDQtMi43LDguOHYzLjljMCw0LjgtNCw4LjgtOC44LDguOEgyMDcKCQkJYy0wLjMsMC0wLjYsMC0wLjgsMHYxMC43YzAuMywwLDAuNiwwLDAuOCwwaDE0LjdDMjI2LjUsMzIuMiwyMjkuOCwyOC4zLDIyOSwyMy42Ii8+CgkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTE5My45LDExaC0yMy43Yy0wLjIsMC0wLjQsMC0wLjYsMGgtMjQuNGMtMC4zLDAtMC42LDAtMC44LDAuMVY4LjhjMC00LjgtMS4yLTguOC0yLjctOC44cy0zLjMsMy45LTQuMSw4LjcKCQkJbC0yLjUsMTQuOWMtMC44LDQuOCwyLjUsOC43LDcuNCw4LjdoMTQuNmMxLjUsMCwyLjktMC4yLDQuMi0wLjZjLTAuNSwyLjUtMi42LDQuNC01LjMsNC40aC0yMC41Yy0zLjMsMC01LjgtMy01LjMtNi4zbDIuMS0xMi41CgkJCWMwLjUtMy4zLTItNi4zLTUuMy02LjNIMjQuOGMtMi4yLDAtNCwxLjMtNC45LDMuMkwwLjcsNDMuNWMtMC4zLDAuNS0wLjMsMS4xLDAuMSwxLjZsMy43LDQuNGMwLjUsMC42LDEuMywwLjYsMS45LDAuMmwxMy4xLTEwLjMKCQkJVjEwMmMwLDMsMi40LDUuNCw1LjQsNS40aDI5YzMsMCw1LjQtMi40LDUuNC01LjRWODAuMmMwLTMsMi40LTUuNCw1LjQtNS40aDcyLjRjMywwLDUuNCwyLjQsNS40LDUuNFYxMDJjMCwzLDIuNCw1LjQsNS40LDUuNGgyOQoJCQljMywwLDUuNC0yLjQsNS40LTUuNFY3OC42aC0xNS40Yy00LjgsMC04LjgtNC04LjgtOC44VjU0LjdjMC0yLjksMS40LTUuNCwzLjUtN3YxOGMwLDQuOCw0LDguOCw4LjgsOC44aDIzLjdjNC44LDAsOC44LTQsOC44LTguOAoJCQlWMTkuOUMyMDIuNywxNC45LDE5OC44LDExLDE5My45LDExIi8+Cgk8L2c+Cgk8Zz4KCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjMwLjYsNS42YzAtMy45LDIuOS01LjYsNS42LTUuNnM1LjYsMS43LDUuNiw1LjZjMCwzLjgtMi45LDUuNS01LjYsNS41UzIzMC42LDkuNCwyMzAuNiw1LjZ6IE0yNDAuNSw1LjYKCQkJYzAtMy4xLTItNC40LTQuMi00LjRTMjMyLDIuNSwyMzIsNS42YzAsMywyLjEsNC40LDQuMyw0LjRDMjM4LjUsOS45LDI0MC41LDguNiwyNDAuNSw1LjZ6IE0yMzQuNCwyLjhoMmMxLDAsMiwwLjMsMiwxLjcKCQkJYzAsMC44LTAuNiwxLjMtMS4zLDEuNWwxLjMsMi4zaC0xLjJMMjM2LDYuMWgtMC41djIuMmgtMS4xTDIzNC40LDIuOEwyMzQuNCwyLjh6IE0yMzYuNCw1LjNjMC41LDAsMC45LTAuMywwLjktMC44CgkJCWMwLTAuNi0wLjUtMC43LTAuOS0wLjdoLTF2MS41SDIzNi40eiIvPgoJPC9nPgo8L2c+Cjwvc3ZnPg=="},bTEM:function(e,t,a){"use strict";var l=a("g09b"),s=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var r=l(a("bx4M"));a("cWXX");var n=l(a("/ezw"));a("g9YV");var d=l(a("wCAj"));a("+L6B");var o=l(a("2/Rp"));a("qVdP");var i=l(a("jsC+"));a("Pwec");var u=l(a("CtXQ"));a("lUTK");var c=l(a("BvKs"));a("+BJd");var m=l(a("mr32"));a("5Dmo");var f=l(a("3S7+"));a("/xke");var h=l(a("TeRw"));a("Awhp");var p=l(a("KrTs"));a("y8nQ");var g,C,y,E,v=l(a("Vl3Y")),M=s(a("q1tI")),w=a("LLXN"),b=(l(a("+QRC")),a("mLYH"),a("MuoO")),S=l(a("7jW7")),_=a("7DNP"),L=l(a("QDog")),k=l(a("2lxJ")),I=l(a("QaUd")),N=(g=(0,b.connect)(),C=v.default.create(),g(y=C((E=class extends M.Component{constructor(e){super(e),this.clusterStatus=(e=>{switch(e){case"Ready":return M.default.createElement("span",{style:{color:L.default.getPublicColor("rbd-success-status")}},M.default.createElement(p.default,{color:L.default.getPublicColor("rbd-success-status")}),e);case"NotReady":return M.default.createElement("span",{style:{color:L.default.getPublicColor("rbd-error-status")}},M.default.createElement(p.default,{color:L.default.getPublicColor("rbd-error-status")}),e);case"Ready,SchedulingDisabled":return M.default.createElement("span",{style:{color:L.default.getPublicColor("rbd-success-status")}},M.default.createElement(p.default,{color:L.default.getPublicColor("rbd-success-status")}),e);default:return M.default.createElement("span",{style:{color:L.default.getPublicColor("rbd-unKnown-status")}},M.default.createElement(p.default,{color:L.default.getPublicColor("rbd-unKnown-status")}),M.default.createElement(w.FormattedMessage,{id:"enterpriseColony.table.state.unknown"}))}}),this.onClickRow=(e=>{var t=this.props.rowClusterInfo;return{onClick:()=>{var a=this.state.jumpSwitch,l=this.props.dispatch,s=L.default.getCurrEnterpriseId();a&&l(_.routerRedux.push("/enterprise/".concat(s,"/clusters/nodemgt/").concat(t.region_id,"?name=").concat(e.name)))}}}),this.clusterNodeAdd=(()=>{this.setState({isShowAddNodeModal:!0})}),this.handleAddNodeClose=(e=>{this.setState({isShowAddNodeModal:!1},()=>{1===Number(e)&&this.props.handleLoadClusters()})}),this.menuMouseEnter=(()=>{this.setState({jumpSwitch:!1})}),this.menuMouseLeave=(()=>{this.setState({jumpSwitch:!0})}),this.editNodeStatus=((e,t,a)=>{var l=this.props.rowClusterInfo;"delete"!==e&&("evict"==e?1==a.unschedulable?this.props.active(e,t,l.region_name):h.default.warning({message:(0,w.formatMessage)({id:"enterpriseColony.mgt.cluster.placeseDispatch"})}):this.props.active(e,t,l.region_name))}),this.total=(e=>"\u5171 ".concat(e," \u6761")),this.pageChange=((e,t)=>{this.setState({pageSize:t,current:e})}),this.state={eid:L.default.getCurrEnterpriseId(),jumpSwitch:!0,selectArr:["control-plane","etcd","worker"],modalVisible:!1,initNodeCmd:"",showUpdateKubernetes:!1,showUpdateKubernetesTasks:!1,isShowAddNodeModal:!1,pageSize:10,total:0,current:1}}render(){var e=this.props,t=e.nodeList,a=e.rowClusterInfo,l=e.showInfo,s=e.form,h=e.eventId,p=this.state,g=(p.selectArr,p.isShowAddNodeModal),C=L.default.getCurrEnterpriseId(),y=(s.getFieldDecorator,()=>M.default.createElement("svg",{t:"1581212425061",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1314",width:"32",height:"32"},M.default.createElement("path",{d:"M512 192m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z","p-id":"1315",fill:"#999999"}),M.default.createElement("path",{d:"M512 512m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z","p-id":"1316",fill:"#999999"}),M.default.createElement("path",{d:"M512 832m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z","p-id":"1317",fill:"#999999"}))),E=[{title:M.default.createElement("span",null,(0,w.formatMessage)({id:"enterpriseColony.mgt.cluster.name"}),M.default.createElement(f.default,{placement:"top",title:(0,w.formatMessage)({id:"enterpriseColony.mgt.cluster.clickRow"})},M.default.createElement("span",{className:I.default.nameStyle},k.default.getSvg("helpSvg",18)))),dataIndex:"name",key:"name",render:e=>{return M.default.createElement(_.Link,{style:{fontWeight:600},to:"/enterprise/".concat(C,"/clusters/nodemgt/").concat(a.region_id,"?name=").concat(e)},e)}},{title:(0,w.formatMessage)({id:"enterpriseColony.mgt.cluster.statues"}),dataIndex:"status",key:"status",render:e=>{return this.clusterStatus(e)}},{title:(0,w.formatMessage)({id:"enterpriseColony.mgt.cluster.role"}),dataIndex:"role",key:"role",render:e=>e&&e.length>0&&e.map(e=>M.default.createElement(m.default,{color:L.default.getPublicColor()},e))},{title:(0,w.formatMessage)({id:"enterpriseColony.mgt.node.framework"}),dataIndex:"arch",key:"arch",render:e=>{return M.default.createElement(m.default,{color:L.default.getPublicColor()},e)}},{title:(0,w.formatMessage)({id:"enterpriseColony.mgt.cluster.assignedCpu"}),dataIndex:"cpu",key:"cpu",render:(e,t)=>{var a=t.req_cpu,l=t.cap_cpu,s=(a/l*100).toFixed(1);return M.default.createElement(M.default.Fragment,null,M.default.createElement("p",{className:I.default.tdStyle},(0,w.formatMessage)({id:"enterpriseColony.mgt.cluster.assigned"}),s,"%"),M.default.createElement("p",null,a.toFixed(1)," / ",l.toFixed(1)," Core"))}},{title:(0,w.formatMessage)({id:"enterpriseColony.mgt.cluster.assignedMemory"}),dataIndex:"mey",key:"mey",render:(e,t)=>{var a=t.cap_memory,l=t.req_memory,s=(l/a*100).toFixed(1);return M.default.createElement(M.default.Fragment,null,M.default.createElement("p",{className:I.default.tdStyle},(0,w.formatMessage)({id:"enterpriseColony.mgt.cluster.assigned"}),s,"%"),M.default.createElement("p",null,l.toFixed(1)," / ",a.toFixed(1)," GB"))}},{title:(0,w.formatMessage)({id:"enterpriseColony.mgt.cluster.edit"}),key:"edit",render:(e,t)=>{var a=[M.default.createElement("span",{onClick:()=>this.editNodeStatus("reschedulable",t.name,t)},(0,w.formatMessage)({id:"enterpriseColony.mgt.cluster.dispatch"}))],l=[M.default.createElement("span",{onClick:()=>this.editNodeStatus("unschedulable",t.name,t)},(0,w.formatMessage)({id:"enterpriseColony.mgt.cluster.banDispatch"}))],s=[M.default.createElement("span",{onClick:()=>this.editNodeStatus("evict",t.name,t)},(0,w.formatMessage)({id:"enterpriseColony.mgt.cluster.evacuation"}))],r=[];0==t.unschedulable?r.push(...l):r.push(...a),r.push(...s);var n=M.default.createElement(c.default,{onMouseEnter:this.menuMouseEnter,onMouseLeave:this.menuMouseLeave},r.map(e=>{return M.default.createElement(c.default.Item,null,e)}));return"Ready"==t.status&&M.default.createElement(i.default,{overlay:n,placement:"bottomLeft"},M.default.createElement(u.default,{component:y,style:{width:"50%"}}))}}],v={total:t.length||0,current:this.state.current,pageSize:this.state.pageSize,showQuickJumper:!0,showSizeChanger:!0,showTotal:this.total,onChange:this.pageChange,onShowSizeChange:this.pageChange,hideOnSinglePage:t.length<=10};return M.default.createElement(M.default.Fragment,null,M.default.createElement(r.default,{extra:a&&"rke"==a.provider&&M.default.createElement(o.default,{icon:"plus",onClick:this.clusterNodeAdd},(0,w.formatMessage)({id:"enterpriseColony.mgt.cluster.addNode"}))},l?M.default.createElement(d.default,{columns:E,rowKey:(e,t)=>t,dataSource:t,pagination:v,onRow:this.onClickRow,rowClassName:I.default.rowStyle}):M.default.createElement(n.default,{active:!0})),g&&M.default.createElement(S.default,{onCancel:this.handleAddNodeClose,eventId:h}))}},y=E))||y)||y),x=N;t.default=x},gLJQ:function(e,t,a){e.exports={InfoStyle:"InfoStyle___1jXJU",ClusterInfo:"ClusterInfo___2V0cW",nodeType:"nodeType___2RdLx",cmd:"cmd___3QSVD"}},gtfS:function(e,t,a){e.exports={nameID:"nameID___3Iawl",icon:"icon___Vw_QE",iconm:"iconm___3oFjI",describe:"describe___K7ShE","editable-cell":"editable-cell___2hRGL","editable-cell-value-wrap":"editable-cell-value-wrap___3VH19","editable-row":"editable-row___2R9L_",cmd:"cmd___1wxk3",copy:"copy___3mXdm"}},ipdq:function(e,t,a){e.exports={svgStyle:"svgStyle___36EYY",dsahboard:"dsahboard___3lA62",headerStyle:"headerStyle___xPV4d",thStyle:"thStyle___1Cciw",collapseStyle:"collapseStyle___3vZG_",spanStyle:"spanStyle___2AKML",columnMoney:"columnMoney___2QXJK",modalStyle:"modalStyle___1dJag"}},l4x9:function(e,t,a){"use strict";var l=a("g09b"),s=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("14J3");var r=l(a("BMrR"));a("/xke");var n,d,o,i=l(a("TeRw")),u=s(a("q1tI")),c=a("MuoO"),m=a("7DNP"),f=a("mLYH"),h=l(a("LpW7")),p=l(a("puxM")),g=l(a("AklW")),C=a("LLXN"),y=l(a("bTEM")),E=l(a("BnX1")),v=l(a("WQ0r")),M=(l(a("s6ox")),l(a("2lxJ"))),w=l(a("2lxJ")),b=l(a("XZXw")),S=l(a("QDog")),_=l(a("44vR")),L=(n=(0,c.connect)(),n((o=class extends u.Component{constructor(e){var t;super(e),t=this,this.fetchClusterInfoList=(()=>{var e=this.props.dispatch,t=this.state,a=(t.eventId,t.clusterID,t.rowCluster);e({type:"region/fetchClusterInfoList",payload:{cluster_id:a.region_name}})}),this.loadClusters=(()=>{var e=this.props,t=e.dispatch,a=e.match.params,l=a.eid,s=a.regionID;t({type:"region/fetchEnterpriseClusters",payload:{enterprise_id:l},callback:e=>{if(e&&e.list){var t=[];e.list.map((e,a)=>{return e.key="cluster".concat(a),t.push(e),e});t.filter(e=>{e.region_id==s&&this.setState({rowCluster:e,showInfo:!0},()=>{this.fetClusterNodeList(e),this.fetDashboardList(e),"rke"==e.provider&&this.fetchClusterInfoList()})})}else this.setState({rowCluster:[],showInfo:!1})}})}),this.updateCluster=(e=>{var t=this.props.match.params.eid;(0,f.getUpdateKubernetesTask)({clusterID:e,providerName:"rke",enterprise_id:t},e=>{g.default.handleCloudAPIError(e)}).then(t=>{t.task&&"complete"!==t.task.status?this.setState({showUpdateKubernetesTasks:!0,updateTask:t.task}):this.setState({showUpdateKubernetes:!0,nodeListArr:t.nodeList,rkeConfig:t.rkeConfig,updateClusterID:e,clusterID:e})}).catch(e=>{console.log(e)})}),this.getNodeEventID=(e=>{var t=this.props.dispatch;t({type:"region/fetchClusterInfo",payload:{cluster_id:e},callback:e=>{var t;e&&200===e.status_code&&this.setState({eventId:(null===e||void 0===e?void 0:null===(t=e.bean)||void 0===t?void 0:t.event_id)||""})}})}),this.fetClusterNodeList=function(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],l=t.props,s=l.dispatch,r=l.match.params,n=r.eid;r.regionID;t.setState({showListInfo:!a}),"rke"==e.provider&&t.getNodeEventID(e.region_name),s({type:"region/fetClusterNodeList",payload:{enterprise_id:n,region_name:e&&e.region_name},callback:a=>{a&&200==a.status_code&&t.setState({nodeList:a.list,showListInfo:!0,nodeType:a.bean},()=>{t.timer=setTimeout(()=>{t.fetClusterNodeList(e,!1),"rke"==e.provider&&t.fetchClusterInfoList()},5e3)})},handleError:()=>{t.setState({nodeList:[],showListInfo:!0},()=>{i.default.error({message:(0,C.formatMessage)({id:"enterpriseColony.mgt.cluster.errorList"})})})}})},this.editClusterNodeActive=((e,t,a)=>{var l=this.props,s=l.dispatch,r=l.match.params,n=r.eid,d=(r.regionID,this.state.rowCluster);s({type:"region/editClusterNodeActive",payload:{enterprise_id:n,region_name:a,action:e,node_id:t},callback:e=>{e&&200==e.status_code&&(i.default.success({message:(0,C.formatMessage)({id:"enterpriseColony.mgt.cluster.editSuccess"})}),this.fetClusterNodeList(d))},handleError:()=>{i.default.error({message:(0,C.formatMessage)({id:"enterpriseColony.mgt.cluster.editDefeated"})}),this.fetClusterNodeList(d)}})}),this.editNode=(()=>{this.setState({showUpdateKubernetes:!0})}),this.cancelShowUpdateKubernetes=(()=>{var e=this.state.rowCluster;this.setState({showUpdateKubernetesTasks:!1,updateTask:null},()=>{this.fetClusterNodeList(e)})}),this.fetDashboardList=(e=>{var t=this.props,a=t.dispatch,l=t.match.params,s=l.eid;l.regionID,this.state.rowCluster,e.provider_cluster_id,e.provider;a({type:"region/fetDashboardList",payload:{enterprise_id:s,region_name:e.region_name},callback:e=>{this.setState({dashboardList:e.list,dashboardShow:!0})},handleError:()=>{this.setState({dashboardList:[],dashboardShow:!0},()=>{i.default.error({message:(0,C.formatMessage)({id:"enterpriseColony.mgt.cluster.getRainbondList"})})})}})}),this.state={rowCluster:[],nodeList:[],showListInfo:!1,selectClusterName:"",clusterID:"",showCreateLog:!1,isInstallRemind:!1,installLoading:!1,isComponents:!1,showUpdateKubernetes:!1,dashboardShow:!1,eventId:""},this.timer=null}componentDidMount(){this.loadClusters()}componentWillUnmount(){clearTimeout(this.timer)}render(){var e=S.default.getCurrEnterpriseId(),t=this.state,a=t.rowCluster,l=t.showInfo,s=t.nodeList,n=t.showListInfo,d=(t.showUpdateKubernetes,t.nodeListArr,t.rkeConfig,t.updateClusterID,t.showUpdateKubernetesTasks,t.updateTask,t.clusterID,t.dashboardList),o=t.dashboardShow,i=t.nodeType,c=t.eventId;return u.default.createElement(b.default,{title:u.default.createElement(r.default,{className:_.default.breadStyle},u.default.createElement("span",null,w.default.getPageHeaderSvg("clusters",18)),u.default.createElement("span",null,u.default.createElement(m.Link,{to:"/enterprise/".concat(e,"/clusters")},(0,C.formatMessage)({id:"enterpriseColony.mgt.cluster.clusterMgt"})," / ")),u.default.createElement("span",null,a&&a.region_alias)),content:(0,C.formatMessage)({id:"enterpriseColony.mgt.cluster.info"})},u.default.createElement(p.default,{sm:900},u.default.createElement(r.default,{className:_.default.titleStyle,style:{margin:"0 0 10px"}},u.default.createElement("span",null,M.default.getSvg("infoSvg",20)),u.default.createElement("span",null,(0,C.formatMessage)({id:"enterpriseColony.mgt.cluster.clusterInfo"}))),u.default.createElement(r.default,null,u.default.createElement(E.default,{rowClusterInfo:a,loadClusters:this.loadClusters,nodeType:i,showInfo:l})),u.default.createElement(r.default,{className:_.default.titleStyle},u.default.createElement("span",null,M.default.getSvg("listSvg",20)),u.default.createElement("span",null,(0,C.formatMessage)({id:"enterpriseColony.mgt.cluster.clusterList"}))),u.default.createElement(r.default,null,u.default.createElement(y.default,{eventId:c,rowClusterInfo:a,nodeList:s,active:this.editClusterNodeActive,showInfo:n,updateCluster:this.updateCluster,handleLoadClusters:()=>{this.loadClusters()}})),u.default.createElement(r.default,{className:_.default.titleStyle},u.default.createElement("span",null,M.default.getSvg("userSvg",20)),u.default.createElement("span",null,(0,C.formatMessage)({id:"enterpriseColony.mgt.cluster.user"}))),u.default.createElement(r.default,null,u.default.createElement(v.default,{showInfo:l,rowClusterInfo:a})),u.default.createElement(r.default,{className:_.default.titleStyle},u.default.createElement("span",null,M.default.getSvg("examineSvg",20)),u.default.createElement("span",null,(0,C.formatMessage)({id:"enterpriseColony.mgt.cluster.rainbondList"}))),u.default.createElement(r.default,null,u.default.createElement(h.default,{dashboardList:d,dashboardShow:o,region:a.region_name}))))}},d=o))||d),k=L;t.default=k},s6ox:function(e,t,a){"use strict";(function(e){var l=a("g09b"),s=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var r=l(a("kLXV"));a("g9YV");var n=l(a("wCAj"));a("14J3");var d=l(a("BMrR"));a("jCWc");var o=l(a("kPKH"));a("fOrg");var i=l(a("+KLJ"));a("+L6B");var u=l(a("2/Rp"));a("P2fV");var c=l(a("NJEC"));a("T2oS");var m=l(a("W9HT"));a("miYZ");var f=l(a("tsqr"));a("/xke");var h=l(a("TeRw"));a("5Dmo");var p=l(a("3S7+"));a("5NDa");var g=l(a("5rEg"));a("giR+");var C=l(a("fyUT"));a("OaEy");var y=l(a("2fM7")),E=l(a("p0pE"));a("y8nQ");var v=l(a("Vl3Y")),M=l(a("Y/ft"));a("Znn+");var w=l(a("ZTPi"));a("tU7J");var b,S,_,L,k=l(a("wFql")),I=l(a("ZNrE")),N=(l(a("+QRC")),a("MuoO")),x=s(a("q1tI")),T=a("LLXN"),j=a("mLYH"),D=l(a("AklW")),P=l(a("QDog")),A=l(a("gtfS")),F=k.default.Paragraph,R=w.default.TabPane,K=/^((25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(25[0-5]|2[0-4]\d|[01]?\d\d?)$/,O=/^[1-9]\d*$/,z=x.default.createContext(),Q=e=>{var t=e.form,a=(e.index,(0,M.default)(e,["form","index"]));return x.default.createElement(z.Provider,{value:t},x.default.createElement("tr",a))},U=v.default.create()(Q);class V extends x.default.Component{constructor(){super(...arguments),this.state={editing:!1},this.toggleEdit=(()=>{var e=!this.state.editing;this.setState({editing:e},()=>{e&&this.input.focus()})}),this.save=((e,t)=>{var a=this.props,l=a.record,s=a.handleSave;this.form.validateFields((a,r)=>{s((0,E.default)({},l,r)),a&&a[t||e&&e.currentTarget.id]||this.toggleEdit()})}),this.validateIP=((e,t,a)=>{t.startsWith("127")?a("".concat((0,T.formatMessage)({id:"enterpriseColony.addCluster.ipcheck1"}),"}")):t.startsWith("169.254")?a("".concat((0,T.formatMessage)({id:"enterpriseColony.addCluster.ipcheck2"}),"}")):t.startsWith("224.0.0")?a("".concat((0,T.formatMessage)({id:"enterpriseColony.addCluster.ipcheck3"}),"}")):a()}),this.renderCell=(e=>{this.form=e;var t=this.props,a=t.children,l=t.dataIndex,s=t.record,r=t.title,n=t.dataSource,d=this.state.editing,o=[{required:!0,message:(0,T.formatMessage)({id:"enterpriseColony.addCluster.host.Required"},{title:r})}],i="ip"===l;i&&o.push({message:(0,T.formatMessage)({id:"enterpriseColony.addCluster.host.correct_IP"}),pattern:new RegExp(K,"g")},{validator:this.validateIP});var u="port"===l;u&&o.push({message:(0,T.formatMessage)({id:"enterpriseColony.addCluster.host.Correct_port"}),min:1,max:65536,pattern:new RegExp(O,"g")});var c=s[l];return d||!c?x.default.createElement(v.default.Item,{style:{margin:0}},e.getFieldDecorator(l,{rules:o,initialValue:c})("roles"===l?x.default.createElement(y.default,{getPopupContainer:e=>e.parentNode,ref:e=>this.input=e,onPressEnter:this.save,onBlur:()=>{this.save(!1,l)},allowClear:!0},x.default.createElement(y.default.Option,{value:"server"},"server"),x.default.createElement(y.default.Option,{value:"agent"},"agent")):u?x.default.createElement(C.default,{style:{width:"100%"},ref:e=>this.input=e,onPressEnter:this.save,onBlur:this.save,min:1,max:65536}):x.default.createElement(g.default,{placeholder:(0,T.formatMessage)({id:"enterpriseColony.addCluster.host.placese_input"},{title:r}),ref:e=>{this.input=e,"ip"===l&&!c&&n&&n.length>1&&e.focus()},onPressEnter:this.save,onBlur:this.save,style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",width:"100%"}}))):x.default.createElement(p.default,{title:x.default.createElement(T.FormattedMessage,{id:"enterpriseColony.addCluster.host.click_edit"})},x.default.createElement("div",{className:"editable-cell-value-wrap",style:{cursor:"pointer"},onClick:this.toggleEdit},a))})}componentWillMount(){var e=this.props.handleClustersMount;e&&e(this)}render(){var e=this.props,t=e.editable,a=e.children,l=(0,M.default)(e,["editable","children"]);return x.default.createElement("td",l,t?x.default.createElement(z.Consumer,null,this.renderCell):a)}}var Y=(b=v.default.create(),S=(0,N.connect)(),b(_=S((L=class extends x.PureComponent{constructor(t){var a;super(t),a=this,this.componentDidMount=(()=>{var e=this.props.clusterID;this.loadInitNodeCmd(),this.loadClusters(),e?this.setNodeList():(this.fetchRkeconfig(),this.handleAdd())}),this.loadClusters=(()=>{var e=this.props,t=e.dispatch,a=e.eid;t({type:"region/fetchEnterpriseClusters",payload:{enterprise_id:a},callback:e=>{if(e&&e.list){var t=[];e.list.map((e,a)=>{return e.key="cluster".concat(a),t.push(e),e}),this.setState({clusters:t})}else this.setState({clusters:[]})}})}),this.setNodeList=(()=>{var e=this.props,t=e.nodeList,a=e.rkeConfig,l=e.form,s=l.setFieldsValue;if(t&&t.length>0)for(var r=0;r<t.length;r++)t[r].key=Math.random(),t[r].port&&0!==t[r].port||(t[r].port=22),t[r].disable=!0;if(a){var n=this.decodeBase64Content(a);s({yamls:n}),this.setState({yamlVal:n})}this.setState({dataSource:t||[],count:t&&t.length||0})}),this.handleClustersMount=(e=>{this.clusters=e}),this.encodeBase64Content=(t=>{var a=e.from(t).toString("base64");return a}),this.decodeBase64Content=(t=>{var a=t.replace(/\s/g,"+");return a=e.from(a,"base64").toString(),a}),this.loadInitNodeCmd=(()=>{var e=this.props.dispatch;e({type:"cloud/getInitNodeCmd",callback:e=>{var t=e&&e.response_data||{},a=e&&e.response_data&&e.data||{},l=e&&e.cmd||a.cmd||t.cmd;this.setState({initNodeCmd:l})}})}),this.fetchRkeconfig=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,l=a.props,s=l.form,r=l.eid,n=a.state.activeKey,d=s.setFieldsValue,o=Object.assign({},e,{enterprise_id:r});(0,j.rkeconfig)(o).then(e=>{if(e&&200===e.status_code&&e.response_data){var l=e.response_data||{},s=l.encodeRKEConfig,r=l.nodes,o=a.decodeBase64Content(s);d({yamls:o});var i="",u="";r&&(r&&r.length&&r.map(e=>{e.key=Math.random(),t&&(K.test(e.ip||"")?K.test(e.internalIP||"")?O.test(e.port||"")?e.port>65536?(u="port",i="".concat((0,T.formatMessage)({id:"enterpriseColony.addCluster.host.port_max"}))):e.roles||(u="roles",i="".concat((0,T.formatMessage)({id:"enterpriseColony.addCluster.host.mast"}))):(i="".concat((0,T.formatMessage)({id:"enterpriseColony.addCluster.host.input_port"})),u="port"):(i="".concat((0,T.formatMessage)({id:"enterpriseColony.addCluster.host.input_ip"})),u="internalIP"):(i="".concat((0,T.formatMessage)({id:"enterpriseColony.addCluster.host.input_ip"})),u="ip"))}),i&&a.handleCheck(!1),a.setState({helpType:u,helpError:i,dataSource:r})),a.setState({yamlVal:o}),"1"===n&&t&&i&&h.default.warning({message:i}),t&&!i&&a.handleStartCheck(t)}}).catch(e=>{if(e){var l=e.data?e.data.code:e.code;if(!l)return t&&a.setState({activeKey:"2"}),a.setState({isCheck:!1,helpType:"RKE",helpError:(0,T.formatMessage)({id:"enterpriseColony.addCluster.host.rke"})}),null}a.handleCheck(!1),D.default.handleCloudAPIError(e)})},this.updateCluster=(()=>{var e=this.props,t=e.dispatch,a=e.eid,l=(e.clusterID,e.form);dataSource&&0===dataSource.length&&f.default.warning("\u8bf7\u5b9a\u4e49\u96c6\u7fa4\u8282\u70b9"),l.validateFields((e,l)=>{e||(this.setState({loading:!0}),t({type:"cloud/createKubernetesCluster",payload:(0,E.default)({enterprise_id:a,provider_name:"rke",encodedRKEConfig:this.encodeBase64Content(fieldsValue.yamls)},fieldsValue),callback:e=>{this.handleOk(e)},handleError:e=>{this.handleError(e)}}))})}),this.createCluster=(()=>{var e=this.props,t=e.form,a=(e.dispatch,e.eid,e.clusterID),l=this.state,s=l.dataSource;l.yamlVal;if(a)return this.updateCluster(),null;t.validateFields((e,t)=>{if(!e){var a=s.reduce((e,t)=>{return e+(t.roles.includes("etcd")?1:0)},0),l=a%2===1;l?(this.setState({loading:!0}),this.handleCheckSsh(t)):h.default.warning({message:"etcd\u8282\u70b9\u6570\u91cf\u5fc5\u987b\u4e3a\u5947\u6570"})}})}),this.handleOk=(e=>{var t=this.props.onOK;e&&t&&t(e||{})}),this.handleError=(e=>{var t=this.props.onOK;e&&e.data&&7005===e.data.code&&t?t(e.data.data):(D.default.handleCloudAPIError(e),this.setState({loading:!1}))}),this.handleDelete=(e=>{var t=[...this.state.dataSource];this.setState({dataSource:t.filter(t=>t.key!==e)})}),this.handleEnvGroup=((e,t)=>{return this.clusters&&this.clusters.form?this.clusters.form.validateFields({force:!0},a=>{if(!a&&e)return e();t()}):t&&t(),!1}),this.handleAdd=(()=>{var e=this.state,t=e.count,a=e.dataSource,l={key:Math.random(),ip:"",user:"",password:"",port:22,roles:"server",node_name:""},s=()=>{this.setState({dataSource:[...a,l],count:t+1})};this.handleEnvGroup(s,s)}),this.handleSave=(e=>{var t=[...this.state.dataSource],a=t.findIndex(t=>e.key===t.key),l=t[a];t.splice(a,1,(0,E.default)({},l,e)),this.setState({dataSource:t})}),this.beforeUpload=((e,t)=>{var a=e.name.split("."),l=a.length,s="yaml"===a[l-1]||"yml"===a[l-1];return!!s||(t&&h.default.warning({message:(0,T.formatMessage)({id:"notification.warn.yaml_file"})}),!1)}),this.nodeRole=(e=>{switch(e){case"control-plane":return"".concat((0,T.formatMessage)({id:"enterpriseColony.addCluster.host.Administration"}));case"worker":return"".concat((0,T.formatMessage)({id:"enterpriseColony.addCluster.host.calculation"}));case"etcd":return"ETCD";default:return"".concat((0,T.formatMessage)({id:"enterpriseColony.addCluster.host.unkonw"}))}}),this.handleStartCheck=(e=>{var t=!1,a=this.state.activeKey;"1"===a?this.handleEnvGroup(()=>{t=!0},()=>{this.handleActiveKey("1"),this.handleCheck(!1)}):t=!0,this.props.form.validateFields(e=>{t&&e&&e.yamls&&(this.handleActiveKey("2"),t=!1),e&&e.yamls&&this.setState({isCheck:!1,helpType:"RKE",helpError:(0,T.formatMessage)({id:"enterpriseColony.addCluster.host.input_rke"})}),!e&&t&&this.handleCheck(t)}),t&&e&&this.createCluster()}),this.handleCheck=(e=>{this.setState({isCheck:e,forbiddenConfig:!0,countNum:15,countConfig:!0,countContent:null},()=>{var t=this.props.guideStep;e&&7!==t&&this.handleCountDown(),!e&&clearInterval(this.timerId)})}),this.handleActiveKey=(e=>{this.setState({activeKey:e})}),this.handleTabs=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=a.state,s=l.dataSource,r=l.yamlVal,n=a.props.form,d=n.getFieldValue,o={},i=d("yamls")||r,u=s.map(e=>{return{ip:e.ip,internalIP:e.internalIP}}),c=JSON.stringify(u);window.localStorage.setItem("ipAddresses",c),(i||s&&s.length>0)&&("2"===e?(o.nodes=s,o.encodedRKEConfig=i&&a.encodeBase64Content(i)):o.encodedRKEConfig=i&&a.encodeBase64Content(i)),a.fetchRkeconfig(o,t),t||a.handleActiveKey("".concat(e))},this.handleCountDown=(()=>{var e=this.state.countNum;this.setState({countConfig:!1,countContent:"".concat(e,"s")}),this.timerId=setInterval(()=>{if(this.setState({countNum:e--,countContent:"".concat(e,"s")}),e<0)return clearInterval(this.timerId),this.setState(()=>({forbiddenConfig:!1,countConfig:!0})),null},1e3)}),this.handleCheckSsh=(()=>{var e,t=this.state,a=t.dataSource,l=t.isCheckSsh,s=(t.activeKey,this.props),r=(s.dispatch,s.form),n=(s.eid,[]);r.validateFields((t,s)=>{if(!t){e=s.name,this.handleCheck(!1),a.forEach(e=>{delete e.code}),this.setState({isCheckStatus:!0,dataSource:a});for(var r=[],d=0,o=a.length;d<o;d++){var i={id:d,host:a[d].ip,pass:String(a[d].password),port:Number(a[d].port),user:a[d].user,role:a[d].roles,node_name:a[d].node_name};r.push(this.getCode(i))}Promise.all(r).then(t=>{t.map((s,r)=>{a[r].code=s.codeNum,a[r].status=s.status;var d={host:s.host,pass:s.pass,port:s.port,user:s.user,role:s.role,node_name:s.node_name};n.push(d),setTimeout(()=>{this.setState({dataSource:a,isCheckSsh:!l},()=>{if(a.length===t.length){var l=a.filter(e=>1!=e.status);l.length>0?this.setState({isCheckStatus:!1}):this.setState({loading:!0},()=>{r+1===a.length&&this.handleCreate(e,n)})}})},10)})},e=>{console.log(e)})}})}),this.handleCreate=((e,t)=>{var a=this.props,l=a.dispatch,s=a.eid,r=a.onOK;l({type:"cloud/AddClusterRke2",payload:{eid:s,name:e,nodes:t},callback:e=>{this.setState({loading:!1,isCheckStatus:!1}),e&&e.response_data&&200===e.response_data.code?(h.default.success({message:e.response_data.msg}),r(e.response_data.clusterID)):h.default.warning({message:e.response_data.msg})},handleError:e=>{h.default.error({message:e.data.msg}),this.setState({loading:!1,isCheckStatus:!1})}})}),this.handleChangeCheckSsh=(()=>{this.setState({isCheckSsh:!0})}),this.onClickDocsLink=(()=>{window.open("https://rainbond.com/docs/troubleshooting/installation/ui")}),this.state={loading:!1,dataSource:[],count:0,isCheck:!1,yamlVal:"",initNodeCmd:"",activeKey:"1",helpError:"",helpType:"",forbiddenConfig:!0,countConfig:!0,countNum:15,countContent:null,clusters:null,isCheckSsh:!1,isCheckStatus:!1},this.clusters=[]}getCode(e){var t=this.state,a=t.dataSource,l=(t.isCheckSsh,this.props.dispatch),s=e;return delete s.id,new Promise((t,r)=>{l({type:"cloud/fetchCheckSshPwd",payload:{data:JSON.stringify(s)},callback:l=>{l&&200===l.response_data.code&&(e.status=l.response_data.data.status,e.codeNum=l.response_data.code,setTimeout(()=>{this.setState({dataSource:a,isCheckSsh:e.id})},10),t(e))},handleError:e=>{r(e)}})})}render(){var e=this.props,t=e.onCancel,a=e.form,l=e.clusterID,s=e.guideStep,f=e.handleNewbieGuiding,h=a.getFieldDecorator,p=a.setFieldsValue,C=this.state,y=C.helpType,M=C.helpError,b=C.loading,S=C.dataSource,_=(C.initNodeCmd,C.isCheck,C.activeKey),L=C.yamlVal,k=(C.forbiddenConfig,C.countContent,C.countConfig,C.clusters),N=C.isCheckSsh,j=C.isCheckStatus,D={labelCol:{xs:{span:3}},wrapperCol:{xs:{span:24}}},K={body:{row:U,cell:V}},O=[{title:(0,T.formatMessage)({id:"enterpriseColony.RainbondClusterInit.form.label.nodesForChaos"}),dataIndex:"node_name",width:120,editable:!0},{title:(0,T.formatMessage)({id:"enterpriseColony.addCluster.host.ip"}),dataIndex:"ip",width:120,editable:!0},{title:(0,T.formatMessage)({id:"enterpriseColony.addCluster.host.ssh_port"}),dataIndex:"port",width:80,editable:!0},{title:(0,T.formatMessage)({id:"enterpriseColony.addCluster.host.user"}),dataIndex:"user",width:120,editable:!0},{title:(0,T.formatMessage)({id:"enterpriseColony.addCluster.host.password"}),dataIndex:"password",width:120,editable:!0},{title:(0,T.formatMessage)({id:"enterpriseColony.addCluster.host.Node_type"}),dataIndex:"roles",width:80,editable:!0},{title:(0,T.formatMessage)({id:"enterpriseColony.addCluster.host.Detection_status"}),dataIndex:"msg",width:80,render:(e,t)=>{var a=t.code,l=t.status;return a?x.default.createElement("div",null,x.default.createElement("div",null,l?x.default.createElement("div",{style:{color:P.default.getPublicColor("success-color")}},"success"):x.default.createElement("div",{style:{color:P.default.getPublicColor("error-color")}},"error"))):x.default.createElement("div",null,j?x.default.createElement("div",null,(0,T.formatMessage)({id:"enterpriseColony.addCluster.host.checking"})," ",x.default.createElement(m.default,{spinning:j})):x.default.createElement("div",null,(0,T.formatMessage)({id:"enterpriseColony.addCluster.host.await_check"})))}},{title:(0,T.formatMessage)({id:"enterpriseColony.addCluster.host.operation"}),dataIndex:"name",width:80,align:"center",render:(e,t)=>{return S&&S.length>1?x.default.createElement(c.default,{title:x.default.createElement(T.FormattedMessage,{id:"enterpriseColony.addCluster.host.delete"}),onConfirm:()=>this.handleDelete(t.key)},x.default.createElement("a",null,x.default.createElement(T.FormattedMessage,{id:"button.delete"}))):"-"}}],z=O.map(e=>{return e.editable?(0,E.default)({},e,{onCell:t=>{return{record:t,helpType:y,helpError:M,index:t.key,editable:e.editable,dataIndex:e.dataIndex,title:e.title,dataSource:S,handleClustersMount:this.handleClustersMount,handleSave:this.handleSave}}}):e}),Q={position:"relative",zIndex:1e3,background:"#fff"};return x.default.createElement(r.default,{visible:!0,title:l?x.default.createElement(T.FormattedMessage,{id:"enterpriseColony.addCluster.host.Configure_cluster"}):x.default.createElement(T.FormattedMessage,{id:"enterpriseColony.addCluster.host.Host"}),className:A.default.TelescopicModal,width:1200,destroyOnClose:!0,footer:x.default.createElement(x.Fragment,null,x.default.createElement(u.default,{type:"primary",style:s&&6===s&&{position:"relative",zIndex:1e3}||{},disabled:j,onClick:()=>{this.handleCheckSsh()},loading:b},l?x.default.createElement(T.FormattedMessage,{id:"enterpriseColony.addCluster.host.updata"}):j?(0,T.formatMessage)({id:"enterpriseColony.addCluster.host.checking"}):x.default.createElement(T.FormattedMessage,{id:"enterpriseColony.addCluster.host.start_install"})),s&&6===s&&f&&k&&0===k.length&&x.default.createElement(x.Fragment,null,f({tit:(0,T.formatMessage)({id:"enterpriseColony.addCluster.host.start_install_six"}),send:!0,configName:"kclustersAttention",desc:(0,T.formatMessage)({id:"enterpriseColony.addCluster.host.Start_installation_now"}),nextStep:7,btnText:(0,T.formatMessage)({id:"button.install"}),conPosition:{right:"110px",bottom:0},svgPosition:{right:"50px",marginTop:"-11px"},handleClick:()=>{this.handleCheckSsh()}}))),confirmLoading:b,onCancel:t,maskClosable:!1},l&&x.default.createElement(i.default,{type:"warning",message:x.default.createElement(T.FormattedMessage,{id:"enterpriseColony.addCluster.host.suitable"})}),x.default.createElement(v.default,null,x.default.createElement(d.default,null,x.default.createElement(o.default,{span:24,style:{padding:"16px"}},x.default.createElement(F,{className:A.default.describe,style:s&&3===s&&Q||{}},x.default.createElement("ul",null,x.default.createElement("li",null,x.default.createElement("span",null,x.default.createElement(T.FormattedMessage,{id:"enterpriseColony.addCluster.host.provided_hosts"}))),x.default.createElement("li",null,x.default.createElement("span",null,x.default.createElement(T.FormattedMessage,{id:"enterpriseColony.addCluster.host.provided_host"}),!l&&x.default.createElement(T.FormattedMessage,{id:"enterpriseColony.addCluster.host.and_ip"}),x.default.createElement("b",null,x.default.createElement(T.FormattedMessage,{id:"enterpriseColony.addCluster.host.and_ssh"})),x.default.createElement(T.FormattedMessage,{id:"enterpriseColony.addCluster.host.and"}),x.default.createElement("b",null,x.default.createElement(T.FormattedMessage,{id:"enterpriseColony.addCluster.host.port"})),x.default.createElement(T.FormattedMessage,{id:"enterpriseColony.addCluster.host.visit"}))),x.default.createElement("li",null,x.default.createElement("span",null,x.default.createElement(T.FormattedMessage,{id:"enterpriseColony.addCluster.host.script"}),x.default.createElement("b",null,x.default.createElement(T.FormattedMessage,{id:"enterpriseColony.addCluster.host.System_check"})),"\u3001",x.default.createElement("b",null,x.default.createElement(T.FormattedMessage,{id:"enterpriseColony.addCluster.host.secret_free"})),"\u3001",x.default.createElement("b",null,x.default.createElement(T.FormattedMessage,{id:"enterpriseColony.addCluster.host.docker"})),x.default.createElement(T.FormattedMessage,{id:"enterpriseColony.addCluster.host.movements"}))),x.default.createElement("li",null,x.default.createElement("span",null,x.default.createElement(T.FormattedMessage,{id:"enterpriseColony.addCluster.host.already_installed"}),x.default.createElement("b",null," 1.19.x"))))),s&&3===s&&f&&k&&0===k.length&&x.default.createElement(x.Fragment,null,f({tit:(0,T.formatMessage)({id:"enterpriseColony.addCluster.host.matters_attention"}),send:!1,configName:"kclustersAttention",showSvg:!1,showArrow:!0,desc:(0,T.formatMessage)({id:"enterpriseColony.addCluster.host.explain"}),nextStep:4,conPosition:{left:"0px",bottom:"-100px"}})))),!l&&x.default.createElement(d.default,null,x.default.createElement(o.default,{span:12,style:{padding:s&&4===s?"":"0 16px"}},x.default.createElement(v.default.Item,{label:x.default.createElement(T.FormattedMessage,{id:"enterpriseColony.addCluster.host.name_Cluster"}),style:s&&4===s&&Object.assign({},{padding:"0 16px"},Q)||{}},h("name",{initialValue:"",rules:[{required:!0,message:(0,T.formatMessage)({id:"enterpriseColony.addCluster.host.required"})},{pattern:/^[a-z0-9A-Z-]+$/,message:(0,T.formatMessage)({id:"enterpriseColony.addCluster.host.supported"})},{max:24,message:(0,T.formatMessage)({id:"enterpriseColony.addCluster.host.max"})}]})(x.default.createElement(g.default,{placeholder:(0,T.formatMessage)({id:"enterpriseColony.addCluster.host.only"}),style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}))),s&&4===s&&f&&k&&0===k.length&&x.default.createElement(x.Fragment,null,f({tit:(0,T.formatMessage)({id:"enterpriseColony.addCluster.host.input_name"}),showSvg:!1,showArrow:!0,send:!1,configName:"kclustersAttention",desc:(0,T.formatMessage)({id:"enterpriseColony.addCluster.host.configuration_information"}),nextStep:5,conPosition:{marginTop:"-22px"}})))),x.default.createElement(w.default,{activeKey:_,onChange:e=>{this.handleTabs(e)}},x.default.createElement(R,{tab:x.default.createElement(T.FormattedMessage,{id:"enterpriseColony.addCluster.host.Visual_configuration"}),key:"1"},x.default.createElement("div",null,x.default.createElement(d.default,null,x.default.createElement(o.default,{span:24,style:{padding:"0 16px"}},x.default.createElement(v.default.Item,{label:x.default.createElement(T.FormattedMessage,{id:"enterpriseColony.addCluster.host.list"}),style:s&&5===s&&Object.assign({},{padding:"0 16px"},Q)||{}},h("nodeLists",{initialValue:""})(x.default.createElement(n.default,{dataSource:S,rowKey:(e,t)=>t,columns:z,components:K,bordered:!0,key:N,rowClassName:()=>"editable-row",pagination:!1}))),x.default.createElement(u.default,{onClick:this.handleAdd,style:{marginBottom:16}},x.default.createElement(T.FormattedMessage,{id:"enterpriseColony.addCluster.host.add_node"}))))))),s&&5===s&&f&&k&&0===k.length&&x.default.createElement(x.Fragment,null,f({tit:(0,T.formatMessage)({id:"enterpriseColony.addCluster.host.Fill_in_node"}),showSvg:!1,showArrow:!1,send:!0,btnText:"\u6211\u77e5\u9053\u4e86",configName:"kclustersAttention",desc:(0,T.formatMessage)({id:"enterpriseColony.addCluster.host.configuration_information"}),nextStep:6,conPosition:{top:"240px",left:"200px"}})),x.default.createElement("div",{style:{display:"1"===_?"none":"block"}},(l&&"2"===_||!l)&&x.default.createElement(I.default,{help:M,data:L||"",label:x.default.createElement(T.FormattedMessage,{id:"enterpriseColony.addCluster.host.RKE_cluste_configuration"}),bg:"151718",width:"1000px",marginTop:120,setFieldsValue:p,formItemLayout:D,Form:v.default,getFieldDecorator:h,beforeUpload:this.beforeUpload,mode:"yaml",name:"yamls",message:x.default.createElement(T.FormattedMessage,{id:"enterpriseColony.addCluster.host.input_rke"})}))))}},_=L))||_)||_);t.default=Y}).call(this,a("tjlA").Buffer)}}]);