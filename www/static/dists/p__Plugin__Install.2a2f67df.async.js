(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[60],{DU6M:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i=l(a("p0pE")),s=g(a("q1tI")),o=a("MuoO"),p=a("7DNP"),d=l(a("XZXw")),u=l(a("QDog")),c=l(a("yxQP")),h=(l(a("Gyju")),l(a("GMji")));function m(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(m=function(e){return e?a:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=m(t);if(a&&a.has(e))return a.get(e);var l={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=n?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(l,r,i):l[r]=e[r]}return l.default=e,a&&a.set(e,l),l}var f=(n=(0,o.connect)(),n(r=class extends s.PureComponent{constructor(){super(...arguments),this.handleSubmit=(e=>{this.props.dispatch({type:"plugin/createPlugin",payload:(0,i.default)({team_name:u.default.getCurrTeamName()},e),callback:e=>{this.props.dispatch(p.routerRedux.push("/team/".concat(u.default.getCurrTeamName(),"/region/").concat(u.default.getCurrRegionName(),"/myplugns/").concat(e&&e.bean.plugin_id)))}})})}render(){c.default.pageHeaderContent,c.default.extraImg;return s.default.createElement(d.default,{title:"\u5b89\u88c5\u63d2\u4ef6",isFooter:!0},s.default.createElement(h.default,{isAddMarket:!1}))}})||r);t.default=f},GMji:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("fOrg");var n=l(a("+KLJ"));a("2qtc");var r=l(a("kLXV"));a("7Kak");var i=l(a("9yH6"));a("+L6B");var s=l(a("2/Rp"));a("T2oS");var o=l(a("W9HT"));a("5NDa");var p=l(a("5rEg"));a("Mwp2");var d=l(a("VXEj")),u=l(a("jehZ"));a("IzEo");var c=l(a("bx4M"));a("5Dmo");var h=l(a("3S7+"));a("+BJd");var m=l(a("mr32"));a("/xke");var g=l(a("TeRw")),f=l(a("p0pE"));a("y8nQ");var y=l(a("Vl3Y"));a("Znn+");var v=l(a("ZTPi"));a("OaEy");var b,_,C,S=l(a("2fM7")),k=a("MuoO"),E=a("7DNP"),A=G(a("q1tI")),x=l(a("/VoG")),M=l(a("d5pB")),w=l(a("fXYz")),T=l(a("e6Ls")),P=l(a("xNuS")),O=l(a("hH+r")),L=l(a("iPMB")),N=l(a("EGgK")),I=l(a("bwcx")),j=a("34ay"),R=a("vSx2"),D=l(a("QDog")),z=l(a("hMqj")),B=l(a("ZgmS")),H=l(a("yxQP"));function V(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(V=function(e){return e?a:t})(e)}function G(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=V(t);if(a&&a.has(e))return a.get(e);var l={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=n?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(l,r,i):l[r]=e[r]}return l.default=e,a&&a.set(e,l),l}var q=S.default.Option,K=v.default.TabPane,W=(b=(0,k.connect)(e=>{var t=e.global,a=e.loading,l=e.teamControl,n=e.enterprise;return{loading:a,enterprise:t.enterprise,currentTeam:l.currentTeam,currentRegionName:l.currentRegionName,currentEnterprise:n.currentEnterprise,currentTeamPermissionsInfo:l.currentTeamPermissionsInfo}},null,null,{pure:!1}),_=y.default.create(),b(C=_(C=class extends A.PureComponent{constructor(e){super(e),this.onCancelCreate=(()=>{this.setState({showCreate:null,helmCreate:null,addAppLoading:!1})}),this.getCloudRecommendApps=(e=>{var t=this.state.currentKey,a=this.props.currentEnterprise;this.props.dispatch({type:"market/fetchMarkets",payload:{name:t,enterprise_id:a.enterprise_id,query:e?"":this.state.cloudApp_name||"",pageSize:e?9:this.state.cloudPageSize,page:e?1:this.state.cloudPage,is_plugin:!0},callback:e=>{e?this.setState({cloudList:e.list||[],cloudTotal:e.total},()=>{e._code&&210===e.status_code&&e._condition&&10503===e._condition?this.setState({isSpincloudList:-1,networkText:e.msg_show}):this.setState({isSpincloudList:!1})}):this.setState({isSpincloudList:!1})}})}),this.getApps=(e=>{var t=this.props,a=t.currentEnterprise,l=t.dispatch,n=this.state.scopeMax;if(n&&"localApplication"!==n)return null;l({type:"market/fetchAppModels",payload:{enterprise_id:a.enterprise_id,app_name:e?"":this.state.app_name||"",scope:e?"":this.state.scope,page_size:e?9:this.state.pageSize,page:e?1:this.state.page,need_install:!0,is_complete:1,is_plugin:!0},callback:e=>{e?this.setState({list:e.list||[],total:e.total},()=>{this.setState({isSpinList:!1})}):this.setState({isSpinList:!1})}})}),this.getMarketsTab=(()=>{var e=this.props,t=e.dispatch,a=e.currentEnterprise,l=this.state.scopeMax;t({type:"market/fetchMarketsTab",payload:{enterprise_id:a.enterprise_id},callback:e=>{var t=e&&e.list||[],a=[];t&&t.length>0&&t.map(e=>{var t=e.name,l=e.status,n=e.alias;1===l&&a.push(Object.assign({},e,{tab:n||t,key:t}))}),this.setState({rainStoreTab:a}),l&&"localApplication"!==l&&this.handleTabMaxChange(l)}})}),this.getHelmMarketsTab=(()=>{var e=this.props,t=e.dispatch,a=e.currentEnterprise,l=e.isHelm,n=void 0===l||l;n&&t({type:"market/fetchHelmMarketsTab",payload:{enterprise_id:a.enterprise_id},callback:e=>{if(e&&200===e.status_code){var t=[];Array.isArray(e)&&e.map(e=>{t.push(Object.assign({},e,{tab:e.name,key:"Helm-".concat(e.name)}))}),this.setState({helmStoreTab:t})}}})}),this.getHelmAppStore=(e=>{var t=this.props,a=t.dispatch,l=t.currentEnterprise,n=this.state.helmPag,r=Object.assign({},{name:e,enterprise_id:l.enterprise_id},n);a({type:"market/fetchHelmAppStore",payload:r,callback:e=>{if(e&&200===e.status_code){var t=Object.assign({},n,{total:e&&e.length||0}),a=[];if(Array.isArray(e)){var l=n.query,r=n.page;if(l){var i=[],s=l.length;e.map(e=>{if(s<=e.name.length){var t=e.name.substring(0,s);t.indexOf(l)>-1&&i.push(e)}}),t.total=i.length,a=i.length>9?i.splice(9*(r-1),9):i}else a=e.splice(r>1?9*(r-1):0,9)}this.setState({helmLoading:!1,helmList:a,helmPag:t})}}})}),this.handleSearch=(e=>{var t=this.state.scopeMax;if("localApplication"===t)this.setState({app_name:e,page:1},()=>{this.getApps()});else if(t.indexOf("Helm-")>-1){var a=this.state.helmPag,l=Object.assign({},a,{page:1,query:e});this.setState({helmPag:l},()=>{this.getHelmAppStore(t.slice(5))})}else this.setState({cloudApp_name:e,cloudPage:1},()=>{this.getCloudRecommendApps()})}),this.hanldePageChange=(e=>{this.setState({page:e},()=>{this.getApps()})}),this.hanldeCloudPageChange=(e=>{this.setState({cloudPage:e},()=>{this.getCloudRecommendApps()})}),this.hanldeHelmPageChange=(e=>{var t=this.state,a=t.helmPag,l=t.scopeMax,n=Object.assign({},a,{page:e});this.setState({helmPag:n},()=>{this.getHelmAppStore(l.slice(5))})}),this.handleTabChange=(e=>{this.setState({scope:e,page:1},()=>{this.getApps()})}),this.handleTabMaxChange=(e=>{this.setState({page:1,cloudPage:1,currentKey:e,scopeMax:e,isSpinList:!0,isSpincloudList:!0,app_name:"",cloudApp_name:""},()=>{"localApplication"===e?this.getApps("reset"):e.indexOf("Helm-")>-1?this.getHelmAppStore(e.slice(5)):this.getCloudRecommendApps("reset")})}),this.showCreate=(e=>{var t=this.state.handleType;t?this.setState({installBounced:e}):this.setState({showCreate:e})}),this.handleHelmIntall=(e=>{var t=this.state,a=t.scopeMax,l=t.helmStoreTab,n={};l.map(e=>{e.key===a&&(n=e)}),this.setState({helmCreate:Object.assign({},e,n,{app_store_name:a.slice(5)})})}),this.handleInstallBounced=(e=>{e.preventDefault();var t=this.props,a=t.form,l=t.dispatch,n=t.groupId,r=t.refreshCurrent,i=this.state,s=i.installBounced,o=i.is_deploy,p=i.scopeMax,d=i.handleType,u=i.currentKey,c=D.default.getCurrTeamName(),h=D.default.getCurrRegionName();a.validateFields((e,t)=>{e||l({type:"createApp/installAppPlugin",payload:{team_name:c,region_name:h,group_id:n||0,app_id:s.app_id,is_deploy:o,group_key:s.ID,app_version:t.group_version,marketName:u,install_from_cloud:"localApplication"!==p},callback:()=>{l({type:"global/fetchGroups",payload:{team_name:c}}),this.setState({installBounced:!1,is_deploy:!0}),d&&r&&r(),l(E.routerRedux.push("/team/".concat(c,"/region/").concat(D.default.getCurrRegionName(),"/myplugns")))}})})}),this.onChangeSelect=((e,t)=>{var a=this.props.dispatch,l=this.state,n=l.showCreate,r=l.currentKey,i=(l.btnStatus,D.default.getCurrTeamName()),s=D.default.getCurrRegionName();a({type:"createApp/changeAppVersions",payload:(0,f.default)({team_name:i,region_name:s},e,{app_id:n.app_id,is_deploy:t,group_key:n.group_key,app_version:e.group_version,marketName:r}),callback:e=>{this.setState({btnStatus:e.bean.status})}})}),this.onChangeSelectCloud=((e,t)=>{var a=this.props.dispatch,l=this.state,n=l.showCreate,r=l.currentKey,i=(l.btnStatus,l.scopeMax),s=D.default.getCurrTeamName(),o=D.default.getCurrRegionName();a({type:"createApp/changeAppVersions",payload:(0,f.default)({team_name:s,region_name:o},e,{app_id:n.app_id,is_deploy:t,group_key:n.group_key,app_version:e.group_version,marketName:r,install_from_cloud:"localApplication"!==i}),callback:e=>{this.setState({btnStatus:e.bean.status})}})}),this.handleCreate=((e,t)=>{this.setState({addAppLoading:!0});var a=this.props.dispatch,l=this.state,n=l.showCreate,r=l.currentKey,i=D.default.getCurrTeamName(),s=D.default.getCurrRegionName();a({type:"createApp/installAppPlugin",payload:(0,f.default)({team_name:i,region_name:s},e,{app_id:n.app_id,is_deploy:t,group_key:n.group_key,app_version:e.group_version,marketName:r}),callback:()=>{a({type:"global/fetchGroups",payload:{team_name:i},callback:()=>{this.onCancelCreate(),a(E.routerRedux.push("/team/".concat(i,"/region/").concat(D.default.getCurrRegionName(),"/myplugns")))}})}})}),this.handleCreateHelm=((e,t)=>{var a=this.props.dispatch,l=D.default.getCurrTeamName();this.setState({helmInstallLoading:!0}),a({type:"createApp/installHelmApp",payload:(0,f.default)({team_name:l},e,{is_deploy:t}),callback:e=>{a({type:"global/fetchGroups",payload:{team_name:l},callback:()=>{e&&200===e.status_code&&e.bean&&e.bean.ID&&(this.onCancelCreate(),a(E.routerRedux.push("/team/".concat(l,"/region/").concat(D.default.getCurrRegionName(),"/apps/").concat(e.bean.ID)))),this.setState({helmInstallLoading:!1})},renderError:()=>{this.setState({helmInstallLoading:!1})}})}})}),this.handleCloudCreate=((e,t)=>{this.setState({addAppLoading:!0});var a=this.state,l=a.scopeMax,n=a.currentKey,r=(this.props.groupId,this.state.showCreate),i=D.default.getCurrTeamName(),s=D.default.getCurrRegionName();this.props.dispatch({type:"createApp/installAppPlugin",payload:(0,f.default)({app_id:r.app_id,team_name:i,region_name:s},e,{is_deploy:t,app_versions:r.app_versions,group_key:r.app_key_id,app_version:e.group_version,install_from_cloud:"localApplication"!==l,marketName:n}),callback:e=>{this.props.dispatch({type:"global/fetchGroups",payload:{team_name:D.default.getCurrTeamName()},callback:()=>{g.default.success({message:"\u5b89\u88c5\u6210\u529f"}),this.onCancelCreate(),this.setState({is_deploy:!0}),this.props.dispatch(E.routerRedux.push("/team/".concat(i,"/region/").concat(D.default.getCurrRegionName(),"/myplugns")))}})}})}),this.handleVisibleChange=((e,t)=>{var a=this.state.visiblebox,l=e.ID;a[l]=t,this.setState({visiblebox:a}),this.queryExport(e)}),this.showMarketAppDetail=(e=>{e&&e.app_detail_url?window.open(e.app_detail_url,"_blank"):this.setState({showApp:e,showMarketAppDetail:!0})}),this.hideMarketAppDetail=(()=>{this.setState({showApp:{},showMarketAppDetail:!1})}),this.loadMore=(()=>{var e=this.state.scopeMax;this.props.handleServiceComponent(e)}),this.handleTabs=((e,t)=>{var a=this.state.handleType;return A.default.createElement(v.default,{defaultActiveKey:"",onChange:this.handleTabChange,style:{background:"#fff",padding:a?"0 20px 20px":"20px "}},e.map(e=>{var a=e.key,l=e.tab;return A.default.createElement(K,{tab:l,key:a},A.default.createElement("div",{className:H.default.cardList,style:{paddingBottom:"20px"}},t))}))}),this.renderApp=((e,t,l)=>{var n=this.state,r=n.scopeMax,i=n.handleType,s="localApplication"!=r,o=e=>A.default.createElement("div",{title:e.app_name||e.name||"",style:{maxWidth:"200px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}},A.default.createElement("a",{onClick:()=>{this.showMarketAppDetail(e)}},e.app_name||e.name)),p=A.default.createElement("div",{title:e.version,className:H.default.cardVersionStyle},A.default.createElement("span",null,"\u7248\u672c:"),A.default.createElement("div",{className:H.default.overScroll},A.default.createElement("div",null,e.versions_info&&e.versions_info.map((e,t)=>{return A.default.createElement(m.default,{title:e.version,className:H.default.cardVersionTagStyle,color:"green",size:"small",key:t},e.version)}),e.versions&&e.versions.map((e,t)=>{return A.default.createElement(m.default,{className:H.default.cardVersionTagStyle,color:"green",size:"small",title:e.app_version||e.version,key:t},e.app_version||e.version)})))),d=[A.default.createElement(h.default,{title:t?"\u70b9\u51fb\u5b89\u88c5":"\u4e0d\u53ef\u5b89\u88c5"},A.default.createElement("div",{onClick:()=>{t&&this.showCreate(e)}},A.default.createElement("div",{className:H.default.cardTitle},A.default.createElement("span",{title:e.app_name},e.app_name)),p))],u=t?[A.default.createElement("span",{onClick:()=>{"helm"===l?this.handleHelmIntall(e):this.showCreate(e)}},"\u5b89\u88c5")]:[],g=a("Vkwn");return A.default.createElement(A.Fragment,null,(1==e.is_official||1==e.is_official)&&A.default.createElement(O.default,{style:{marginLeft:6,marginTop:6}}),A.default.createElement(c.default,{className:i?"".concat(H.default.cards," ").concat(H.default.clearAvatar):H.default.cards,actions:i?d:u},A.default.createElement(c.default.Meta,{className:H.default.cardsMetas,style:i&&{height:80,overflow:"hidden",display:"flex",justifyContent:"center",cursor:"pointer"},avatar:A.default.createElement("img",{style:i?{width:80,height:80,margin:" 0 auto"}:{width:110,height:110,margin:" 0 auto"},alt:e.title,src:s?e.logo||e.icon||g:e.pic||g,height:i?154:80,onClick:()=>{this.showMarketAppDetail(e)}}),title:i?"":o(e),description:i?"":A.default.createElement(A.Fragment,null,A.default.createElement("span",{style:{display:"block",color:"rgb(200, 200, 200)",marginBottom:2,fontSize:12}},p,!s&&A.default.createElement("div",{className:H.default.memoryStyle},A.default.createElement("span",null,"\u5185\u5b58: "),B.default.unit(e.min_memory||128,"MB"))),A.default.createElement(P.default,{className:H.default.item,lines:3},A.default.createElement("span",{title:e.describe||e.description},e.describe||e.description)))})))}),this.renderSuccessOnChange=(()=>{this.setState({is_deploy:!this.state.is_deploy})}),this.renderFormComponent=(()=>{var e={labelCol:{span:5},wrapperCol:{span:19}},t=this.props.form,a=t.getFieldDecorator,l=this.state.installBounced,n=l.versions_info||l.versions;return A.default.createElement(y.default,{onSubmit:this.handleInstallBounced,layout:"horizontal",hideRequiredMark:!0},A.default.createElement(y.default.Item,(0,u.default)({},e,{label:"\u9009\u62e9\u7248\u672c"}),a("group_version",{initialValue:n[0].version||n[0].app_version,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7248\u672c"}]})(A.default.createElement(S.default,{getPopupContainer:e=>e.parentNode,style:{width:"220px"}},n.map(e=>{return A.default.createElement(q,{key:e.version,value:e.version||e.app_version},e.version||e.app_version)})))))}),this.handleCertification=(e=>{this.setState({authorizations:e})});var t=this.props,l=t.handleType,n=void 0===l?"":l,r=t.match,i=t.scope,s=void 0===i?"":i,o=t.moreState,p=t.scopeMax,d=decodeURIComponent("Service"===n?"":r&&r.params&&r.params.keyword||"");this.state={helmInstallLoading:!1,list:[],authorizations:!1,app_name:d,page:1,pageSize:9,total:0,isSpinList:!0,isSpincloudList:!0,networkText:"",cloudList:[],cloudApp_name:"",cloudPage:1,cloudPageSize:9,cloudTotal:0,helmCreate:null,showCreate:null,scope:s,scopeMax:p||"localApplication",showApp:{},showMarketAppDetail:!1,installBounced:!1,handleType:n||null,moreState:o||null,is_deploy:!0,btnStatus:"",localAppTab:[{key:"localApplication",tab:"\u672c\u5730\u7ec4\u4ef6\u5e93"}],rainStoreTab:[],helmStoreTab:[],currentKey:"",helmList:[],helmLoading:!0,helmPag:{pageSize:9,total:0,page:1,query:""},addAppLoading:!1},this.mount=!1}componentWillMount(){var e=this.props,t=e.currentTeamPermissionsInfo,a=e.dispatch;z.default.canCreateComponent(t,a)}componentDidMount(){this.mount=!0,this.getApps(),this.getMarketsTab(),this.getHelmMarketsTab()}componentWillUnmount(){this.mount=!1,this.mountquery=!1}render(){var e=this.props,t=e.loading,a=e.currentEnterprise,l=e.currentTeam,u=e.currentRegionName,c=e.isHelm,h=void 0===c||c,m=e.isAddMarket,g=this.state,f=g.handleType,y=g.moreState,v=g.installBounced,b=g.list,_=g.scopeMax,C=g.cloudList,S=g.cloudPage,k=g.cloudPageSize,E=g.cloudTotal,P=g.isSpinList,O=g.isSpincloudList,z=g.networkText,B=g.page,V=g.pageSize,G=g.total,q=g.helmInstallLoading,K=g.currentKey,W=g.authorizations,F=g.showCreate,Q=g.showMarketAppDetail,X=g.showApp,Z=g.is_deploy,J=g.app_name,U=g.cloudApp_name,Y=g.helmList,$=g.helmPag,ee=g.helmLoading,te=g.helmCreate,ae=g.addAppLoading,le=g.localAppTab,ne=g.rainStoreTab,re=g.helmStoreTab,ie=g.btnStatus,se=(D.default.fetchSvg("dockerSvg"),!!y),oe={current:y?1:B,pageSize:y?3:V,total:y?1:G,hideOnSinglePage:se,onChange:e=>{this.hanldePageChange(e)}},pe={current:y?1:S,pageSize:y?3:k,total:y?1:E,hideOnSinglePage:se,onChange:e=>{this.hanldeCloudPageChange(e)}},de={current:y?1:$.page,pageSize:y?3:$.pageSize,total:y?1:$.total,hideOnSinglePage:se,onChange:e=>{this.hanldeHelmPageChange(e)}},ue=!0,ce=[...le,...ne,...re];if(ce&&ce.length>0){var he=ce.filter(e=>{return e.name===K});he&&he.length>0&&(ue=(0,j.fetchMarketAuthority)(he[0],"ReadInstall"))}var me=f&&y&&("localApplication"===_&&b&&b.length>0||"localApplication"!=_&&C&&C.length>0)&&A.default.createElement("div",{style:{textAlign:"right",height:"70px",marginTop:"-40px",position:"relative",zIndex:99}},A.default.createElement("a",{onClick:this.loadMore},"\u67e5\u770b\u66f4\u591a...")),ge=A.default.createElement(d.default,{bordered:!1,grid:{gutter:24,lg:3,md:2,sm:1,xs:1},locale:{emptyText:!P&&b&&b.length<=0&&A.default.createElement("p",{style:{paddingTop:80,lineHeight:1.3}},"\u6682\u65e0\u5e94\u7528\u6a21\u578b\uff0c \u4f60\u53ef\u4ee5",A.default.createElement("br",null),A.default.createElement("br",null),"\u53d1\u5e03\u5e94\u7528\u6a21\u578b")},pagination:oe,dataSource:b,renderItem:e=>A.default.createElement(d.default.Item,{style:{border:"none"}},this.renderApp(e,!0))}),fe=A.default.createElement(d.default,{bordered:!1,grid:{gutter:24,lg:3,md:2,sm:1,xs:1},pagination:pe,dataSource:C,renderItem:e=>A.default.createElement(d.default.Item,{style:{border:"none"}},this.renderApp(e,ue))}),ye=A.default.createElement(d.default,{bordered:!1,grid:{gutter:24,lg:3,md:2,sm:1,xs:1},pagination:de,dataSource:Y,renderItem:e=>{var t=e;return e.versions&&e.versions.length>0&&(t=Object.assign({},e,e.versions[0])),A.default.createElement(d.default.Item,{style:{border:"none"}},this.renderApp(t,!0,"helm"))}}),ve="localApplication"==_?J:U,be=A.default.createElement("div",{style:{textAlign:"center"}},A.default.createElement("span",{id:"searchWrap",style:{display:"inline-block"}},A.default.createElement(p.default.Search,{ref:"searchs",placeholder:"\u8bf7\u8f93\u5165\u5e94\u7528\u540d\u79f0",enterButton:"\u641c\u7d22",size:"large",value:ve,onChange:e=>{this.setState({app_name:e.target.value,cloudApp_name:e.target.value})},defaultValue:ve,onSearch:this.handleSearch,style:{width:500}}))),_e=[{key:"",tab:"\u5168\u90e8"}],Ce=[{key:"enterprise",tab:"\u516c\u53f8\u53d1\u5e03"},{key:"team",tab:"\u56e2\u961f\u53d1\u5e03"}],Se=_e.concat(Ce),ke=[];ke=(0,R.createTeam)((0,R.createEnterprise)(ke,a),l,u),ke.push({title:"\u521b\u5efa\u7ec4\u4ef6"});var Ee=A.default.createElement("div",{style:{height:"255px",lineHeight:"255px",textAlign:"center"}},A.default.createElement(o.default,{size:"large"}));return A.default.createElement("div",null,W&&A.default.createElement(x.default,{eid:a.enterprise_id,marketName:W,title:"\u83b7\u53d6\u4e91\u5e94\u7528\u5546\u5e97\u6388\u6743",onCancel:()=>{this.setState({authorizations:!1})},currStep:2}),te&&A.default.createElement(M.default,{installLoading:q,data:te,onSubmit:this.handleCreateHelm,onCancel:this.onCancelCreate}),F&&A.default.createElement(w.default,{disabled:t.effects["createApp/installAppPlugin"],onChangeSelect:f?this.onChangeSelect:"localApplication"==_?this.onChangeSelect:this.onChangeSelectCloud,btnStatus:ie,onSubmit:f?this.handleCreate:"localApplication"==_?this.handleCreate:this.handleCloudCreate,onCancel:this.onCancelCreate,showCreate:F,addAppLoading:ae}),Q&&A.default.createElement(L.default,{onOk:this.hideMarketAppDetail,onCancel:this.hideMarketAppDetail,app:X}),f&&v&&A.default.createElement(r.default,{title:"\u786e\u8ba4\u8981\u5b89\u88c5\u6b64\u5e94\u7528\u4f5c\u4e3a\u4f60\u7684\u7ec4\u4ef6\u4e48\uff1f",className:T.default.TelescopicModal,visible:v,onOk:this.handleInstallBounced,onCancel:()=>{this.setState({installBounced:!1})},footer:A.default.createElement("div",null,A.default.createElement(s.default,{onClick:()=>{this.setState({installBounced:!1,is_deploy:!0})}},"\u53d6\u6d88"),A.default.createElement(s.default,{onClick:this.handleInstallBounced,type:"primary",style:{marginRight:"5px"},loading:t.effects["createApp/installAppPlugin"]},"\u5b89\u88c5"),A.default.createElement(i.default,{size:"small",onClick:this.renderSuccessOnChange,checked:Z},"\u5e76\u6784\u5efa\u542f\u52a8"))},v.describe&&A.default.createElement("p",{style:{background:"rgba(22, 184, 248, 0.1)",padding:"8px"}},v.describe),this.renderFormComponent()),ce&&ce.length>0&&m?A.default.createElement("div",null,A.default.createElement(N.default,{isAddMarket:this.props.isAddMarket,isSvg:!0,breadcrumbList:ke,content:f&&y?"":be,tabList:ce,tabActiveKey:_,onTabChange:this.handleTabMaxChange,isFooter:!!f},"localApplication"!==_&&!ue&&A.default.createElement(n.default,{message:A.default.createElement("div",null,"\u5f53\u524d\u5e02\u573a\u6ca1\u6709\u5b89\u88c5\u6743\u9650\uff0c",A.default.createElement("a",{onClick:()=>{this.handleCertification(_)}},"\u53bb\u6388\u6743")),type:"success",style:{margin:"-10px 0 15px 0"}}),_.indexOf("Helm-")>-1&&h?A.default.createElement("div",null,ee?Ee:ye):"localApplication"===_?A.default.createElement("div",{style:{marginBottom:!y&&f&&"Service"===f&&"40px"}},P?Ee:this.handleTabs(Se,ge)):A.default.createElement("div",null,O&&-1!==O?Ee:A.default.createElement("div",null,A.default.createElement("div",{className:H.default.cardList,style:{paddingBottom:"20px",marginBottom:y?"0px":"40px"}},-1!==O&&fe,z&&A.default.createElement(n.default,{style:{textAlign:"center",marginBottom:16},message:z,type:"warning"})))),me)):A.default.createElement("div",null,A.default.createElement(I.default,{isAddMarket:this.props.isAddMarket,isSvg:!0,breadcrumbList:ke,content:f&&y?"":be,tabList:ce,tabActiveKey:_,onTabChange:this.handleTabMaxChange,isFooter:!!f},"localApplication"!==_&&!ue&&A.default.createElement(n.default,{message:A.default.createElement("div",null,"\u5f53\u524d\u5e02\u573a\u6ca1\u6709\u5b89\u88c5\u6743\u9650\uff0c",A.default.createElement("a",{onClick:()=>{this.handleCertification(_)}},"\u53bb\u6388\u6743")),type:"success",style:{margin:"-10px 0 15px 0"}}),_.indexOf("Helm-")>-1&&h?A.default.createElement("div",null,ee?Ee:ye):"localApplication"===_?A.default.createElement("div",{style:{marginBottom:!y&&f&&"Service"===f&&"40px"}},P?Ee:this.handleTabs(Se,ge)):A.default.createElement("div",null,O&&-1!==O?Ee:A.default.createElement("div",null,A.default.createElement("div",{className:H.default.cardList,style:{paddingBottom:"20px",marginBottom:y?"0px":"40px"}},-1!==O&&fe,z&&A.default.createElement(n.default,{style:{textAlign:"center",marginBottom:16},message:z,type:"warning"})))),me)))}})||C)||C);t.default=W},fXYz:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var n=l(a("kLXV")),r=l(a("jehZ"));a("+L6B");var i=l(a("2/Rp"));a("y8nQ");var s=l(a("Vl3Y"));a("OaEy");var o,p,d,u=l(a("2fM7")),c=a("MuoO"),h=y(a("q1tI")),m=(l(a("qCJ4")),l(a("QDog"))),g=l(a("e6Ls"));function f(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(f=function(e){return e?a:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=f(t);if(a&&a.has(e))return a.get(e);var l={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=n?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(l,r,i):l[r]=e[r]}return l.default=e,a&&a.set(e,l),l}var v=u.default.Option,b={labelCol:{span:5},wrapperCol:{span:19}},_=(o=(0,c.connect)(e=>{var t=e.global;return{groups:t.groups}},null,null,{withRef:!0}),p=s.default.create(),o(d=p(d=class extends h.PureComponent{constructor(e){super(e),this.onAddGroup=(()=>{this.setState({addGroup:!0})}),this.cancelAddGroup=(()=>{this.setState({addGroup:!1})}),this.handleAddGroup=(e=>{var t=this.props.form.setFieldsValue;t({group_id:e}),this.cancelAddGroup()}),this.handleChangeVersion=(e=>{var t=this.state.is_deploy,a=this.props,l=a.onChangeSelect,n=a.showCreate;if(e){var r={group_version:e};l(r,t)}else{var i={group_version:n.versions_info?n.versions_info[0].version:n.versions[0].app_version};l(i,t)}}),this.fetchGroup=(()=>{this.props.dispatch({type:"global/fetchGroups",payload:{team_name:m.default.getCurrTeamName()}})}),this.handleSubmit=(e=>{e.preventDefault();var t=this.state.is_deploy,a=this.props,l=a.form,n=a.onSubmit;l.validateFields((e,a)=>{!e&&n&&(n(a,t),this.setState({is_deploy:!0}))})}),this.renderSuccessOnChange=(()=>{this.setState({is_deploy:!this.state.is_deploy})}),this.state={addGroup:!1,is_deploy:!0}}componentDidMount(){this.handleChangeVersion()}render(){var e=this.props.form.getFieldDecorator,t=this.props,a=(t.groups,t.onCancel),l=t.showCreate,o=t.addAppLoading,p=t.disabled,d=t.btnStatus,c=(this.props.data,l&&l.versions_info&&l.versions_info.length>0&&l.versions_info),m=l&&l.versions&&l.versions.length>0&&l.versions;return h.default.createElement(n.default,{className:g.default.TelescopicModal,visible:l,onCancel:a,onOk:this.handleSubmit,title:"\u8981\u5b89\u88c5\u5230\u54ea\u4e2a\u5e94\u7528?",footer:[h.default.createElement("div",{style:{display:"flex",marginLeft:"120px"}},h.default.createElement(i.default,{onClick:a},"\u53d6\u6d88"),h.default.createElement("div",null,d&&"Installable"==d?h.default.createElement(i.default,{onClick:this.handleSubmit,type:"primary",style:{marginRight:"5px"},loading:o||p},"\u5b89\u88c5"):"AlreadyInstalled"==d?h.default.createElement(i.default,{type:"primary",style:{marginRight:"5px"},disabled:!0},"\u5df2\u5b89\u88c5"):"Upgradeable"==d?h.default.createElement(i.default,{onClick:this.handleSubmit,type:"primary",style:{marginRight:"5px"},loading:o||p},"\u5347\u7ea7"):h.default.createElement(i.default,{onClick:this.handleSubmit,type:"primary",style:{marginRight:"5px"},loading:o||p},"\u5b89\u88c5")))]},h.default.createElement(s.default,{onSubmit:this.handleOk,layout:"horizontal",hideRequiredMark:!0},h.default.createElement(s.default.Item,(0,r.default)({},b,{label:"\u5b89\u88c5\u7248\u672c"}),e("group_version",{initialValue:c?c[0].version:m?m[0].app_version:"",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7248\u672c"}]})(h.default.createElement(u.default,{getPopupContainer:e=>e.parentNode,onChange:this.handleChangeVersion,style:{width:"220px"}},c?c.map((e,t)=>{return h.default.createElement(v,{key:t,value:e.version},e.version)}):m&&m.map((e,t)=>{return h.default.createElement(v,{key:t,value:e.app_version},e.app_version)}))))))}})||d)||d);t.default=_}}]);